(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))o(d);new MutationObserver(d=>{for(const h of d)if(h.type==="childList")for(const f of h.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&o(f)}).observe(document,{childList:!0,subtree:!0});function n(d){const h={};return d.integrity&&(h.integrity=d.integrity),d.referrerPolicy&&(h.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?h.credentials="include":d.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function o(d){if(d.ep)return;d.ep=!0;const h=n(d);fetch(d.href,h)}})();function hp(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var iu={exports:{}},di={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tm;function Yg(){if(Tm)return di;Tm=1;var l=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function n(o,d,h){var f=null;if(h!==void 0&&(f=""+h),d.key!==void 0&&(f=""+d.key),"key"in d){h={};for(var g in d)g!=="key"&&(h[g]=d[g])}else h=d;return d=h.ref,{$$typeof:l,type:o,key:f,ref:d!==void 0?d:null,props:h}}return di.Fragment=a,di.jsx=n,di.jsxs=n,di}var km;function Kg(){return km||(km=1,iu.exports=Yg()),iu.exports}var r=Kg(),lu={exports:{}},Ie={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Am;function Vg(){if(Am)return Ie;Am=1;var l=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),f=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),_=Symbol.iterator;function j(k){return k===null||typeof k!="object"?null:(k=_&&k[_]||k["@@iterator"],typeof k=="function"?k:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,z={};function D(k,X,me){this.props=k,this.context=X,this.refs=z,this.updater=me||A}D.prototype.isReactComponent={},D.prototype.setState=function(k,X){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,X,"setState")},D.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function R(){}R.prototype=D.prototype;function S(k,X,me){this.props=k,this.context=X,this.refs=z,this.updater=me||A}var Q=S.prototype=new R;Q.constructor=S,C(Q,D.prototype),Q.isPureReactComponent=!0;var H=Array.isArray;function G(){}var Z={H:null,A:null,T:null,S:null},fe=Object.prototype.hasOwnProperty;function we(k,X,me){var be=me.ref;return{$$typeof:l,type:k,key:X,ref:be!==void 0?be:null,props:me}}function ze(k,X){return we(k.type,X,k.props)}function qe(k){return typeof k=="object"&&k!==null&&k.$$typeof===l}function Ue(k){var X={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(me){return X[me]})}var Ve=/\/+/g;function Se(k,X){return typeof k=="object"&&k!==null&&k.key!=null?Ue(""+k.key):X.toString(36)}function ye(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(G,G):(k.status="pending",k.then(function(X){k.status==="pending"&&(k.status="fulfilled",k.value=X)},function(X){k.status==="pending"&&(k.status="rejected",k.reason=X)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function N(k,X,me,be,_e){var Le=typeof k;(Le==="undefined"||Le==="boolean")&&(k=null);var Je=!1;if(k===null)Je=!0;else switch(Le){case"bigint":case"string":case"number":Je=!0;break;case"object":switch(k.$$typeof){case l:case a:Je=!0;break;case v:return Je=k._init,N(Je(k._payload),X,me,be,_e)}}if(Je)return _e=_e(k),Je=be===""?"."+Se(k,0):be,H(_e)?(me="",Je!=null&&(me=Je.replace(Ve,"$&/")+"/"),N(_e,X,me,"",function($e){return $e})):_e!=null&&(qe(_e)&&(_e=ze(_e,me+(_e.key==null||k&&k.key===_e.key?"":(""+_e.key).replace(Ve,"$&/")+"/")+Je)),X.push(_e)),1;Je=0;var Rt=be===""?".":be+":";if(H(k))for(var ft=0;ft<k.length;ft++)be=k[ft],Le=Rt+Se(be,ft),Je+=N(be,X,me,Le,_e);else if(ft=j(k),typeof ft=="function")for(k=ft.call(k),ft=0;!(be=k.next()).done;)be=be.value,Le=Rt+Se(be,ft++),Je+=N(be,X,me,Le,_e);else if(Le==="object"){if(typeof k.then=="function")return N(ye(k),X,me,be,_e);throw X=String(k),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return Je}function J(k,X,me){if(k==null)return k;var be=[],_e=0;return N(k,be,"","",function(Le){return X.call(me,Le,_e++)}),be}function ie(k){if(k._status===-1){var X=k._result;X=X(),X.then(function(me){(k._status===0||k._status===-1)&&(k._status=1,k._result=me)},function(me){(k._status===0||k._status===-1)&&(k._status=2,k._result=me)}),k._status===-1&&(k._status=0,k._result=X)}if(k._status===1)return k._result.default;throw k._result}var ge=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)},Te={map:J,forEach:function(k,X,me){J(k,function(){X.apply(this,arguments)},me)},count:function(k){var X=0;return J(k,function(){X++}),X},toArray:function(k){return J(k,function(X){return X})||[]},only:function(k){if(!qe(k))throw Error("React.Children.only expected to receive a single React element child.");return k}};return Ie.Activity=x,Ie.Children=Te,Ie.Component=D,Ie.Fragment=n,Ie.Profiler=d,Ie.PureComponent=S,Ie.StrictMode=o,Ie.Suspense=b,Ie.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Z,Ie.__COMPILER_RUNTIME={__proto__:null,c:function(k){return Z.H.useMemoCache(k)}},Ie.cache=function(k){return function(){return k.apply(null,arguments)}},Ie.cacheSignal=function(){return null},Ie.cloneElement=function(k,X,me){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var be=C({},k.props),_e=k.key;if(X!=null)for(Le in X.key!==void 0&&(_e=""+X.key),X)!fe.call(X,Le)||Le==="key"||Le==="__self"||Le==="__source"||Le==="ref"&&X.ref===void 0||(be[Le]=X[Le]);var Le=arguments.length-2;if(Le===1)be.children=me;else if(1<Le){for(var Je=Array(Le),Rt=0;Rt<Le;Rt++)Je[Rt]=arguments[Rt+2];be.children=Je}return we(k.type,_e,be)},Ie.createContext=function(k){return k={$$typeof:f,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:h,_context:k},k},Ie.createElement=function(k,X,me){var be,_e={},Le=null;if(X!=null)for(be in X.key!==void 0&&(Le=""+X.key),X)fe.call(X,be)&&be!=="key"&&be!=="__self"&&be!=="__source"&&(_e[be]=X[be]);var Je=arguments.length-2;if(Je===1)_e.children=me;else if(1<Je){for(var Rt=Array(Je),ft=0;ft<Je;ft++)Rt[ft]=arguments[ft+2];_e.children=Rt}if(k&&k.defaultProps)for(be in Je=k.defaultProps,Je)_e[be]===void 0&&(_e[be]=Je[be]);return we(k,Le,_e)},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(k){return{$$typeof:g,render:k}},Ie.isValidElement=qe,Ie.lazy=function(k){return{$$typeof:v,_payload:{_status:-1,_result:k},_init:ie}},Ie.memo=function(k,X){return{$$typeof:p,type:k,compare:X===void 0?null:X}},Ie.startTransition=function(k){var X=Z.T,me={};Z.T=me;try{var be=k(),_e=Z.S;_e!==null&&_e(me,be),typeof be=="object"&&be!==null&&typeof be.then=="function"&&be.then(G,ge)}catch(Le){ge(Le)}finally{X!==null&&me.types!==null&&(X.types=me.types),Z.T=X}},Ie.unstable_useCacheRefresh=function(){return Z.H.useCacheRefresh()},Ie.use=function(k){return Z.H.use(k)},Ie.useActionState=function(k,X,me){return Z.H.useActionState(k,X,me)},Ie.useCallback=function(k,X){return Z.H.useCallback(k,X)},Ie.useContext=function(k){return Z.H.useContext(k)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(k,X){return Z.H.useDeferredValue(k,X)},Ie.useEffect=function(k,X){return Z.H.useEffect(k,X)},Ie.useEffectEvent=function(k){return Z.H.useEffectEvent(k)},Ie.useId=function(){return Z.H.useId()},Ie.useImperativeHandle=function(k,X,me){return Z.H.useImperativeHandle(k,X,me)},Ie.useInsertionEffect=function(k,X){return Z.H.useInsertionEffect(k,X)},Ie.useLayoutEffect=function(k,X){return Z.H.useLayoutEffect(k,X)},Ie.useMemo=function(k,X){return Z.H.useMemo(k,X)},Ie.useOptimistic=function(k,X){return Z.H.useOptimistic(k,X)},Ie.useReducer=function(k,X,me){return Z.H.useReducer(k,X,me)},Ie.useRef=function(k){return Z.H.useRef(k)},Ie.useState=function(k){return Z.H.useState(k)},Ie.useSyncExternalStore=function(k,X,me){return Z.H.useSyncExternalStore(k,X,me)},Ie.useTransition=function(){return Z.H.useTransition()},Ie.version="19.2.3",Ie}var Om;function zu(){return Om||(Om=1,lu.exports=Vg()),lu.exports}var te=zu();const _i=hp(te);var ou={exports:{}},hi={},cu={exports:{}},uu={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cm;function Qg(){return Cm||(Cm=1,(function(l){function a(N,J){var ie=N.length;N.push(J);e:for(;0<ie;){var ge=ie-1>>>1,Te=N[ge];if(0<d(Te,J))N[ge]=J,N[ie]=Te,ie=ge;else break e}}function n(N){return N.length===0?null:N[0]}function o(N){if(N.length===0)return null;var J=N[0],ie=N.pop();if(ie!==J){N[0]=ie;e:for(var ge=0,Te=N.length,k=Te>>>1;ge<k;){var X=2*(ge+1)-1,me=N[X],be=X+1,_e=N[be];if(0>d(me,ie))be<Te&&0>d(_e,me)?(N[ge]=_e,N[be]=ie,ge=be):(N[ge]=me,N[X]=ie,ge=X);else if(be<Te&&0>d(_e,ie))N[ge]=_e,N[be]=ie,ge=be;else break e}}return J}function d(N,J){var ie=N.sortIndex-J.sortIndex;return ie!==0?ie:N.id-J.id}if(l.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;l.unstable_now=function(){return h.now()}}else{var f=Date,g=f.now();l.unstable_now=function(){return f.now()-g}}var b=[],p=[],v=1,x=null,_=3,j=!1,A=!1,C=!1,z=!1,D=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;function Q(N){for(var J=n(p);J!==null;){if(J.callback===null)o(p);else if(J.startTime<=N)o(p),J.sortIndex=J.expirationTime,a(b,J);else break;J=n(p)}}function H(N){if(C=!1,Q(N),!A)if(n(b)!==null)A=!0,G||(G=!0,Ue());else{var J=n(p);J!==null&&ye(H,J.startTime-N)}}var G=!1,Z=-1,fe=5,we=-1;function ze(){return z?!0:!(l.unstable_now()-we<fe)}function qe(){if(z=!1,G){var N=l.unstable_now();we=N;var J=!0;try{e:{A=!1,C&&(C=!1,R(Z),Z=-1),j=!0;var ie=_;try{t:{for(Q(N),x=n(b);x!==null&&!(x.expirationTime>N&&ze());){var ge=x.callback;if(typeof ge=="function"){x.callback=null,_=x.priorityLevel;var Te=ge(x.expirationTime<=N);if(N=l.unstable_now(),typeof Te=="function"){x.callback=Te,Q(N),J=!0;break t}x===n(b)&&o(b),Q(N)}else o(b);x=n(b)}if(x!==null)J=!0;else{var k=n(p);k!==null&&ye(H,k.startTime-N),J=!1}}break e}finally{x=null,_=ie,j=!1}J=void 0}}finally{J?Ue():G=!1}}}var Ue;if(typeof S=="function")Ue=function(){S(qe)};else if(typeof MessageChannel<"u"){var Ve=new MessageChannel,Se=Ve.port2;Ve.port1.onmessage=qe,Ue=function(){Se.postMessage(null)}}else Ue=function(){D(qe,0)};function ye(N,J){Z=D(function(){N(l.unstable_now())},J)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(N){N.callback=null},l.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):fe=0<N?Math.floor(1e3/N):5},l.unstable_getCurrentPriorityLevel=function(){return _},l.unstable_next=function(N){switch(_){case 1:case 2:case 3:var J=3;break;default:J=_}var ie=_;_=J;try{return N()}finally{_=ie}},l.unstable_requestPaint=function(){z=!0},l.unstable_runWithPriority=function(N,J){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var ie=_;_=N;try{return J()}finally{_=ie}},l.unstable_scheduleCallback=function(N,J,ie){var ge=l.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?ge+ie:ge):ie=ge,N){case 1:var Te=-1;break;case 2:Te=250;break;case 5:Te=1073741823;break;case 4:Te=1e4;break;default:Te=5e3}return Te=ie+Te,N={id:v++,callback:J,priorityLevel:N,startTime:ie,expirationTime:Te,sortIndex:-1},ie>ge?(N.sortIndex=ie,a(p,N),n(b)===null&&N===n(p)&&(C?(R(Z),Z=-1):C=!0,ye(H,ie-ge))):(N.sortIndex=Te,a(b,N),A||j||(A=!0,G||(G=!0,Ue()))),N},l.unstable_shouldYield=ze,l.unstable_wrapCallback=function(N){var J=_;return function(){var ie=_;_=J;try{return N.apply(this,arguments)}finally{_=ie}}}})(uu)),uu}var Rm;function Zg(){return Rm||(Rm=1,cu.exports=Qg()),cu.exports}var du={exports:{}},cs={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zm;function Jg(){if(zm)return cs;zm=1;var l=zu();function a(b){var p="https://react.dev/errors/"+b;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+b+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var o={d:{f:n,r:function(){throw Error(a(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},d=Symbol.for("react.portal");function h(b,p,v){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:x==null?null:""+x,children:b,containerInfo:p,implementation:v}}var f=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(b,p){if(b==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return cs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,cs.createPortal=function(b,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(a(299));return h(b,p,null,v)},cs.flushSync=function(b){var p=f.T,v=o.p;try{if(f.T=null,o.p=2,b)return b()}finally{f.T=p,o.p=v,o.d.f()}},cs.preconnect=function(b,p){typeof b=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,o.d.C(b,p))},cs.prefetchDNS=function(b){typeof b=="string"&&o.d.D(b)},cs.preinit=function(b,p){if(typeof b=="string"&&p&&typeof p.as=="string"){var v=p.as,x=g(v,p.crossOrigin),_=typeof p.integrity=="string"?p.integrity:void 0,j=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?o.d.S(b,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:x,integrity:_,fetchPriority:j}):v==="script"&&o.d.X(b,{crossOrigin:x,integrity:_,fetchPriority:j,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},cs.preinitModule=function(b,p){if(typeof b=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=g(p.as,p.crossOrigin);o.d.M(b,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&o.d.M(b)},cs.preload=function(b,p){if(typeof b=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,x=g(v,p.crossOrigin);o.d.L(b,v,{crossOrigin:x,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},cs.preloadModule=function(b,p){if(typeof b=="string")if(p){var v=g(p.as,p.crossOrigin);o.d.m(b,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else o.d.m(b)},cs.requestFormReset=function(b){o.d.r(b)},cs.unstable_batchedUpdates=function(b,p){return b(p)},cs.useFormState=function(b,p,v){return f.H.useFormState(b,p,v)},cs.useFormStatus=function(){return f.H.useHostTransitionStatus()},cs.version="19.2.3",cs}var Mm;function Xg(){if(Mm)return du.exports;Mm=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(a){console.error(a)}}return l(),du.exports=Jg(),du.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dm;function Wg(){if(Dm)return hi;Dm=1;var l=Zg(),a=zu(),n=Xg();function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function h(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function f(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function b(e){if(h(e)!==e)throw Error(o(188))}function p(e){var t=e.alternate;if(!t){if(t=h(e),t===null)throw Error(o(188));return t!==e?null:e}for(var s=e,i=t;;){var c=s.return;if(c===null)break;var u=c.alternate;if(u===null){if(i=c.return,i!==null){s=i;continue}break}if(c.child===u.child){for(u=c.child;u;){if(u===s)return b(c),e;if(u===i)return b(c),t;u=u.sibling}throw Error(o(188))}if(s.return!==i.return)s=c,i=u;else{for(var m=!1,y=c.child;y;){if(y===s){m=!0,s=c,i=u;break}if(y===i){m=!0,i=c,s=u;break}y=y.sibling}if(!m){for(y=u.child;y;){if(y===s){m=!0,s=u,i=c;break}if(y===i){m=!0,i=u,s=c;break}y=y.sibling}if(!m)throw Error(o(189))}}if(s.alternate!==i)throw Error(o(190))}if(s.tag!==3)throw Error(o(188));return s.stateNode.current===s?e:t}function v(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=v(e),t!==null)return t;e=e.sibling}return null}var x=Object.assign,_=Symbol.for("react.element"),j=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),R=Symbol.for("react.consumer"),S=Symbol.for("react.context"),Q=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),Z=Symbol.for("react.memo"),fe=Symbol.for("react.lazy"),we=Symbol.for("react.activity"),ze=Symbol.for("react.memo_cache_sentinel"),qe=Symbol.iterator;function Ue(e){return e===null||typeof e!="object"?null:(e=qe&&e[qe]||e["@@iterator"],typeof e=="function"?e:null)}var Ve=Symbol.for("react.client.reference");function Se(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Ve?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case C:return"Fragment";case D:return"Profiler";case z:return"StrictMode";case H:return"Suspense";case G:return"SuspenseList";case we:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case A:return"Portal";case S:return e.displayName||"Context";case R:return(e._context.displayName||"Context")+".Consumer";case Q:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Z:return t=e.displayName||null,t!==null?t:Se(e.type)||"Memo";case fe:t=e._payload,e=e._init;try{return Se(e(t))}catch{}}return null}var ye=Array.isArray,N=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie={pending:!1,data:null,method:null,action:null},ge=[],Te=-1;function k(e){return{current:e}}function X(e){0>Te||(e.current=ge[Te],ge[Te]=null,Te--)}function me(e,t){Te++,ge[Te]=e.current,e.current=t}var be=k(null),_e=k(null),Le=k(null),Je=k(null);function Rt(e,t){switch(me(Le,t),me(_e,e),me(be,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Jf(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Jf(t),e=Xf(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}X(be),me(be,e)}function ft(){X(be),X(_e),X(Le)}function $e(e){e.memoizedState!==null&&me(Je,e);var t=be.current,s=Xf(t,e.type);t!==s&&(me(_e,e),me(be,s))}function zt(e){_e.current===e&&(X(be),X(_e)),Je.current===e&&(X(Je),li._currentValue=ie)}var ot,he;function ae(e){if(ot===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);ot=t&&t[1]||"",he=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ot+e+he}var Pe=!1;function Ge(e,t){if(!e||Pe)return"";Pe=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(V){var Y=V}Reflect.construct(e,[],ne)}else{try{ne.call()}catch(V){Y=V}e.call(ne.prototype)}}else{try{throw Error()}catch(V){Y=V}(ne=e())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(V){if(V&&Y&&typeof V.stack=="string")return[V.stack,Y.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var u=i.DetermineComponentFrameRoot(),m=u[0],y=u[1];if(m&&y){var T=m.split(`
`),q=y.split(`
`);for(c=i=0;i<T.length&&!T[i].includes("DetermineComponentFrameRoot");)i++;for(;c<q.length&&!q[c].includes("DetermineComponentFrameRoot");)c++;if(i===T.length||c===q.length)for(i=T.length-1,c=q.length-1;1<=i&&0<=c&&T[i]!==q[c];)c--;for(;1<=i&&0<=c;i--,c--)if(T[i]!==q[c]){if(i!==1||c!==1)do if(i--,c--,0>c||T[i]!==q[c]){var F=`
`+T[i].replace(" at new "," at ");return e.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",e.displayName)),F}while(1<=i&&0<=c);break}}}finally{Pe=!1,Error.prepareStackTrace=s}return(s=e?e.displayName||e.name:"")?ae(s):""}function dt(e,t){switch(e.tag){case 26:case 27:case 5:return ae(e.type);case 16:return ae("Lazy");case 13:return e.child!==t&&t!==null?ae("Suspense Fallback"):ae("Suspense");case 19:return ae("SuspenseList");case 0:case 15:return Ge(e.type,!1);case 11:return Ge(e.type.render,!1);case 1:return Ge(e.type,!0);case 31:return ae("Activity");default:return""}}function Bt(e){try{var t="",s=null;do t+=dt(e,s),s=e,e=e.return;while(e);return t}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}var nt=Object.prototype.hasOwnProperty,fs=l.unstable_scheduleCallback,ms=l.unstable_cancelCallback,Ht=l.unstable_shouldYield,ds=l.unstable_requestPaint,Zt=l.unstable_now,Ar=l.unstable_getCurrentPriorityLevel,Si=l.unstable_ImmediatePriority,Ei=l.unstable_UserBlockingPriority,Or=l.unstable_NormalPriority,Js=l.unstable_LowPriority,Cr=l.unstable_IdlePriority,Xl=l.log,w=l.unstable_setDisableYieldValue,E=null,M=null;function B(e){if(typeof Xl=="function"&&w(e),M&&typeof M.setStrictMode=="function")try{M.setStrictMode(E,e)}catch{}}var U=Math.clz32?Math.clz32:W,le=Math.log,oe=Math.LN2;function W(e){return e>>>=0,e===0?32:31-(le(e)/oe|0)|0}var K=256,ee=262144,$=4194304;function P(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function se(e,t,s){var i=e.pendingLanes;if(i===0)return 0;var c=0,u=e.suspendedLanes,m=e.pingedLanes;e=e.warmLanes;var y=i&134217727;return y!==0?(i=y&~u,i!==0?c=P(i):(m&=y,m!==0?c=P(m):s||(s=y&~e,s!==0&&(c=P(s))))):(y=i&~u,y!==0?c=P(y):m!==0?c=P(m):s||(s=i&~e,s!==0&&(c=P(s)))),c===0?0:t!==0&&t!==c&&(t&u)===0&&(u=c&-c,s=t&-t,u>=s||u===32&&(s&4194048)!==0)?t:c}function pe(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Ae(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ce(){var e=$;return $<<=1,($&62914560)===0&&($=4194304),e}function wt(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function it(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function rt(e,t,s,i,c,u){var m=e.pendingLanes;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=s,e.entangledLanes&=s,e.errorRecoveryDisabledLanes&=s,e.shellSuspendCounter=0;var y=e.entanglements,T=e.expirationTimes,q=e.hiddenUpdates;for(s=m&~s;0<s;){var F=31-U(s),ne=1<<F;y[F]=0,T[F]=-1;var Y=q[F];if(Y!==null)for(q[F]=null,F=0;F<Y.length;F++){var V=Y[F];V!==null&&(V.lane&=-536870913)}s&=~ne}i!==0&&jt(e,i,0),u!==0&&c===0&&e.tag!==0&&(e.suspendedLanes|=u&~(m&~t))}function jt(e,t,s){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-U(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|s&261930}function Jt(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var i=31-U(s),c=1<<i;c&t|e[i]&t&&(e[i]|=t),s&=~c}}function ls(e,t){var s=t&-t;return s=(s&42)!==0?1:Ne(s),(s&(e.suspendedLanes|t))!==0?0:s}function Ne(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function At(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function gt(){var e=J.p;return e!==0?e:(e=window.event,e===void 0?32:vm(e.type))}function Pt(e,t){var s=J.p;try{return J.p=e,t()}finally{J.p=s}}var ve=Math.random().toString(36).slice(2),Be="__reactFiber$"+ve,st="__reactProps$"+ve,lt="__reactContainer$"+ve,Xe="__reactEvents$"+ve,Nt="__reactListeners$"+ve,os="__reactHandles$"+ve,Ca="__reactResources$"+ve,_s="__reactMarker$"+ve;function rr(e){delete e[Be],delete e[st],delete e[Xe],delete e[Nt],delete e[os]}function ps(e){var t=e[Be];if(t)return t;for(var s=e.parentNode;s;){if(t=s[lt]||s[Be]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=rm(e);e!==null;){if(s=e[Be])return s;e=rm(e)}return t}e=s,s=e.parentNode}return null}function St(e){if(e=e[Be]||e[lt]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Mt(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(o(33))}function Ls(e){var t=e[Ca];return t||(t=e[Ca]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Et(e){e[_s]=!0}var Bs=new Set,na={};function Ns(e,t){Ft(e,t),Ft(e+"Capture",t)}function Ft(e,t){for(na[e]=t,e=0;e<t.length;e++)Bs.add(t[e])}var Ti=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Hu={},$u={};function Lp(e){return nt.call($u,e)?!0:nt.call(Hu,e)?!1:Ti.test(e)?$u[e]=!0:(Hu[e]=!0,!1)}function ki(e,t,s){if(Lp(t))if(s===null)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+s)}}function Ai(e,t,s){if(s===null)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+s)}}function ua(e,t,s,i){if(i===null)e.removeAttribute(s);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttributeNS(t,s,""+i)}}function Hs(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Iu(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Bp(e,t,s){var i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var c=i.get,u=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(m){s=""+m,u.call(this,m)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return s},setValue:function(m){s=""+m},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Wl(e){if(!e._valueTracker){var t=Iu(e)?"checked":"value";e._valueTracker=Bp(e,t,""+e[t])}}function qu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),i="";return e&&(i=Iu(e)?e.checked?"true":"false":e.value),e=i,e!==s?(t.setValue(e),!0):!1}function Oi(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Hp=/[\n"\\]/g;function $s(e){return e.replace(Hp,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Fl(e,t,s,i,c,u,m,y){e.name="",m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"?e.type=m:e.removeAttribute("type"),t!=null?m==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Hs(t)):e.value!==""+Hs(t)&&(e.value=""+Hs(t)):m!=="submit"&&m!=="reset"||e.removeAttribute("value"),t!=null?eo(e,m,Hs(t)):s!=null?eo(e,m,Hs(s)):i!=null&&e.removeAttribute("value"),c==null&&u!=null&&(e.defaultChecked=!!u),c!=null&&(e.checked=c&&typeof c!="function"&&typeof c!="symbol"),y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?e.name=""+Hs(y):e.removeAttribute("name")}function Pu(e,t,s,i,c,u,m,y){if(u!=null&&typeof u!="function"&&typeof u!="symbol"&&typeof u!="boolean"&&(e.type=u),t!=null||s!=null){if(!(u!=="submit"&&u!=="reset"||t!=null)){Wl(e);return}s=s!=null?""+Hs(s):"",t=t!=null?""+Hs(t):s,y||t===e.value||(e.value=t),e.defaultValue=t}i=i??c,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=y?e.checked:!!i,e.defaultChecked=!!i,m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(e.name=m),Wl(e)}function eo(e,t,s){t==="number"&&Oi(e.ownerDocument)===e||e.defaultValue===""+s||(e.defaultValue=""+s)}function Rr(e,t,s,i){if(e=e.options,t){t={};for(var c=0;c<s.length;c++)t["$"+s[c]]=!0;for(s=0;s<e.length;s++)c=t.hasOwnProperty("$"+e[s].value),e[s].selected!==c&&(e[s].selected=c),c&&i&&(e[s].defaultSelected=!0)}else{for(s=""+Hs(s),t=null,c=0;c<e.length;c++){if(e[c].value===s){e[c].selected=!0,i&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function Gu(e,t,s){if(t!=null&&(t=""+Hs(t),t!==e.value&&(e.value=t),s==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=s!=null?""+Hs(s):""}function Yu(e,t,s,i){if(t==null){if(i!=null){if(s!=null)throw Error(o(92));if(ye(i)){if(1<i.length)throw Error(o(93));i=i[0]}s=i}s==null&&(s=""),t=s}s=Hs(t),e.defaultValue=s,i=e.textContent,i===s&&i!==""&&i!==null&&(e.value=i),Wl(e)}function zr(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var $p=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ku(e,t,s){var i=t.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,s):typeof s!="number"||s===0||$p.has(t)?t==="float"?e.cssFloat=s:e[t]=(""+s).trim():e[t]=s+"px"}function Vu(e,t,s){if(t!=null&&typeof t!="object")throw Error(o(62));if(e=e.style,s!=null){for(var i in s)!s.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var c in t)i=t[c],t.hasOwnProperty(c)&&s[c]!==i&&Ku(e,c,i)}else for(var u in t)t.hasOwnProperty(u)&&Ku(e,u,t[u])}function to(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ip=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),qp=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ci(e){return qp.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function da(){}var so=null;function ao(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Mr=null,Dr=null;function Qu(e){var t=St(e);if(t&&(e=t.stateNode)){var s=e[st]||null;e:switch(e=t.stateNode,t.type){case"input":if(Fl(e,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+$s(""+t)+'"][type="radio"]'),t=0;t<s.length;t++){var i=s[t];if(i!==e&&i.form===e.form){var c=i[st]||null;if(!c)throw Error(o(90));Fl(i,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(t=0;t<s.length;t++)i=s[t],i.form===e.form&&qu(i)}break e;case"textarea":Gu(e,s.value,s.defaultValue);break e;case"select":t=s.value,t!=null&&Rr(e,!!s.multiple,t,!1)}}}var ro=!1;function Zu(e,t,s){if(ro)return e(t,s);ro=!0;try{var i=e(t);return i}finally{if(ro=!1,(Mr!==null||Dr!==null)&&(xl(),Mr&&(t=Mr,e=Dr,Dr=Mr=null,Qu(t),e)))for(t=0;t<e.length;t++)Qu(e[t])}}function Nn(e,t){var s=e.stateNode;if(s===null)return null;var i=s[st]||null;if(i===null)return null;s=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(o(231,t,typeof s));return s}var ha=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),no=!1;if(ha)try{var Sn={};Object.defineProperty(Sn,"passive",{get:function(){no=!0}}),window.addEventListener("test",Sn,Sn),window.removeEventListener("test",Sn,Sn)}catch{no=!1}var Ra=null,io=null,Ri=null;function Ju(){if(Ri)return Ri;var e,t=io,s=t.length,i,c="value"in Ra?Ra.value:Ra.textContent,u=c.length;for(e=0;e<s&&t[e]===c[e];e++);var m=s-e;for(i=1;i<=m&&t[s-i]===c[u-i];i++);return Ri=c.slice(e,1<i?1-i:void 0)}function zi(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Mi(){return!0}function Xu(){return!1}function gs(e){function t(s,i,c,u,m){this._reactName=s,this._targetInst=c,this.type=i,this.nativeEvent=u,this.target=m,this.currentTarget=null;for(var y in e)e.hasOwnProperty(y)&&(s=e[y],this[y]=s?s(u):u[y]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?Mi:Xu,this.isPropagationStopped=Xu,this}return x(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Mi)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Mi)},persist:function(){},isPersistent:Mi}),t}var nr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Di=gs(nr),En=x({},nr,{view:0,detail:0}),Pp=gs(En),lo,oo,Tn,Ui=x({},En,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Tn&&(Tn&&e.type==="mousemove"?(lo=e.screenX-Tn.screenX,oo=e.screenY-Tn.screenY):oo=lo=0,Tn=e),lo)},movementY:function(e){return"movementY"in e?e.movementY:oo}}),Wu=gs(Ui),Gp=x({},Ui,{dataTransfer:0}),Yp=gs(Gp),Kp=x({},En,{relatedTarget:0}),co=gs(Kp),Vp=x({},nr,{animationName:0,elapsedTime:0,pseudoElement:0}),Qp=gs(Vp),Zp=x({},nr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Jp=gs(Zp),Xp=x({},nr,{data:0}),Fu=gs(Xp),Wp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},e0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function t0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=e0[e])?!!t[e]:!1}function uo(){return t0}var s0=x({},En,{key:function(e){if(e.key){var t=Wp[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=zi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Fp[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uo,charCode:function(e){return e.type==="keypress"?zi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?zi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),a0=gs(s0),r0=x({},Ui,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ed=gs(r0),n0=x({},En,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uo}),i0=gs(n0),l0=x({},nr,{propertyName:0,elapsedTime:0,pseudoElement:0}),o0=gs(l0),c0=x({},Ui,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),u0=gs(c0),d0=x({},nr,{newState:0,oldState:0}),h0=gs(d0),f0=[9,13,27,32],ho=ha&&"CompositionEvent"in window,kn=null;ha&&"documentMode"in document&&(kn=document.documentMode);var m0=ha&&"TextEvent"in window&&!kn,td=ha&&(!ho||kn&&8<kn&&11>=kn),sd=" ",ad=!1;function rd(e,t){switch(e){case"keyup":return f0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ur=!1;function p0(e,t){switch(e){case"compositionend":return nd(t);case"keypress":return t.which!==32?null:(ad=!0,sd);case"textInput":return e=t.data,e===sd&&ad?null:e;default:return null}}function g0(e,t){if(Ur)return e==="compositionend"||!ho&&rd(e,t)?(e=Ju(),Ri=io=Ra=null,Ur=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return td&&t.locale!=="ko"?null:t.data;default:return null}}var b0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function id(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!b0[e.type]:t==="textarea"}function ld(e,t,s,i){Mr?Dr?Dr.push(i):Dr=[i]:Mr=i,t=Sl(t,"onChange"),0<t.length&&(s=new Di("onChange","change",null,s,i),e.push({event:s,listeners:t}))}var An=null,On=null;function x0(e){Gf(e,0)}function Li(e){var t=Mt(e);if(qu(t))return e}function od(e,t){if(e==="change")return t}var cd=!1;if(ha){var fo;if(ha){var mo="oninput"in document;if(!mo){var ud=document.createElement("div");ud.setAttribute("oninput","return;"),mo=typeof ud.oninput=="function"}fo=mo}else fo=!1;cd=fo&&(!document.documentMode||9<document.documentMode)}function dd(){An&&(An.detachEvent("onpropertychange",hd),On=An=null)}function hd(e){if(e.propertyName==="value"&&Li(On)){var t=[];ld(t,On,e,ao(e)),Zu(x0,t)}}function y0(e,t,s){e==="focusin"?(dd(),An=t,On=s,An.attachEvent("onpropertychange",hd)):e==="focusout"&&dd()}function v0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Li(On)}function w0(e,t){if(e==="click")return Li(t)}function j0(e,t){if(e==="input"||e==="change")return Li(t)}function _0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ss=typeof Object.is=="function"?Object.is:_0;function Cn(e,t){if(Ss(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),i=Object.keys(t);if(s.length!==i.length)return!1;for(i=0;i<s.length;i++){var c=s[i];if(!nt.call(t,c)||!Ss(e[c],t[c]))return!1}return!0}function fd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function md(e,t){var s=fd(e);e=0;for(var i;s;){if(s.nodeType===3){if(i=e+s.textContent.length,e<=t&&i>=t)return{node:s,offset:t-e};e=i}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=fd(s)}}function pd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?pd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function gd(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Oi(e.document);t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=Oi(e.document)}return t}function po(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var N0=ha&&"documentMode"in document&&11>=document.documentMode,Lr=null,go=null,Rn=null,bo=!1;function bd(e,t,s){var i=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;bo||Lr==null||Lr!==Oi(i)||(i=Lr,"selectionStart"in i&&po(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Rn&&Cn(Rn,i)||(Rn=i,i=Sl(go,"onSelect"),0<i.length&&(t=new Di("onSelect","select",null,t,s),e.push({event:t,listeners:i}),t.target=Lr)))}function ir(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var Br={animationend:ir("Animation","AnimationEnd"),animationiteration:ir("Animation","AnimationIteration"),animationstart:ir("Animation","AnimationStart"),transitionrun:ir("Transition","TransitionRun"),transitionstart:ir("Transition","TransitionStart"),transitioncancel:ir("Transition","TransitionCancel"),transitionend:ir("Transition","TransitionEnd")},xo={},xd={};ha&&(xd=document.createElement("div").style,"AnimationEvent"in window||(delete Br.animationend.animation,delete Br.animationiteration.animation,delete Br.animationstart.animation),"TransitionEvent"in window||delete Br.transitionend.transition);function lr(e){if(xo[e])return xo[e];if(!Br[e])return e;var t=Br[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in xd)return xo[e]=t[s];return e}var yd=lr("animationend"),vd=lr("animationiteration"),wd=lr("animationstart"),S0=lr("transitionrun"),E0=lr("transitionstart"),T0=lr("transitioncancel"),jd=lr("transitionend"),_d=new Map,yo="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");yo.push("scrollEnd");function Xs(e,t){_d.set(e,t),Ns(t,[e])}var Bi=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Is=[],Hr=0,vo=0;function Hi(){for(var e=Hr,t=vo=Hr=0;t<e;){var s=Is[t];Is[t++]=null;var i=Is[t];Is[t++]=null;var c=Is[t];Is[t++]=null;var u=Is[t];if(Is[t++]=null,i!==null&&c!==null){var m=i.pending;m===null?c.next=c:(c.next=m.next,m.next=c),i.pending=c}u!==0&&Nd(s,c,u)}}function $i(e,t,s,i){Is[Hr++]=e,Is[Hr++]=t,Is[Hr++]=s,Is[Hr++]=i,vo|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function wo(e,t,s,i){return $i(e,t,s,i),Ii(e)}function or(e,t){return $i(e,null,null,t),Ii(e)}function Nd(e,t,s){e.lanes|=s;var i=e.alternate;i!==null&&(i.lanes|=s);for(var c=!1,u=e.return;u!==null;)u.childLanes|=s,i=u.alternate,i!==null&&(i.childLanes|=s),u.tag===22&&(e=u.stateNode,e===null||e._visibility&1||(c=!0)),e=u,u=u.return;return e.tag===3?(u=e.stateNode,c&&t!==null&&(c=31-U(s),e=u.hiddenUpdates,i=e[c],i===null?e[c]=[t]:i.push(t),t.lane=s|536870912),u):null}function Ii(e){if(50<ei)throw ei=0,Oc=null,Error(o(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var $r={};function k0(e,t,s,i){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Es(e,t,s,i){return new k0(e,t,s,i)}function jo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function fa(e,t){var s=e.alternate;return s===null?(s=Es(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&65011712,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s.refCleanup=e.refCleanup,s}function Sd(e,t){e.flags&=65011714;var s=e.alternate;return s===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,e.type=s.type,t=s.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function qi(e,t,s,i,c,u){var m=0;if(i=e,typeof e=="function")jo(e)&&(m=1);else if(typeof e=="string")m=zg(e,s,be.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case we:return e=Es(31,s,t,c),e.elementType=we,e.lanes=u,e;case C:return cr(s.children,c,u,t);case z:m=8,c|=24;break;case D:return e=Es(12,s,t,c|2),e.elementType=D,e.lanes=u,e;case H:return e=Es(13,s,t,c),e.elementType=H,e.lanes=u,e;case G:return e=Es(19,s,t,c),e.elementType=G,e.lanes=u,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case S:m=10;break e;case R:m=9;break e;case Q:m=11;break e;case Z:m=14;break e;case fe:m=16,i=null;break e}m=29,s=Error(o(130,e===null?"null":typeof e,"")),i=null}return t=Es(m,s,t,c),t.elementType=e,t.type=i,t.lanes=u,t}function cr(e,t,s,i){return e=Es(7,e,i,t),e.lanes=s,e}function _o(e,t,s){return e=Es(6,e,null,t),e.lanes=s,e}function Ed(e){var t=Es(18,null,null,0);return t.stateNode=e,t}function No(e,t,s){return t=Es(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Td=new WeakMap;function qs(e,t){if(typeof e=="object"&&e!==null){var s=Td.get(e);return s!==void 0?s:(t={value:e,source:t,stack:Bt(t)},Td.set(e,t),t)}return{value:e,source:t,stack:Bt(t)}}var Ir=[],qr=0,Pi=null,zn=0,Ps=[],Gs=0,za=null,ia=1,la="";function ma(e,t){Ir[qr++]=zn,Ir[qr++]=Pi,Pi=e,zn=t}function kd(e,t,s){Ps[Gs++]=ia,Ps[Gs++]=la,Ps[Gs++]=za,za=e;var i=ia;e=la;var c=32-U(i)-1;i&=~(1<<c),s+=1;var u=32-U(t)+c;if(30<u){var m=c-c%5;u=(i&(1<<m)-1).toString(32),i>>=m,c-=m,ia=1<<32-U(t)+c|s<<c|i,la=u+e}else ia=1<<u|s<<c|i,la=e}function So(e){e.return!==null&&(ma(e,1),kd(e,1,0))}function Eo(e){for(;e===Pi;)Pi=Ir[--qr],Ir[qr]=null,zn=Ir[--qr],Ir[qr]=null;for(;e===za;)za=Ps[--Gs],Ps[Gs]=null,la=Ps[--Gs],Ps[Gs]=null,ia=Ps[--Gs],Ps[Gs]=null}function Ad(e,t){Ps[Gs++]=ia,Ps[Gs++]=la,Ps[Gs++]=za,ia=t.id,la=t.overflow,za=e}var ts=null,Tt=null,at=!1,Ma=null,Ys=!1,To=Error(o(519));function Da(e){var t=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Mn(qs(t,e)),To}function Od(e){var t=e.stateNode,s=e.type,i=e.memoizedProps;switch(t[Be]=e,t[st]=i,s){case"dialog":Fe("cancel",t),Fe("close",t);break;case"iframe":case"object":case"embed":Fe("load",t);break;case"video":case"audio":for(s=0;s<si.length;s++)Fe(si[s],t);break;case"source":Fe("error",t);break;case"img":case"image":case"link":Fe("error",t),Fe("load",t);break;case"details":Fe("toggle",t);break;case"input":Fe("invalid",t),Pu(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":Fe("invalid",t);break;case"textarea":Fe("invalid",t),Yu(t,i.value,i.defaultValue,i.children)}s=i.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||t.textContent===""+s||i.suppressHydrationWarning===!0||Qf(t.textContent,s)?(i.popover!=null&&(Fe("beforetoggle",t),Fe("toggle",t)),i.onScroll!=null&&Fe("scroll",t),i.onScrollEnd!=null&&Fe("scrollend",t),i.onClick!=null&&(t.onclick=da),t=!0):t=!1,t||Da(e,!0)}function Cd(e){for(ts=e.return;ts;)switch(ts.tag){case 5:case 31:case 13:Ys=!1;return;case 27:case 3:Ys=!0;return;default:ts=ts.return}}function Pr(e){if(e!==ts)return!1;if(!at)return Cd(e),at=!0,!1;var t=e.tag,s;if((s=t!==3&&t!==27)&&((s=t===5)&&(s=e.type,s=!(s!=="form"&&s!=="button")||Yc(e.type,e.memoizedProps)),s=!s),s&&Tt&&Da(e),Cd(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));Tt=am(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));Tt=am(e)}else t===27?(t=Tt,Za(e.type)?(e=Jc,Jc=null,Tt=e):Tt=t):Tt=ts?Vs(e.stateNode.nextSibling):null;return!0}function ur(){Tt=ts=null,at=!1}function ko(){var e=Ma;return e!==null&&(vs===null?vs=e:vs.push.apply(vs,e),Ma=null),e}function Mn(e){Ma===null?Ma=[e]:Ma.push(e)}var Ao=k(null),dr=null,pa=null;function Ua(e,t,s){me(Ao,t._currentValue),t._currentValue=s}function ga(e){e._currentValue=Ao.current,X(Ao)}function Oo(e,t,s){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===s)break;e=e.return}}function Co(e,t,s,i){var c=e.child;for(c!==null&&(c.return=e);c!==null;){var u=c.dependencies;if(u!==null){var m=c.child;u=u.firstContext;e:for(;u!==null;){var y=u;u=c;for(var T=0;T<t.length;T++)if(y.context===t[T]){u.lanes|=s,y=u.alternate,y!==null&&(y.lanes|=s),Oo(u.return,s,e),i||(m=null);break e}u=y.next}}else if(c.tag===18){if(m=c.return,m===null)throw Error(o(341));m.lanes|=s,u=m.alternate,u!==null&&(u.lanes|=s),Oo(m,s,e),m=null}else m=c.child;if(m!==null)m.return=c;else for(m=c;m!==null;){if(m===e){m=null;break}if(c=m.sibling,c!==null){c.return=m.return,m=c;break}m=m.return}c=m}}function Gr(e,t,s,i){e=null;for(var c=t,u=!1;c!==null;){if(!u){if((c.flags&524288)!==0)u=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var m=c.alternate;if(m===null)throw Error(o(387));if(m=m.memoizedProps,m!==null){var y=c.type;Ss(c.pendingProps.value,m.value)||(e!==null?e.push(y):e=[y])}}else if(c===Je.current){if(m=c.alternate,m===null)throw Error(o(387));m.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(e!==null?e.push(li):e=[li])}c=c.return}e!==null&&Co(t,e,s,i),t.flags|=262144}function Gi(e){for(e=e.firstContext;e!==null;){if(!Ss(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function hr(e){dr=e,pa=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ss(e){return Rd(dr,e)}function Yi(e,t){return dr===null&&hr(e),Rd(e,t)}function Rd(e,t){var s=t._currentValue;if(t={context:t,memoizedValue:s,next:null},pa===null){if(e===null)throw Error(o(308));pa=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else pa=pa.next=t;return s}var A0=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(s,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(s){return s()})}},O0=l.unstable_scheduleCallback,C0=l.unstable_NormalPriority,Gt={$$typeof:S,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ro(){return{controller:new A0,data:new Map,refCount:0}}function Dn(e){e.refCount--,e.refCount===0&&O0(C0,function(){e.controller.abort()})}var Un=null,zo=0,Yr=0,Kr=null;function R0(e,t){if(Un===null){var s=Un=[];zo=0,Yr=Uc(),Kr={status:"pending",value:void 0,then:function(i){s.push(i)}}}return zo++,t.then(zd,zd),t}function zd(){if(--zo===0&&Un!==null){Kr!==null&&(Kr.status="fulfilled");var e=Un;Un=null,Yr=0,Kr=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function z0(e,t){var s=[],i={status:"pending",value:null,reason:null,then:function(c){s.push(c)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var c=0;c<s.length;c++)(0,s[c])(t)},function(c){for(i.status="rejected",i.reason=c,c=0;c<s.length;c++)(0,s[c])(void 0)}),i}var Md=N.S;N.S=function(e,t){xf=Zt(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&R0(e,t),Md!==null&&Md(e,t)};var fr=k(null);function Mo(){var e=fr.current;return e!==null?e:vt.pooledCache}function Ki(e,t){t===null?me(fr,fr.current):me(fr,t.pool)}function Dd(){var e=Mo();return e===null?null:{parent:Gt._currentValue,pool:e}}var Vr=Error(o(460)),Do=Error(o(474)),Vi=Error(o(542)),Qi={then:function(){}};function Ud(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Ld(e,t,s){switch(s=e[s],s===void 0?e.push(t):s!==t&&(t.then(da,da),t=s),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Hd(e),e;default:if(typeof t.status=="string")t.then(da,da);else{if(e=vt,e!==null&&100<e.shellSuspendCounter)throw Error(o(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var c=t;c.status="fulfilled",c.value=i}},function(i){if(t.status==="pending"){var c=t;c.status="rejected",c.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Hd(e),e}throw pr=t,Vr}}function mr(e){try{var t=e._init;return t(e._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(pr=s,Vr):s}}var pr=null;function Bd(){if(pr===null)throw Error(o(459));var e=pr;return pr=null,e}function Hd(e){if(e===Vr||e===Vi)throw Error(o(483))}var Qr=null,Ln=0;function Zi(e){var t=Ln;return Ln+=1,Qr===null&&(Qr=[]),Ld(Qr,e,t)}function Bn(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Ji(e,t){throw t.$$typeof===_?Error(o(525)):(e=Object.prototype.toString.call(t),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function $d(e){function t(L,O){if(e){var I=L.deletions;I===null?(L.deletions=[O],L.flags|=16):I.push(O)}}function s(L,O){if(!e)return null;for(;O!==null;)t(L,O),O=O.sibling;return null}function i(L){for(var O=new Map;L!==null;)L.key!==null?O.set(L.key,L):O.set(L.index,L),L=L.sibling;return O}function c(L,O){return L=fa(L,O),L.index=0,L.sibling=null,L}function u(L,O,I){return L.index=I,e?(I=L.alternate,I!==null?(I=I.index,I<O?(L.flags|=67108866,O):I):(L.flags|=67108866,O)):(L.flags|=1048576,O)}function m(L){return e&&L.alternate===null&&(L.flags|=67108866),L}function y(L,O,I,re){return O===null||O.tag!==6?(O=_o(I,L.mode,re),O.return=L,O):(O=c(O,I),O.return=L,O)}function T(L,O,I,re){var Oe=I.type;return Oe===C?F(L,O,I.props.children,re,I.key):O!==null&&(O.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===fe&&mr(Oe)===O.type)?(O=c(O,I.props),Bn(O,I),O.return=L,O):(O=qi(I.type,I.key,I.props,null,L.mode,re),Bn(O,I),O.return=L,O)}function q(L,O,I,re){return O===null||O.tag!==4||O.stateNode.containerInfo!==I.containerInfo||O.stateNode.implementation!==I.implementation?(O=No(I,L.mode,re),O.return=L,O):(O=c(O,I.children||[]),O.return=L,O)}function F(L,O,I,re,Oe){return O===null||O.tag!==7?(O=cr(I,L.mode,re,Oe),O.return=L,O):(O=c(O,I),O.return=L,O)}function ne(L,O,I){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=_o(""+O,L.mode,I),O.return=L,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case j:return I=qi(O.type,O.key,O.props,null,L.mode,I),Bn(I,O),I.return=L,I;case A:return O=No(O,L.mode,I),O.return=L,O;case fe:return O=mr(O),ne(L,O,I)}if(ye(O)||Ue(O))return O=cr(O,L.mode,I,null),O.return=L,O;if(typeof O.then=="function")return ne(L,Zi(O),I);if(O.$$typeof===S)return ne(L,Yi(L,O),I);Ji(L,O)}return null}function Y(L,O,I,re){var Oe=O!==null?O.key:null;if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return Oe!==null?null:y(L,O,""+I,re);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case j:return I.key===Oe?T(L,O,I,re):null;case A:return I.key===Oe?q(L,O,I,re):null;case fe:return I=mr(I),Y(L,O,I,re)}if(ye(I)||Ue(I))return Oe!==null?null:F(L,O,I,re,null);if(typeof I.then=="function")return Y(L,O,Zi(I),re);if(I.$$typeof===S)return Y(L,O,Yi(L,I),re);Ji(L,I)}return null}function V(L,O,I,re,Oe){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return L=L.get(I)||null,y(O,L,""+re,Oe);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case j:return L=L.get(re.key===null?I:re.key)||null,T(O,L,re,Oe);case A:return L=L.get(re.key===null?I:re.key)||null,q(O,L,re,Oe);case fe:return re=mr(re),V(L,O,I,re,Oe)}if(ye(re)||Ue(re))return L=L.get(I)||null,F(O,L,re,Oe,null);if(typeof re.then=="function")return V(L,O,I,Zi(re),Oe);if(re.$$typeof===S)return V(L,O,I,Yi(O,re),Oe);Ji(O,re)}return null}function je(L,O,I,re){for(var Oe=null,ct=null,Ee=O,Ke=O=0,tt=null;Ee!==null&&Ke<I.length;Ke++){Ee.index>Ke?(tt=Ee,Ee=null):tt=Ee.sibling;var ut=Y(L,Ee,I[Ke],re);if(ut===null){Ee===null&&(Ee=tt);break}e&&Ee&&ut.alternate===null&&t(L,Ee),O=u(ut,O,Ke),ct===null?Oe=ut:ct.sibling=ut,ct=ut,Ee=tt}if(Ke===I.length)return s(L,Ee),at&&ma(L,Ke),Oe;if(Ee===null){for(;Ke<I.length;Ke++)Ee=ne(L,I[Ke],re),Ee!==null&&(O=u(Ee,O,Ke),ct===null?Oe=Ee:ct.sibling=Ee,ct=Ee);return at&&ma(L,Ke),Oe}for(Ee=i(Ee);Ke<I.length;Ke++)tt=V(Ee,L,Ke,I[Ke],re),tt!==null&&(e&&tt.alternate!==null&&Ee.delete(tt.key===null?Ke:tt.key),O=u(tt,O,Ke),ct===null?Oe=tt:ct.sibling=tt,ct=tt);return e&&Ee.forEach(function(er){return t(L,er)}),at&&ma(L,Ke),Oe}function Re(L,O,I,re){if(I==null)throw Error(o(151));for(var Oe=null,ct=null,Ee=O,Ke=O=0,tt=null,ut=I.next();Ee!==null&&!ut.done;Ke++,ut=I.next()){Ee.index>Ke?(tt=Ee,Ee=null):tt=Ee.sibling;var er=Y(L,Ee,ut.value,re);if(er===null){Ee===null&&(Ee=tt);break}e&&Ee&&er.alternate===null&&t(L,Ee),O=u(er,O,Ke),ct===null?Oe=er:ct.sibling=er,ct=er,Ee=tt}if(ut.done)return s(L,Ee),at&&ma(L,Ke),Oe;if(Ee===null){for(;!ut.done;Ke++,ut=I.next())ut=ne(L,ut.value,re),ut!==null&&(O=u(ut,O,Ke),ct===null?Oe=ut:ct.sibling=ut,ct=ut);return at&&ma(L,Ke),Oe}for(Ee=i(Ee);!ut.done;Ke++,ut=I.next())ut=V(Ee,L,Ke,ut.value,re),ut!==null&&(e&&ut.alternate!==null&&Ee.delete(ut.key===null?Ke:ut.key),O=u(ut,O,Ke),ct===null?Oe=ut:ct.sibling=ut,ct=ut);return e&&Ee.forEach(function(Gg){return t(L,Gg)}),at&&ma(L,Ke),Oe}function yt(L,O,I,re){if(typeof I=="object"&&I!==null&&I.type===C&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case j:e:{for(var Oe=I.key;O!==null;){if(O.key===Oe){if(Oe=I.type,Oe===C){if(O.tag===7){s(L,O.sibling),re=c(O,I.props.children),re.return=L,L=re;break e}}else if(O.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===fe&&mr(Oe)===O.type){s(L,O.sibling),re=c(O,I.props),Bn(re,I),re.return=L,L=re;break e}s(L,O);break}else t(L,O);O=O.sibling}I.type===C?(re=cr(I.props.children,L.mode,re,I.key),re.return=L,L=re):(re=qi(I.type,I.key,I.props,null,L.mode,re),Bn(re,I),re.return=L,L=re)}return m(L);case A:e:{for(Oe=I.key;O!==null;){if(O.key===Oe)if(O.tag===4&&O.stateNode.containerInfo===I.containerInfo&&O.stateNode.implementation===I.implementation){s(L,O.sibling),re=c(O,I.children||[]),re.return=L,L=re;break e}else{s(L,O);break}else t(L,O);O=O.sibling}re=No(I,L.mode,re),re.return=L,L=re}return m(L);case fe:return I=mr(I),yt(L,O,I,re)}if(ye(I))return je(L,O,I,re);if(Ue(I)){if(Oe=Ue(I),typeof Oe!="function")throw Error(o(150));return I=Oe.call(I),Re(L,O,I,re)}if(typeof I.then=="function")return yt(L,O,Zi(I),re);if(I.$$typeof===S)return yt(L,O,Yi(L,I),re);Ji(L,I)}return typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint"?(I=""+I,O!==null&&O.tag===6?(s(L,O.sibling),re=c(O,I),re.return=L,L=re):(s(L,O),re=_o(I,L.mode,re),re.return=L,L=re),m(L)):s(L,O)}return function(L,O,I,re){try{Ln=0;var Oe=yt(L,O,I,re);return Qr=null,Oe}catch(Ee){if(Ee===Vr||Ee===Vi)throw Ee;var ct=Es(29,Ee,null,L.mode);return ct.lanes=re,ct.return=L,ct}finally{}}}var gr=$d(!0),Id=$d(!1),La=!1;function Uo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Lo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ba(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ha(e,t,s){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,(ht&2)!==0){var c=i.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),i.pending=t,t=Ii(e),Nd(e,null,s),t}return $i(e,i,t,s),Ii(e)}function Hn(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,s|=i,t.lanes=s,Jt(e,s)}}function Bo(e,t){var s=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,s===i)){var c=null,u=null;if(s=s.firstBaseUpdate,s!==null){do{var m={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};u===null?c=u=m:u=u.next=m,s=s.next}while(s!==null);u===null?c=u=t:u=u.next=t}else c=u=t;s={baseState:i.baseState,firstBaseUpdate:c,lastBaseUpdate:u,shared:i.shared,callbacks:i.callbacks},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}var Ho=!1;function $n(){if(Ho){var e=Kr;if(e!==null)throw e}}function In(e,t,s,i){Ho=!1;var c=e.updateQueue;La=!1;var u=c.firstBaseUpdate,m=c.lastBaseUpdate,y=c.shared.pending;if(y!==null){c.shared.pending=null;var T=y,q=T.next;T.next=null,m===null?u=q:m.next=q,m=T;var F=e.alternate;F!==null&&(F=F.updateQueue,y=F.lastBaseUpdate,y!==m&&(y===null?F.firstBaseUpdate=q:y.next=q,F.lastBaseUpdate=T))}if(u!==null){var ne=c.baseState;m=0,F=q=T=null,y=u;do{var Y=y.lane&-536870913,V=Y!==y.lane;if(V?(et&Y)===Y:(i&Y)===Y){Y!==0&&Y===Yr&&(Ho=!0),F!==null&&(F=F.next={lane:0,tag:y.tag,payload:y.payload,callback:null,next:null});e:{var je=e,Re=y;Y=t;var yt=s;switch(Re.tag){case 1:if(je=Re.payload,typeof je=="function"){ne=je.call(yt,ne,Y);break e}ne=je;break e;case 3:je.flags=je.flags&-65537|128;case 0:if(je=Re.payload,Y=typeof je=="function"?je.call(yt,ne,Y):je,Y==null)break e;ne=x({},ne,Y);break e;case 2:La=!0}}Y=y.callback,Y!==null&&(e.flags|=64,V&&(e.flags|=8192),V=c.callbacks,V===null?c.callbacks=[Y]:V.push(Y))}else V={lane:Y,tag:y.tag,payload:y.payload,callback:y.callback,next:null},F===null?(q=F=V,T=ne):F=F.next=V,m|=Y;if(y=y.next,y===null){if(y=c.shared.pending,y===null)break;V=y,y=V.next,V.next=null,c.lastBaseUpdate=V,c.shared.pending=null}}while(!0);F===null&&(T=ne),c.baseState=T,c.firstBaseUpdate=q,c.lastBaseUpdate=F,u===null&&(c.shared.lanes=0),Ga|=m,e.lanes=m,e.memoizedState=ne}}function qd(e,t){if(typeof e!="function")throw Error(o(191,e));e.call(t)}function Pd(e,t){var s=e.callbacks;if(s!==null)for(e.callbacks=null,e=0;e<s.length;e++)qd(s[e],t)}var Zr=k(null),Xi=k(0);function Gd(e,t){e=Sa,me(Xi,e),me(Zr,t),Sa=e|t.baseLanes}function $o(){me(Xi,Sa),me(Zr,Zr.current)}function Io(){Sa=Xi.current,X(Zr),X(Xi)}var Ts=k(null),Ks=null;function $a(e){var t=e.alternate;me($t,$t.current&1),me(Ts,e),Ks===null&&(t===null||Zr.current!==null||t.memoizedState!==null)&&(Ks=e)}function qo(e){me($t,$t.current),me(Ts,e),Ks===null&&(Ks=e)}function Yd(e){e.tag===22?(me($t,$t.current),me(Ts,e),Ks===null&&(Ks=e)):Ia()}function Ia(){me($t,$t.current),me(Ts,Ts.current)}function ks(e){X(Ts),Ks===e&&(Ks=null),X($t)}var $t=k(0);function Wi(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||Qc(s)||Zc(s)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ba=0,Ye=null,bt=null,Yt=null,Fi=!1,Jr=!1,br=!1,el=0,qn=0,Xr=null,M0=0;function Dt(){throw Error(o(321))}function Po(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!Ss(e[s],t[s]))return!1;return!0}function Go(e,t,s,i,c,u){return ba=u,Ye=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,N.H=e===null||e.memoizedState===null?kh:nc,br=!1,u=s(i,c),br=!1,Jr&&(u=Vd(t,s,i,c)),Kd(e),u}function Kd(e){N.H=Yn;var t=bt!==null&&bt.next!==null;if(ba=0,Yt=bt=Ye=null,Fi=!1,qn=0,Xr=null,t)throw Error(o(300));e===null||Kt||(e=e.dependencies,e!==null&&Gi(e)&&(Kt=!0))}function Vd(e,t,s,i){Ye=e;var c=0;do{if(Jr&&(Xr=null),qn=0,Jr=!1,25<=c)throw Error(o(301));if(c+=1,Yt=bt=null,e.updateQueue!=null){var u=e.updateQueue;u.lastEffect=null,u.events=null,u.stores=null,u.memoCache!=null&&(u.memoCache.index=0)}N.H=Ah,u=t(s,i)}while(Jr);return u}function D0(){var e=N.H,t=e.useState()[0];return t=typeof t.then=="function"?Pn(t):t,e=e.useState()[0],(bt!==null?bt.memoizedState:null)!==e&&(Ye.flags|=1024),t}function Yo(){var e=el!==0;return el=0,e}function Ko(e,t,s){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s}function Vo(e){if(Fi){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Fi=!1}ba=0,Yt=bt=Ye=null,Jr=!1,qn=el=0,Xr=null}function hs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yt===null?Ye.memoizedState=Yt=e:Yt=Yt.next=e,Yt}function It(){if(bt===null){var e=Ye.alternate;e=e!==null?e.memoizedState:null}else e=bt.next;var t=Yt===null?Ye.memoizedState:Yt.next;if(t!==null)Yt=t,bt=e;else{if(e===null)throw Ye.alternate===null?Error(o(467)):Error(o(310));bt=e,e={memoizedState:bt.memoizedState,baseState:bt.baseState,baseQueue:bt.baseQueue,queue:bt.queue,next:null},Yt===null?Ye.memoizedState=Yt=e:Yt=Yt.next=e}return Yt}function tl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Pn(e){var t=qn;return qn+=1,Xr===null&&(Xr=[]),e=Ld(Xr,e,t),t=Ye,(Yt===null?t.memoizedState:Yt.next)===null&&(t=t.alternate,N.H=t===null||t.memoizedState===null?kh:nc),e}function sl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Pn(e);if(e.$$typeof===S)return ss(e)}throw Error(o(438,String(e)))}function Qo(e){var t=null,s=Ye.updateQueue;if(s!==null&&(t=s.memoCache),t==null){var i=Ye.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(c){return c.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),s===null&&(s=tl(),Ye.updateQueue=s),s.memoCache=t,s=t.data[t.index],s===void 0)for(s=t.data[t.index]=Array(e),i=0;i<e;i++)s[i]=ze;return t.index++,s}function xa(e,t){return typeof t=="function"?t(e):t}function al(e){var t=It();return Zo(t,bt,e)}function Zo(e,t,s){var i=e.queue;if(i===null)throw Error(o(311));i.lastRenderedReducer=s;var c=e.baseQueue,u=i.pending;if(u!==null){if(c!==null){var m=c.next;c.next=u.next,u.next=m}t.baseQueue=c=u,i.pending=null}if(u=e.baseState,c===null)e.memoizedState=u;else{t=c.next;var y=m=null,T=null,q=t,F=!1;do{var ne=q.lane&-536870913;if(ne!==q.lane?(et&ne)===ne:(ba&ne)===ne){var Y=q.revertLane;if(Y===0)T!==null&&(T=T.next={lane:0,revertLane:0,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),ne===Yr&&(F=!0);else if((ba&Y)===Y){q=q.next,Y===Yr&&(F=!0);continue}else ne={lane:0,revertLane:q.revertLane,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},T===null?(y=T=ne,m=u):T=T.next=ne,Ye.lanes|=Y,Ga|=Y;ne=q.action,br&&s(u,ne),u=q.hasEagerState?q.eagerState:s(u,ne)}else Y={lane:ne,revertLane:q.revertLane,gesture:q.gesture,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},T===null?(y=T=Y,m=u):T=T.next=Y,Ye.lanes|=ne,Ga|=ne;q=q.next}while(q!==null&&q!==t);if(T===null?m=u:T.next=y,!Ss(u,e.memoizedState)&&(Kt=!0,F&&(s=Kr,s!==null)))throw s;e.memoizedState=u,e.baseState=m,e.baseQueue=T,i.lastRenderedState=u}return c===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function Jo(e){var t=It(),s=t.queue;if(s===null)throw Error(o(311));s.lastRenderedReducer=e;var i=s.dispatch,c=s.pending,u=t.memoizedState;if(c!==null){s.pending=null;var m=c=c.next;do u=e(u,m.action),m=m.next;while(m!==c);Ss(u,t.memoizedState)||(Kt=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),s.lastRenderedState=u}return[u,i]}function Qd(e,t,s){var i=Ye,c=It(),u=at;if(u){if(s===void 0)throw Error(o(407));s=s()}else s=t();var m=!Ss((bt||c).memoizedState,s);if(m&&(c.memoizedState=s,Kt=!0),c=c.queue,Fo(Xd.bind(null,i,c,e),[e]),c.getSnapshot!==t||m||Yt!==null&&Yt.memoizedState.tag&1){if(i.flags|=2048,Wr(9,{destroy:void 0},Jd.bind(null,i,c,s,t),null),vt===null)throw Error(o(349));u||(ba&127)!==0||Zd(i,t,s)}return s}function Zd(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=Ye.updateQueue,t===null?(t=tl(),Ye.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function Jd(e,t,s,i){t.value=s,t.getSnapshot=i,Wd(t)&&Fd(e)}function Xd(e,t,s){return s(function(){Wd(t)&&Fd(e)})}function Wd(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!Ss(e,s)}catch{return!0}}function Fd(e){var t=or(e,2);t!==null&&ws(t,e,2)}function Xo(e){var t=hs();if(typeof e=="function"){var s=e;if(e=s(),br){B(!0);try{s()}finally{B(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:e},t}function eh(e,t,s,i){return e.baseState=s,Zo(e,bt,typeof i=="function"?i:xa)}function U0(e,t,s,i,c){if(il(e))throw Error(o(485));if(e=t.action,e!==null){var u={payload:c,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(m){u.listeners.push(m)}};N.T!==null?s(!0):u.isTransition=!1,i(u),s=t.pending,s===null?(u.next=t.pending=u,th(t,u)):(u.next=s.next,t.pending=s.next=u)}}function th(e,t){var s=t.action,i=t.payload,c=e.state;if(t.isTransition){var u=N.T,m={};N.T=m;try{var y=s(c,i),T=N.S;T!==null&&T(m,y),sh(e,t,y)}catch(q){Wo(e,t,q)}finally{u!==null&&m.types!==null&&(u.types=m.types),N.T=u}}else try{u=s(c,i),sh(e,t,u)}catch(q){Wo(e,t,q)}}function sh(e,t,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(i){ah(e,t,i)},function(i){return Wo(e,t,i)}):ah(e,t,s)}function ah(e,t,s){t.status="fulfilled",t.value=s,rh(t),e.state=s,t=e.pending,t!==null&&(s=t.next,s===t?e.pending=null:(s=s.next,t.next=s,th(e,s)))}function Wo(e,t,s){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=s,rh(t),t=t.next;while(t!==i)}e.action=null}function rh(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function nh(e,t){return t}function ih(e,t){if(at){var s=vt.formState;if(s!==null){e:{var i=Ye;if(at){if(Tt){t:{for(var c=Tt,u=Ys;c.nodeType!==8;){if(!u){c=null;break t}if(c=Vs(c.nextSibling),c===null){c=null;break t}}u=c.data,c=u==="F!"||u==="F"?c:null}if(c){Tt=Vs(c.nextSibling),i=c.data==="F!";break e}}Da(i)}i=!1}i&&(t=s[0])}}return s=hs(),s.memoizedState=s.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:nh,lastRenderedState:t},s.queue=i,s=Sh.bind(null,Ye,i),i.dispatch=s,i=Xo(!1),u=rc.bind(null,Ye,!1,i.queue),i=hs(),c={state:t,dispatch:null,action:e,pending:null},i.queue=c,s=U0.bind(null,Ye,c,u,s),c.dispatch=s,i.memoizedState=e,[t,s,!1]}function lh(e){var t=It();return oh(t,bt,e)}function oh(e,t,s){if(t=Zo(e,t,nh)[0],e=al(xa)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=Pn(t)}catch(m){throw m===Vr?Vi:m}else i=t;t=It();var c=t.queue,u=c.dispatch;return s!==t.memoizedState&&(Ye.flags|=2048,Wr(9,{destroy:void 0},L0.bind(null,c,s),null)),[i,u,e]}function L0(e,t){e.action=t}function ch(e){var t=It(),s=bt;if(s!==null)return oh(t,s,e);It(),t=t.memoizedState,s=It();var i=s.queue.dispatch;return s.memoizedState=e,[t,i,!1]}function Wr(e,t,s,i){return e={tag:e,create:s,deps:i,inst:t,next:null},t=Ye.updateQueue,t===null&&(t=tl(),Ye.updateQueue=t),s=t.lastEffect,s===null?t.lastEffect=e.next=e:(i=s.next,s.next=e,e.next=i,t.lastEffect=e),e}function uh(){return It().memoizedState}function rl(e,t,s,i){var c=hs();Ye.flags|=e,c.memoizedState=Wr(1|t,{destroy:void 0},s,i===void 0?null:i)}function nl(e,t,s,i){var c=It();i=i===void 0?null:i;var u=c.memoizedState.inst;bt!==null&&i!==null&&Po(i,bt.memoizedState.deps)?c.memoizedState=Wr(t,u,s,i):(Ye.flags|=e,c.memoizedState=Wr(1|t,u,s,i))}function dh(e,t){rl(8390656,8,e,t)}function Fo(e,t){nl(2048,8,e,t)}function B0(e){Ye.flags|=4;var t=Ye.updateQueue;if(t===null)t=tl(),Ye.updateQueue=t,t.events=[e];else{var s=t.events;s===null?t.events=[e]:s.push(e)}}function hh(e){var t=It().memoizedState;return B0({ref:t,nextImpl:e}),function(){if((ht&2)!==0)throw Error(o(440));return t.impl.apply(void 0,arguments)}}function fh(e,t){return nl(4,2,e,t)}function mh(e,t){return nl(4,4,e,t)}function ph(e,t){if(typeof t=="function"){e=e();var s=t(e);return function(){typeof s=="function"?s():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function gh(e,t,s){s=s!=null?s.concat([e]):null,nl(4,4,ph.bind(null,t,e),s)}function ec(){}function bh(e,t){var s=It();t=t===void 0?null:t;var i=s.memoizedState;return t!==null&&Po(t,i[1])?i[0]:(s.memoizedState=[e,t],e)}function xh(e,t){var s=It();t=t===void 0?null:t;var i=s.memoizedState;if(t!==null&&Po(t,i[1]))return i[0];if(i=e(),br){B(!0);try{e()}finally{B(!1)}}return s.memoizedState=[i,t],i}function tc(e,t,s){return s===void 0||(ba&1073741824)!==0&&(et&261930)===0?e.memoizedState=t:(e.memoizedState=s,e=vf(),Ye.lanes|=e,Ga|=e,s)}function yh(e,t,s,i){return Ss(s,t)?s:Zr.current!==null?(e=tc(e,s,i),Ss(e,t)||(Kt=!0),e):(ba&42)===0||(ba&1073741824)!==0&&(et&261930)===0?(Kt=!0,e.memoizedState=s):(e=vf(),Ye.lanes|=e,Ga|=e,t)}function vh(e,t,s,i,c){var u=J.p;J.p=u!==0&&8>u?u:8;var m=N.T,y={};N.T=y,rc(e,!1,t,s);try{var T=c(),q=N.S;if(q!==null&&q(y,T),T!==null&&typeof T=="object"&&typeof T.then=="function"){var F=z0(T,i);Gn(e,t,F,Cs(e))}else Gn(e,t,i,Cs(e))}catch(ne){Gn(e,t,{then:function(){},status:"rejected",reason:ne},Cs())}finally{J.p=u,m!==null&&y.types!==null&&(m.types=y.types),N.T=m}}function H0(){}function sc(e,t,s,i){if(e.tag!==5)throw Error(o(476));var c=wh(e).queue;vh(e,c,t,ie,s===null?H0:function(){return jh(e),s(i)})}function wh(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:ie,baseState:ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:ie},next:null};var s={};return t.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:s},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function jh(e){var t=wh(e);t.next===null&&(t=e.alternate.memoizedState),Gn(e,t.next.queue,{},Cs())}function ac(){return ss(li)}function _h(){return It().memoizedState}function Nh(){return It().memoizedState}function $0(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var s=Cs();e=Ba(s);var i=Ha(t,e,s);i!==null&&(ws(i,t,s),Hn(i,t,s)),t={cache:Ro()},e.payload=t;return}t=t.return}}function I0(e,t,s){var i=Cs();s={lane:i,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},il(e)?Eh(t,s):(s=wo(e,t,s,i),s!==null&&(ws(s,e,i),Th(s,t,i)))}function Sh(e,t,s){var i=Cs();Gn(e,t,s,i)}function Gn(e,t,s,i){var c={lane:i,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(il(e))Eh(t,c);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var m=t.lastRenderedState,y=u(m,s);if(c.hasEagerState=!0,c.eagerState=y,Ss(y,m))return $i(e,t,c,0),vt===null&&Hi(),!1}catch{}finally{}if(s=wo(e,t,c,i),s!==null)return ws(s,e,i),Th(s,t,i),!0}return!1}function rc(e,t,s,i){if(i={lane:2,revertLane:Uc(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},il(e)){if(t)throw Error(o(479))}else t=wo(e,s,i,2),t!==null&&ws(t,e,2)}function il(e){var t=e.alternate;return e===Ye||t!==null&&t===Ye}function Eh(e,t){Jr=Fi=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function Th(e,t,s){if((s&4194048)!==0){var i=t.lanes;i&=e.pendingLanes,s|=i,t.lanes=s,Jt(e,s)}}var Yn={readContext:ss,use:sl,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useLayoutEffect:Dt,useInsertionEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useSyncExternalStore:Dt,useId:Dt,useHostTransitionStatus:Dt,useFormState:Dt,useActionState:Dt,useOptimistic:Dt,useMemoCache:Dt,useCacheRefresh:Dt};Yn.useEffectEvent=Dt;var kh={readContext:ss,use:sl,useCallback:function(e,t){return hs().memoizedState=[e,t===void 0?null:t],e},useContext:ss,useEffect:dh,useImperativeHandle:function(e,t,s){s=s!=null?s.concat([e]):null,rl(4194308,4,ph.bind(null,t,e),s)},useLayoutEffect:function(e,t){return rl(4194308,4,e,t)},useInsertionEffect:function(e,t){rl(4,2,e,t)},useMemo:function(e,t){var s=hs();t=t===void 0?null:t;var i=e();if(br){B(!0);try{e()}finally{B(!1)}}return s.memoizedState=[i,t],i},useReducer:function(e,t,s){var i=hs();if(s!==void 0){var c=s(t);if(br){B(!0);try{s(t)}finally{B(!1)}}}else c=t;return i.memoizedState=i.baseState=c,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:c},i.queue=e,e=e.dispatch=I0.bind(null,Ye,e),[i.memoizedState,e]},useRef:function(e){var t=hs();return e={current:e},t.memoizedState=e},useState:function(e){e=Xo(e);var t=e.queue,s=Sh.bind(null,Ye,t);return t.dispatch=s,[e.memoizedState,s]},useDebugValue:ec,useDeferredValue:function(e,t){var s=hs();return tc(s,e,t)},useTransition:function(){var e=Xo(!1);return e=vh.bind(null,Ye,e.queue,!0,!1),hs().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,s){var i=Ye,c=hs();if(at){if(s===void 0)throw Error(o(407));s=s()}else{if(s=t(),vt===null)throw Error(o(349));(et&127)!==0||Zd(i,t,s)}c.memoizedState=s;var u={value:s,getSnapshot:t};return c.queue=u,dh(Xd.bind(null,i,u,e),[e]),i.flags|=2048,Wr(9,{destroy:void 0},Jd.bind(null,i,u,s,t),null),s},useId:function(){var e=hs(),t=vt.identifierPrefix;if(at){var s=la,i=ia;s=(i&~(1<<32-U(i)-1)).toString(32)+s,t="_"+t+"R_"+s,s=el++,0<s&&(t+="H"+s.toString(32)),t+="_"}else s=M0++,t="_"+t+"r_"+s.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:ac,useFormState:ih,useActionState:ih,useOptimistic:function(e){var t=hs();t.memoizedState=t.baseState=e;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=s,t=rc.bind(null,Ye,!0,s),s.dispatch=t,[e,t]},useMemoCache:Qo,useCacheRefresh:function(){return hs().memoizedState=$0.bind(null,Ye)},useEffectEvent:function(e){var t=hs(),s={impl:e};return t.memoizedState=s,function(){if((ht&2)!==0)throw Error(o(440));return s.impl.apply(void 0,arguments)}}},nc={readContext:ss,use:sl,useCallback:bh,useContext:ss,useEffect:Fo,useImperativeHandle:gh,useInsertionEffect:fh,useLayoutEffect:mh,useMemo:xh,useReducer:al,useRef:uh,useState:function(){return al(xa)},useDebugValue:ec,useDeferredValue:function(e,t){var s=It();return yh(s,bt.memoizedState,e,t)},useTransition:function(){var e=al(xa)[0],t=It().memoizedState;return[typeof e=="boolean"?e:Pn(e),t]},useSyncExternalStore:Qd,useId:_h,useHostTransitionStatus:ac,useFormState:lh,useActionState:lh,useOptimistic:function(e,t){var s=It();return eh(s,bt,e,t)},useMemoCache:Qo,useCacheRefresh:Nh};nc.useEffectEvent=hh;var Ah={readContext:ss,use:sl,useCallback:bh,useContext:ss,useEffect:Fo,useImperativeHandle:gh,useInsertionEffect:fh,useLayoutEffect:mh,useMemo:xh,useReducer:Jo,useRef:uh,useState:function(){return Jo(xa)},useDebugValue:ec,useDeferredValue:function(e,t){var s=It();return bt===null?tc(s,e,t):yh(s,bt.memoizedState,e,t)},useTransition:function(){var e=Jo(xa)[0],t=It().memoizedState;return[typeof e=="boolean"?e:Pn(e),t]},useSyncExternalStore:Qd,useId:_h,useHostTransitionStatus:ac,useFormState:ch,useActionState:ch,useOptimistic:function(e,t){var s=It();return bt!==null?eh(s,bt,e,t):(s.baseState=e,[e,s.queue.dispatch])},useMemoCache:Qo,useCacheRefresh:Nh};Ah.useEffectEvent=hh;function ic(e,t,s,i){t=e.memoizedState,s=s(i,t),s=s==null?t:x({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var lc={enqueueSetState:function(e,t,s){e=e._reactInternals;var i=Cs(),c=Ba(i);c.payload=t,s!=null&&(c.callback=s),t=Ha(e,c,i),t!==null&&(ws(t,e,i),Hn(t,e,i))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var i=Cs(),c=Ba(i);c.tag=1,c.payload=t,s!=null&&(c.callback=s),t=Ha(e,c,i),t!==null&&(ws(t,e,i),Hn(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=Cs(),i=Ba(s);i.tag=2,t!=null&&(i.callback=t),t=Ha(e,i,s),t!==null&&(ws(t,e,s),Hn(t,e,s))}};function Oh(e,t,s,i,c,u,m){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,u,m):t.prototype&&t.prototype.isPureReactComponent?!Cn(s,i)||!Cn(c,u):!0}function Ch(e,t,s,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,i),t.state!==e&&lc.enqueueReplaceState(t,t.state,null)}function xr(e,t){var s=t;if("ref"in t){s={};for(var i in t)i!=="ref"&&(s[i]=t[i])}if(e=e.defaultProps){s===t&&(s=x({},s));for(var c in e)s[c]===void 0&&(s[c]=e[c])}return s}function Rh(e){Bi(e)}function zh(e){console.error(e)}function Mh(e){Bi(e)}function ll(e,t){try{var s=e.onUncaughtError;s(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function Dh(e,t,s){try{var i=e.onCaughtError;i(s.value,{componentStack:s.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function oc(e,t,s){return s=Ba(s),s.tag=3,s.payload={element:null},s.callback=function(){ll(e,t)},s}function Uh(e){return e=Ba(e),e.tag=3,e}function Lh(e,t,s,i){var c=s.type.getDerivedStateFromError;if(typeof c=="function"){var u=i.value;e.payload=function(){return c(u)},e.callback=function(){Dh(t,s,i)}}var m=s.stateNode;m!==null&&typeof m.componentDidCatch=="function"&&(e.callback=function(){Dh(t,s,i),typeof c!="function"&&(Ya===null?Ya=new Set([this]):Ya.add(this));var y=i.stack;this.componentDidCatch(i.value,{componentStack:y!==null?y:""})})}function q0(e,t,s,i,c){if(s.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=s.alternate,t!==null&&Gr(t,s,c,!0),s=Ts.current,s!==null){switch(s.tag){case 31:case 13:return Ks===null?yl():s.alternate===null&&Ut===0&&(Ut=3),s.flags&=-257,s.flags|=65536,s.lanes=c,i===Qi?s.flags|=16384:(t=s.updateQueue,t===null?s.updateQueue=new Set([i]):t.add(i),zc(e,i,c)),!1;case 22:return s.flags|=65536,i===Qi?s.flags|=16384:(t=s.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},s.updateQueue=t):(s=t.retryQueue,s===null?t.retryQueue=new Set([i]):s.add(i)),zc(e,i,c)),!1}throw Error(o(435,s.tag))}return zc(e,i,c),yl(),!1}if(at)return t=Ts.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=c,i!==To&&(e=Error(o(422),{cause:i}),Mn(qs(e,s)))):(i!==To&&(t=Error(o(423),{cause:i}),Mn(qs(t,s))),e=e.current.alternate,e.flags|=65536,c&=-c,e.lanes|=c,i=qs(i,s),c=oc(e.stateNode,i,c),Bo(e,c),Ut!==4&&(Ut=2)),!1;var u=Error(o(520),{cause:i});if(u=qs(u,s),Fn===null?Fn=[u]:Fn.push(u),Ut!==4&&(Ut=2),t===null)return!0;i=qs(i,s),s=t;do{switch(s.tag){case 3:return s.flags|=65536,e=c&-c,s.lanes|=e,e=oc(s.stateNode,i,e),Bo(s,e),!1;case 1:if(t=s.type,u=s.stateNode,(s.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||u!==null&&typeof u.componentDidCatch=="function"&&(Ya===null||!Ya.has(u))))return s.flags|=65536,c&=-c,s.lanes|=c,c=Uh(c),Lh(c,e,s,i),Bo(s,c),!1}s=s.return}while(s!==null);return!1}var cc=Error(o(461)),Kt=!1;function as(e,t,s,i){t.child=e===null?Id(t,null,s,i):gr(t,e.child,s,i)}function Bh(e,t,s,i,c){s=s.render;var u=t.ref;if("ref"in i){var m={};for(var y in i)y!=="ref"&&(m[y]=i[y])}else m=i;return hr(t),i=Go(e,t,s,m,u,c),y=Yo(),e!==null&&!Kt?(Ko(e,t,c),ya(e,t,c)):(at&&y&&So(t),t.flags|=1,as(e,t,i,c),t.child)}function Hh(e,t,s,i,c){if(e===null){var u=s.type;return typeof u=="function"&&!jo(u)&&u.defaultProps===void 0&&s.compare===null?(t.tag=15,t.type=u,$h(e,t,u,i,c)):(e=qi(s.type,null,i,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,!bc(e,c)){var m=u.memoizedProps;if(s=s.compare,s=s!==null?s:Cn,s(m,i)&&e.ref===t.ref)return ya(e,t,c)}return t.flags|=1,e=fa(u,i),e.ref=t.ref,e.return=t,t.child=e}function $h(e,t,s,i,c){if(e!==null){var u=e.memoizedProps;if(Cn(u,i)&&e.ref===t.ref)if(Kt=!1,t.pendingProps=i=u,bc(e,c))(e.flags&131072)!==0&&(Kt=!0);else return t.lanes=e.lanes,ya(e,t,c)}return uc(e,t,s,i,c)}function Ih(e,t,s,i){var c=i.children,u=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.mode==="hidden"){if((t.flags&128)!==0){if(u=u!==null?u.baseLanes|s:s,e!==null){for(i=t.child=e.child,c=0;i!==null;)c=c|i.lanes|i.childLanes,i=i.sibling;i=c&~u}else i=0,t.child=null;return qh(e,t,u,s,i)}if((s&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Ki(t,u!==null?u.cachePool:null),u!==null?Gd(t,u):$o(),Yd(t);else return i=t.lanes=536870912,qh(e,t,u!==null?u.baseLanes|s:s,s,i)}else u!==null?(Ki(t,u.cachePool),Gd(t,u),Ia(),t.memoizedState=null):(e!==null&&Ki(t,null),$o(),Ia());return as(e,t,c,s),t.child}function Kn(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function qh(e,t,s,i,c){var u=Mo();return u=u===null?null:{parent:Gt._currentValue,pool:u},t.memoizedState={baseLanes:s,cachePool:u},e!==null&&Ki(t,null),$o(),Yd(t),e!==null&&Gr(e,t,i,!0),t.childLanes=c,null}function ol(e,t){return t=ul({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Ph(e,t,s){return gr(t,e.child,null,s),e=ol(t,t.pendingProps),e.flags|=2,ks(t),t.memoizedState=null,e}function P0(e,t,s){var i=t.pendingProps,c=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(at){if(i.mode==="hidden")return e=ol(t,i),t.lanes=536870912,Kn(null,e);if(qo(t),(e=Tt)?(e=sm(e,Ys),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:za!==null?{id:ia,overflow:la}:null,retryLane:536870912,hydrationErrors:null},s=Ed(e),s.return=t,t.child=s,ts=t,Tt=null)):e=null,e===null)throw Da(t);return t.lanes=536870912,null}return ol(t,i)}var u=e.memoizedState;if(u!==null){var m=u.dehydrated;if(qo(t),c)if(t.flags&256)t.flags&=-257,t=Ph(e,t,s);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(o(558));else if(Kt||Gr(e,t,s,!1),c=(s&e.childLanes)!==0,Kt||c){if(i=vt,i!==null&&(m=ls(i,s),m!==0&&m!==u.retryLane))throw u.retryLane=m,or(e,m),ws(i,e,m),cc;yl(),t=Ph(e,t,s)}else e=u.treeContext,Tt=Vs(m.nextSibling),ts=t,at=!0,Ma=null,Ys=!1,e!==null&&Ad(t,e),t=ol(t,i),t.flags|=4096;return t}return e=fa(e.child,{mode:i.mode,children:i.children}),e.ref=t.ref,t.child=e,e.return=t,e}function cl(e,t){var s=t.ref;if(s===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(o(284));(e===null||e.ref!==s)&&(t.flags|=4194816)}}function uc(e,t,s,i,c){return hr(t),s=Go(e,t,s,i,void 0,c),i=Yo(),e!==null&&!Kt?(Ko(e,t,c),ya(e,t,c)):(at&&i&&So(t),t.flags|=1,as(e,t,s,c),t.child)}function Gh(e,t,s,i,c,u){return hr(t),t.updateQueue=null,s=Vd(t,i,s,c),Kd(e),i=Yo(),e!==null&&!Kt?(Ko(e,t,u),ya(e,t,u)):(at&&i&&So(t),t.flags|=1,as(e,t,s,u),t.child)}function Yh(e,t,s,i,c){if(hr(t),t.stateNode===null){var u=$r,m=s.contextType;typeof m=="object"&&m!==null&&(u=ss(m)),u=new s(i,u),t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=lc,t.stateNode=u,u._reactInternals=t,u=t.stateNode,u.props=i,u.state=t.memoizedState,u.refs={},Uo(t),m=s.contextType,u.context=typeof m=="object"&&m!==null?ss(m):$r,u.state=t.memoizedState,m=s.getDerivedStateFromProps,typeof m=="function"&&(ic(t,s,m,i),u.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(m=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),m!==u.state&&lc.enqueueReplaceState(u,u.state,null),In(t,i,u,c),$n(),u.state=t.memoizedState),typeof u.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){u=t.stateNode;var y=t.memoizedProps,T=xr(s,y);u.props=T;var q=u.context,F=s.contextType;m=$r,typeof F=="object"&&F!==null&&(m=ss(F));var ne=s.getDerivedStateFromProps;F=typeof ne=="function"||typeof u.getSnapshotBeforeUpdate=="function",y=t.pendingProps!==y,F||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(y||q!==m)&&Ch(t,u,i,m),La=!1;var Y=t.memoizedState;u.state=Y,In(t,i,u,c),$n(),q=t.memoizedState,y||Y!==q||La?(typeof ne=="function"&&(ic(t,s,ne,i),q=t.memoizedState),(T=La||Oh(t,s,T,i,Y,q,m))?(F||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=q),u.props=i,u.state=q,u.context=m,i=T):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{u=t.stateNode,Lo(e,t),m=t.memoizedProps,F=xr(s,m),u.props=F,ne=t.pendingProps,Y=u.context,q=s.contextType,T=$r,typeof q=="object"&&q!==null&&(T=ss(q)),y=s.getDerivedStateFromProps,(q=typeof y=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(m!==ne||Y!==T)&&Ch(t,u,i,T),La=!1,Y=t.memoizedState,u.state=Y,In(t,i,u,c),$n();var V=t.memoizedState;m!==ne||Y!==V||La||e!==null&&e.dependencies!==null&&Gi(e.dependencies)?(typeof y=="function"&&(ic(t,s,y,i),V=t.memoizedState),(F=La||Oh(t,s,F,i,Y,V,T)||e!==null&&e.dependencies!==null&&Gi(e.dependencies))?(q||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(i,V,T),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(i,V,T)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||m===e.memoizedProps&&Y===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&Y===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=V),u.props=i,u.state=V,u.context=T,i=F):(typeof u.componentDidUpdate!="function"||m===e.memoizedProps&&Y===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||m===e.memoizedProps&&Y===e.memoizedState||(t.flags|=1024),i=!1)}return u=i,cl(e,t),i=(t.flags&128)!==0,u||i?(u=t.stateNode,s=i&&typeof s.getDerivedStateFromError!="function"?null:u.render(),t.flags|=1,e!==null&&i?(t.child=gr(t,e.child,null,c),t.child=gr(t,null,s,c)):as(e,t,s,c),t.memoizedState=u.state,e=t.child):e=ya(e,t,c),e}function Kh(e,t,s,i){return ur(),t.flags|=256,as(e,t,s,i),t.child}var dc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function hc(e){return{baseLanes:e,cachePool:Dd()}}function fc(e,t,s){return e=e!==null?e.childLanes&~s:0,t&&(e|=Os),e}function Vh(e,t,s){var i=t.pendingProps,c=!1,u=(t.flags&128)!==0,m;if((m=u)||(m=e!==null&&e.memoizedState===null?!1:($t.current&2)!==0),m&&(c=!0,t.flags&=-129),m=(t.flags&32)!==0,t.flags&=-33,e===null){if(at){if(c?$a(t):Ia(),(e=Tt)?(e=sm(e,Ys),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:za!==null?{id:ia,overflow:la}:null,retryLane:536870912,hydrationErrors:null},s=Ed(e),s.return=t,t.child=s,ts=t,Tt=null)):e=null,e===null)throw Da(t);return Zc(e)?t.lanes=32:t.lanes=536870912,null}var y=i.children;return i=i.fallback,c?(Ia(),c=t.mode,y=ul({mode:"hidden",children:y},c),i=cr(i,c,s,null),y.return=t,i.return=t,y.sibling=i,t.child=y,i=t.child,i.memoizedState=hc(s),i.childLanes=fc(e,m,s),t.memoizedState=dc,Kn(null,i)):($a(t),mc(t,y))}var T=e.memoizedState;if(T!==null&&(y=T.dehydrated,y!==null)){if(u)t.flags&256?($a(t),t.flags&=-257,t=pc(e,t,s)):t.memoizedState!==null?(Ia(),t.child=e.child,t.flags|=128,t=null):(Ia(),y=i.fallback,c=t.mode,i=ul({mode:"visible",children:i.children},c),y=cr(y,c,s,null),y.flags|=2,i.return=t,y.return=t,i.sibling=y,t.child=i,gr(t,e.child,null,s),i=t.child,i.memoizedState=hc(s),i.childLanes=fc(e,m,s),t.memoizedState=dc,t=Kn(null,i));else if($a(t),Zc(y)){if(m=y.nextSibling&&y.nextSibling.dataset,m)var q=m.dgst;m=q,i=Error(o(419)),i.stack="",i.digest=m,Mn({value:i,source:null,stack:null}),t=pc(e,t,s)}else if(Kt||Gr(e,t,s,!1),m=(s&e.childLanes)!==0,Kt||m){if(m=vt,m!==null&&(i=ls(m,s),i!==0&&i!==T.retryLane))throw T.retryLane=i,or(e,i),ws(m,e,i),cc;Qc(y)||yl(),t=pc(e,t,s)}else Qc(y)?(t.flags|=192,t.child=e.child,t=null):(e=T.treeContext,Tt=Vs(y.nextSibling),ts=t,at=!0,Ma=null,Ys=!1,e!==null&&Ad(t,e),t=mc(t,i.children),t.flags|=4096);return t}return c?(Ia(),y=i.fallback,c=t.mode,T=e.child,q=T.sibling,i=fa(T,{mode:"hidden",children:i.children}),i.subtreeFlags=T.subtreeFlags&65011712,q!==null?y=fa(q,y):(y=cr(y,c,s,null),y.flags|=2),y.return=t,i.return=t,i.sibling=y,t.child=i,Kn(null,i),i=t.child,y=e.child.memoizedState,y===null?y=hc(s):(c=y.cachePool,c!==null?(T=Gt._currentValue,c=c.parent!==T?{parent:T,pool:T}:c):c=Dd(),y={baseLanes:y.baseLanes|s,cachePool:c}),i.memoizedState=y,i.childLanes=fc(e,m,s),t.memoizedState=dc,Kn(e.child,i)):($a(t),s=e.child,e=s.sibling,s=fa(s,{mode:"visible",children:i.children}),s.return=t,s.sibling=null,e!==null&&(m=t.deletions,m===null?(t.deletions=[e],t.flags|=16):m.push(e)),t.child=s,t.memoizedState=null,s)}function mc(e,t){return t=ul({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function ul(e,t){return e=Es(22,e,null,t),e.lanes=0,e}function pc(e,t,s){return gr(t,e.child,null,s),e=mc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Qh(e,t,s){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),Oo(e.return,t,s)}function gc(e,t,s,i,c,u){var m=e.memoizedState;m===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:s,tailMode:c,treeForkCount:u}:(m.isBackwards=t,m.rendering=null,m.renderingStartTime=0,m.last=i,m.tail=s,m.tailMode=c,m.treeForkCount=u)}function Zh(e,t,s){var i=t.pendingProps,c=i.revealOrder,u=i.tail;i=i.children;var m=$t.current,y=(m&2)!==0;if(y?(m=m&1|2,t.flags|=128):m&=1,me($t,m),as(e,t,i,s),i=at?zn:0,!y&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Qh(e,s,t);else if(e.tag===19)Qh(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(c){case"forwards":for(s=t.child,c=null;s!==null;)e=s.alternate,e!==null&&Wi(e)===null&&(c=s),s=s.sibling;s=c,s===null?(c=t.child,t.child=null):(c=s.sibling,s.sibling=null),gc(t,!1,c,s,u,i);break;case"backwards":case"unstable_legacy-backwards":for(s=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&Wi(e)===null){t.child=c;break}e=c.sibling,c.sibling=s,s=c,c=e}gc(t,!0,s,null,u,i);break;case"together":gc(t,!1,null,null,void 0,i);break;default:t.memoizedState=null}return t.child}function ya(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),Ga|=t.lanes,(s&t.childLanes)===0)if(e!==null){if(Gr(e,t,s,!1),(s&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(o(153));if(t.child!==null){for(e=t.child,s=fa(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=fa(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function bc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Gi(e)))}function G0(e,t,s){switch(t.tag){case 3:Rt(t,t.stateNode.containerInfo),Ua(t,Gt,e.memoizedState.cache),ur();break;case 27:case 5:$e(t);break;case 4:Rt(t,t.stateNode.containerInfo);break;case 10:Ua(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,qo(t),null;break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?($a(t),t.flags|=128,null):(s&t.child.childLanes)!==0?Vh(e,t,s):($a(t),e=ya(e,t,s),e!==null?e.sibling:null);$a(t);break;case 19:var c=(e.flags&128)!==0;if(i=(s&t.childLanes)!==0,i||(Gr(e,t,s,!1),i=(s&t.childLanes)!==0),c){if(i)return Zh(e,t,s);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),me($t,$t.current),i)break;return null;case 22:return t.lanes=0,Ih(e,t,s,t.pendingProps);case 24:Ua(t,Gt,e.memoizedState.cache)}return ya(e,t,s)}function Jh(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps)Kt=!0;else{if(!bc(e,s)&&(t.flags&128)===0)return Kt=!1,G0(e,t,s);Kt=(e.flags&131072)!==0}else Kt=!1,at&&(t.flags&1048576)!==0&&kd(t,zn,t.index);switch(t.lanes=0,t.tag){case 16:e:{var i=t.pendingProps;if(e=mr(t.elementType),t.type=e,typeof e=="function")jo(e)?(i=xr(e,i),t.tag=1,t=Yh(null,t,e,i,s)):(t.tag=0,t=uc(null,t,e,i,s));else{if(e!=null){var c=e.$$typeof;if(c===Q){t.tag=11,t=Bh(null,t,e,i,s);break e}else if(c===Z){t.tag=14,t=Hh(null,t,e,i,s);break e}}throw t=Se(e)||e,Error(o(306,t,""))}}return t;case 0:return uc(e,t,t.type,t.pendingProps,s);case 1:return i=t.type,c=xr(i,t.pendingProps),Yh(e,t,i,c,s);case 3:e:{if(Rt(t,t.stateNode.containerInfo),e===null)throw Error(o(387));i=t.pendingProps;var u=t.memoizedState;c=u.element,Lo(e,t),In(t,i,null,s);var m=t.memoizedState;if(i=m.cache,Ua(t,Gt,i),i!==u.cache&&Co(t,[Gt],s,!0),$n(),i=m.element,u.isDehydrated)if(u={element:i,isDehydrated:!1,cache:m.cache},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){t=Kh(e,t,i,s);break e}else if(i!==c){c=qs(Error(o(424)),t),Mn(c),t=Kh(e,t,i,s);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Tt=Vs(e.firstChild),ts=t,at=!0,Ma=null,Ys=!0,s=Id(t,null,i,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(ur(),i===c){t=ya(e,t,s);break e}as(e,t,i,s)}t=t.child}return t;case 26:return cl(e,t),e===null?(s=om(t.type,null,t.pendingProps,null))?t.memoizedState=s:at||(s=t.type,e=t.pendingProps,i=El(Le.current).createElement(s),i[Be]=t,i[st]=e,rs(i,s,e),Et(i),t.stateNode=i):t.memoizedState=om(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return $e(t),e===null&&at&&(i=t.stateNode=nm(t.type,t.pendingProps,Le.current),ts=t,Ys=!0,c=Tt,Za(t.type)?(Jc=c,Tt=Vs(i.firstChild)):Tt=c),as(e,t,t.pendingProps.children,s),cl(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&at&&((c=i=Tt)&&(i=vg(i,t.type,t.pendingProps,Ys),i!==null?(t.stateNode=i,ts=t,Tt=Vs(i.firstChild),Ys=!1,c=!0):c=!1),c||Da(t)),$e(t),c=t.type,u=t.pendingProps,m=e!==null?e.memoizedProps:null,i=u.children,Yc(c,u)?i=null:m!==null&&Yc(c,m)&&(t.flags|=32),t.memoizedState!==null&&(c=Go(e,t,D0,null,null,s),li._currentValue=c),cl(e,t),as(e,t,i,s),t.child;case 6:return e===null&&at&&((e=s=Tt)&&(s=wg(s,t.pendingProps,Ys),s!==null?(t.stateNode=s,ts=t,Tt=null,e=!0):e=!1),e||Da(t)),null;case 13:return Vh(e,t,s);case 4:return Rt(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=gr(t,null,i,s):as(e,t,i,s),t.child;case 11:return Bh(e,t,t.type,t.pendingProps,s);case 7:return as(e,t,t.pendingProps,s),t.child;case 8:return as(e,t,t.pendingProps.children,s),t.child;case 12:return as(e,t,t.pendingProps.children,s),t.child;case 10:return i=t.pendingProps,Ua(t,t.type,i.value),as(e,t,i.children,s),t.child;case 9:return c=t.type._context,i=t.pendingProps.children,hr(t),c=ss(c),i=i(c),t.flags|=1,as(e,t,i,s),t.child;case 14:return Hh(e,t,t.type,t.pendingProps,s);case 15:return $h(e,t,t.type,t.pendingProps,s);case 19:return Zh(e,t,s);case 31:return P0(e,t,s);case 22:return Ih(e,t,s,t.pendingProps);case 24:return hr(t),i=ss(Gt),e===null?(c=Mo(),c===null&&(c=vt,u=Ro(),c.pooledCache=u,u.refCount++,u!==null&&(c.pooledCacheLanes|=s),c=u),t.memoizedState={parent:i,cache:c},Uo(t),Ua(t,Gt,c)):((e.lanes&s)!==0&&(Lo(e,t),In(t,null,null,s),$n()),c=e.memoizedState,u=t.memoizedState,c.parent!==i?(c={parent:i,cache:i},t.memoizedState=c,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=c),Ua(t,Gt,i)):(i=u.cache,Ua(t,Gt,i),i!==c.cache&&Co(t,[Gt],s,!0))),as(e,t,t.pendingProps.children,s),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function va(e){e.flags|=4}function xc(e,t,s,i,c){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(c&335544128)===c)if(e.stateNode.complete)e.flags|=8192;else if(Nf())e.flags|=8192;else throw pr=Qi,Do}else e.flags&=-16777217}function Xh(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!fm(t))if(Nf())e.flags|=8192;else throw pr=Qi,Do}function dl(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Ce():536870912,e.lanes|=t,sn|=t)}function Vn(e,t){if(!at)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var i=null;s!==null;)s.alternate!==null&&(i=s),s=s.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function kt(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,i=0;if(t)for(var c=e.child;c!==null;)s|=c.lanes|c.childLanes,i|=c.subtreeFlags&65011712,i|=c.flags&65011712,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)s|=c.lanes|c.childLanes,i|=c.subtreeFlags,i|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=i,e.childLanes=s,t}function Y0(e,t,s){var i=t.pendingProps;switch(Eo(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(t),null;case 1:return kt(t),null;case 3:return s=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),ga(Gt),ft(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Pr(t)?va(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,ko())),kt(t),null;case 26:var c=t.type,u=t.memoizedState;return e===null?(va(t),u!==null?(kt(t),Xh(t,u)):(kt(t),xc(t,c,null,i,s))):u?u!==e.memoizedState?(va(t),kt(t),Xh(t,u)):(kt(t),t.flags&=-16777217):(e=e.memoizedProps,e!==i&&va(t),kt(t),xc(t,c,e,i,s)),null;case 27:if(zt(t),s=Le.current,c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&va(t);else{if(!i){if(t.stateNode===null)throw Error(o(166));return kt(t),null}e=be.current,Pr(t)?Od(t):(e=nm(c,i,s),t.stateNode=e,va(t))}return kt(t),null;case 5:if(zt(t),c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&va(t);else{if(!i){if(t.stateNode===null)throw Error(o(166));return kt(t),null}if(u=be.current,Pr(t))Od(t);else{var m=El(Le.current);switch(u){case 1:u=m.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:u=m.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":u=m.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":u=m.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":u=m.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof i.is=="string"?m.createElement("select",{is:i.is}):m.createElement("select"),i.multiple?u.multiple=!0:i.size&&(u.size=i.size);break;default:u=typeof i.is=="string"?m.createElement(c,{is:i.is}):m.createElement(c)}}u[Be]=t,u[st]=i;e:for(m=t.child;m!==null;){if(m.tag===5||m.tag===6)u.appendChild(m.stateNode);else if(m.tag!==4&&m.tag!==27&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}t.stateNode=u;e:switch(rs(u,c,i),c){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&va(t)}}return kt(t),xc(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,s),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&va(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(o(166));if(e=Le.current,Pr(t)){if(e=t.stateNode,s=t.memoizedProps,i=null,c=ts,c!==null)switch(c.tag){case 27:case 5:i=c.memoizedProps}e[Be]=t,e=!!(e.nodeValue===s||i!==null&&i.suppressHydrationWarning===!0||Qf(e.nodeValue,s)),e||Da(t,!0)}else e=El(e).createTextNode(i),e[Be]=t,t.stateNode=e}return kt(t),null;case 31:if(s=t.memoizedState,e===null||e.memoizedState!==null){if(i=Pr(t),s!==null){if(e===null){if(!i)throw Error(o(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(557));e[Be]=t}else ur(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;kt(t),e=!1}else s=ko(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),e=!0;if(!e)return t.flags&256?(ks(t),t):(ks(t),null);if((t.flags&128)!==0)throw Error(o(558))}return kt(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(c=Pr(t),i!==null&&i.dehydrated!==null){if(e===null){if(!c)throw Error(o(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(o(317));c[Be]=t}else ur(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;kt(t),c=!1}else c=ko(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=c),c=!0;if(!c)return t.flags&256?(ks(t),t):(ks(t),null)}return ks(t),(t.flags&128)!==0?(t.lanes=s,t):(s=i!==null,e=e!==null&&e.memoizedState!==null,s&&(i=t.child,c=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(c=i.alternate.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==c&&(i.flags|=2048)),s!==e&&s&&(t.child.flags|=8192),dl(t,t.updateQueue),kt(t),null);case 4:return ft(),e===null&&$c(t.stateNode.containerInfo),kt(t),null;case 10:return ga(t.type),kt(t),null;case 19:if(X($t),i=t.memoizedState,i===null)return kt(t),null;if(c=(t.flags&128)!==0,u=i.rendering,u===null)if(c)Vn(i,!1);else{if(Ut!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(u=Wi(e),u!==null){for(t.flags|=128,Vn(i,!1),e=u.updateQueue,t.updateQueue=e,dl(t,e),t.subtreeFlags=0,e=s,s=t.child;s!==null;)Sd(s,e),s=s.sibling;return me($t,$t.current&1|2),at&&ma(t,i.treeForkCount),t.child}e=e.sibling}i.tail!==null&&Zt()>gl&&(t.flags|=128,c=!0,Vn(i,!1),t.lanes=4194304)}else{if(!c)if(e=Wi(u),e!==null){if(t.flags|=128,c=!0,e=e.updateQueue,t.updateQueue=e,dl(t,e),Vn(i,!0),i.tail===null&&i.tailMode==="hidden"&&!u.alternate&&!at)return kt(t),null}else 2*Zt()-i.renderingStartTime>gl&&s!==536870912&&(t.flags|=128,c=!0,Vn(i,!1),t.lanes=4194304);i.isBackwards?(u.sibling=t.child,t.child=u):(e=i.last,e!==null?e.sibling=u:t.child=u,i.last=u)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Zt(),e.sibling=null,s=$t.current,me($t,c?s&1|2:s&1),at&&ma(t,i.treeForkCount),e):(kt(t),null);case 22:case 23:return ks(t),Io(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?(s&536870912)!==0&&(t.flags&128)===0&&(kt(t),t.subtreeFlags&6&&(t.flags|=8192)):kt(t),s=t.updateQueue,s!==null&&dl(t,s.retryQueue),s=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==s&&(t.flags|=2048),e!==null&&X(fr),null;case 24:return s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),ga(Gt),kt(t),null;case 25:return null;case 30:return null}throw Error(o(156,t.tag))}function K0(e,t){switch(Eo(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ga(Gt),ft(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return zt(t),null;case 31:if(t.memoizedState!==null){if(ks(t),t.alternate===null)throw Error(o(340));ur()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(ks(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(o(340));ur()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return X($t),null;case 4:return ft(),null;case 10:return ga(t.type),null;case 22:case 23:return ks(t),Io(),e!==null&&X(fr),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return ga(Gt),null;case 25:return null;default:return null}}function Wh(e,t){switch(Eo(t),t.tag){case 3:ga(Gt),ft();break;case 26:case 27:case 5:zt(t);break;case 4:ft();break;case 31:t.memoizedState!==null&&ks(t);break;case 13:ks(t);break;case 19:X($t);break;case 10:ga(t.type);break;case 22:case 23:ks(t),Io(),e!==null&&X(fr);break;case 24:ga(Gt)}}function Qn(e,t){try{var s=t.updateQueue,i=s!==null?s.lastEffect:null;if(i!==null){var c=i.next;s=c;do{if((s.tag&e)===e){i=void 0;var u=s.create,m=s.inst;i=u(),m.destroy=i}s=s.next}while(s!==c)}}catch(y){pt(t,t.return,y)}}function qa(e,t,s){try{var i=t.updateQueue,c=i!==null?i.lastEffect:null;if(c!==null){var u=c.next;i=u;do{if((i.tag&e)===e){var m=i.inst,y=m.destroy;if(y!==void 0){m.destroy=void 0,c=t;var T=s,q=y;try{q()}catch(F){pt(c,T,F)}}}i=i.next}while(i!==u)}}catch(F){pt(t,t.return,F)}}function Fh(e){var t=e.updateQueue;if(t!==null){var s=e.stateNode;try{Pd(t,s)}catch(i){pt(e,e.return,i)}}}function ef(e,t,s){s.props=xr(e.type,e.memoizedProps),s.state=e.memoizedState;try{s.componentWillUnmount()}catch(i){pt(e,t,i)}}function Zn(e,t){try{var s=e.ref;if(s!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof s=="function"?e.refCleanup=s(i):s.current=i}}catch(c){pt(e,t,c)}}function oa(e,t){var s=e.ref,i=e.refCleanup;if(s!==null)if(typeof i=="function")try{i()}catch(c){pt(e,t,c)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(c){pt(e,t,c)}else s.current=null}function tf(e){var t=e.type,s=e.memoizedProps,i=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":s.autoFocus&&i.focus();break e;case"img":s.src?i.src=s.src:s.srcSet&&(i.srcset=s.srcSet)}}catch(c){pt(e,e.return,c)}}function yc(e,t,s){try{var i=e.stateNode;mg(i,e.type,s,t),i[st]=t}catch(c){pt(e,e.return,c)}}function sf(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Za(e.type)||e.tag===4}function vc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||sf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Za(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function wc(e,t,s){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(e,t):(t=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,t.appendChild(e),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=da));else if(i!==4&&(i===27&&Za(e.type)&&(s=e.stateNode,t=null),e=e.child,e!==null))for(wc(e,t,s),e=e.sibling;e!==null;)wc(e,t,s),e=e.sibling}function hl(e,t,s){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(i!==4&&(i===27&&Za(e.type)&&(s=e.stateNode),e=e.child,e!==null))for(hl(e,t,s),e=e.sibling;e!==null;)hl(e,t,s),e=e.sibling}function af(e){var t=e.stateNode,s=e.memoizedProps;try{for(var i=e.type,c=t.attributes;c.length;)t.removeAttributeNode(c[0]);rs(t,i,s),t[Be]=e,t[st]=s}catch(u){pt(e,e.return,u)}}var wa=!1,Vt=!1,jc=!1,rf=typeof WeakSet=="function"?WeakSet:Set,es=null;function V0(e,t){if(e=e.containerInfo,Pc=zl,e=gd(e),po(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var i=s.getSelection&&s.getSelection();if(i&&i.rangeCount!==0){s=i.anchorNode;var c=i.anchorOffset,u=i.focusNode;i=i.focusOffset;try{s.nodeType,u.nodeType}catch{s=null;break e}var m=0,y=-1,T=-1,q=0,F=0,ne=e,Y=null;t:for(;;){for(var V;ne!==s||c!==0&&ne.nodeType!==3||(y=m+c),ne!==u||i!==0&&ne.nodeType!==3||(T=m+i),ne.nodeType===3&&(m+=ne.nodeValue.length),(V=ne.firstChild)!==null;)Y=ne,ne=V;for(;;){if(ne===e)break t;if(Y===s&&++q===c&&(y=m),Y===u&&++F===i&&(T=m),(V=ne.nextSibling)!==null)break;ne=Y,Y=ne.parentNode}ne=V}s=y===-1||T===-1?null:{start:y,end:T}}else s=null}s=s||{start:0,end:0}}else s=null;for(Gc={focusedElem:e,selectionRange:s},zl=!1,es=t;es!==null;)if(t=es,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,es=e;else for(;es!==null;){switch(t=es,u=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(s=0;s<e.length;s++)c=e[s],c.ref.impl=c.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&u!==null){e=void 0,s=t,c=u.memoizedProps,u=u.memoizedState,i=s.stateNode;try{var je=xr(s.type,c);e=i.getSnapshotBeforeUpdate(je,u),i.__reactInternalSnapshotBeforeUpdate=e}catch(Re){pt(s,s.return,Re)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,s=e.nodeType,s===9)Vc(e);else if(s===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Vc(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(o(163))}if(e=t.sibling,e!==null){e.return=t.return,es=e;break}es=t.return}}function nf(e,t,s){var i=s.flags;switch(s.tag){case 0:case 11:case 15:_a(e,s),i&4&&Qn(5,s);break;case 1:if(_a(e,s),i&4)if(e=s.stateNode,t===null)try{e.componentDidMount()}catch(m){pt(s,s.return,m)}else{var c=xr(s.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(c,t,e.__reactInternalSnapshotBeforeUpdate)}catch(m){pt(s,s.return,m)}}i&64&&Fh(s),i&512&&Zn(s,s.return);break;case 3:if(_a(e,s),i&64&&(e=s.updateQueue,e!==null)){if(t=null,s.child!==null)switch(s.child.tag){case 27:case 5:t=s.child.stateNode;break;case 1:t=s.child.stateNode}try{Pd(e,t)}catch(m){pt(s,s.return,m)}}break;case 27:t===null&&i&4&&af(s);case 26:case 5:_a(e,s),t===null&&i&4&&tf(s),i&512&&Zn(s,s.return);break;case 12:_a(e,s);break;case 31:_a(e,s),i&4&&cf(e,s);break;case 13:_a(e,s),i&4&&uf(e,s),i&64&&(e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(s=sg.bind(null,s),jg(e,s))));break;case 22:if(i=s.memoizedState!==null||wa,!i){t=t!==null&&t.memoizedState!==null||Vt,c=wa;var u=Vt;wa=i,(Vt=t)&&!u?Na(e,s,(s.subtreeFlags&8772)!==0):_a(e,s),wa=c,Vt=u}break;case 30:break;default:_a(e,s)}}function lf(e){var t=e.alternate;t!==null&&(e.alternate=null,lf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&rr(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ot=null,bs=!1;function ja(e,t,s){for(s=s.child;s!==null;)of(e,t,s),s=s.sibling}function of(e,t,s){if(M&&typeof M.onCommitFiberUnmount=="function")try{M.onCommitFiberUnmount(E,s)}catch{}switch(s.tag){case 26:Vt||oa(s,t),ja(e,t,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:Vt||oa(s,t);var i=Ot,c=bs;Za(s.type)&&(Ot=s.stateNode,bs=!1),ja(e,t,s),ri(s.stateNode),Ot=i,bs=c;break;case 5:Vt||oa(s,t);case 6:if(i=Ot,c=bs,Ot=null,ja(e,t,s),Ot=i,bs=c,Ot!==null)if(bs)try{(Ot.nodeType===9?Ot.body:Ot.nodeName==="HTML"?Ot.ownerDocument.body:Ot).removeChild(s.stateNode)}catch(u){pt(s,t,u)}else try{Ot.removeChild(s.stateNode)}catch(u){pt(s,t,u)}break;case 18:Ot!==null&&(bs?(e=Ot,em(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,s.stateNode),dn(e)):em(Ot,s.stateNode));break;case 4:i=Ot,c=bs,Ot=s.stateNode.containerInfo,bs=!0,ja(e,t,s),Ot=i,bs=c;break;case 0:case 11:case 14:case 15:qa(2,s,t),Vt||qa(4,s,t),ja(e,t,s);break;case 1:Vt||(oa(s,t),i=s.stateNode,typeof i.componentWillUnmount=="function"&&ef(s,t,i)),ja(e,t,s);break;case 21:ja(e,t,s);break;case 22:Vt=(i=Vt)||s.memoizedState!==null,ja(e,t,s),Vt=i;break;default:ja(e,t,s)}}function cf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{dn(e)}catch(s){pt(t,t.return,s)}}}function uf(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{dn(e)}catch(s){pt(t,t.return,s)}}function Q0(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new rf),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new rf),t;default:throw Error(o(435,e.tag))}}function fl(e,t){var s=Q0(e);t.forEach(function(i){if(!s.has(i)){s.add(i);var c=ag.bind(null,e,i);i.then(c,c)}})}function xs(e,t){var s=t.deletions;if(s!==null)for(var i=0;i<s.length;i++){var c=s[i],u=e,m=t,y=m;e:for(;y!==null;){switch(y.tag){case 27:if(Za(y.type)){Ot=y.stateNode,bs=!1;break e}break;case 5:Ot=y.stateNode,bs=!1;break e;case 3:case 4:Ot=y.stateNode.containerInfo,bs=!0;break e}y=y.return}if(Ot===null)throw Error(o(160));of(u,m,c),Ot=null,bs=!1,u=c.alternate,u!==null&&(u.return=null),c.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)df(t,e),t=t.sibling}var Ws=null;function df(e,t){var s=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:xs(t,e),ys(e),i&4&&(qa(3,e,e.return),Qn(3,e),qa(5,e,e.return));break;case 1:xs(t,e),ys(e),i&512&&(Vt||s===null||oa(s,s.return)),i&64&&wa&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(s=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=s===null?i:s.concat(i))));break;case 26:var c=Ws;if(xs(t,e),ys(e),i&512&&(Vt||s===null||oa(s,s.return)),i&4){var u=s!==null?s.memoizedState:null;if(i=e.memoizedState,s===null)if(i===null)if(e.stateNode===null){e:{i=e.type,s=e.memoizedProps,c=c.ownerDocument||c;t:switch(i){case"title":u=c.getElementsByTagName("title")[0],(!u||u[_s]||u[Be]||u.namespaceURI==="http://www.w3.org/2000/svg"||u.hasAttribute("itemprop"))&&(u=c.createElement(i),c.head.insertBefore(u,c.querySelector("head > title"))),rs(u,i,s),u[Be]=e,Et(u),i=u;break e;case"link":var m=dm("link","href",c).get(i+(s.href||""));if(m){for(var y=0;y<m.length;y++)if(u=m[y],u.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&u.getAttribute("rel")===(s.rel==null?null:s.rel)&&u.getAttribute("title")===(s.title==null?null:s.title)&&u.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){m.splice(y,1);break t}}u=c.createElement(i),rs(u,i,s),c.head.appendChild(u);break;case"meta":if(m=dm("meta","content",c).get(i+(s.content||""))){for(y=0;y<m.length;y++)if(u=m[y],u.getAttribute("content")===(s.content==null?null:""+s.content)&&u.getAttribute("name")===(s.name==null?null:s.name)&&u.getAttribute("property")===(s.property==null?null:s.property)&&u.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&u.getAttribute("charset")===(s.charSet==null?null:s.charSet)){m.splice(y,1);break t}}u=c.createElement(i),rs(u,i,s),c.head.appendChild(u);break;default:throw Error(o(468,i))}u[Be]=e,Et(u),i=u}e.stateNode=i}else hm(c,e.type,e.stateNode);else e.stateNode=um(c,i,e.memoizedProps);else u!==i?(u===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):u.count--,i===null?hm(c,e.type,e.stateNode):um(c,i,e.memoizedProps)):i===null&&e.stateNode!==null&&yc(e,e.memoizedProps,s.memoizedProps)}break;case 27:xs(t,e),ys(e),i&512&&(Vt||s===null||oa(s,s.return)),s!==null&&i&4&&yc(e,e.memoizedProps,s.memoizedProps);break;case 5:if(xs(t,e),ys(e),i&512&&(Vt||s===null||oa(s,s.return)),e.flags&32){c=e.stateNode;try{zr(c,"")}catch(je){pt(e,e.return,je)}}i&4&&e.stateNode!=null&&(c=e.memoizedProps,yc(e,c,s!==null?s.memoizedProps:c)),i&1024&&(jc=!0);break;case 6:if(xs(t,e),ys(e),i&4){if(e.stateNode===null)throw Error(o(162));i=e.memoizedProps,s=e.stateNode;try{s.nodeValue=i}catch(je){pt(e,e.return,je)}}break;case 3:if(Al=null,c=Ws,Ws=Tl(t.containerInfo),xs(t,e),Ws=c,ys(e),i&4&&s!==null&&s.memoizedState.isDehydrated)try{dn(t.containerInfo)}catch(je){pt(e,e.return,je)}jc&&(jc=!1,hf(e));break;case 4:i=Ws,Ws=Tl(e.stateNode.containerInfo),xs(t,e),ys(e),Ws=i;break;case 12:xs(t,e),ys(e);break;case 31:xs(t,e),ys(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,fl(e,i)));break;case 13:xs(t,e),ys(e),e.child.flags&8192&&e.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(pl=Zt()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,fl(e,i)));break;case 22:c=e.memoizedState!==null;var T=s!==null&&s.memoizedState!==null,q=wa,F=Vt;if(wa=q||c,Vt=F||T,xs(t,e),Vt=F,wa=q,ys(e),i&8192)e:for(t=e.stateNode,t._visibility=c?t._visibility&-2:t._visibility|1,c&&(s===null||T||wa||Vt||yr(e)),s=null,t=e;;){if(t.tag===5||t.tag===26){if(s===null){T=s=t;try{if(u=T.stateNode,c)m=u.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none";else{y=T.stateNode;var ne=T.memoizedProps.style,Y=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;y.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(je){pt(T,T.return,je)}}}else if(t.tag===6){if(s===null){T=t;try{T.stateNode.nodeValue=c?"":T.memoizedProps}catch(je){pt(T,T.return,je)}}}else if(t.tag===18){if(s===null){T=t;try{var V=T.stateNode;c?tm(V,!0):tm(T.stateNode,!1)}catch(je){pt(T,T.return,je)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;s===t&&(s=null),t=t.return}s===t&&(s=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(s=i.retryQueue,s!==null&&(i.retryQueue=null,fl(e,s))));break;case 19:xs(t,e),ys(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,fl(e,i)));break;case 30:break;case 21:break;default:xs(t,e),ys(e)}}function ys(e){var t=e.flags;if(t&2){try{for(var s,i=e.return;i!==null;){if(sf(i)){s=i;break}i=i.return}if(s==null)throw Error(o(160));switch(s.tag){case 27:var c=s.stateNode,u=vc(e);hl(e,u,c);break;case 5:var m=s.stateNode;s.flags&32&&(zr(m,""),s.flags&=-33);var y=vc(e);hl(e,y,m);break;case 3:case 4:var T=s.stateNode.containerInfo,q=vc(e);wc(e,q,T);break;default:throw Error(o(161))}}catch(F){pt(e,e.return,F)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function hf(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;hf(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function _a(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)nf(e,t.alternate,t),t=t.sibling}function yr(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:qa(4,t,t.return),yr(t);break;case 1:oa(t,t.return);var s=t.stateNode;typeof s.componentWillUnmount=="function"&&ef(t,t.return,s),yr(t);break;case 27:ri(t.stateNode);case 26:case 5:oa(t,t.return),yr(t);break;case 22:t.memoizedState===null&&yr(t);break;case 30:yr(t);break;default:yr(t)}e=e.sibling}}function Na(e,t,s){for(s=s&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,c=e,u=t,m=u.flags;switch(u.tag){case 0:case 11:case 15:Na(c,u,s),Qn(4,u);break;case 1:if(Na(c,u,s),i=u,c=i.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(q){pt(i,i.return,q)}if(i=u,c=i.updateQueue,c!==null){var y=i.stateNode;try{var T=c.shared.hiddenCallbacks;if(T!==null)for(c.shared.hiddenCallbacks=null,c=0;c<T.length;c++)qd(T[c],y)}catch(q){pt(i,i.return,q)}}s&&m&64&&Fh(u),Zn(u,u.return);break;case 27:af(u);case 26:case 5:Na(c,u,s),s&&i===null&&m&4&&tf(u),Zn(u,u.return);break;case 12:Na(c,u,s);break;case 31:Na(c,u,s),s&&m&4&&cf(c,u);break;case 13:Na(c,u,s),s&&m&4&&uf(c,u);break;case 22:u.memoizedState===null&&Na(c,u,s),Zn(u,u.return);break;case 30:break;default:Na(c,u,s)}t=t.sibling}}function _c(e,t){var s=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==s&&(e!=null&&e.refCount++,s!=null&&Dn(s))}function Nc(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Dn(e))}function Fs(e,t,s,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)ff(e,t,s,i),t=t.sibling}function ff(e,t,s,i){var c=t.flags;switch(t.tag){case 0:case 11:case 15:Fs(e,t,s,i),c&2048&&Qn(9,t);break;case 1:Fs(e,t,s,i);break;case 3:Fs(e,t,s,i),c&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Dn(e)));break;case 12:if(c&2048){Fs(e,t,s,i),e=t.stateNode;try{var u=t.memoizedProps,m=u.id,y=u.onPostCommit;typeof y=="function"&&y(m,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(T){pt(t,t.return,T)}}else Fs(e,t,s,i);break;case 31:Fs(e,t,s,i);break;case 13:Fs(e,t,s,i);break;case 23:break;case 22:u=t.stateNode,m=t.alternate,t.memoizedState!==null?u._visibility&2?Fs(e,t,s,i):Jn(e,t):u._visibility&2?Fs(e,t,s,i):(u._visibility|=2,Fr(e,t,s,i,(t.subtreeFlags&10256)!==0||!1)),c&2048&&_c(m,t);break;case 24:Fs(e,t,s,i),c&2048&&Nc(t.alternate,t);break;default:Fs(e,t,s,i)}}function Fr(e,t,s,i,c){for(c=c&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var u=e,m=t,y=s,T=i,q=m.flags;switch(m.tag){case 0:case 11:case 15:Fr(u,m,y,T,c),Qn(8,m);break;case 23:break;case 22:var F=m.stateNode;m.memoizedState!==null?F._visibility&2?Fr(u,m,y,T,c):Jn(u,m):(F._visibility|=2,Fr(u,m,y,T,c)),c&&q&2048&&_c(m.alternate,m);break;case 24:Fr(u,m,y,T,c),c&&q&2048&&Nc(m.alternate,m);break;default:Fr(u,m,y,T,c)}t=t.sibling}}function Jn(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var s=e,i=t,c=i.flags;switch(i.tag){case 22:Jn(s,i),c&2048&&_c(i.alternate,i);break;case 24:Jn(s,i),c&2048&&Nc(i.alternate,i);break;default:Jn(s,i)}t=t.sibling}}var Xn=8192;function en(e,t,s){if(e.subtreeFlags&Xn)for(e=e.child;e!==null;)mf(e,t,s),e=e.sibling}function mf(e,t,s){switch(e.tag){case 26:en(e,t,s),e.flags&Xn&&e.memoizedState!==null&&Mg(s,Ws,e.memoizedState,e.memoizedProps);break;case 5:en(e,t,s);break;case 3:case 4:var i=Ws;Ws=Tl(e.stateNode.containerInfo),en(e,t,s),Ws=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=Xn,Xn=16777216,en(e,t,s),Xn=i):en(e,t,s));break;default:en(e,t,s)}}function pf(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Wn(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var s=0;s<t.length;s++){var i=t[s];es=i,bf(i,e)}pf(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)gf(e),e=e.sibling}function gf(e){switch(e.tag){case 0:case 11:case 15:Wn(e),e.flags&2048&&qa(9,e,e.return);break;case 3:Wn(e);break;case 12:Wn(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,ml(e)):Wn(e);break;default:Wn(e)}}function ml(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var s=0;s<t.length;s++){var i=t[s];es=i,bf(i,e)}pf(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:qa(8,t,t.return),ml(t);break;case 22:s=t.stateNode,s._visibility&2&&(s._visibility&=-3,ml(t));break;default:ml(t)}e=e.sibling}}function bf(e,t){for(;es!==null;){var s=es;switch(s.tag){case 0:case 11:case 15:qa(8,s,t);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var i=s.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:Dn(s.memoizedState.cache)}if(i=s.child,i!==null)i.return=s,es=i;else e:for(s=e;es!==null;){i=es;var c=i.sibling,u=i.return;if(lf(i),i===s){es=null;break e}if(c!==null){c.return=u,es=c;break e}es=u}}}var Z0={getCacheForType:function(e){var t=ss(Gt),s=t.data.get(e);return s===void 0&&(s=e(),t.data.set(e,s)),s},cacheSignal:function(){return ss(Gt).controller.signal}},J0=typeof WeakMap=="function"?WeakMap:Map,ht=0,vt=null,We=null,et=0,mt=0,As=null,Pa=!1,tn=!1,Sc=!1,Sa=0,Ut=0,Ga=0,vr=0,Ec=0,Os=0,sn=0,Fn=null,vs=null,Tc=!1,pl=0,xf=0,gl=1/0,bl=null,Ya=null,Xt=0,Ka=null,an=null,Ea=0,kc=0,Ac=null,yf=null,ei=0,Oc=null;function Cs(){return(ht&2)!==0&&et!==0?et&-et:N.T!==null?Uc():gt()}function vf(){if(Os===0)if((et&536870912)===0||at){var e=ee;ee<<=1,(ee&3932160)===0&&(ee=262144),Os=e}else Os=536870912;return e=Ts.current,e!==null&&(e.flags|=32),Os}function ws(e,t,s){(e===vt&&(mt===2||mt===9)||e.cancelPendingCommit!==null)&&(rn(e,0),Va(e,et,Os,!1)),it(e,s),((ht&2)===0||e!==vt)&&(e===vt&&((ht&2)===0&&(vr|=s),Ut===4&&Va(e,et,Os,!1)),ca(e))}function wf(e,t,s){if((ht&6)!==0)throw Error(o(327));var i=!s&&(t&127)===0&&(t&e.expiredLanes)===0||pe(e,t),c=i?F0(e,t):Rc(e,t,!0),u=i;do{if(c===0){tn&&!i&&Va(e,t,0,!1);break}else{if(s=e.current.alternate,u&&!X0(s)){c=Rc(e,t,!1),u=!1;continue}if(c===2){if(u=t,e.errorRecoveryDisabledLanes&u)var m=0;else m=e.pendingLanes&-536870913,m=m!==0?m:m&536870912?536870912:0;if(m!==0){t=m;e:{var y=e;c=Fn;var T=y.current.memoizedState.isDehydrated;if(T&&(rn(y,m).flags|=256),m=Rc(y,m,!1),m!==2){if(Sc&&!T){y.errorRecoveryDisabledLanes|=u,vr|=u,c=4;break e}u=vs,vs=c,u!==null&&(vs===null?vs=u:vs.push.apply(vs,u))}c=m}if(u=!1,c!==2)continue}}if(c===1){rn(e,0),Va(e,t,0,!0);break}e:{switch(i=e,u=c,u){case 0:case 1:throw Error(o(345));case 4:if((t&4194048)!==t)break;case 6:Va(i,t,Os,!Pa);break e;case 2:vs=null;break;case 3:case 5:break;default:throw Error(o(329))}if((t&62914560)===t&&(c=pl+300-Zt(),10<c)){if(Va(i,t,Os,!Pa),se(i,0,!0)!==0)break e;Ea=t,i.timeoutHandle=Wf(jf.bind(null,i,s,vs,bl,Tc,t,Os,vr,sn,Pa,u,"Throttled",-0,0),c);break e}jf(i,s,vs,bl,Tc,t,Os,vr,sn,Pa,u,null,-0,0)}}break}while(!0);ca(e)}function jf(e,t,s,i,c,u,m,y,T,q,F,ne,Y,V){if(e.timeoutHandle=-1,ne=t.subtreeFlags,ne&8192||(ne&16785408)===16785408){ne={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:da},mf(t,u,ne);var je=(u&62914560)===u?pl-Zt():(u&4194048)===u?xf-Zt():0;if(je=Dg(ne,je),je!==null){Ea=u,e.cancelPendingCommit=je(Of.bind(null,e,t,u,s,i,c,m,y,T,F,ne,null,Y,V)),Va(e,u,m,!q);return}}Of(e,t,u,s,i,c,m,y,T)}function X0(e){for(var t=e;;){var s=t.tag;if((s===0||s===11||s===15)&&t.flags&16384&&(s=t.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var i=0;i<s.length;i++){var c=s[i],u=c.getSnapshot;c=c.value;try{if(!Ss(u(),c))return!1}catch{return!1}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Va(e,t,s,i){t&=~Ec,t&=~vr,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var c=t;0<c;){var u=31-U(c),m=1<<u;i[u]=-1,c&=~m}s!==0&&jt(e,s,t)}function xl(){return(ht&6)===0?(ti(0),!1):!0}function Cc(){if(We!==null){if(mt===0)var e=We.return;else e=We,pa=dr=null,Vo(e),Qr=null,Ln=0,e=We;for(;e!==null;)Wh(e.alternate,e),e=e.return;We=null}}function rn(e,t){var s=e.timeoutHandle;s!==-1&&(e.timeoutHandle=-1,bg(s)),s=e.cancelPendingCommit,s!==null&&(e.cancelPendingCommit=null,s()),Ea=0,Cc(),vt=e,We=s=fa(e.current,null),et=t,mt=0,As=null,Pa=!1,tn=pe(e,t),Sc=!1,sn=Os=Ec=vr=Ga=Ut=0,vs=Fn=null,Tc=!1,(t&8)!==0&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var c=31-U(i),u=1<<c;t|=e[c],i&=~u}return Sa=t,Hi(),s}function _f(e,t){Ye=null,N.H=Yn,t===Vr||t===Vi?(t=Bd(),mt=3):t===Do?(t=Bd(),mt=4):mt=t===cc?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,As=t,We===null&&(Ut=1,ll(e,qs(t,e.current)))}function Nf(){var e=Ts.current;return e===null?!0:(et&4194048)===et?Ks===null:(et&62914560)===et||(et&536870912)!==0?e===Ks:!1}function Sf(){var e=N.H;return N.H=Yn,e===null?Yn:e}function Ef(){var e=N.A;return N.A=Z0,e}function yl(){Ut=4,Pa||(et&4194048)!==et&&Ts.current!==null||(tn=!0),(Ga&134217727)===0&&(vr&134217727)===0||vt===null||Va(vt,et,Os,!1)}function Rc(e,t,s){var i=ht;ht|=2;var c=Sf(),u=Ef();(vt!==e||et!==t)&&(bl=null,rn(e,t)),t=!1;var m=Ut;e:do try{if(mt!==0&&We!==null){var y=We,T=As;switch(mt){case 8:Cc(),m=6;break e;case 3:case 2:case 9:case 6:Ts.current===null&&(t=!0);var q=mt;if(mt=0,As=null,nn(e,y,T,q),s&&tn){m=0;break e}break;default:q=mt,mt=0,As=null,nn(e,y,T,q)}}W0(),m=Ut;break}catch(F){_f(e,F)}while(!0);return t&&e.shellSuspendCounter++,pa=dr=null,ht=i,N.H=c,N.A=u,We===null&&(vt=null,et=0,Hi()),m}function W0(){for(;We!==null;)Tf(We)}function F0(e,t){var s=ht;ht|=2;var i=Sf(),c=Ef();vt!==e||et!==t?(bl=null,gl=Zt()+500,rn(e,t)):tn=pe(e,t);e:do try{if(mt!==0&&We!==null){t=We;var u=As;t:switch(mt){case 1:mt=0,As=null,nn(e,t,u,1);break;case 2:case 9:if(Ud(u)){mt=0,As=null,kf(t);break}t=function(){mt!==2&&mt!==9||vt!==e||(mt=7),ca(e)},u.then(t,t);break e;case 3:mt=7;break e;case 4:mt=5;break e;case 7:Ud(u)?(mt=0,As=null,kf(t)):(mt=0,As=null,nn(e,t,u,7));break;case 5:var m=null;switch(We.tag){case 26:m=We.memoizedState;case 5:case 27:var y=We;if(m?fm(m):y.stateNode.complete){mt=0,As=null;var T=y.sibling;if(T!==null)We=T;else{var q=y.return;q!==null?(We=q,vl(q)):We=null}break t}}mt=0,As=null,nn(e,t,u,5);break;case 6:mt=0,As=null,nn(e,t,u,6);break;case 8:Cc(),Ut=6;break e;default:throw Error(o(462))}}eg();break}catch(F){_f(e,F)}while(!0);return pa=dr=null,N.H=i,N.A=c,ht=s,We!==null?0:(vt=null,et=0,Hi(),Ut)}function eg(){for(;We!==null&&!Ht();)Tf(We)}function Tf(e){var t=Jh(e.alternate,e,Sa);e.memoizedProps=e.pendingProps,t===null?vl(e):We=t}function kf(e){var t=e,s=t.alternate;switch(t.tag){case 15:case 0:t=Gh(s,t,t.pendingProps,t.type,void 0,et);break;case 11:t=Gh(s,t,t.pendingProps,t.type.render,t.ref,et);break;case 5:Vo(t);default:Wh(s,t),t=We=Sd(t,Sa),t=Jh(s,t,Sa)}e.memoizedProps=e.pendingProps,t===null?vl(e):We=t}function nn(e,t,s,i){pa=dr=null,Vo(t),Qr=null,Ln=0;var c=t.return;try{if(q0(e,c,t,s,et)){Ut=1,ll(e,qs(s,e.current)),We=null;return}}catch(u){if(c!==null)throw We=c,u;Ut=1,ll(e,qs(s,e.current)),We=null;return}t.flags&32768?(at||i===1?e=!0:tn||(et&536870912)!==0?e=!1:(Pa=e=!0,(i===2||i===9||i===3||i===6)&&(i=Ts.current,i!==null&&i.tag===13&&(i.flags|=16384))),Af(t,e)):vl(t)}function vl(e){var t=e;do{if((t.flags&32768)!==0){Af(t,Pa);return}e=t.return;var s=Y0(t.alternate,t,Sa);if(s!==null){We=s;return}if(t=t.sibling,t!==null){We=t;return}We=t=e}while(t!==null);Ut===0&&(Ut=5)}function Af(e,t){do{var s=K0(e.alternate,e);if(s!==null){s.flags&=32767,We=s;return}if(s=e.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!t&&(e=e.sibling,e!==null)){We=e;return}We=e=s}while(e!==null);Ut=6,We=null}function Of(e,t,s,i,c,u,m,y,T){e.cancelPendingCommit=null;do wl();while(Xt!==0);if((ht&6)!==0)throw Error(o(327));if(t!==null){if(t===e.current)throw Error(o(177));if(u=t.lanes|t.childLanes,u|=vo,rt(e,s,u,m,y,T),e===vt&&(We=vt=null,et=0),an=t,Ka=e,Ea=s,kc=u,Ac=c,yf=i,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,rg(Or,function(){return Df(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||i){i=N.T,N.T=null,c=J.p,J.p=2,m=ht,ht|=4;try{V0(e,t,s)}finally{ht=m,J.p=c,N.T=i}}Xt=1,Cf(),Rf(),zf()}}function Cf(){if(Xt===1){Xt=0;var e=Ka,t=an,s=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||s){s=N.T,N.T=null;var i=J.p;J.p=2;var c=ht;ht|=4;try{df(t,e);var u=Gc,m=gd(e.containerInfo),y=u.focusedElem,T=u.selectionRange;if(m!==y&&y&&y.ownerDocument&&pd(y.ownerDocument.documentElement,y)){if(T!==null&&po(y)){var q=T.start,F=T.end;if(F===void 0&&(F=q),"selectionStart"in y)y.selectionStart=q,y.selectionEnd=Math.min(F,y.value.length);else{var ne=y.ownerDocument||document,Y=ne&&ne.defaultView||window;if(Y.getSelection){var V=Y.getSelection(),je=y.textContent.length,Re=Math.min(T.start,je),yt=T.end===void 0?Re:Math.min(T.end,je);!V.extend&&Re>yt&&(m=yt,yt=Re,Re=m);var L=md(y,Re),O=md(y,yt);if(L&&O&&(V.rangeCount!==1||V.anchorNode!==L.node||V.anchorOffset!==L.offset||V.focusNode!==O.node||V.focusOffset!==O.offset)){var I=ne.createRange();I.setStart(L.node,L.offset),V.removeAllRanges(),Re>yt?(V.addRange(I),V.extend(O.node,O.offset)):(I.setEnd(O.node,O.offset),V.addRange(I))}}}}for(ne=[],V=y;V=V.parentNode;)V.nodeType===1&&ne.push({element:V,left:V.scrollLeft,top:V.scrollTop});for(typeof y.focus=="function"&&y.focus(),y=0;y<ne.length;y++){var re=ne[y];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}zl=!!Pc,Gc=Pc=null}finally{ht=c,J.p=i,N.T=s}}e.current=t,Xt=2}}function Rf(){if(Xt===2){Xt=0;var e=Ka,t=an,s=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||s){s=N.T,N.T=null;var i=J.p;J.p=2;var c=ht;ht|=4;try{nf(e,t.alternate,t)}finally{ht=c,J.p=i,N.T=s}}Xt=3}}function zf(){if(Xt===4||Xt===3){Xt=0,ds();var e=Ka,t=an,s=Ea,i=yf;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Xt=5:(Xt=0,an=Ka=null,Mf(e,e.pendingLanes));var c=e.pendingLanes;if(c===0&&(Ya=null),At(s),t=t.stateNode,M&&typeof M.onCommitFiberRoot=="function")try{M.onCommitFiberRoot(E,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=N.T,c=J.p,J.p=2,N.T=null;try{for(var u=e.onRecoverableError,m=0;m<i.length;m++){var y=i[m];u(y.value,{componentStack:y.stack})}}finally{N.T=t,J.p=c}}(Ea&3)!==0&&wl(),ca(e),c=e.pendingLanes,(s&261930)!==0&&(c&42)!==0?e===Oc?ei++:(ei=0,Oc=e):ei=0,ti(0)}}function Mf(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Dn(t)))}function wl(){return Cf(),Rf(),zf(),Df()}function Df(){if(Xt!==5)return!1;var e=Ka,t=kc;kc=0;var s=At(Ea),i=N.T,c=J.p;try{J.p=32>s?32:s,N.T=null,s=Ac,Ac=null;var u=Ka,m=Ea;if(Xt=0,an=Ka=null,Ea=0,(ht&6)!==0)throw Error(o(331));var y=ht;if(ht|=4,gf(u.current),ff(u,u.current,m,s),ht=y,ti(0,!1),M&&typeof M.onPostCommitFiberRoot=="function")try{M.onPostCommitFiberRoot(E,u)}catch{}return!0}finally{J.p=c,N.T=i,Mf(e,t)}}function Uf(e,t,s){t=qs(s,t),t=oc(e.stateNode,t,2),e=Ha(e,t,2),e!==null&&(it(e,2),ca(e))}function pt(e,t,s){if(e.tag===3)Uf(e,e,s);else for(;t!==null;){if(t.tag===3){Uf(t,e,s);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Ya===null||!Ya.has(i))){e=qs(s,e),s=Uh(2),i=Ha(t,s,2),i!==null&&(Lh(s,i,t,e),it(i,2),ca(i));break}}t=t.return}}function zc(e,t,s){var i=e.pingCache;if(i===null){i=e.pingCache=new J0;var c=new Set;i.set(t,c)}else c=i.get(t),c===void 0&&(c=new Set,i.set(t,c));c.has(s)||(Sc=!0,c.add(s),e=tg.bind(null,e,t,s),t.then(e,e))}function tg(e,t,s){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&s,e.warmLanes&=~s,vt===e&&(et&s)===s&&(Ut===4||Ut===3&&(et&62914560)===et&&300>Zt()-pl?(ht&2)===0&&rn(e,0):Ec|=s,sn===et&&(sn=0)),ca(e)}function Lf(e,t){t===0&&(t=Ce()),e=or(e,t),e!==null&&(it(e,t),ca(e))}function sg(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),Lf(e,s)}function ag(e,t){var s=0;switch(e.tag){case 31:case 13:var i=e.stateNode,c=e.memoizedState;c!==null&&(s=c.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(o(314))}i!==null&&i.delete(t),Lf(e,s)}function rg(e,t){return fs(e,t)}var jl=null,ln=null,Mc=!1,_l=!1,Dc=!1,Qa=0;function ca(e){e!==ln&&e.next===null&&(ln===null?jl=ln=e:ln=ln.next=e),_l=!0,Mc||(Mc=!0,ig())}function ti(e,t){if(!Dc&&_l){Dc=!0;do for(var s=!1,i=jl;i!==null;){if(e!==0){var c=i.pendingLanes;if(c===0)var u=0;else{var m=i.suspendedLanes,y=i.pingedLanes;u=(1<<31-U(42|e)+1)-1,u&=c&~(m&~y),u=u&201326741?u&201326741|1:u?u|2:0}u!==0&&(s=!0,If(i,u))}else u=et,u=se(i,i===vt?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),(u&3)===0||pe(i,u)||(s=!0,If(i,u));i=i.next}while(s);Dc=!1}}function ng(){Bf()}function Bf(){_l=Mc=!1;var e=0;Qa!==0&&gg()&&(e=Qa);for(var t=Zt(),s=null,i=jl;i!==null;){var c=i.next,u=Hf(i,t);u===0?(i.next=null,s===null?jl=c:s.next=c,c===null&&(ln=s)):(s=i,(e!==0||(u&3)!==0)&&(_l=!0)),i=c}Xt!==0&&Xt!==5||ti(e),Qa!==0&&(Qa=0)}function Hf(e,t){for(var s=e.suspendedLanes,i=e.pingedLanes,c=e.expirationTimes,u=e.pendingLanes&-62914561;0<u;){var m=31-U(u),y=1<<m,T=c[m];T===-1?((y&s)===0||(y&i)!==0)&&(c[m]=Ae(y,t)):T<=t&&(e.expiredLanes|=y),u&=~y}if(t=vt,s=et,s=se(e,e===t?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,s===0||e===t&&(mt===2||mt===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&ms(i),e.callbackNode=null,e.callbackPriority=0;if((s&3)===0||pe(e,s)){if(t=s&-s,t===e.callbackPriority)return t;switch(i!==null&&ms(i),At(s)){case 2:case 8:s=Ei;break;case 32:s=Or;break;case 268435456:s=Cr;break;default:s=Or}return i=$f.bind(null,e),s=fs(s,i),e.callbackPriority=t,e.callbackNode=s,t}return i!==null&&i!==null&&ms(i),e.callbackPriority=2,e.callbackNode=null,2}function $f(e,t){if(Xt!==0&&Xt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var s=e.callbackNode;if(wl()&&e.callbackNode!==s)return null;var i=et;return i=se(e,e===vt?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(wf(e,i,t),Hf(e,Zt()),e.callbackNode!=null&&e.callbackNode===s?$f.bind(null,e):null)}function If(e,t){if(wl())return null;wf(e,t,!0)}function ig(){xg(function(){(ht&6)!==0?fs(Si,ng):Bf()})}function Uc(){if(Qa===0){var e=Yr;e===0&&(e=K,K<<=1,(K&261888)===0&&(K=256)),Qa=e}return Qa}function qf(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Ci(""+e)}function Pf(e,t){var s=t.ownerDocument.createElement("input");return s.name=t.name,s.value=t.value,e.id&&s.setAttribute("form",e.id),t.parentNode.insertBefore(s,t),e=new FormData(e),s.parentNode.removeChild(s),e}function lg(e,t,s,i,c){if(t==="submit"&&s&&s.stateNode===c){var u=qf((c[st]||null).action),m=i.submitter;m&&(t=(t=m[st]||null)?qf(t.formAction):m.getAttribute("formAction"),t!==null&&(u=t,m=null));var y=new Di("action","action",null,i,c);e.push({event:y,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(Qa!==0){var T=m?Pf(c,m):new FormData(c);sc(s,{pending:!0,data:T,method:c.method,action:u},null,T)}}else typeof u=="function"&&(y.preventDefault(),T=m?Pf(c,m):new FormData(c),sc(s,{pending:!0,data:T,method:c.method,action:u},u,T))},currentTarget:c}]})}}for(var Lc=0;Lc<yo.length;Lc++){var Bc=yo[Lc],og=Bc.toLowerCase(),cg=Bc[0].toUpperCase()+Bc.slice(1);Xs(og,"on"+cg)}Xs(yd,"onAnimationEnd"),Xs(vd,"onAnimationIteration"),Xs(wd,"onAnimationStart"),Xs("dblclick","onDoubleClick"),Xs("focusin","onFocus"),Xs("focusout","onBlur"),Xs(S0,"onTransitionRun"),Xs(E0,"onTransitionStart"),Xs(T0,"onTransitionCancel"),Xs(jd,"onTransitionEnd"),Ft("onMouseEnter",["mouseout","mouseover"]),Ft("onMouseLeave",["mouseout","mouseover"]),Ft("onPointerEnter",["pointerout","pointerover"]),Ft("onPointerLeave",["pointerout","pointerover"]),Ns("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ns("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ns("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ns("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ns("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ns("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var si="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ug=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(si));function Gf(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var i=e[s],c=i.event;i=i.listeners;e:{var u=void 0;if(t)for(var m=i.length-1;0<=m;m--){var y=i[m],T=y.instance,q=y.currentTarget;if(y=y.listener,T!==u&&c.isPropagationStopped())break e;u=y,c.currentTarget=q;try{u(c)}catch(F){Bi(F)}c.currentTarget=null,u=T}else for(m=0;m<i.length;m++){if(y=i[m],T=y.instance,q=y.currentTarget,y=y.listener,T!==u&&c.isPropagationStopped())break e;u=y,c.currentTarget=q;try{u(c)}catch(F){Bi(F)}c.currentTarget=null,u=T}}}}function Fe(e,t){var s=t[Xe];s===void 0&&(s=t[Xe]=new Set);var i=e+"__bubble";s.has(i)||(Yf(t,e,2,!1),s.add(i))}function Hc(e,t,s){var i=0;t&&(i|=4),Yf(s,e,i,t)}var Nl="_reactListening"+Math.random().toString(36).slice(2);function $c(e){if(!e[Nl]){e[Nl]=!0,Bs.forEach(function(s){s!=="selectionchange"&&(ug.has(s)||Hc(s,!1,e),Hc(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Nl]||(t[Nl]=!0,Hc("selectionchange",!1,t))}}function Yf(e,t,s,i){switch(vm(t)){case 2:var c=Bg;break;case 8:c=Hg;break;default:c=tu}s=c.bind(null,t,s,e),c=void 0,!no||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),i?c!==void 0?e.addEventListener(t,s,{capture:!0,passive:c}):e.addEventListener(t,s,!0):c!==void 0?e.addEventListener(t,s,{passive:c}):e.addEventListener(t,s,!1)}function Ic(e,t,s,i,c){var u=i;if((t&1)===0&&(t&2)===0&&i!==null)e:for(;;){if(i===null)return;var m=i.tag;if(m===3||m===4){var y=i.stateNode.containerInfo;if(y===c)break;if(m===4)for(m=i.return;m!==null;){var T=m.tag;if((T===3||T===4)&&m.stateNode.containerInfo===c)return;m=m.return}for(;y!==null;){if(m=ps(y),m===null)return;if(T=m.tag,T===5||T===6||T===26||T===27){i=u=m;continue e}y=y.parentNode}}i=i.return}Zu(function(){var q=u,F=ao(s),ne=[];e:{var Y=_d.get(e);if(Y!==void 0){var V=Di,je=e;switch(e){case"keypress":if(zi(s)===0)break e;case"keydown":case"keyup":V=a0;break;case"focusin":je="focus",V=co;break;case"focusout":je="blur",V=co;break;case"beforeblur":case"afterblur":V=co;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":V=Wu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":V=Yp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":V=i0;break;case yd:case vd:case wd:V=Qp;break;case jd:V=o0;break;case"scroll":case"scrollend":V=Pp;break;case"wheel":V=u0;break;case"copy":case"cut":case"paste":V=Jp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":V=ed;break;case"toggle":case"beforetoggle":V=h0}var Re=(t&4)!==0,yt=!Re&&(e==="scroll"||e==="scrollend"),L=Re?Y!==null?Y+"Capture":null:Y;Re=[];for(var O=q,I;O!==null;){var re=O;if(I=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||I===null||L===null||(re=Nn(O,L),re!=null&&Re.push(ai(O,re,I))),yt)break;O=O.return}0<Re.length&&(Y=new V(Y,je,null,s,F),ne.push({event:Y,listeners:Re}))}}if((t&7)===0){e:{if(Y=e==="mouseover"||e==="pointerover",V=e==="mouseout"||e==="pointerout",Y&&s!==so&&(je=s.relatedTarget||s.fromElement)&&(ps(je)||je[lt]))break e;if((V||Y)&&(Y=F.window===F?F:(Y=F.ownerDocument)?Y.defaultView||Y.parentWindow:window,V?(je=s.relatedTarget||s.toElement,V=q,je=je?ps(je):null,je!==null&&(yt=h(je),Re=je.tag,je!==yt||Re!==5&&Re!==27&&Re!==6)&&(je=null)):(V=null,je=q),V!==je)){if(Re=Wu,re="onMouseLeave",L="onMouseEnter",O="mouse",(e==="pointerout"||e==="pointerover")&&(Re=ed,re="onPointerLeave",L="onPointerEnter",O="pointer"),yt=V==null?Y:Mt(V),I=je==null?Y:Mt(je),Y=new Re(re,O+"leave",V,s,F),Y.target=yt,Y.relatedTarget=I,re=null,ps(F)===q&&(Re=new Re(L,O+"enter",je,s,F),Re.target=I,Re.relatedTarget=yt,re=Re),yt=re,V&&je)t:{for(Re=dg,L=V,O=je,I=0,re=L;re;re=Re(re))I++;re=0;for(var Oe=O;Oe;Oe=Re(Oe))re++;for(;0<I-re;)L=Re(L),I--;for(;0<re-I;)O=Re(O),re--;for(;I--;){if(L===O||O!==null&&L===O.alternate){Re=L;break t}L=Re(L),O=Re(O)}Re=null}else Re=null;V!==null&&Kf(ne,Y,V,Re,!1),je!==null&&yt!==null&&Kf(ne,yt,je,Re,!0)}}e:{if(Y=q?Mt(q):window,V=Y.nodeName&&Y.nodeName.toLowerCase(),V==="select"||V==="input"&&Y.type==="file")var ct=od;else if(id(Y))if(cd)ct=j0;else{ct=v0;var Ee=y0}else V=Y.nodeName,!V||V.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?q&&to(q.elementType)&&(ct=od):ct=w0;if(ct&&(ct=ct(e,q))){ld(ne,ct,s,F);break e}Ee&&Ee(e,Y,q),e==="focusout"&&q&&Y.type==="number"&&q.memoizedProps.value!=null&&eo(Y,"number",Y.value)}switch(Ee=q?Mt(q):window,e){case"focusin":(id(Ee)||Ee.contentEditable==="true")&&(Lr=Ee,go=q,Rn=null);break;case"focusout":Rn=go=Lr=null;break;case"mousedown":bo=!0;break;case"contextmenu":case"mouseup":case"dragend":bo=!1,bd(ne,s,F);break;case"selectionchange":if(N0)break;case"keydown":case"keyup":bd(ne,s,F)}var Ke;if(ho)e:{switch(e){case"compositionstart":var tt="onCompositionStart";break e;case"compositionend":tt="onCompositionEnd";break e;case"compositionupdate":tt="onCompositionUpdate";break e}tt=void 0}else Ur?rd(e,s)&&(tt="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(tt="onCompositionStart");tt&&(td&&s.locale!=="ko"&&(Ur||tt!=="onCompositionStart"?tt==="onCompositionEnd"&&Ur&&(Ke=Ju()):(Ra=F,io="value"in Ra?Ra.value:Ra.textContent,Ur=!0)),Ee=Sl(q,tt),0<Ee.length&&(tt=new Fu(tt,e,null,s,F),ne.push({event:tt,listeners:Ee}),Ke?tt.data=Ke:(Ke=nd(s),Ke!==null&&(tt.data=Ke)))),(Ke=m0?p0(e,s):g0(e,s))&&(tt=Sl(q,"onBeforeInput"),0<tt.length&&(Ee=new Fu("onBeforeInput","beforeinput",null,s,F),ne.push({event:Ee,listeners:tt}),Ee.data=Ke)),lg(ne,e,q,s,F)}Gf(ne,t)})}function ai(e,t,s){return{instance:e,listener:t,currentTarget:s}}function Sl(e,t){for(var s=t+"Capture",i=[];e!==null;){var c=e,u=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||u===null||(c=Nn(e,s),c!=null&&i.unshift(ai(e,c,u)),c=Nn(e,t),c!=null&&i.push(ai(e,c,u))),e.tag===3)return i;e=e.return}return[]}function dg(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Kf(e,t,s,i,c){for(var u=t._reactName,m=[];s!==null&&s!==i;){var y=s,T=y.alternate,q=y.stateNode;if(y=y.tag,T!==null&&T===i)break;y!==5&&y!==26&&y!==27||q===null||(T=q,c?(q=Nn(s,u),q!=null&&m.unshift(ai(s,q,T))):c||(q=Nn(s,u),q!=null&&m.push(ai(s,q,T)))),s=s.return}m.length!==0&&e.push({event:t,listeners:m})}var hg=/\r\n?/g,fg=/\u0000|\uFFFD/g;function Vf(e){return(typeof e=="string"?e:""+e).replace(hg,`
`).replace(fg,"")}function Qf(e,t){return t=Vf(t),Vf(e)===t}function xt(e,t,s,i,c,u){switch(s){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||zr(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&zr(e,""+i);break;case"className":Ai(e,"class",i);break;case"tabIndex":Ai(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":Ai(e,s,i);break;case"style":Vu(e,i,u);break;case"data":if(t!=="object"){Ai(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||s!=="href")){e.removeAttribute(s);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(s);break}i=Ci(""+i),e.setAttribute(s,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof u=="function"&&(s==="formAction"?(t!=="input"&&xt(e,t,"name",c.name,c,null),xt(e,t,"formEncType",c.formEncType,c,null),xt(e,t,"formMethod",c.formMethod,c,null),xt(e,t,"formTarget",c.formTarget,c,null)):(xt(e,t,"encType",c.encType,c,null),xt(e,t,"method",c.method,c,null),xt(e,t,"target",c.target,c,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(s);break}i=Ci(""+i),e.setAttribute(s,i);break;case"onClick":i!=null&&(e.onclick=da);break;case"onScroll":i!=null&&Fe("scroll",e);break;case"onScrollEnd":i!=null&&Fe("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(o(61));if(s=i.__html,s!=null){if(c.children!=null)throw Error(o(60));e.innerHTML=s}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}s=Ci(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(s,""+i):e.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(s,""):e.removeAttribute(s);break;case"capture":case"download":i===!0?e.setAttribute(s,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(s,i):e.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(s,i):e.removeAttribute(s);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(s):e.setAttribute(s,i);break;case"popover":Fe("beforetoggle",e),Fe("toggle",e),ki(e,"popover",i);break;case"xlinkActuate":ua(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":ua(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":ua(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":ua(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":ua(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":ua(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":ua(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":ua(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":ua(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":ki(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=Ip.get(s)||s,ki(e,s,i))}}function qc(e,t,s,i,c,u){switch(s){case"style":Vu(e,i,u);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(o(61));if(s=i.__html,s!=null){if(c.children!=null)throw Error(o(60));e.innerHTML=s}}break;case"children":typeof i=="string"?zr(e,i):(typeof i=="number"||typeof i=="bigint")&&zr(e,""+i);break;case"onScroll":i!=null&&Fe("scroll",e);break;case"onScrollEnd":i!=null&&Fe("scrollend",e);break;case"onClick":i!=null&&(e.onclick=da);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!na.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(c=s.endsWith("Capture"),t=s.slice(2,c?s.length-7:void 0),u=e[st]||null,u=u!=null?u[s]:null,typeof u=="function"&&e.removeEventListener(t,u,c),typeof i=="function")){typeof u!="function"&&u!==null&&(s in e?e[s]=null:e.hasAttribute(s)&&e.removeAttribute(s)),e.addEventListener(t,i,c);break e}s in e?e[s]=i:i===!0?e.setAttribute(s,""):ki(e,s,i)}}}function rs(e,t,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Fe("error",e),Fe("load",e);var i=!1,c=!1,u;for(u in s)if(s.hasOwnProperty(u)){var m=s[u];if(m!=null)switch(u){case"src":i=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:xt(e,t,u,m,s,null)}}c&&xt(e,t,"srcSet",s.srcSet,s,null),i&&xt(e,t,"src",s.src,s,null);return;case"input":Fe("invalid",e);var y=u=m=c=null,T=null,q=null;for(i in s)if(s.hasOwnProperty(i)){var F=s[i];if(F!=null)switch(i){case"name":c=F;break;case"type":m=F;break;case"checked":T=F;break;case"defaultChecked":q=F;break;case"value":u=F;break;case"defaultValue":y=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(o(137,t));break;default:xt(e,t,i,F,s,null)}}Pu(e,u,y,T,q,m,c,!1);return;case"select":Fe("invalid",e),i=m=u=null;for(c in s)if(s.hasOwnProperty(c)&&(y=s[c],y!=null))switch(c){case"value":u=y;break;case"defaultValue":m=y;break;case"multiple":i=y;default:xt(e,t,c,y,s,null)}t=u,s=m,e.multiple=!!i,t!=null?Rr(e,!!i,t,!1):s!=null&&Rr(e,!!i,s,!0);return;case"textarea":Fe("invalid",e),u=c=i=null;for(m in s)if(s.hasOwnProperty(m)&&(y=s[m],y!=null))switch(m){case"value":i=y;break;case"defaultValue":c=y;break;case"children":u=y;break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(o(91));break;default:xt(e,t,m,y,s,null)}Yu(e,i,c,u);return;case"option":for(T in s)if(s.hasOwnProperty(T)&&(i=s[T],i!=null))switch(T){case"selected":e.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:xt(e,t,T,i,s,null)}return;case"dialog":Fe("beforetoggle",e),Fe("toggle",e),Fe("cancel",e),Fe("close",e);break;case"iframe":case"object":Fe("load",e);break;case"video":case"audio":for(i=0;i<si.length;i++)Fe(si[i],e);break;case"image":Fe("error",e),Fe("load",e);break;case"details":Fe("toggle",e);break;case"embed":case"source":case"link":Fe("error",e),Fe("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in s)if(s.hasOwnProperty(q)&&(i=s[q],i!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:xt(e,t,q,i,s,null)}return;default:if(to(t)){for(F in s)s.hasOwnProperty(F)&&(i=s[F],i!==void 0&&qc(e,t,F,i,s,void 0));return}}for(y in s)s.hasOwnProperty(y)&&(i=s[y],i!=null&&xt(e,t,y,i,s,null))}function mg(e,t,s,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,u=null,m=null,y=null,T=null,q=null,F=null;for(V in s){var ne=s[V];if(s.hasOwnProperty(V)&&ne!=null)switch(V){case"checked":break;case"value":break;case"defaultValue":T=ne;default:i.hasOwnProperty(V)||xt(e,t,V,null,i,ne)}}for(var Y in i){var V=i[Y];if(ne=s[Y],i.hasOwnProperty(Y)&&(V!=null||ne!=null))switch(Y){case"type":u=V;break;case"name":c=V;break;case"checked":q=V;break;case"defaultChecked":F=V;break;case"value":m=V;break;case"defaultValue":y=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(o(137,t));break;default:V!==ne&&xt(e,t,Y,V,i,ne)}}Fl(e,m,y,T,q,F,u,c);return;case"select":V=m=y=Y=null;for(u in s)if(T=s[u],s.hasOwnProperty(u)&&T!=null)switch(u){case"value":break;case"multiple":V=T;default:i.hasOwnProperty(u)||xt(e,t,u,null,i,T)}for(c in i)if(u=i[c],T=s[c],i.hasOwnProperty(c)&&(u!=null||T!=null))switch(c){case"value":Y=u;break;case"defaultValue":y=u;break;case"multiple":m=u;default:u!==T&&xt(e,t,c,u,i,T)}t=y,s=m,i=V,Y!=null?Rr(e,!!s,Y,!1):!!i!=!!s&&(t!=null?Rr(e,!!s,t,!0):Rr(e,!!s,s?[]:"",!1));return;case"textarea":V=Y=null;for(y in s)if(c=s[y],s.hasOwnProperty(y)&&c!=null&&!i.hasOwnProperty(y))switch(y){case"value":break;case"children":break;default:xt(e,t,y,null,i,c)}for(m in i)if(c=i[m],u=s[m],i.hasOwnProperty(m)&&(c!=null||u!=null))switch(m){case"value":Y=c;break;case"defaultValue":V=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(o(91));break;default:c!==u&&xt(e,t,m,c,i,u)}Gu(e,Y,V);return;case"option":for(var je in s)if(Y=s[je],s.hasOwnProperty(je)&&Y!=null&&!i.hasOwnProperty(je))switch(je){case"selected":e.selected=!1;break;default:xt(e,t,je,null,i,Y)}for(T in i)if(Y=i[T],V=s[T],i.hasOwnProperty(T)&&Y!==V&&(Y!=null||V!=null))switch(T){case"selected":e.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:xt(e,t,T,Y,i,V)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Re in s)Y=s[Re],s.hasOwnProperty(Re)&&Y!=null&&!i.hasOwnProperty(Re)&&xt(e,t,Re,null,i,Y);for(q in i)if(Y=i[q],V=s[q],i.hasOwnProperty(q)&&Y!==V&&(Y!=null||V!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(o(137,t));break;default:xt(e,t,q,Y,i,V)}return;default:if(to(t)){for(var yt in s)Y=s[yt],s.hasOwnProperty(yt)&&Y!==void 0&&!i.hasOwnProperty(yt)&&qc(e,t,yt,void 0,i,Y);for(F in i)Y=i[F],V=s[F],!i.hasOwnProperty(F)||Y===V||Y===void 0&&V===void 0||qc(e,t,F,Y,i,V);return}}for(var L in s)Y=s[L],s.hasOwnProperty(L)&&Y!=null&&!i.hasOwnProperty(L)&&xt(e,t,L,null,i,Y);for(ne in i)Y=i[ne],V=s[ne],!i.hasOwnProperty(ne)||Y===V||Y==null&&V==null||xt(e,t,ne,Y,i,V)}function Zf(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function pg(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,s=performance.getEntriesByType("resource"),i=0;i<s.length;i++){var c=s[i],u=c.transferSize,m=c.initiatorType,y=c.duration;if(u&&y&&Zf(m)){for(m=0,y=c.responseEnd,i+=1;i<s.length;i++){var T=s[i],q=T.startTime;if(q>y)break;var F=T.transferSize,ne=T.initiatorType;F&&Zf(ne)&&(T=T.responseEnd,m+=F*(T<y?1:(y-q)/(T-q)))}if(--i,t+=8*(u+m)/(c.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Pc=null,Gc=null;function El(e){return e.nodeType===9?e:e.ownerDocument}function Jf(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Xf(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Yc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Kc=null;function gg(){var e=window.event;return e&&e.type==="popstate"?e===Kc?!1:(Kc=e,!0):(Kc=null,!1)}var Wf=typeof setTimeout=="function"?setTimeout:void 0,bg=typeof clearTimeout=="function"?clearTimeout:void 0,Ff=typeof Promise=="function"?Promise:void 0,xg=typeof queueMicrotask=="function"?queueMicrotask:typeof Ff<"u"?function(e){return Ff.resolve(null).then(e).catch(yg)}:Wf;function yg(e){setTimeout(function(){throw e})}function Za(e){return e==="head"}function em(e,t){var s=t,i=0;do{var c=s.nextSibling;if(e.removeChild(s),c&&c.nodeType===8)if(s=c.data,s==="/$"||s==="/&"){if(i===0){e.removeChild(c),dn(t);return}i--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")i++;else if(s==="html")ri(e.ownerDocument.documentElement);else if(s==="head"){s=e.ownerDocument.head,ri(s);for(var u=s.firstChild;u;){var m=u.nextSibling,y=u.nodeName;u[_s]||y==="SCRIPT"||y==="STYLE"||y==="LINK"&&u.rel.toLowerCase()==="stylesheet"||s.removeChild(u),u=m}}else s==="body"&&ri(e.ownerDocument.body);s=c}while(s);dn(t)}function tm(e,t){var s=e;e=0;do{var i=s.nextSibling;if(s.nodeType===1?t?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(t?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),i&&i.nodeType===8)if(s=i.data,s==="/$"){if(e===0)break;e--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||e++;s=i}while(s)}function Vc(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var s=t;switch(t=t.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":Vc(s),rr(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}e.removeChild(s)}}function vg(e,t,s,i){for(;e.nodeType===1;){var c=s;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[_s])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(u=e.getAttribute("rel"),u==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(u!==c.rel||e.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||e.getAttribute("title")!==(c.title==null?null:c.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(u=e.getAttribute("src"),(u!==(c.src==null?null:c.src)||e.getAttribute("type")!==(c.type==null?null:c.type)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&u&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var u=c.name==null?null:""+c.name;if(c.type==="hidden"&&e.getAttribute("name")===u)return e}else return e;if(e=Vs(e.nextSibling),e===null)break}return null}function wg(e,t,s){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=Vs(e.nextSibling),e===null))return null;return e}function sm(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Vs(e.nextSibling),e===null))return null;return e}function Qc(e){return e.data==="$?"||e.data==="$~"}function Zc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function jg(e,t){var s=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||s.readyState!=="loading")t();else{var i=function(){t(),s.removeEventListener("DOMContentLoaded",i)};s.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function Vs(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Jc=null;function am(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"||s==="/&"){if(t===0)return Vs(e.nextSibling);t--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||t++}e=e.nextSibling}return null}function rm(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(t===0)return e;t--}else s!=="/$"&&s!=="/&"||t++}e=e.previousSibling}return null}function nm(e,t,s){switch(t=El(s),e){case"html":if(e=t.documentElement,!e)throw Error(o(452));return e;case"head":if(e=t.head,!e)throw Error(o(453));return e;case"body":if(e=t.body,!e)throw Error(o(454));return e;default:throw Error(o(451))}}function ri(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);rr(e)}var Qs=new Map,im=new Set;function Tl(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ta=J.d;J.d={f:_g,r:Ng,D:Sg,C:Eg,L:Tg,m:kg,X:Og,S:Ag,M:Cg};function _g(){var e=Ta.f(),t=xl();return e||t}function Ng(e){var t=St(e);t!==null&&t.tag===5&&t.type==="form"?jh(t):Ta.r(e)}var on=typeof document>"u"?null:document;function lm(e,t,s){var i=on;if(i&&typeof t=="string"&&t){var c=$s(t);c='link[rel="'+e+'"][href="'+c+'"]',typeof s=="string"&&(c+='[crossorigin="'+s+'"]'),im.has(c)||(im.add(c),e={rel:e,crossOrigin:s,href:t},i.querySelector(c)===null&&(t=i.createElement("link"),rs(t,"link",e),Et(t),i.head.appendChild(t)))}}function Sg(e){Ta.D(e),lm("dns-prefetch",e,null)}function Eg(e,t){Ta.C(e,t),lm("preconnect",e,t)}function Tg(e,t,s){Ta.L(e,t,s);var i=on;if(i&&e&&t){var c='link[rel="preload"][as="'+$s(t)+'"]';t==="image"&&s&&s.imageSrcSet?(c+='[imagesrcset="'+$s(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(c+='[imagesizes="'+$s(s.imageSizes)+'"]')):c+='[href="'+$s(e)+'"]';var u=c;switch(t){case"style":u=cn(e);break;case"script":u=un(e)}Qs.has(u)||(e=x({rel:"preload",href:t==="image"&&s&&s.imageSrcSet?void 0:e,as:t},s),Qs.set(u,e),i.querySelector(c)!==null||t==="style"&&i.querySelector(ni(u))||t==="script"&&i.querySelector(ii(u))||(t=i.createElement("link"),rs(t,"link",e),Et(t),i.head.appendChild(t)))}}function kg(e,t){Ta.m(e,t);var s=on;if(s&&e){var i=t&&typeof t.as=="string"?t.as:"script",c='link[rel="modulepreload"][as="'+$s(i)+'"][href="'+$s(e)+'"]',u=c;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":u=un(e)}if(!Qs.has(u)&&(e=x({rel:"modulepreload",href:e},t),Qs.set(u,e),s.querySelector(c)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(ii(u)))return}i=s.createElement("link"),rs(i,"link",e),Et(i),s.head.appendChild(i)}}}function Ag(e,t,s){Ta.S(e,t,s);var i=on;if(i&&e){var c=Ls(i).hoistableStyles,u=cn(e);t=t||"default";var m=c.get(u);if(!m){var y={loading:0,preload:null};if(m=i.querySelector(ni(u)))y.loading=5;else{e=x({rel:"stylesheet",href:e,"data-precedence":t},s),(s=Qs.get(u))&&Xc(e,s);var T=m=i.createElement("link");Et(T),rs(T,"link",e),T._p=new Promise(function(q,F){T.onload=q,T.onerror=F}),T.addEventListener("load",function(){y.loading|=1}),T.addEventListener("error",function(){y.loading|=2}),y.loading|=4,kl(m,t,i)}m={type:"stylesheet",instance:m,count:1,state:y},c.set(u,m)}}}function Og(e,t){Ta.X(e,t);var s=on;if(s&&e){var i=Ls(s).hoistableScripts,c=un(e),u=i.get(c);u||(u=s.querySelector(ii(c)),u||(e=x({src:e,async:!0},t),(t=Qs.get(c))&&Wc(e,t),u=s.createElement("script"),Et(u),rs(u,"link",e),s.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},i.set(c,u))}}function Cg(e,t){Ta.M(e,t);var s=on;if(s&&e){var i=Ls(s).hoistableScripts,c=un(e),u=i.get(c);u||(u=s.querySelector(ii(c)),u||(e=x({src:e,async:!0,type:"module"},t),(t=Qs.get(c))&&Wc(e,t),u=s.createElement("script"),Et(u),rs(u,"link",e),s.head.appendChild(u)),u={type:"script",instance:u,count:1,state:null},i.set(c,u))}}function om(e,t,s,i){var c=(c=Le.current)?Tl(c):null;if(!c)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(t=cn(s.href),s=Ls(c).hoistableStyles,i=s.get(t),i||(i={type:"style",instance:null,count:0,state:null},s.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){e=cn(s.href);var u=Ls(c).hoistableStyles,m=u.get(e);if(m||(c=c.ownerDocument||c,m={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,m),(u=c.querySelector(ni(e)))&&!u._p&&(m.instance=u,m.state.loading=5),Qs.has(e)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},Qs.set(e,s),u||Rg(c,e,s,m.state))),t&&i===null)throw Error(o(528,""));return m}if(t&&i!==null)throw Error(o(529,""));return null;case"script":return t=s.async,s=s.src,typeof s=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=un(s),s=Ls(c).hoistableScripts,i=s.get(t),i||(i={type:"script",instance:null,count:0,state:null},s.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function cn(e){return'href="'+$s(e)+'"'}function ni(e){return'link[rel="stylesheet"]['+e+"]"}function cm(e){return x({},e,{"data-precedence":e.precedence,precedence:null})}function Rg(e,t,s,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),rs(t,"link",s),Et(t),e.head.appendChild(t))}function un(e){return'[src="'+$s(e)+'"]'}function ii(e){return"script[async]"+e}function um(e,t,s){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+$s(s.href)+'"]');if(i)return t.instance=i,Et(i),i;var c=x({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),Et(i),rs(i,"style",c),kl(i,s.precedence,e),t.instance=i;case"stylesheet":c=cn(s.href);var u=e.querySelector(ni(c));if(u)return t.state.loading|=4,t.instance=u,Et(u),u;i=cm(s),(c=Qs.get(c))&&Xc(i,c),u=(e.ownerDocument||e).createElement("link"),Et(u);var m=u;return m._p=new Promise(function(y,T){m.onload=y,m.onerror=T}),rs(u,"link",i),t.state.loading|=4,kl(u,s.precedence,e),t.instance=u;case"script":return u=un(s.src),(c=e.querySelector(ii(u)))?(t.instance=c,Et(c),c):(i=s,(c=Qs.get(u))&&(i=x({},s),Wc(i,c)),e=e.ownerDocument||e,c=e.createElement("script"),Et(c),rs(c,"link",i),e.head.appendChild(c),t.instance=c);case"void":return null;default:throw Error(o(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(i=t.instance,t.state.loading|=4,kl(i,s.precedence,e));return t.instance}function kl(e,t,s){for(var i=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=i.length?i[i.length-1]:null,u=c,m=0;m<i.length;m++){var y=i[m];if(y.dataset.precedence===t)u=y;else if(u!==c)break}u?u.parentNode.insertBefore(e,u.nextSibling):(t=s.nodeType===9?s.head:s,t.insertBefore(e,t.firstChild))}function Xc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Wc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Al=null;function dm(e,t,s){if(Al===null){var i=new Map,c=Al=new Map;c.set(s,i)}else c=Al,i=c.get(s),i||(i=new Map,c.set(s,i));if(i.has(e))return i;for(i.set(e,null),s=s.getElementsByTagName(e),c=0;c<s.length;c++){var u=s[c];if(!(u[_s]||u[Be]||e==="link"&&u.getAttribute("rel")==="stylesheet")&&u.namespaceURI!=="http://www.w3.org/2000/svg"){var m=u.getAttribute(t)||"";m=e+m;var y=i.get(m);y?y.push(u):i.set(m,[u])}}return i}function hm(e,t,s){e=e.ownerDocument||e,e.head.insertBefore(s,t==="title"?e.querySelector("head > title"):null)}function zg(e,t,s){if(s===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function fm(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Mg(e,t,s,i){if(s.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var c=cn(i.href),u=t.querySelector(ni(c));if(u){t=u._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Ol.bind(e),t.then(e,e)),s.state.loading|=4,s.instance=u,Et(u);return}u=t.ownerDocument||t,i=cm(i),(c=Qs.get(c))&&Xc(i,c),u=u.createElement("link"),Et(u);var m=u;m._p=new Promise(function(y,T){m.onload=y,m.onerror=T}),rs(u,"link",i),s.instance=u}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(s,t),(t=s.state.preload)&&(s.state.loading&3)===0&&(e.count++,s=Ol.bind(e),t.addEventListener("load",s),t.addEventListener("error",s))}}var Fc=0;function Dg(e,t){return e.stylesheets&&e.count===0&&Rl(e,e.stylesheets),0<e.count||0<e.imgCount?function(s){var i=setTimeout(function(){if(e.stylesheets&&Rl(e,e.stylesheets),e.unsuspend){var u=e.unsuspend;e.unsuspend=null,u()}},6e4+t);0<e.imgBytes&&Fc===0&&(Fc=62500*pg());var c=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Rl(e,e.stylesheets),e.unsuspend)){var u=e.unsuspend;e.unsuspend=null,u()}},(e.imgBytes>Fc?50:800)+t);return e.unsuspend=s,function(){e.unsuspend=null,clearTimeout(i),clearTimeout(c)}}:null}function Ol(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Rl(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Cl=null;function Rl(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Cl=new Map,t.forEach(Ug,e),Cl=null,Ol.call(e))}function Ug(e,t){if(!(t.state.loading&4)){var s=Cl.get(e);if(s)var i=s.get(null);else{s=new Map,Cl.set(e,s);for(var c=e.querySelectorAll("link[data-precedence],style[data-precedence]"),u=0;u<c.length;u++){var m=c[u];(m.nodeName==="LINK"||m.getAttribute("media")!=="not all")&&(s.set(m.dataset.precedence,m),i=m)}i&&s.set(null,i)}c=t.instance,m=c.getAttribute("data-precedence"),u=s.get(m)||i,u===i&&s.set(null,c),s.set(m,c),this.count++,i=Ol.bind(this),c.addEventListener("load",i),c.addEventListener("error",i),u?u.parentNode.insertBefore(c,u.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(c,e.firstChild)),t.state.loading|=4}}var li={$$typeof:S,Provider:null,Consumer:null,_currentValue:ie,_currentValue2:ie,_threadCount:0};function Lg(e,t,s,i,c,u,m,y,T){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=wt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wt(0),this.hiddenUpdates=wt(null),this.identifierPrefix=i,this.onUncaughtError=c,this.onCaughtError=u,this.onRecoverableError=m,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=T,this.incompleteTransitions=new Map}function mm(e,t,s,i,c,u,m,y,T,q,F,ne){return e=new Lg(e,t,s,m,T,q,F,ne,y),t=1,u===!0&&(t|=24),u=Es(3,null,null,t),e.current=u,u.stateNode=e,t=Ro(),t.refCount++,e.pooledCache=t,t.refCount++,u.memoizedState={element:i,isDehydrated:s,cache:t},Uo(u),e}function pm(e){return e?(e=$r,e):$r}function gm(e,t,s,i,c,u){c=pm(c),i.context===null?i.context=c:i.pendingContext=c,i=Ba(t),i.payload={element:s},u=u===void 0?null:u,u!==null&&(i.callback=u),s=Ha(e,i,t),s!==null&&(ws(s,e,t),Hn(s,e,t))}function bm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function eu(e,t){bm(e,t),(e=e.alternate)&&bm(e,t)}function xm(e){if(e.tag===13||e.tag===31){var t=or(e,67108864);t!==null&&ws(t,e,67108864),eu(e,67108864)}}function ym(e){if(e.tag===13||e.tag===31){var t=Cs();t=Ne(t);var s=or(e,t);s!==null&&ws(s,e,t),eu(e,t)}}var zl=!0;function Bg(e,t,s,i){var c=N.T;N.T=null;var u=J.p;try{J.p=2,tu(e,t,s,i)}finally{J.p=u,N.T=c}}function Hg(e,t,s,i){var c=N.T;N.T=null;var u=J.p;try{J.p=8,tu(e,t,s,i)}finally{J.p=u,N.T=c}}function tu(e,t,s,i){if(zl){var c=su(i);if(c===null)Ic(e,t,i,Ml,s),wm(e,i);else if(Ig(c,e,t,s,i))i.stopPropagation();else if(wm(e,i),t&4&&-1<$g.indexOf(e)){for(;c!==null;){var u=St(c);if(u!==null)switch(u.tag){case 3:if(u=u.stateNode,u.current.memoizedState.isDehydrated){var m=P(u.pendingLanes);if(m!==0){var y=u;for(y.pendingLanes|=2,y.entangledLanes|=2;m;){var T=1<<31-U(m);y.entanglements[1]|=T,m&=~T}ca(u),(ht&6)===0&&(gl=Zt()+500,ti(0))}}break;case 31:case 13:y=or(u,2),y!==null&&ws(y,u,2),xl(),eu(u,2)}if(u=su(i),u===null&&Ic(e,t,i,Ml,s),u===c)break;c=u}c!==null&&i.stopPropagation()}else Ic(e,t,i,null,s)}}function su(e){return e=ao(e),au(e)}var Ml=null;function au(e){if(Ml=null,e=ps(e),e!==null){var t=h(e);if(t===null)e=null;else{var s=t.tag;if(s===13){if(e=f(t),e!==null)return e;e=null}else if(s===31){if(e=g(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Ml=e,null}function vm(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ar()){case Si:return 2;case Ei:return 8;case Or:case Js:return 32;case Cr:return 268435456;default:return 32}default:return 32}}var ru=!1,Ja=null,Xa=null,Wa=null,oi=new Map,ci=new Map,Fa=[],$g="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function wm(e,t){switch(e){case"focusin":case"focusout":Ja=null;break;case"dragenter":case"dragleave":Xa=null;break;case"mouseover":case"mouseout":Wa=null;break;case"pointerover":case"pointerout":oi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ci.delete(t.pointerId)}}function ui(e,t,s,i,c,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:s,eventSystemFlags:i,nativeEvent:u,targetContainers:[c]},t!==null&&(t=St(t),t!==null&&xm(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function Ig(e,t,s,i,c){switch(t){case"focusin":return Ja=ui(Ja,e,t,s,i,c),!0;case"dragenter":return Xa=ui(Xa,e,t,s,i,c),!0;case"mouseover":return Wa=ui(Wa,e,t,s,i,c),!0;case"pointerover":var u=c.pointerId;return oi.set(u,ui(oi.get(u)||null,e,t,s,i,c)),!0;case"gotpointercapture":return u=c.pointerId,ci.set(u,ui(ci.get(u)||null,e,t,s,i,c)),!0}return!1}function jm(e){var t=ps(e.target);if(t!==null){var s=h(t);if(s!==null){if(t=s.tag,t===13){if(t=f(s),t!==null){e.blockedOn=t,Pt(e.priority,function(){ym(s)});return}}else if(t===31){if(t=g(s),t!==null){e.blockedOn=t,Pt(e.priority,function(){ym(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Dl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=su(e.nativeEvent);if(s===null){s=e.nativeEvent;var i=new s.constructor(s.type,s);so=i,s.target.dispatchEvent(i),so=null}else return t=St(s),t!==null&&xm(t),e.blockedOn=s,!1;t.shift()}return!0}function _m(e,t,s){Dl(e)&&s.delete(t)}function qg(){ru=!1,Ja!==null&&Dl(Ja)&&(Ja=null),Xa!==null&&Dl(Xa)&&(Xa=null),Wa!==null&&Dl(Wa)&&(Wa=null),oi.forEach(_m),ci.forEach(_m)}function Ul(e,t){e.blockedOn===t&&(e.blockedOn=null,ru||(ru=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,qg)))}var Ll=null;function Nm(e){Ll!==e&&(Ll=e,l.unstable_scheduleCallback(l.unstable_NormalPriority,function(){Ll===e&&(Ll=null);for(var t=0;t<e.length;t+=3){var s=e[t],i=e[t+1],c=e[t+2];if(typeof i!="function"){if(au(i||s)===null)continue;break}var u=St(s);u!==null&&(e.splice(t,3),t-=3,sc(u,{pending:!0,data:c,method:s.method,action:i},i,c))}}))}function dn(e){function t(T){return Ul(T,e)}Ja!==null&&Ul(Ja,e),Xa!==null&&Ul(Xa,e),Wa!==null&&Ul(Wa,e),oi.forEach(t),ci.forEach(t);for(var s=0;s<Fa.length;s++){var i=Fa[s];i.blockedOn===e&&(i.blockedOn=null)}for(;0<Fa.length&&(s=Fa[0],s.blockedOn===null);)jm(s),s.blockedOn===null&&Fa.shift();if(s=(e.ownerDocument||e).$$reactFormReplay,s!=null)for(i=0;i<s.length;i+=3){var c=s[i],u=s[i+1],m=c[st]||null;if(typeof u=="function")m||Nm(s);else if(m){var y=null;if(u&&u.hasAttribute("formAction")){if(c=u,m=u[st]||null)y=m.formAction;else if(au(c)!==null)continue}else y=m.action;typeof y=="function"?s[i+1]=y:(s.splice(i,3),i-=3),Nm(s)}}}function Sm(){function e(u){u.canIntercept&&u.info==="react-transition"&&u.intercept({handler:function(){return new Promise(function(m){return c=m})},focusReset:"manual",scroll:"manual"})}function t(){c!==null&&(c(),c=null),i||setTimeout(s,20)}function s(){if(!i&&!navigation.transition){var u=navigation.currentEntry;u&&u.url!=null&&navigation.navigate(u.url,{state:u.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var i=!1,c=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(s,100),function(){i=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),c!==null&&(c(),c=null)}}}function nu(e){this._internalRoot=e}Bl.prototype.render=nu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(o(409));var s=t.current,i=Cs();gm(s,i,e,t,null,null)},Bl.prototype.unmount=nu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;gm(e.current,2,null,e,null,null),xl(),t[lt]=null}};function Bl(e){this._internalRoot=e}Bl.prototype.unstable_scheduleHydration=function(e){if(e){var t=gt();e={blockedOn:null,target:e,priority:t};for(var s=0;s<Fa.length&&t!==0&&t<Fa[s].priority;s++);Fa.splice(s,0,e),s===0&&jm(e)}};var Em=a.version;if(Em!=="19.2.3")throw Error(o(527,Em,"19.2.3"));J.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=p(t),e=e!==null?v(e):null,e=e===null?null:e.stateNode,e};var Pg={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:N,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hl.isDisabled&&Hl.supportsFiber)try{E=Hl.inject(Pg),M=Hl}catch{}}return hi.createRoot=function(e,t){if(!d(e))throw Error(o(299));var s=!1,i="",c=Rh,u=zh,m=Mh;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(c=t.onUncaughtError),t.onCaughtError!==void 0&&(u=t.onCaughtError),t.onRecoverableError!==void 0&&(m=t.onRecoverableError)),t=mm(e,1,!1,null,null,s,i,null,c,u,m,Sm),e[lt]=t.current,$c(e),new nu(t)},hi.hydrateRoot=function(e,t,s){if(!d(e))throw Error(o(299));var i=!1,c="",u=Rh,m=zh,y=Mh,T=null;return s!=null&&(s.unstable_strictMode===!0&&(i=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(u=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(y=s.onRecoverableError),s.formState!==void 0&&(T=s.formState)),t=mm(e,1,!0,t,s??null,i,c,T,u,m,y,Sm),t.context=pm(null),s=t.current,i=Cs(),i=Ne(i),c=Ba(i),c.callback=null,Ha(s,c,i),s=i,t.current.lanes=s,it(t,s),ca(t),e[lt]=t.current,$c(e),new Bl(t)},hi.version="19.2.3",hi}var Um;function Fg(){if(Um)return ou.exports;Um=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(a){console.error(a)}}return l(),ou.exports=Wg(),ou.exports}var eb=Fg();const tb=hp(eb);function Ql(l,a){var n={};for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&a.indexOf(o)<0&&(n[o]=l[o]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,o=Object.getOwnPropertySymbols(l);d<o.length;d++)a.indexOf(o[d])<0&&Object.prototype.propertyIsEnumerable.call(l,o[d])&&(n[o[d]]=l[o[d]]);return n}function sb(l,a,n,o){function d(h){return h instanceof n?h:new n(function(f){f(h)})}return new(n||(n=Promise))(function(h,f){function g(v){try{p(o.next(v))}catch(x){f(x)}}function b(v){try{p(o.throw(v))}catch(x){f(x)}}function p(v){v.done?h(v.value):d(v.value).then(g,b)}p((o=o.apply(l,a||[])).next())})}const ab=l=>l?(...a)=>l(...a):(...a)=>fetch(...a);class Mu extends Error{constructor(a,n="FunctionsError",o){super(a),this.name=n,this.context=o}}class rb extends Mu{constructor(a){super("Failed to send a request to the Edge Function","FunctionsFetchError",a)}}class Lm extends Mu{constructor(a){super("Relay Error invoking the Edge Function","FunctionsRelayError",a)}}class Bm extends Mu{constructor(a){super("Edge Function returned a non-2xx status code","FunctionsHttpError",a)}}var ju;(function(l){l.Any="any",l.ApNortheast1="ap-northeast-1",l.ApNortheast2="ap-northeast-2",l.ApSouth1="ap-south-1",l.ApSoutheast1="ap-southeast-1",l.ApSoutheast2="ap-southeast-2",l.CaCentral1="ca-central-1",l.EuCentral1="eu-central-1",l.EuWest1="eu-west-1",l.EuWest2="eu-west-2",l.EuWest3="eu-west-3",l.SaEast1="sa-east-1",l.UsEast1="us-east-1",l.UsWest1="us-west-1",l.UsWest2="us-west-2"})(ju||(ju={}));class nb{constructor(a,{headers:n={},customFetch:o,region:d=ju.Any}={}){this.url=a,this.headers=n,this.region=d,this.fetch=ab(o)}setAuth(a){this.headers.Authorization=`Bearer ${a}`}invoke(a){return sb(this,arguments,void 0,function*(n,o={}){var d;let h,f;try{const{headers:g,method:b,body:p,signal:v,timeout:x}=o;let _={},{region:j}=o;j||(j=this.region);const A=new URL(`${this.url}/${n}`);j&&j!=="any"&&(_["x-region"]=j,A.searchParams.set("forceFunctionRegion",j));let C;p&&(g&&!Object.prototype.hasOwnProperty.call(g,"Content-Type")||!g)?typeof Blob<"u"&&p instanceof Blob||p instanceof ArrayBuffer?(_["Content-Type"]="application/octet-stream",C=p):typeof p=="string"?(_["Content-Type"]="text/plain",C=p):typeof FormData<"u"&&p instanceof FormData?C=p:(_["Content-Type"]="application/json",C=JSON.stringify(p)):C=p;let z=v;x&&(f=new AbortController,h=setTimeout(()=>f.abort(),x),v?(z=f.signal,v.addEventListener("abort",()=>f.abort())):z=f.signal);const D=yield this.fetch(A.toString(),{method:b||"POST",headers:Object.assign(Object.assign(Object.assign({},_),this.headers),g),body:C,signal:z}).catch(H=>{throw new rb(H)}),R=D.headers.get("x-relay-error");if(R&&R==="true")throw new Lm(D);if(!D.ok)throw new Bm(D);let S=((d=D.headers.get("Content-Type"))!==null&&d!==void 0?d:"text/plain").split(";")[0].trim(),Q;return S==="application/json"?Q=yield D.json():S==="application/octet-stream"||S==="application/pdf"?Q=yield D.blob():S==="text/event-stream"?Q=D:S==="multipart/form-data"?Q=yield D.formData():Q=yield D.text(),{data:Q,error:null,response:D}}catch(g){return{data:null,error:g,response:g instanceof Bm||g instanceof Lm?g.context:void 0}}finally{h&&clearTimeout(h)}})}}var ib=class extends Error{constructor(l){super(l.message),this.name="PostgrestError",this.details=l.details,this.hint=l.hint,this.code=l.code}},lb=class{constructor(l){var a,n;this.shouldThrowOnError=!1,this.method=l.method,this.url=l.url,this.headers=new Headers(l.headers),this.schema=l.schema,this.body=l.body,this.shouldThrowOnError=(a=l.shouldThrowOnError)!==null&&a!==void 0?a:!1,this.signal=l.signal,this.isMaybeSingle=(n=l.isMaybeSingle)!==null&&n!==void 0?n:!1,l.fetch?this.fetch=l.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(l,a){return this.headers=new Headers(this.headers),this.headers.set(l,a),this}then(l,a){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let d=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async h=>{let f=null,g=null,b=null,p=h.status,v=h.statusText;if(h.ok){var x,_;if(n.method!=="HEAD"){var j;const D=await h.text();D===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((j=n.headers.get("Accept"))===null||j===void 0)&&j.includes("application/vnd.pgrst.plan+text"))?g=D:g=JSON.parse(D))}const C=(x=n.headers.get("Prefer"))===null||x===void 0?void 0:x.match(/count=(exact|planned|estimated)/),z=(_=h.headers.get("content-range"))===null||_===void 0?void 0:_.split("/");C&&z&&z.length>1&&(b=parseInt(z[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(g)&&(g.length>1?(f={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,b=null,p=406,v="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{var A;const C=await h.text();try{f=JSON.parse(C),Array.isArray(f)&&h.status===404&&(g=[],f=null,p=200,v="OK")}catch{h.status===404&&C===""?(p=204,v="No Content"):f={message:C}}if(f&&n.isMaybeSingle&&(!(f==null||(A=f.details)===null||A===void 0)&&A.includes("0 rows"))&&(f=null,p=200,v="OK"),f&&n.shouldThrowOnError)throw new ib(f)}return{error:f,data:g,count:b,status:p,statusText:v}});return this.shouldThrowOnError||(d=d.catch(h=>{var f;let g="";const b=h==null?void 0:h.cause;if(b){var p,v,x,_;const A=(p=b==null?void 0:b.message)!==null&&p!==void 0?p:"",C=(v=b==null?void 0:b.code)!==null&&v!==void 0?v:"";g=`${(x=h==null?void 0:h.name)!==null&&x!==void 0?x:"FetchError"}: ${h==null?void 0:h.message}`,g+=`

Caused by: ${(_=b==null?void 0:b.name)!==null&&_!==void 0?_:"Error"}: ${A}`,C&&(g+=` (${C})`),b!=null&&b.stack&&(g+=`
${b.stack}`)}else{var j;g=(j=h==null?void 0:h.stack)!==null&&j!==void 0?j:""}return{error:{message:`${(f=h==null?void 0:h.name)!==null&&f!==void 0?f:"FetchError"}: ${h==null?void 0:h.message}`,details:g,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),d.then(l,a)}returns(){return this}overrideTypes(){return this}},ob=class extends lb{select(l){let a=!1;const n=(l??"*").split("").map(o=>/\s/.test(o)&&!a?"":(o==='"'&&(a=!a),o)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(l,{ascending:a=!0,nullsFirst:n,foreignTable:o,referencedTable:d=o}={}){const h=d?`${d}.order`:"order",f=this.url.searchParams.get(h);return this.url.searchParams.set(h,`${f?`${f},`:""}${l}.${a?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(l,{foreignTable:a,referencedTable:n=a}={}){const o=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(o,`${l}`),this}range(l,a,{foreignTable:n,referencedTable:o=n}={}){const d=typeof o>"u"?"offset":`${o}.offset`,h=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(d,`${l}`),this.url.searchParams.set(h,`${a-l+1}`),this}abortSignal(l){return this.signal=l,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:l=!1,verbose:a=!1,settings:n=!1,buffers:o=!1,wal:d=!1,format:h="text"}={}){var f;const g=[l?"analyze":null,a?"verbose":null,n?"settings":null,o?"buffers":null,d?"wal":null].filter(Boolean).join("|"),b=(f=this.headers.get("Accept"))!==null&&f!==void 0?f:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${h}; for="${b}"; options=${g};`),h==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(l){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${l}`),this}};const Hm=new RegExp("[,()]");var yn=class extends ob{eq(l,a){return this.url.searchParams.append(l,`eq.${a}`),this}neq(l,a){return this.url.searchParams.append(l,`neq.${a}`),this}gt(l,a){return this.url.searchParams.append(l,`gt.${a}`),this}gte(l,a){return this.url.searchParams.append(l,`gte.${a}`),this}lt(l,a){return this.url.searchParams.append(l,`lt.${a}`),this}lte(l,a){return this.url.searchParams.append(l,`lte.${a}`),this}like(l,a){return this.url.searchParams.append(l,`like.${a}`),this}likeAllOf(l,a){return this.url.searchParams.append(l,`like(all).{${a.join(",")}}`),this}likeAnyOf(l,a){return this.url.searchParams.append(l,`like(any).{${a.join(",")}}`),this}ilike(l,a){return this.url.searchParams.append(l,`ilike.${a}`),this}ilikeAllOf(l,a){return this.url.searchParams.append(l,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(l,a){return this.url.searchParams.append(l,`ilike(any).{${a.join(",")}}`),this}regexMatch(l,a){return this.url.searchParams.append(l,`match.${a}`),this}regexIMatch(l,a){return this.url.searchParams.append(l,`imatch.${a}`),this}is(l,a){return this.url.searchParams.append(l,`is.${a}`),this}isDistinct(l,a){return this.url.searchParams.append(l,`isdistinct.${a}`),this}in(l,a){const n=Array.from(new Set(a)).map(o=>typeof o=="string"&&Hm.test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(l,`in.(${n})`),this}notIn(l,a){const n=Array.from(new Set(a)).map(o=>typeof o=="string"&&Hm.test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(l,`not.in.(${n})`),this}contains(l,a){return typeof a=="string"?this.url.searchParams.append(l,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(l,`cs.{${a.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(a)}`),this}containedBy(l,a){return typeof a=="string"?this.url.searchParams.append(l,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(l,`cd.{${a.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(a)}`),this}rangeGt(l,a){return this.url.searchParams.append(l,`sr.${a}`),this}rangeGte(l,a){return this.url.searchParams.append(l,`nxl.${a}`),this}rangeLt(l,a){return this.url.searchParams.append(l,`sl.${a}`),this}rangeLte(l,a){return this.url.searchParams.append(l,`nxr.${a}`),this}rangeAdjacent(l,a){return this.url.searchParams.append(l,`adj.${a}`),this}overlaps(l,a){return typeof a=="string"?this.url.searchParams.append(l,`ov.${a}`):this.url.searchParams.append(l,`ov.{${a.join(",")}}`),this}textSearch(l,a,{config:n,type:o}={}){let d="";o==="plain"?d="pl":o==="phrase"?d="ph":o==="websearch"&&(d="w");const h=n===void 0?"":`(${n})`;return this.url.searchParams.append(l,`${d}fts${h}.${a}`),this}match(l){return Object.entries(l).forEach(([a,n])=>{this.url.searchParams.append(a,`eq.${n}`)}),this}not(l,a,n){return this.url.searchParams.append(l,`not.${a}.${n}`),this}or(l,{foreignTable:a,referencedTable:n=a}={}){const o=n?`${n}.or`:"or";return this.url.searchParams.append(o,`(${l})`),this}filter(l,a,n){return this.url.searchParams.append(l,`${a}.${n}`),this}},cb=class{constructor(l,{headers:a={},schema:n,fetch:o}){this.url=l,this.headers=new Headers(a),this.schema=n,this.fetch=o}select(l,a){const{head:n=!1,count:o}=a??{},d=n?"HEAD":"GET";let h=!1;const f=(l??"*").split("").map(g=>/\s/.test(g)&&!h?"":(g==='"'&&(h=!h),g)).join("");return this.url.searchParams.set("select",f),o&&this.headers.append("Prefer",`count=${o}`),new yn({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(l,{count:a,defaultToNull:n=!0}={}){var o;const d="POST";if(a&&this.headers.append("Prefer",`count=${a}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(l)){const h=l.reduce((f,g)=>f.concat(Object.keys(g)),[]);if(h.length>0){const f=[...new Set(h)].map(g=>`"${g}"`);this.url.searchParams.set("columns",f.join(","))}}return new yn({method:d,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}upsert(l,{onConflict:a,ignoreDuplicates:n=!1,count:o,defaultToNull:d=!0}={}){var h;const f="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),o&&this.headers.append("Prefer",`count=${o}`),d||this.headers.append("Prefer","missing=default"),Array.isArray(l)){const g=l.reduce((b,p)=>b.concat(Object.keys(p)),[]);if(g.length>0){const b=[...new Set(g)].map(p=>`"${p}"`);this.url.searchParams.set("columns",b.join(","))}}return new yn({method:f,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}update(l,{count:a}={}){var n;const o="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new yn({method:o,url:this.url,headers:this.headers,schema:this.schema,body:l,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:l}={}){var a;const n="DELETE";return l&&this.headers.append("Prefer",`count=${l}`),new yn({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}},ub=class fp{constructor(a,{headers:n={},schema:o,fetch:d}={}){this.url=a,this.headers=new Headers(n),this.schemaName=o,this.fetch=d}from(a){if(!a||typeof a!="string"||a.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new cb(new URL(`${this.url}/${a}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new fp(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,n={},{head:o=!1,get:d=!1,count:h}={}){var f;let g;const b=new URL(`${this.url}/rpc/${a}`);let p;o||d?(g=o?"HEAD":"GET",Object.entries(n).filter(([x,_])=>_!==void 0).map(([x,_])=>[x,Array.isArray(_)?`{${_.join(",")}}`:`${_}`]).forEach(([x,_])=>{b.searchParams.append(x,_)})):(g="POST",p=n);const v=new Headers(this.headers);return h&&v.set("Prefer",`count=${h}`),new yn({method:g,url:b,headers:v,schema:this.schemaName,body:p,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}};class db{constructor(){}static detectEnvironment(){var a;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((a=navigator.userAgent)===null||a===void 0)&&a.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const o=n.node,d=parseInt(o.replace(/^v/,"").split(".")[0]);return d>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${d} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${d} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const a=this.detectEnvironment();if(a.constructor)return a.constructor;let n=a.error||"WebSocket not supported in this environment.";throw a.workaround&&(n+=`

Suggested solution: ${a.workaround}`),new Error(n)}static createWebSocket(a,n){const o=this.getWebSocketConstructor();return new o(a,n)}static isWebSocketSupported(){try{const a=this.detectEnvironment();return a.type==="native"||a.type==="ws"}catch{return!1}}}const hb="2.89.0",fb=`realtime-js/${hb}`,mp="1.0.0",mb="2.0.0",$m=mp,_u=1e4,pb=1e3,gb=100;var sr;(function(l){l[l.connecting=0]="connecting",l[l.open=1]="open",l[l.closing=2]="closing",l[l.closed=3]="closed"})(sr||(sr={}));var Wt;(function(l){l.closed="closed",l.errored="errored",l.joined="joined",l.joining="joining",l.leaving="leaving"})(Wt||(Wt={}));var aa;(function(l){l.close="phx_close",l.error="phx_error",l.join="phx_join",l.reply="phx_reply",l.leave="phx_leave",l.access_token="access_token"})(aa||(aa={}));var Nu;(function(l){l.websocket="websocket"})(Nu||(Nu={}));var Nr;(function(l){l.Connecting="connecting",l.Open="open",l.Closing="closing",l.Closed="closed"})(Nr||(Nr={}));class bb{constructor(a){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=a??[]}encode(a,n){if(a.event===this.BROADCAST_EVENT&&!(a.payload instanceof ArrayBuffer)&&typeof a.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(a));let o=[a.join_ref,a.ref,a.topic,a.event,a.payload];return n(JSON.stringify(o))}_binaryEncodeUserBroadcastPush(a){var n;return this._isArrayBuffer((n=a.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(a):this._encodeJsonUserBroadcastPush(a)}_encodeBinaryUserBroadcastPush(a){var n,o;const d=(o=(n=a.payload)===null||n===void 0?void 0:n.payload)!==null&&o!==void 0?o:new ArrayBuffer(0);return this._encodeUserBroadcastPush(a,this.BINARY_ENCODING,d)}_encodeJsonUserBroadcastPush(a){var n,o;const d=(o=(n=a.payload)===null||n===void 0?void 0:n.payload)!==null&&o!==void 0?o:{},f=new TextEncoder().encode(JSON.stringify(d)).buffer;return this._encodeUserBroadcastPush(a,this.JSON_ENCODING,f)}_encodeUserBroadcastPush(a,n,o){var d,h;const f=a.topic,g=(d=a.ref)!==null&&d!==void 0?d:"",b=(h=a.join_ref)!==null&&h!==void 0?h:"",p=a.payload.event,v=this.allowedMetadataKeys?this._pick(a.payload,this.allowedMetadataKeys):{},x=Object.keys(v).length===0?"":JSON.stringify(v);if(b.length>255)throw new Error(`joinRef length ${b.length} exceeds maximum of 255`);if(g.length>255)throw new Error(`ref length ${g.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`topic length ${f.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`userEvent length ${p.length} exceeds maximum of 255`);if(x.length>255)throw new Error(`metadata length ${x.length} exceeds maximum of 255`);const _=this.USER_BROADCAST_PUSH_META_LENGTH+b.length+g.length+f.length+p.length+x.length,j=new ArrayBuffer(this.HEADER_LENGTH+_);let A=new DataView(j),C=0;A.setUint8(C++,this.KINDS.userBroadcastPush),A.setUint8(C++,b.length),A.setUint8(C++,g.length),A.setUint8(C++,f.length),A.setUint8(C++,p.length),A.setUint8(C++,x.length),A.setUint8(C++,n),Array.from(b,D=>A.setUint8(C++,D.charCodeAt(0))),Array.from(g,D=>A.setUint8(C++,D.charCodeAt(0))),Array.from(f,D=>A.setUint8(C++,D.charCodeAt(0))),Array.from(p,D=>A.setUint8(C++,D.charCodeAt(0))),Array.from(x,D=>A.setUint8(C++,D.charCodeAt(0)));var z=new Uint8Array(j.byteLength+o.byteLength);return z.set(new Uint8Array(j),0),z.set(new Uint8Array(o),j.byteLength),z.buffer}decode(a,n){if(this._isArrayBuffer(a)){let o=this._binaryDecode(a);return n(o)}if(typeof a=="string"){const o=JSON.parse(a),[d,h,f,g,b]=o;return n({join_ref:d,ref:h,topic:f,event:g,payload:b})}return n({})}_binaryDecode(a){const n=new DataView(a),o=n.getUint8(0),d=new TextDecoder;switch(o){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(a,n,d)}}_decodeUserBroadcast(a,n,o){const d=n.getUint8(1),h=n.getUint8(2),f=n.getUint8(3),g=n.getUint8(4);let b=this.HEADER_LENGTH+4;const p=o.decode(a.slice(b,b+d));b=b+d;const v=o.decode(a.slice(b,b+h));b=b+h;const x=o.decode(a.slice(b,b+f));b=b+f;const _=a.slice(b,a.byteLength),j=g===this.JSON_ENCODING?JSON.parse(o.decode(_)):_,A={type:this.BROADCAST_EVENT,event:v,payload:j};return f>0&&(A.meta=JSON.parse(x)),{join_ref:null,ref:null,topic:p,event:this.BROADCAST_EVENT,payload:A}}_isArrayBuffer(a){var n;return a instanceof ArrayBuffer||((n=a==null?void 0:a.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(a,n){return!a||typeof a!="object"?{}:Object.fromEntries(Object.entries(a).filter(([o])=>n.includes(o)))}}class pp{constructor(a,n){this.callback=a,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=a,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var _t;(function(l){l.abstime="abstime",l.bool="bool",l.date="date",l.daterange="daterange",l.float4="float4",l.float8="float8",l.int2="int2",l.int4="int4",l.int4range="int4range",l.int8="int8",l.int8range="int8range",l.json="json",l.jsonb="jsonb",l.money="money",l.numeric="numeric",l.oid="oid",l.reltime="reltime",l.text="text",l.time="time",l.timestamp="timestamp",l.timestamptz="timestamptz",l.timetz="timetz",l.tsrange="tsrange",l.tstzrange="tstzrange"})(_t||(_t={}));const Im=(l,a,n={})=>{var o;const d=(o=n.skipTypes)!==null&&o!==void 0?o:[];return a?Object.keys(a).reduce((h,f)=>(h[f]=xb(f,l,a,d),h),{}):{}},xb=(l,a,n,o)=>{const d=a.find(g=>g.name===l),h=d==null?void 0:d.type,f=n[l];return h&&!o.includes(h)?gp(h,f):Su(f)},gp=(l,a)=>{if(l.charAt(0)==="_"){const n=l.slice(1,l.length);return jb(a,n)}switch(l){case _t.bool:return yb(a);case _t.float4:case _t.float8:case _t.int2:case _t.int4:case _t.int8:case _t.numeric:case _t.oid:return vb(a);case _t.json:case _t.jsonb:return wb(a);case _t.timestamp:return _b(a);case _t.abstime:case _t.date:case _t.daterange:case _t.int4range:case _t.int8range:case _t.money:case _t.reltime:case _t.text:case _t.time:case _t.timestamptz:case _t.timetz:case _t.tsrange:case _t.tstzrange:return Su(a);default:return Su(a)}},Su=l=>l,yb=l=>{switch(l){case"t":return!0;case"f":return!1;default:return l}},vb=l=>{if(typeof l=="string"){const a=parseFloat(l);if(!Number.isNaN(a))return a}return l},wb=l=>{if(typeof l=="string")try{return JSON.parse(l)}catch{return l}return l},jb=(l,a)=>{if(typeof l!="string")return l;const n=l.length-1,o=l[n];if(l[0]==="{"&&o==="}"){let h;const f=l.slice(1,n);try{h=JSON.parse("["+f+"]")}catch{h=f?f.split(","):[]}return h.map(g=>gp(a,g))}return l},_b=l=>typeof l=="string"?l.replace(" ","T"):l,bp=l=>{const a=new URL(l);return a.protocol=a.protocol.replace(/^ws/i,"http"),a.pathname=a.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),a.pathname===""||a.pathname==="/"?a.pathname="/api/broadcast":a.pathname=a.pathname+"/api/broadcast",a.href};class hu{constructor(a,n,o={},d=_u){this.channel=a,this.event=n,this.payload=o,this.timeout=d,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(a){this.timeout=a,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(a){this.payload=Object.assign(Object.assign({},this.payload),a)}receive(a,n){var o;return this._hasReceived(a)&&n((o=this.receivedResp)===null||o===void 0?void 0:o.response),this.recHooks.push({status:a,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const a=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},a),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(a,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:a,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:a,response:n}){this.recHooks.filter(o=>o.status===a).forEach(o=>o.callback(n))}_hasReceived(a){return this.receivedResp&&this.receivedResp.status===a}}var qm;(function(l){l.SYNC="sync",l.JOIN="join",l.LEAVE="leave"})(qm||(qm={}));class pi{constructor(a,n){this.channel=a,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const o=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(o.state,{},d=>{const{onJoin:h,onLeave:f,onSync:g}=this.caller;this.joinRef=this.channel._joinRef(),this.state=pi.syncState(this.state,d,h,f),this.pendingDiffs.forEach(b=>{this.state=pi.syncDiff(this.state,b,h,f)}),this.pendingDiffs=[],g()}),this.channel._on(o.diff,{},d=>{const{onJoin:h,onLeave:f,onSync:g}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(d):(this.state=pi.syncDiff(this.state,d,h,f),g())}),this.onJoin((d,h,f)=>{this.channel._trigger("presence",{event:"join",key:d,currentPresences:h,newPresences:f})}),this.onLeave((d,h,f)=>{this.channel._trigger("presence",{event:"leave",key:d,currentPresences:h,leftPresences:f})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(a,n,o,d){const h=this.cloneDeep(a),f=this.transformState(n),g={},b={};return this.map(h,(p,v)=>{f[p]||(b[p]=v)}),this.map(f,(p,v)=>{const x=h[p];if(x){const _=v.map(z=>z.presence_ref),j=x.map(z=>z.presence_ref),A=v.filter(z=>j.indexOf(z.presence_ref)<0),C=x.filter(z=>_.indexOf(z.presence_ref)<0);A.length>0&&(g[p]=A),C.length>0&&(b[p]=C)}else g[p]=v}),this.syncDiff(h,{joins:g,leaves:b},o,d)}static syncDiff(a,n,o,d){const{joins:h,leaves:f}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return o||(o=()=>{}),d||(d=()=>{}),this.map(h,(g,b)=>{var p;const v=(p=a[g])!==null&&p!==void 0?p:[];if(a[g]=this.cloneDeep(b),v.length>0){const x=a[g].map(j=>j.presence_ref),_=v.filter(j=>x.indexOf(j.presence_ref)<0);a[g].unshift(..._)}o(g,v,b)}),this.map(f,(g,b)=>{let p=a[g];if(!p)return;const v=b.map(x=>x.presence_ref);p=p.filter(x=>v.indexOf(x.presence_ref)<0),a[g]=p,d(g,p,b),p.length===0&&delete a[g]}),a}static map(a,n){return Object.getOwnPropertyNames(a).map(o=>n(o,a[o]))}static transformState(a){return a=this.cloneDeep(a),Object.getOwnPropertyNames(a).reduce((n,o)=>{const d=a[o];return"metas"in d?n[o]=d.metas.map(h=>(h.presence_ref=h.phx_ref,delete h.phx_ref,delete h.phx_ref_prev,h)):n[o]=d,n},{})}static cloneDeep(a){return JSON.parse(JSON.stringify(a))}onJoin(a){this.caller.onJoin=a}onLeave(a){this.caller.onLeave=a}onSync(a){this.caller.onSync=a}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Pm;(function(l){l.ALL="*",l.INSERT="INSERT",l.UPDATE="UPDATE",l.DELETE="DELETE"})(Pm||(Pm={}));var gi;(function(l){l.BROADCAST="broadcast",l.PRESENCE="presence",l.POSTGRES_CHANGES="postgres_changes",l.SYSTEM="system"})(gi||(gi={}));var Aa;(function(l){l.SUBSCRIBED="SUBSCRIBED",l.TIMED_OUT="TIMED_OUT",l.CLOSED="CLOSED",l.CHANNEL_ERROR="CHANNEL_ERROR"})(Aa||(Aa={}));class jn{constructor(a,n={config:{}},o){var d,h;if(this.topic=a,this.params=n,this.socket=o,this.bindings={},this.state=Wt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=a.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new hu(this,aa.join,this.params,this.timeout),this.rejoinTimer=new pp(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Wt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(f=>f.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Wt.closed,this.socket._remove(this)}),this._onError(f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=Wt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Wt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=Wt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(aa.reply,{},(f,g)=>{this._trigger(this._replyEventName(g),f)}),this.presence=new pi(this),this.broadcastEndpointURL=bp(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((h=(d=this.params.config)===null||d===void 0?void 0:d.broadcast)===null||h===void 0)&&h.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(a,n=this.timeout){var o,d,h;if(this.socket.isConnected()||this.socket.connect(),this.state==Wt.closed){const{config:{broadcast:f,presence:g,private:b}}=this.params,p=(d=(o=this.bindings.postgres_changes)===null||o===void 0?void 0:o.map(j=>j.filter))!==null&&d!==void 0?d:[],v=!!this.bindings[gi.PRESENCE]&&this.bindings[gi.PRESENCE].length>0||((h=this.params.config.presence)===null||h===void 0?void 0:h.enabled)===!0,x={},_={broadcast:f,presence:Object.assign(Object.assign({},g),{enabled:v}),postgres_changes:p,private:b};this.socket.accessTokenValue&&(x.access_token=this.socket.accessTokenValue),this._onError(j=>a==null?void 0:a(Aa.CHANNEL_ERROR,j)),this._onClose(()=>a==null?void 0:a(Aa.CLOSED)),this.updateJoinPayload(Object.assign({config:_},x)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:j})=>{var A;if(this.socket._isManualToken()||this.socket.setAuth(),j===void 0){a==null||a(Aa.SUBSCRIBED);return}else{const C=this.bindings.postgres_changes,z=(A=C==null?void 0:C.length)!==null&&A!==void 0?A:0,D=[];for(let R=0;R<z;R++){const S=C[R],{filter:{event:Q,schema:H,table:G,filter:Z}}=S,fe=j&&j[R];if(fe&&fe.event===Q&&jn.isFilterValueEqual(fe.schema,H)&&jn.isFilterValueEqual(fe.table,G)&&jn.isFilterValueEqual(fe.filter,Z))D.push(Object.assign(Object.assign({},S),{id:fe.id}));else{this.unsubscribe(),this.state=Wt.errored,a==null||a(Aa.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=D,a&&a(Aa.SUBSCRIBED);return}}).receive("error",j=>{this.state=Wt.errored,a==null||a(Aa.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(j).join(", ")||"error")))}).receive("timeout",()=>{a==null||a(Aa.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(a,n={}){return await this.send({type:"presence",event:"track",payload:a},n.timeout||this.timeout)}async untrack(a={}){return await this.send({type:"presence",event:"untrack"},a)}on(a,n,o){return this.state===Wt.joined&&a===gi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(a,n,o)}async httpSend(a,n,o={}){var d;if(n==null)return Promise.reject("Payload is required for httpSend()");const h={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(h.Authorization=`Bearer ${this.socket.accessTokenValue}`);const f={method:"POST",headers:h,body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:n,private:this.private}]})},g=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(d=o.timeout)!==null&&d!==void 0?d:this.timeout);if(g.status===202)return{success:!0};let b=g.statusText;try{const p=await g.json();b=p.error||p.message||b}catch{}return Promise.reject(new Error(b))}async send(a,n={}){var o,d;if(!this._canPush()&&a.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:h,payload:f}=a,g={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(g.Authorization=`Bearer ${this.socket.accessTokenValue}`);const b={method:"POST",headers:g,body:JSON.stringify({messages:[{topic:this.subTopic,event:h,payload:f,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,b,(o=n.timeout)!==null&&o!==void 0?o:this.timeout);return await((d=p.body)===null||d===void 0?void 0:d.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(h=>{var f,g,b;const p=this._push(a.type,a,n.timeout||this.timeout);a.type==="broadcast"&&!(!((b=(g=(f=this.params)===null||f===void 0?void 0:f.config)===null||g===void 0?void 0:g.broadcast)===null||b===void 0)&&b.ack)&&h("ok"),p.receive("ok",()=>h("ok")),p.receive("error",()=>h("error")),p.receive("timeout",()=>h("timed out"))})}updateJoinPayload(a){this.joinPush.updatePayload(a)}unsubscribe(a=this.timeout){this.state=Wt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(aa.close,"leave",this._joinRef())};this.joinPush.destroy();let o=null;return new Promise(d=>{o=new hu(this,aa.leave,{},a),o.receive("ok",()=>{n(),d("ok")}).receive("timeout",()=>{n(),d("timed out")}).receive("error",()=>{d("error")}),o.send(),this._canPush()||o.trigger("ok",{})}).finally(()=>{o==null||o.destroy()})}teardown(){this.pushBuffer.forEach(a=>a.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Wt.closed,this.bindings={}}async _fetchWithTimeout(a,n,o){const d=new AbortController,h=setTimeout(()=>d.abort(),o),f=await this.socket.fetch(a,Object.assign(Object.assign({},n),{signal:d.signal}));return clearTimeout(h),f}_push(a,n,o=this.timeout){if(!this.joinedOnce)throw`tried to push '${a}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let d=new hu(this,a,n,o);return this._canPush()?d.send():this._addToPushBuffer(d),d}_addToPushBuffer(a){if(a.startTimeout(),this.pushBuffer.push(a),this.pushBuffer.length>gb){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(a,n,o){return n}_isMember(a){return this.topic===a}_joinRef(){return this.joinPush.ref}_trigger(a,n,o){var d,h;const f=a.toLocaleLowerCase(),{close:g,error:b,leave:p,join:v}=aa;if(o&&[g,b,p,v].indexOf(f)>=0&&o!==this._joinRef())return;let _=this._onMessage(f,n,o);if(n&&!_)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(f)?(d=this.bindings.postgres_changes)===null||d===void 0||d.filter(j=>{var A,C,z;return((A=j.filter)===null||A===void 0?void 0:A.event)==="*"||((z=(C=j.filter)===null||C===void 0?void 0:C.event)===null||z===void 0?void 0:z.toLocaleLowerCase())===f}).map(j=>j.callback(_,o)):(h=this.bindings[f])===null||h===void 0||h.filter(j=>{var A,C,z,D,R,S;if(["broadcast","presence","postgres_changes"].includes(f))if("id"in j){const Q=j.id,H=(A=j.filter)===null||A===void 0?void 0:A.event;return Q&&((C=n.ids)===null||C===void 0?void 0:C.includes(Q))&&(H==="*"||(H==null?void 0:H.toLocaleLowerCase())===((z=n.data)===null||z===void 0?void 0:z.type.toLocaleLowerCase()))}else{const Q=(R=(D=j==null?void 0:j.filter)===null||D===void 0?void 0:D.event)===null||R===void 0?void 0:R.toLocaleLowerCase();return Q==="*"||Q===((S=n==null?void 0:n.event)===null||S===void 0?void 0:S.toLocaleLowerCase())}else return j.type.toLocaleLowerCase()===f}).map(j=>{if(typeof _=="object"&&"ids"in _){const A=_.data,{schema:C,table:z,commit_timestamp:D,type:R,errors:S}=A;_=Object.assign(Object.assign({},{schema:C,table:z,commit_timestamp:D,eventType:R,new:{},old:{},errors:S}),this._getPayloadRecords(A))}j.callback(_,o)})}_isClosed(){return this.state===Wt.closed}_isJoined(){return this.state===Wt.joined}_isJoining(){return this.state===Wt.joining}_isLeaving(){return this.state===Wt.leaving}_replyEventName(a){return`chan_reply_${a}`}_on(a,n,o){const d=a.toLocaleLowerCase(),h={type:d,filter:n,callback:o};return this.bindings[d]?this.bindings[d].push(h):this.bindings[d]=[h],this}_off(a,n){const o=a.toLocaleLowerCase();return this.bindings[o]&&(this.bindings[o]=this.bindings[o].filter(d=>{var h;return!(((h=d.type)===null||h===void 0?void 0:h.toLocaleLowerCase())===o&&jn.isEqual(d.filter,n))})),this}static isEqual(a,n){if(Object.keys(a).length!==Object.keys(n).length)return!1;for(const o in a)if(a[o]!==n[o])return!1;return!0}static isFilterValueEqual(a,n){return(a??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(a){this._on(aa.close,{},a)}_onError(a){this._on(aa.error,{},n=>a(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(a=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Wt.joining,this.joinPush.resend(a))}_getPayloadRecords(a){const n={new:{},old:{}};return(a.type==="INSERT"||a.type==="UPDATE")&&(n.new=Im(a.columns,a.record)),(a.type==="UPDATE"||a.type==="DELETE")&&(n.old=Im(a.columns,a.old_record)),n}}const fu=()=>{},$l={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Nb=[1e3,2e3,5e3,1e4],Sb=1e4,Eb=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Tb{constructor(a,n){var o;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=_u,this.transport=null,this.heartbeatIntervalMs=$l.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=fu,this.ref=0,this.reconnectTimer=null,this.vsn=$m,this.logger=fu,this.conn=null,this.sendBuffer=[],this.serializer=new bb,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=d=>d?(...h)=>d(...h):(...h)=>fetch(...h),!(!((o=n==null?void 0:n.params)===null||o===void 0)&&o.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${a}/${Nu.websocket}`,this.httpEndpoint=bp(a),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=db.createWebSocket(this.endpointURL())}catch(a){this._setConnectionState("disconnected");const n=a.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(a,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const o=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(o),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(a?this.conn.close(a,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(a){const n=await a.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const a=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),a}log(a,n,o){this.logger(a,n,o)}connectionState(){switch(this.conn&&this.conn.readyState){case sr.connecting:return Nr.Connecting;case sr.open:return Nr.Open;case sr.closing:return Nr.Closing;default:return Nr.Closed}}isConnected(){return this.connectionState()===Nr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(a,n={config:{}}){const o=`realtime:${a}`,d=this.getChannels().find(h=>h.topic===o);if(d)return d;{const h=new jn(`realtime:${a}`,n,this);return this.channels.push(h),h}}push(a){const{topic:n,event:o,payload:d,ref:h}=a,f=()=>{this.encode(a,g=>{var b;(b=this.conn)===null||b===void 0||b.send(g)})};this.log("push",`${n} ${o} (${h})`,d),this.isConnected()?f():this.sendBuffer.push(f)}async setAuth(a=null){this._authPromise=this._performAuth(a);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var a;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(a=this.conn)===null||a===void 0||a.close(pb,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},$l.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(a){this.heartbeatCallback=a}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(a=>a()),this.sendBuffer=[])}_makeRef(){let a=this.ref+1;return a===this.ref?this.ref=0:this.ref=a,this.ref.toString()}_leaveOpenTopic(a){let n=this.channels.find(o=>o.topic===a&&(o._isJoined()||o._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${a}"`),n.unsubscribe())}_remove(a){this.channels=this.channels.filter(n=>n.topic!==a.topic)}_onConnMessage(a){this.decode(a.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:o,event:d,payload:h,ref:f}=n,g=f?`(${f})`:"",b=h.status||"";this.log("receive",`${b} ${o} ${d} ${g}`.trim(),h),this.channels.filter(p=>p._isMember(o)).forEach(p=>p._trigger(d,h,f)),this._triggerStateCallbacks("message",n)})}_clearTimer(a){var n;a==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):a==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=a=>this._onConnError(a),this.conn.onmessage=a=>this._onConnMessage(a),this.conn.onclose=a=>this._onConnClose(a),this.conn.readyState===sr.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===sr.open||this.conn.readyState===sr.connecting)try{this.conn.close()}catch(a){this.log("error","Error closing connection",a)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(a=>a.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const a=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(a),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(a){var n;this._setConnectionState("disconnected"),this.log("transport","close",a),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",a)}_onConnError(a){this._setConnectionState("disconnected"),this.log("transport",`${a}`),this._triggerChanError(),this._triggerStateCallbacks("error",a)}_triggerChanError(){this.channels.forEach(a=>a._trigger(aa.error))}_appendParams(a,n){if(Object.keys(n).length===0)return a;const o=a.match(/\?/)?"&":"?",d=new URLSearchParams(n);return`${a}${o}${d}`}_workerObjectUrl(a){let n;if(a)n=a;else{const o=new Blob([Eb],{type:"application/javascript"});n=URL.createObjectURL(o)}return n}_setConnectionState(a,n=!1){this._connectionState=a,a==="connecting"?this._wasManualDisconnect=!1:a==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(a=null){let n,o=!1;if(a)n=a,o=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(d){this.log("error","Error fetching access token from callback",d),n=this.accessTokenValue}else n=this.accessTokenValue;o?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(d=>{const h={access_token:n,version:fb};n&&d.updateJoinPayload(h),d.joinedOnce&&d._isJoined()&&d._push(aa.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(a="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${a}`,n)})}_triggerStateCallbacks(a,n){try{this.stateChangeCallbacks[a].forEach(o=>{try{o(n)}catch(d){this.log("error",`error in ${a} callback`,d)}})}catch(o){this.log("error",`error triggering ${a} callbacks`,o)}}_setupReconnectionTimer(){this.reconnectTimer=new pp(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},$l.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(a){var n,o,d,h,f,g,b,p,v,x,_,j;switch(this.transport=(n=a==null?void 0:a.transport)!==null&&n!==void 0?n:null,this.timeout=(o=a==null?void 0:a.timeout)!==null&&o!==void 0?o:_u,this.heartbeatIntervalMs=(d=a==null?void 0:a.heartbeatIntervalMs)!==null&&d!==void 0?d:$l.HEARTBEAT_INTERVAL,this.worker=(h=a==null?void 0:a.worker)!==null&&h!==void 0?h:!1,this.accessToken=(f=a==null?void 0:a.accessToken)!==null&&f!==void 0?f:null,this.heartbeatCallback=(g=a==null?void 0:a.heartbeatCallback)!==null&&g!==void 0?g:fu,this.vsn=(b=a==null?void 0:a.vsn)!==null&&b!==void 0?b:$m,a!=null&&a.params&&(this.params=a.params),a!=null&&a.logger&&(this.logger=a.logger),(a!=null&&a.logLevel||a!=null&&a.log_level)&&(this.logLevel=a.logLevel||a.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(p=a==null?void 0:a.reconnectAfterMs)!==null&&p!==void 0?p:(A=>Nb[A-1]||Sb),this.vsn){case mp:this.encode=(v=a==null?void 0:a.encode)!==null&&v!==void 0?v:((A,C)=>C(JSON.stringify(A))),this.decode=(x=a==null?void 0:a.decode)!==null&&x!==void 0?x:((A,C)=>C(JSON.parse(A)));break;case mb:this.encode=(_=a==null?void 0:a.encode)!==null&&_!==void 0?_:this.serializer.encode.bind(this.serializer),this.decode=(j=a==null?void 0:a.decode)!==null&&j!==void 0?j:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=a==null?void 0:a.workerUrl}}}var bi=class extends Error{constructor(l,a){var n;super(l),this.name="IcebergError",this.status=a.status,this.icebergType=a.icebergType,this.icebergCode=a.icebergCode,this.details=a.details,this.isCommitStateUnknown=a.icebergType==="CommitStateUnknownException"||[500,502,504].includes(a.status)&&((n=a.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function kb(l,a,n){const o=new URL(a,l);if(n)for(const[d,h]of Object.entries(n))h!==void 0&&o.searchParams.set(d,h);return o.toString()}async function Ab(l){return!l||l.type==="none"?{}:l.type==="bearer"?{Authorization:`Bearer ${l.token}`}:l.type==="header"?{[l.name]:l.value}:l.type==="custom"?await l.getHeaders():{}}function Ob(l){const a=l.fetchImpl??globalThis.fetch;return{async request({method:n,path:o,query:d,body:h,headers:f}){const g=kb(l.baseUrl,o,d),b=await Ab(l.auth),p=await a(g,{method:n,headers:{...h?{"Content-Type":"application/json"}:{},...b,...f},body:h?JSON.stringify(h):void 0}),v=await p.text(),x=(p.headers.get("content-type")||"").includes("application/json"),_=x&&v?JSON.parse(v):v;if(!p.ok){const j=x?_:void 0,A=j==null?void 0:j.error;throw new bi((A==null?void 0:A.message)??`Request failed with status ${p.status}`,{status:p.status,icebergType:A==null?void 0:A.type,icebergCode:A==null?void 0:A.code,details:j})}return{status:p.status,headers:p.headers,data:_}}}}function Il(l){return l.join("")}var Cb=class{constructor(l,a=""){this.client=l,this.prefix=a}async listNamespaces(l){const a=l?{parent:Il(l.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:a})).data.namespaces.map(o=>({namespace:o}))}async createNamespace(l,a){const n={namespace:l.namespace,properties:a==null?void 0:a.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(l){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Il(l.namespace)}`})}async loadNamespaceMetadata(l){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Il(l.namespace)}`})).data.properties}}async namespaceExists(l){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Il(l.namespace)}`}),!0}catch(a){if(a instanceof bi&&a.status===404)return!1;throw a}}async createNamespaceIfNotExists(l,a){try{return await this.createNamespace(l,a)}catch(n){if(n instanceof bi&&n.status===409)return;throw n}}};function hn(l){return l.join("")}var Rb=class{constructor(l,a="",n){this.client=l,this.prefix=a,this.accessDelegation=n}async listTables(l){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${hn(l.namespace)}/tables`})).data.identifiers}async createTable(l,a){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${hn(l.namespace)}/tables`,body:a,headers:n})).data.metadata}async updateTable(l,a){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${hn(l.namespace)}/tables/${l.name}`,body:a});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(l,a){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${hn(l.namespace)}/tables/${l.name}`,query:{purgeRequested:String((a==null?void 0:a.purge)??!1)}})}async loadTable(l){const a={};return this.accessDelegation&&(a["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${hn(l.namespace)}/tables/${l.name}`,headers:a})).data.metadata}async tableExists(l){const a={};this.accessDelegation&&(a["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${hn(l.namespace)}/tables/${l.name}`,headers:a}),!0}catch(n){if(n instanceof bi&&n.status===404)return!1;throw n}}async createTableIfNotExists(l,a){try{return await this.createTable(l,a)}catch(n){if(n instanceof bi&&n.status===409)return await this.loadTable({namespace:l.namespace,name:a.name});throw n}}},zb=class{constructor(l){var o;let a="v1";l.catalogName&&(a+=`/${l.catalogName}`);const n=l.baseUrl.endsWith("/")?l.baseUrl:`${l.baseUrl}/`;this.client=Ob({baseUrl:n,auth:l.auth,fetchImpl:l.fetch}),this.accessDelegation=(o=l.accessDelegation)==null?void 0:o.join(","),this.namespaceOps=new Cb(this.client,a),this.tableOps=new Rb(this.client,a,this.accessDelegation)}async listNamespaces(l){return this.namespaceOps.listNamespaces(l)}async createNamespace(l,a){return this.namespaceOps.createNamespace(l,a)}async dropNamespace(l){await this.namespaceOps.dropNamespace(l)}async loadNamespaceMetadata(l){return this.namespaceOps.loadNamespaceMetadata(l)}async listTables(l){return this.tableOps.listTables(l)}async createTable(l,a){return this.tableOps.createTable(l,a)}async updateTable(l,a){return this.tableOps.updateTable(l,a)}async dropTable(l,a){await this.tableOps.dropTable(l,a)}async loadTable(l){return this.tableOps.loadTable(l)}async namespaceExists(l){return this.namespaceOps.namespaceExists(l)}async tableExists(l){return this.tableOps.tableExists(l)}async createNamespaceIfNotExists(l,a){return this.namespaceOps.createNamespaceIfNotExists(l,a)}async createTableIfNotExists(l,a){return this.tableOps.createTableIfNotExists(l,a)}},Zl=class extends Error{constructor(l){super(l),this.__isStorageError=!0,this.name="StorageError"}};function Ct(l){return typeof l=="object"&&l!==null&&"__isStorageError"in l}var Mb=class extends Zl{constructor(l,a,n){super(l),this.name="StorageApiError",this.status=a,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Eu=class extends Zl{constructor(l,a){super(l),this.name="StorageUnknownError",this.originalError=a}};const Du=l=>l?(...a)=>l(...a):(...a)=>fetch(...a),Db=()=>Response,Tu=l=>{if(Array.isArray(l))return l.map(n=>Tu(n));if(typeof l=="function"||l!==Object(l))return l;const a={};return Object.entries(l).forEach(([n,o])=>{const d=n.replace(/([-_][a-z])/gi,h=>h.toUpperCase().replace(/[-_]/g,""));a[d]=Tu(o)}),a},Ub=l=>{if(typeof l!="object"||l===null)return!1;const a=Object.getPrototypeOf(l);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(Symbol.toStringTag in l)&&!(Symbol.iterator in l)},Lb=l=>!l||typeof l!="string"||l.length===0||l.length>100||l.trim()!==l||l.includes("/")||l.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(l);function xi(l){"@babel/helpers - typeof";return xi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},xi(l)}function Bb(l,a){if(xi(l)!="object"||!l)return l;var n=l[Symbol.toPrimitive];if(n!==void 0){var o=n.call(l,a);if(xi(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(l)}function Hb(l){var a=Bb(l,"string");return xi(a)=="symbol"?a:a+""}function $b(l,a,n){return(a=Hb(a))in l?Object.defineProperty(l,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[a]=n,l}function Gm(l,a){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(l);a&&(o=o.filter(function(d){return Object.getOwnPropertyDescriptor(l,d).enumerable})),n.push.apply(n,o)}return n}function De(l){for(var a=1;a<arguments.length;a++){var n=arguments[a]!=null?arguments[a]:{};a%2?Gm(Object(n),!0).forEach(function(o){$b(l,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):Gm(Object(n)).forEach(function(o){Object.defineProperty(l,o,Object.getOwnPropertyDescriptor(n,o))})}return l}const mu=l=>{var a;return l.msg||l.message||l.error_description||(typeof l.error=="string"?l.error:(a=l.error)===null||a===void 0?void 0:a.message)||JSON.stringify(l)},Ib=async(l,a,n)=>{l instanceof await Db()&&!(n!=null&&n.noResolveJson)?l.json().then(o=>{const d=l.status||500,h=(o==null?void 0:o.statusCode)||d+"";a(new Mb(mu(o),d,h))}).catch(o=>{a(new Eu(mu(o),o))}):a(new Eu(mu(l),l))},qb=(l,a,n,o)=>{const d={method:l,headers:(a==null?void 0:a.headers)||{}};return l==="GET"||!o?d:(Ub(o)?(d.headers=De({"Content-Type":"application/json"},a==null?void 0:a.headers),d.body=JSON.stringify(o)):d.body=o,a!=null&&a.duplex&&(d.duplex=a.duplex),De(De({},d),n))};async function Ni(l,a,n,o,d,h){return new Promise((f,g)=>{l(n,qb(a,o,d,h)).then(b=>{if(!b.ok)throw b;return o!=null&&o.noResolveJson?b:b.json()}).then(b=>f(b)).catch(b=>Ib(b,g,o))})}async function yi(l,a,n,o){return Ni(l,"GET",a,n,o)}async function sa(l,a,n,o,d){return Ni(l,"POST",a,o,d,n)}async function ku(l,a,n,o,d){return Ni(l,"PUT",a,o,d,n)}async function Pb(l,a,n,o){return Ni(l,"HEAD",a,De(De({},n),{},{noResolveJson:!0}),o)}async function Uu(l,a,n,o,d){return Ni(l,"DELETE",a,o,d,n)}var Gb=class{constructor(l,a){this.downloadFn=l,this.shouldThrowOnError=a}then(l,a){return this.execute().then(l,a)}async execute(){var l=this;try{return{data:(await l.downloadFn()).body,error:null}}catch(a){if(l.shouldThrowOnError)throw a;if(Ct(a))return{data:null,error:a};throw a}}};let xp;xp=Symbol.toStringTag;var Yb=class{constructor(l,a){this.downloadFn=l,this.shouldThrowOnError=a,this[xp]="BlobDownloadBuilder",this.promise=null}asStream(){return new Gb(this.downloadFn,this.shouldThrowOnError)}then(l,a){return this.getPromise().then(l,a)}catch(l){return this.getPromise().catch(l)}finally(l){return this.getPromise().finally(l)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var l=this;try{return{data:await(await l.downloadFn()).blob(),error:null}}catch(a){if(l.shouldThrowOnError)throw a;if(Ct(a))return{data:null,error:a};throw a}}};const Kb={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ym={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Vb=class{constructor(l,a={},n,o){this.shouldThrowOnError=!1,this.url=l,this.headers=a,this.bucketId=n,this.fetch=Du(o)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(l,a,n,o){var d=this;try{let h;const f=De(De({},Ym),o);let g=De(De({},d.headers),l==="POST"&&{"x-upsert":String(f.upsert)});const b=f.metadata;typeof Blob<"u"&&n instanceof Blob?(h=new FormData,h.append("cacheControl",f.cacheControl),b&&h.append("metadata",d.encodeMetadata(b)),h.append("",n)):typeof FormData<"u"&&n instanceof FormData?(h=n,h.has("cacheControl")||h.append("cacheControl",f.cacheControl),b&&!h.has("metadata")&&h.append("metadata",d.encodeMetadata(b))):(h=n,g["cache-control"]=`max-age=${f.cacheControl}`,g["content-type"]=f.contentType,b&&(g["x-metadata"]=d.toBase64(d.encodeMetadata(b))),(typeof ReadableStream<"u"&&h instanceof ReadableStream||h&&typeof h=="object"&&"pipe"in h&&typeof h.pipe=="function")&&!f.duplex&&(f.duplex="half")),o!=null&&o.headers&&(g=De(De({},g),o.headers));const p=d._removeEmptyFolders(a),v=d._getFinalPath(p),x=await(l=="PUT"?ku:sa)(d.fetch,`${d.url}/object/${v}`,h,De({headers:g},f!=null&&f.duplex?{duplex:f.duplex}:{}));return{data:{path:p,id:x.Id,fullPath:x.Key},error:null}}catch(h){if(d.shouldThrowOnError)throw h;if(Ct(h))return{data:null,error:h};throw h}}async upload(l,a,n){return this.uploadOrUpdate("POST",l,a,n)}async uploadToSignedUrl(l,a,n,o){var d=this;const h=d._removeEmptyFolders(l),f=d._getFinalPath(h),g=new URL(d.url+`/object/upload/sign/${f}`);g.searchParams.set("token",a);try{let b;const p=De({upsert:Ym.upsert},o),v=De(De({},d.headers),{"x-upsert":String(p.upsert)});return typeof Blob<"u"&&n instanceof Blob?(b=new FormData,b.append("cacheControl",p.cacheControl),b.append("",n)):typeof FormData<"u"&&n instanceof FormData?(b=n,b.append("cacheControl",p.cacheControl)):(b=n,v["cache-control"]=`max-age=${p.cacheControl}`,v["content-type"]=p.contentType),{data:{path:h,fullPath:(await ku(d.fetch,g.toString(),b,{headers:v})).Key},error:null}}catch(b){if(d.shouldThrowOnError)throw b;if(Ct(b))return{data:null,error:b};throw b}}async createSignedUploadUrl(l,a){var n=this;try{let o=n._getFinalPath(l);const d=De({},n.headers);a!=null&&a.upsert&&(d["x-upsert"]="true");const h=await sa(n.fetch,`${n.url}/object/upload/sign/${o}`,{},{headers:d}),f=new URL(n.url+h.url),g=f.searchParams.get("token");if(!g)throw new Zl("No token returned by API");return{data:{signedUrl:f.toString(),path:l,token:g},error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(Ct(o))return{data:null,error:o};throw o}}async update(l,a,n){return this.uploadOrUpdate("PUT",l,a,n)}async move(l,a,n){var o=this;try{return{data:await sa(o.fetch,`${o.url}/object/move`,{bucketId:o.bucketId,sourceKey:l,destinationKey:a,destinationBucket:n==null?void 0:n.destinationBucket},{headers:o.headers}),error:null}}catch(d){if(o.shouldThrowOnError)throw d;if(Ct(d))return{data:null,error:d};throw d}}async copy(l,a,n){var o=this;try{return{data:{path:(await sa(o.fetch,`${o.url}/object/copy`,{bucketId:o.bucketId,sourceKey:l,destinationKey:a,destinationBucket:n==null?void 0:n.destinationBucket},{headers:o.headers})).Key},error:null}}catch(d){if(o.shouldThrowOnError)throw d;if(Ct(d))return{data:null,error:d};throw d}}async createSignedUrl(l,a,n){var o=this;try{let d=o._getFinalPath(l),h=await sa(o.fetch,`${o.url}/object/sign/${d}`,De({expiresIn:a},n!=null&&n.transform?{transform:n.transform}:{}),{headers:o.headers});const f=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return h={signedUrl:encodeURI(`${o.url}${h.signedURL}${f}`)},{data:h,error:null}}catch(d){if(o.shouldThrowOnError)throw d;if(Ct(d))return{data:null,error:d};throw d}}async createSignedUrls(l,a,n){var o=this;try{const d=await sa(o.fetch,`${o.url}/object/sign/${o.bucketId}`,{expiresIn:a,paths:l},{headers:o.headers}),h=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:d.map(f=>De(De({},f),{},{signedUrl:f.signedURL?encodeURI(`${o.url}${f.signedURL}${h}`):null})),error:null}}catch(d){if(o.shouldThrowOnError)throw d;if(Ct(d))return{data:null,error:d};throw d}}download(l,a){const n=typeof(a==null?void 0:a.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((a==null?void 0:a.transform)||{}),d=o?`?${o}`:"",h=this._getFinalPath(l),f=()=>yi(this.fetch,`${this.url}/${n}/${h}${d}`,{headers:this.headers,noResolveJson:!0});return new Yb(f,this.shouldThrowOnError)}async info(l){var a=this;const n=a._getFinalPath(l);try{return{data:Tu(await yi(a.fetch,`${a.url}/object/info/${n}`,{headers:a.headers})),error:null}}catch(o){if(a.shouldThrowOnError)throw o;if(Ct(o))return{data:null,error:o};throw o}}async exists(l){var a=this;const n=a._getFinalPath(l);try{return await Pb(a.fetch,`${a.url}/object/${n}`,{headers:a.headers}),{data:!0,error:null}}catch(o){if(a.shouldThrowOnError)throw o;if(Ct(o)&&o instanceof Eu){const d=o.originalError;if([400,404].includes(d==null?void 0:d.status))return{data:!1,error:o}}throw o}}getPublicUrl(l,a){const n=this._getFinalPath(l),o=[],d=a!=null&&a.download?`download=${a.download===!0?"":a.download}`:"";d!==""&&o.push(d);const h=typeof(a==null?void 0:a.transform)<"u"?"render/image":"object",f=this.transformOptsToQueryString((a==null?void 0:a.transform)||{});f!==""&&o.push(f);let g=o.join("&");return g!==""&&(g=`?${g}`),{data:{publicUrl:encodeURI(`${this.url}/${h}/public/${n}${g}`)}}}async remove(l){var a=this;try{return{data:await Uu(a.fetch,`${a.url}/object/${a.bucketId}`,{prefixes:l},{headers:a.headers}),error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(Ct(n))return{data:null,error:n};throw n}}async list(l,a,n){var o=this;try{const d=De(De(De({},Kb),a),{},{prefix:l||""});return{data:await sa(o.fetch,`${o.url}/object/list/${o.bucketId}`,d,{headers:o.headers},n),error:null}}catch(d){if(o.shouldThrowOnError)throw d;if(Ct(d))return{data:null,error:d};throw d}}async listV2(l,a){var n=this;try{const o=De({},l);return{data:await sa(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,o,{headers:n.headers},a),error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(Ct(o))return{data:null,error:o};throw o}}encodeMetadata(l){return JSON.stringify(l)}toBase64(l){return typeof Buffer<"u"?Buffer.from(l).toString("base64"):btoa(l)}_getFinalPath(l){return`${this.bucketId}/${l.replace(/^\/+/,"")}`}_removeEmptyFolders(l){return l.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(l){const a=[];return l.width&&a.push(`width=${l.width}`),l.height&&a.push(`height=${l.height}`),l.resize&&a.push(`resize=${l.resize}`),l.format&&a.push(`format=${l.format}`),l.quality&&a.push(`quality=${l.quality}`),a.join("&")}};const yp="2.89.0",vp={"X-Client-Info":`storage-js/${yp}`};var Qb=class{constructor(l,a={},n,o){this.shouldThrowOnError=!1;const d=new URL(l);o!=null&&o.useNewHostname&&/supabase\.(co|in|red)$/.test(d.hostname)&&!d.hostname.includes("storage.supabase.")&&(d.hostname=d.hostname.replace("supabase.","storage.supabase.")),this.url=d.href.replace(/\/$/,""),this.headers=De(De({},vp),a),this.fetch=Du(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(l){var a=this;try{const n=a.listBucketOptionsToQueryString(l);return{data:await yi(a.fetch,`${a.url}/bucket${n}`,{headers:a.headers}),error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(Ct(n))return{data:null,error:n};throw n}}async getBucket(l){var a=this;try{return{data:await yi(a.fetch,`${a.url}/bucket/${l}`,{headers:a.headers}),error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(Ct(n))return{data:null,error:n};throw n}}async createBucket(l,a={public:!1}){var n=this;try{return{data:await sa(n.fetch,`${n.url}/bucket`,{id:l,name:l,type:a.type,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:n.headers}),error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(Ct(o))return{data:null,error:o};throw o}}async updateBucket(l,a){var n=this;try{return{data:await ku(n.fetch,`${n.url}/bucket/${l}`,{id:l,name:l,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:n.headers}),error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(Ct(o))return{data:null,error:o};throw o}}async emptyBucket(l){var a=this;try{return{data:await sa(a.fetch,`${a.url}/bucket/${l}/empty`,{},{headers:a.headers}),error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(Ct(n))return{data:null,error:n};throw n}}async deleteBucket(l){var a=this;try{return{data:await Uu(a.fetch,`${a.url}/bucket/${l}`,{},{headers:a.headers}),error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(Ct(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(l){const a={};return l&&("limit"in l&&(a.limit=String(l.limit)),"offset"in l&&(a.offset=String(l.offset)),l.search&&(a.search=l.search),l.sortColumn&&(a.sortColumn=l.sortColumn),l.sortOrder&&(a.sortOrder=l.sortOrder)),Object.keys(a).length>0?"?"+new URLSearchParams(a).toString():""}},Zb=class{constructor(l,a={},n){this.shouldThrowOnError=!1,this.url=l.replace(/\/$/,""),this.headers=De(De({},vp),a),this.fetch=Du(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(l){var a=this;try{return{data:await sa(a.fetch,`${a.url}/bucket`,{name:l},{headers:a.headers}),error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(Ct(n))return{data:null,error:n};throw n}}async listBuckets(l){var a=this;try{const n=new URLSearchParams;(l==null?void 0:l.limit)!==void 0&&n.set("limit",l.limit.toString()),(l==null?void 0:l.offset)!==void 0&&n.set("offset",l.offset.toString()),l!=null&&l.sortColumn&&n.set("sortColumn",l.sortColumn),l!=null&&l.sortOrder&&n.set("sortOrder",l.sortOrder),l!=null&&l.search&&n.set("search",l.search);const o=n.toString(),d=o?`${a.url}/bucket?${o}`:`${a.url}/bucket`;return{data:await yi(a.fetch,d,{headers:a.headers}),error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(Ct(n))return{data:null,error:n};throw n}}async deleteBucket(l){var a=this;try{return{data:await Uu(a.fetch,`${a.url}/bucket/${l}`,{},{headers:a.headers}),error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(Ct(n))return{data:null,error:n};throw n}}from(l){var a=this;if(!Lb(l))throw new Zl("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new zb({baseUrl:this.url,catalogName:l,auth:{type:"custom",getHeaders:async()=>a.headers},fetch:this.fetch}),o=this.shouldThrowOnError;return new Proxy(n,{get(d,h){const f=d[h];return typeof f!="function"?f:async(...g)=>{try{return{data:await f.apply(d,g),error:null}}catch(b){if(o)throw b;return{data:null,error:b}}}}})}};const Lu={"X-Client-Info":`storage-js/${yp}`,"Content-Type":"application/json"};var wp=class extends Error{constructor(l){super(l),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function zs(l){return typeof l=="object"&&l!==null&&"__isStorageVectorsError"in l}var pu=class extends wp{constructor(l,a,n){super(l),this.name="StorageVectorsApiError",this.status=a,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Jb=class extends wp{constructor(l,a){super(l),this.name="StorageVectorsUnknownError",this.originalError=a}};const Bu=l=>l?(...a)=>l(...a):(...a)=>fetch(...a),Xb=l=>{if(typeof l!="object"||l===null)return!1;const a=Object.getPrototypeOf(l);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(Symbol.toStringTag in l)&&!(Symbol.iterator in l)},Km=l=>l.msg||l.message||l.error_description||l.error||JSON.stringify(l),Wb=async(l,a,n)=>{if(l&&typeof l=="object"&&"status"in l&&"ok"in l&&typeof l.status=="number"&&!(n!=null&&n.noResolveJson)){const o=l.status||500,d=l;if(typeof d.json=="function")d.json().then(h=>{const f=(h==null?void 0:h.statusCode)||(h==null?void 0:h.code)||o+"";a(new pu(Km(h),o,f))}).catch(()=>{const h=o+"";a(new pu(d.statusText||`HTTP ${o} error`,o,h))});else{const h=o+"";a(new pu(d.statusText||`HTTP ${o} error`,o,h))}}else a(new Jb(Km(l),l))},Fb=(l,a,n,o)=>{const d={method:l,headers:(a==null?void 0:a.headers)||{}};return o?(Xb(o)?(d.headers=De({"Content-Type":"application/json"},a==null?void 0:a.headers),d.body=JSON.stringify(o)):d.body=o,De(De({},d),n)):d};async function ex(l,a,n,o,d,h){return new Promise((f,g)=>{l(n,Fb(a,o,d,h)).then(b=>{if(!b.ok)throw b;if(o!=null&&o.noResolveJson)return b;const p=b.headers.get("content-type");return!p||!p.includes("application/json")?{}:b.json()}).then(b=>f(b)).catch(b=>Wb(b,g,o))})}async function Ms(l,a,n,o,d){return ex(l,"POST",a,o,d,n)}var tx=class{constructor(l,a={},n){this.shouldThrowOnError=!1,this.url=l.replace(/\/$/,""),this.headers=De(De({},Lu),a),this.fetch=Bu(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(l){var a=this;try{return{data:await Ms(a.fetch,`${a.url}/CreateIndex`,l,{headers:a.headers})||{},error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(zs(n))return{data:null,error:n};throw n}}async getIndex(l,a){var n=this;try{return{data:await Ms(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:l,indexName:a},{headers:n.headers}),error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(zs(o))return{data:null,error:o};throw o}}async listIndexes(l){var a=this;try{return{data:await Ms(a.fetch,`${a.url}/ListIndexes`,l,{headers:a.headers}),error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(zs(n))return{data:null,error:n};throw n}}async deleteIndex(l,a){var n=this;try{return{data:await Ms(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:l,indexName:a},{headers:n.headers})||{},error:null}}catch(o){if(n.shouldThrowOnError)throw o;if(zs(o))return{data:null,error:o};throw o}}},sx=class{constructor(l,a={},n){this.shouldThrowOnError=!1,this.url=l.replace(/\/$/,""),this.headers=De(De({},Lu),a),this.fetch=Bu(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(l){var a=this;try{if(l.vectors.length<1||l.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await Ms(a.fetch,`${a.url}/PutVectors`,l,{headers:a.headers})||{},error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(zs(n))return{data:null,error:n};throw n}}async getVectors(l){var a=this;try{return{data:await Ms(a.fetch,`${a.url}/GetVectors`,l,{headers:a.headers}),error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(zs(n))return{data:null,error:n};throw n}}async listVectors(l){var a=this;try{if(l.segmentCount!==void 0){if(l.segmentCount<1||l.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(l.segmentIndex!==void 0&&(l.segmentIndex<0||l.segmentIndex>=l.segmentCount))throw new Error(`segmentIndex must be between 0 and ${l.segmentCount-1}`)}return{data:await Ms(a.fetch,`${a.url}/ListVectors`,l,{headers:a.headers}),error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(zs(n))return{data:null,error:n};throw n}}async queryVectors(l){var a=this;try{return{data:await Ms(a.fetch,`${a.url}/QueryVectors`,l,{headers:a.headers}),error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(zs(n))return{data:null,error:n};throw n}}async deleteVectors(l){var a=this;try{if(l.keys.length<1||l.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await Ms(a.fetch,`${a.url}/DeleteVectors`,l,{headers:a.headers})||{},error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(zs(n))return{data:null,error:n};throw n}}},ax=class{constructor(l,a={},n){this.shouldThrowOnError=!1,this.url=l.replace(/\/$/,""),this.headers=De(De({},Lu),a),this.fetch=Bu(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(l){var a=this;try{return{data:await Ms(a.fetch,`${a.url}/CreateVectorBucket`,{vectorBucketName:l},{headers:a.headers})||{},error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(zs(n))return{data:null,error:n};throw n}}async getBucket(l){var a=this;try{return{data:await Ms(a.fetch,`${a.url}/GetVectorBucket`,{vectorBucketName:l},{headers:a.headers}),error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(zs(n))return{data:null,error:n};throw n}}async listBuckets(l={}){var a=this;try{return{data:await Ms(a.fetch,`${a.url}/ListVectorBuckets`,l,{headers:a.headers}),error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(zs(n))return{data:null,error:n};throw n}}async deleteBucket(l){var a=this;try{return{data:await Ms(a.fetch,`${a.url}/DeleteVectorBucket`,{vectorBucketName:l},{headers:a.headers})||{},error:null}}catch(n){if(a.shouldThrowOnError)throw n;if(zs(n))return{data:null,error:n};throw n}}},rx=class extends ax{constructor(l,a={}){super(l,a.headers||{},a.fetch)}from(l){return new nx(this.url,this.headers,l,this.fetch)}async createBucket(l){var a=()=>super.createBucket,n=this;return a().call(n,l)}async getBucket(l){var a=()=>super.getBucket,n=this;return a().call(n,l)}async listBuckets(l={}){var a=()=>super.listBuckets,n=this;return a().call(n,l)}async deleteBucket(l){var a=()=>super.deleteBucket,n=this;return a().call(n,l)}},nx=class extends tx{constructor(l,a,n,o){super(l,a,o),this.vectorBucketName=n}async createIndex(l){var a=()=>super.createIndex,n=this;return a().call(n,De(De({},l),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(l={}){var a=()=>super.listIndexes,n=this;return a().call(n,De(De({},l),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(l){var a=()=>super.getIndex,n=this;return a().call(n,n.vectorBucketName,l)}async deleteIndex(l){var a=()=>super.deleteIndex,n=this;return a().call(n,n.vectorBucketName,l)}index(l){return new ix(this.url,this.headers,this.vectorBucketName,l,this.fetch)}},ix=class extends sx{constructor(l,a,n,o,d){super(l,a,d),this.vectorBucketName=n,this.indexName=o}async putVectors(l){var a=()=>super.putVectors,n=this;return a().call(n,De(De({},l),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(l){var a=()=>super.getVectors,n=this;return a().call(n,De(De({},l),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(l={}){var a=()=>super.listVectors,n=this;return a().call(n,De(De({},l),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(l){var a=()=>super.queryVectors,n=this;return a().call(n,De(De({},l),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(l){var a=()=>super.deleteVectors,n=this;return a().call(n,De(De({},l),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},lx=class extends Qb{constructor(l,a={},n,o){super(l,a,n,o)}from(l){return new Vb(this.url,this.headers,l,this.fetch)}get vectors(){return new rx(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Zb(this.url+"/iceberg",this.headers,this.fetch)}};const jp="2.89.0",vn=30*1e3,Au=3,gu=Au*vn,ox="http://localhost:9999",cx="supabase.auth.token",ux={"X-Client-Info":`gotrue-js/${jp}`},Ou="X-Supabase-Api-Version",_p={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},dx=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,hx=600*1e3;class vi extends Error{constructor(a,n,o){super(a),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=o}}function ke(l){return typeof l=="object"&&l!==null&&"__isAuthError"in l}class fx extends vi{constructor(a,n,o){super(a,n,o),this.name="AuthApiError",this.status=n,this.code=o}}function mx(l){return ke(l)&&l.name==="AuthApiError"}class Sr extends vi{constructor(a,n){super(a),this.name="AuthUnknownError",this.originalError=n}}class Oa extends vi{constructor(a,n,o,d){super(a,o,d),this.name=n,this.status=o}}class Rs extends Oa{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function px(l){return ke(l)&&l.name==="AuthSessionMissingError"}class fn extends Oa{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ql extends Oa{constructor(a){super(a,"AuthInvalidCredentialsError",400,void 0)}}class Pl extends Oa{constructor(a,n=null){super(a,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function gx(l){return ke(l)&&l.name==="AuthImplicitGrantRedirectError"}class Vm extends Oa{constructor(a,n=null){super(a,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class bx extends Oa{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Cu extends Oa{constructor(a,n){super(a,"AuthRetryableFetchError",n,void 0)}}function bu(l){return ke(l)&&l.name==="AuthRetryableFetchError"}class Qm extends Oa{constructor(a,n,o){super(a,"AuthWeakPasswordError",n,"weak_password"),this.reasons=o}}class Ru extends Oa{constructor(a){super(a,"AuthInvalidJwtError",400,"invalid_jwt")}}const Yl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Zm=` 	
\r=`.split(""),xx=(()=>{const l=new Array(128);for(let a=0;a<l.length;a+=1)l[a]=-1;for(let a=0;a<Zm.length;a+=1)l[Zm[a].charCodeAt(0)]=-2;for(let a=0;a<Yl.length;a+=1)l[Yl[a].charCodeAt(0)]=a;return l})();function Jm(l,a,n){if(l!==null)for(a.queue=a.queue<<8|l,a.queuedBits+=8;a.queuedBits>=6;){const o=a.queue>>a.queuedBits-6&63;n(Yl[o]),a.queuedBits-=6}else if(a.queuedBits>0)for(a.queue=a.queue<<6-a.queuedBits,a.queuedBits=6;a.queuedBits>=6;){const o=a.queue>>a.queuedBits-6&63;n(Yl[o]),a.queuedBits-=6}}function Np(l,a,n){const o=xx[l];if(o>-1)for(a.queue=a.queue<<6|o,a.queuedBits+=6;a.queuedBits>=8;)n(a.queue>>a.queuedBits-8&255),a.queuedBits-=8;else{if(o===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(l)}"`)}}function Xm(l){const a=[],n=f=>{a.push(String.fromCodePoint(f))},o={utf8seq:0,codepoint:0},d={queue:0,queuedBits:0},h=f=>{wx(f,o,n)};for(let f=0;f<l.length;f+=1)Np(l.charCodeAt(f),d,h);return a.join("")}function yx(l,a){if(l<=127){a(l);return}else if(l<=2047){a(192|l>>6),a(128|l&63);return}else if(l<=65535){a(224|l>>12),a(128|l>>6&63),a(128|l&63);return}else if(l<=1114111){a(240|l>>18),a(128|l>>12&63),a(128|l>>6&63),a(128|l&63);return}throw new Error(`Unrecognized Unicode codepoint: ${l.toString(16)}`)}function vx(l,a){for(let n=0;n<l.length;n+=1){let o=l.charCodeAt(n);if(o>55295&&o<=56319){const d=(o-55296)*1024&65535;o=(l.charCodeAt(n+1)-56320&65535|d)+65536,n+=1}yx(o,a)}}function wx(l,a,n){if(a.utf8seq===0){if(l<=127){n(l);return}for(let o=1;o<6;o+=1)if((l>>7-o&1)===0){a.utf8seq=o;break}if(a.utf8seq===2)a.codepoint=l&31;else if(a.utf8seq===3)a.codepoint=l&15;else if(a.utf8seq===4)a.codepoint=l&7;else throw new Error("Invalid UTF-8 sequence");a.utf8seq-=1}else if(a.utf8seq>0){if(l<=127)throw new Error("Invalid UTF-8 sequence");a.codepoint=a.codepoint<<6|l&63,a.utf8seq-=1,a.utf8seq===0&&n(a.codepoint)}}function _n(l){const a=[],n={queue:0,queuedBits:0},o=d=>{a.push(d)};for(let d=0;d<l.length;d+=1)Np(l.charCodeAt(d),n,o);return new Uint8Array(a)}function jx(l){const a=[];return vx(l,n=>a.push(n)),new Uint8Array(a)}function Er(l){const a=[],n={queue:0,queuedBits:0},o=d=>{a.push(d)};return l.forEach(d=>Jm(d,n,o)),Jm(null,n,o),a.join("")}function _x(l){return Math.round(Date.now()/1e3)+l}function Nx(){return Symbol("auth-callback")}const is=()=>typeof window<"u"&&typeof document<"u",wr={tested:!1,writable:!1},Sp=()=>{if(!is())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(wr.tested)return wr.writable;const l=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(l,l),globalThis.localStorage.removeItem(l),wr.tested=!0,wr.writable=!0}catch{wr.tested=!0,wr.writable=!1}return wr.writable};function Sx(l){const a={},n=new URL(l);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((d,h)=>{a[h]=d})}catch{}return n.searchParams.forEach((o,d)=>{a[d]=o}),a}const Ep=l=>l?(...a)=>l(...a):(...a)=>fetch(...a),Ex=l=>typeof l=="object"&&l!==null&&"status"in l&&"ok"in l&&"json"in l&&typeof l.json=="function",wn=async(l,a,n)=>{await l.setItem(a,JSON.stringify(n))},jr=async(l,a)=>{const n=await l.getItem(a);if(!n)return null;try{return JSON.parse(n)}catch{return n}},ns=async(l,a)=>{await l.removeItem(a)};class Jl{constructor(){this.promise=new Jl.promiseConstructor((a,n)=>{this.resolve=a,this.reject=n})}}Jl.promiseConstructor=Promise;function xu(l){const a=l.split(".");if(a.length!==3)throw new Ru("Invalid JWT structure");for(let o=0;o<a.length;o++)if(!dx.test(a[o]))throw new Ru("JWT not in base64url format");return{header:JSON.parse(Xm(a[0])),payload:JSON.parse(Xm(a[1])),signature:_n(a[2]),raw:{header:a[0],payload:a[1]}}}async function Tx(l){return await new Promise(a=>{setTimeout(()=>a(null),l)})}function kx(l,a){return new Promise((o,d)=>{(async()=>{for(let h=0;h<1/0;h++)try{const f=await l(h);if(!a(h,null,f)){o(f);return}}catch(f){if(!a(h,f)){d(f);return}}})()})}function Ax(l){return("0"+l.toString(16)).substr(-2)}function Ox(){const a=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",o=n.length;let d="";for(let h=0;h<56;h++)d+=n.charAt(Math.floor(Math.random()*o));return d}return crypto.getRandomValues(a),Array.from(a,Ax).join("")}async function Cx(l){const n=new TextEncoder().encode(l),o=await crypto.subtle.digest("SHA-256",n),d=new Uint8Array(o);return Array.from(d).map(h=>String.fromCharCode(h)).join("")}async function Rx(l){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),l;const n=await Cx(l);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function mn(l,a,n=!1){const o=Ox();let d=o;n&&(d+="/PASSWORD_RECOVERY"),await wn(l,`${a}-code-verifier`,d);const h=await Rx(o);return[h,o===h?"plain":"s256"]}const zx=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Mx(l){const a=l.headers.get(Ou);if(!a||!a.match(zx))return null;try{return new Date(`${a}T00:00:00.0Z`)}catch{return null}}function Dx(l){if(!l)throw new Error("Missing exp claim");const a=Math.floor(Date.now()/1e3);if(l<=a)throw new Error("JWT has expired")}function Ux(l){switch(l){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Lx=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function pn(l){if(!Lx.test(l))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function yu(){const l={};return new Proxy(l,{get:(a,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const o=n.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(a,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(a,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Bx(l,a){return new Proxy(l,{get:(n,o,d)=>{if(o==="__isInsecureUserWarningProxy")return!0;if(typeof o=="symbol"){const h=o.toString();if(h==="Symbol(Symbol.toPrimitive)"||h==="Symbol(Symbol.toStringTag)"||h==="Symbol(util.inspect.custom)"||h==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,o,d)}return!a.value&&typeof o=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a.value=!0),Reflect.get(n,o,d)}})}function Wm(l){return JSON.parse(JSON.stringify(l))}const _r=l=>l.msg||l.message||l.error_description||l.error||JSON.stringify(l),Hx=[502,503,504];async function Fm(l){var a;if(!Ex(l))throw new Cu(_r(l),0);if(Hx.includes(l.status))throw new Cu(_r(l),l.status);let n;try{n=await l.json()}catch(h){throw new Sr(_r(h),h)}let o;const d=Mx(l);if(d&&d.getTime()>=_p["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?o=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(o=n.error_code),o){if(o==="weak_password")throw new Qm(_r(n),l.status,((a=n.weak_password)===null||a===void 0?void 0:a.reasons)||[]);if(o==="session_not_found")throw new Rs}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((h,f)=>h&&typeof f=="string",!0))throw new Qm(_r(n),l.status,n.weak_password.reasons);throw new fx(_r(n),l.status||500,o)}const $x=(l,a,n,o)=>{const d={method:l,headers:(a==null?void 0:a.headers)||{}};return l==="GET"?d:(d.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},a==null?void 0:a.headers),d.body=JSON.stringify(o),Object.assign(Object.assign({},d),n))};async function Me(l,a,n,o){var d;const h=Object.assign({},o==null?void 0:o.headers);h[Ou]||(h[Ou]=_p["2024-01-01"].name),o!=null&&o.jwt&&(h.Authorization=`Bearer ${o.jwt}`);const f=(d=o==null?void 0:o.query)!==null&&d!==void 0?d:{};o!=null&&o.redirectTo&&(f.redirect_to=o.redirectTo);const g=Object.keys(f).length?"?"+new URLSearchParams(f).toString():"",b=await Ix(l,a,n+g,{headers:h,noResolveJson:o==null?void 0:o.noResolveJson},{},o==null?void 0:o.body);return o!=null&&o.xform?o==null?void 0:o.xform(b):{data:Object.assign({},b),error:null}}async function Ix(l,a,n,o,d,h){const f=$x(a,o,d,h);let g;try{g=await l(n,Object.assign({},f))}catch(b){throw console.error(b),new Cu(_r(b),0)}if(g.ok||await Fm(g),o!=null&&o.noResolveJson)return g;try{return await g.json()}catch(b){await Fm(b)}}function ta(l){var a;let n=null;Gx(l)&&(n=Object.assign({},l),l.expires_at||(n.expires_at=_x(l.expires_in)));const o=(a=l.user)!==null&&a!==void 0?a:l;return{data:{session:n,user:o},error:null}}function ep(l){const a=ta(l);return!a.error&&l.weak_password&&typeof l.weak_password=="object"&&Array.isArray(l.weak_password.reasons)&&l.weak_password.reasons.length&&l.weak_password.message&&typeof l.weak_password.message=="string"&&l.weak_password.reasons.reduce((n,o)=>n&&typeof o=="string",!0)&&(a.data.weak_password=l.weak_password),a}function ar(l){var a;return{data:{user:(a=l.user)!==null&&a!==void 0?a:l},error:null}}function qx(l){return{data:l,error:null}}function Px(l){const{action_link:a,email_otp:n,hashed_token:o,redirect_to:d,verification_type:h}=l,f=Ql(l,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),g={action_link:a,email_otp:n,hashed_token:o,redirect_to:d,verification_type:h},b=Object.assign({},f);return{data:{properties:g,user:b},error:null}}function tp(l){return l}function Gx(l){return l.access_token&&l.refresh_token&&l.expires_in}const vu=["global","local","others"];class Yx{constructor({url:a="",headers:n={},fetch:o}){this.url=a,this.headers=n,this.fetch=Ep(o),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(a,n=vu[0]){if(vu.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${vu.join(", ")}`);try{return await Me(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:a,noResolveJson:!0}),{data:null,error:null}}catch(o){if(ke(o))return{data:null,error:o};throw o}}async inviteUserByEmail(a,n={}){try{return await Me(this.fetch,"POST",`${this.url}/invite`,{body:{email:a,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:ar})}catch(o){if(ke(o))return{data:{user:null},error:o};throw o}}async generateLink(a){try{const{options:n}=a,o=Ql(a,["options"]),d=Object.assign(Object.assign({},o),n);return"newEmail"in o&&(d.new_email=o==null?void 0:o.newEmail,delete d.newEmail),await Me(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:d,headers:this.headers,xform:Px,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(ke(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(a){try{return await Me(this.fetch,"POST",`${this.url}/admin/users`,{body:a,headers:this.headers,xform:ar})}catch(n){if(ke(n))return{data:{user:null},error:n};throw n}}async listUsers(a){var n,o,d,h,f,g,b;try{const p={nextPage:null,lastPage:0,total:0},v=await Me(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(n=a==null?void 0:a.page)===null||n===void 0?void 0:n.toString())!==null&&o!==void 0?o:"",per_page:(h=(d=a==null?void 0:a.perPage)===null||d===void 0?void 0:d.toString())!==null&&h!==void 0?h:""},xform:tp});if(v.error)throw v.error;const x=await v.json(),_=(f=v.headers.get("x-total-count"))!==null&&f!==void 0?f:0,j=(b=(g=v.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&b!==void 0?b:[];return j.length>0&&(j.forEach(A=>{const C=parseInt(A.split(";")[0].split("=")[1].substring(0,1)),z=JSON.parse(A.split(";")[1].split("=")[1]);p[`${z}Page`]=C}),p.total=parseInt(_)),{data:Object.assign(Object.assign({},x),p),error:null}}catch(p){if(ke(p))return{data:{users:[]},error:p};throw p}}async getUserById(a){pn(a);try{return await Me(this.fetch,"GET",`${this.url}/admin/users/${a}`,{headers:this.headers,xform:ar})}catch(n){if(ke(n))return{data:{user:null},error:n};throw n}}async updateUserById(a,n){pn(a);try{return await Me(this.fetch,"PUT",`${this.url}/admin/users/${a}`,{body:n,headers:this.headers,xform:ar})}catch(o){if(ke(o))return{data:{user:null},error:o};throw o}}async deleteUser(a,n=!1){pn(a);try{return await Me(this.fetch,"DELETE",`${this.url}/admin/users/${a}`,{headers:this.headers,body:{should_soft_delete:n},xform:ar})}catch(o){if(ke(o))return{data:{user:null},error:o};throw o}}async _listFactors(a){pn(a.userId);try{const{data:n,error:o}=await Me(this.fetch,"GET",`${this.url}/admin/users/${a.userId}/factors`,{headers:this.headers,xform:d=>({data:{factors:d},error:null})});return{data:n,error:o}}catch(n){if(ke(n))return{data:null,error:n};throw n}}async _deleteFactor(a){pn(a.userId),pn(a.id);try{return{data:await Me(this.fetch,"DELETE",`${this.url}/admin/users/${a.userId}/factors/${a.id}`,{headers:this.headers}),error:null}}catch(n){if(ke(n))return{data:null,error:n};throw n}}async _listOAuthClients(a){var n,o,d,h,f,g,b;try{const p={nextPage:null,lastPage:0,total:0},v=await Me(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(n=a==null?void 0:a.page)===null||n===void 0?void 0:n.toString())!==null&&o!==void 0?o:"",per_page:(h=(d=a==null?void 0:a.perPage)===null||d===void 0?void 0:d.toString())!==null&&h!==void 0?h:""},xform:tp});if(v.error)throw v.error;const x=await v.json(),_=(f=v.headers.get("x-total-count"))!==null&&f!==void 0?f:0,j=(b=(g=v.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&b!==void 0?b:[];return j.length>0&&(j.forEach(A=>{const C=parseInt(A.split(";")[0].split("=")[1].substring(0,1)),z=JSON.parse(A.split(";")[1].split("=")[1]);p[`${z}Page`]=C}),p.total=parseInt(_)),{data:Object.assign(Object.assign({},x),p),error:null}}catch(p){if(ke(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(a){try{return await Me(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:a,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ke(n))return{data:null,error:n};throw n}}async _getOAuthClient(a){try{return await Me(this.fetch,"GET",`${this.url}/admin/oauth/clients/${a}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ke(n))return{data:null,error:n};throw n}}async _updateOAuthClient(a,n){try{return await Me(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${a}`,{body:n,headers:this.headers,xform:o=>({data:o,error:null})})}catch(o){if(ke(o))return{data:null,error:o};throw o}}async _deleteOAuthClient(a){try{return await Me(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${a}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ke(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(a){try{return await Me(this.fetch,"POST",`${this.url}/admin/oauth/clients/${a}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ke(n))return{data:null,error:n};throw n}}}function sp(l={}){return{getItem:a=>l[a]||null,setItem:(a,n)=>{l[a]=n},removeItem:a=>{delete l[a]}}}const gn={debug:!!(globalThis&&Sp()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Tp extends Error{constructor(a){super(a),this.isAcquireTimeout=!0}}class Kx extends Tp{}async function Vx(l,a,n){gn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",l,a);const o=new globalThis.AbortController;return a>0&&setTimeout(()=>{o.abort(),gn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",l)},a),await Promise.resolve().then(()=>globalThis.navigator.locks.request(l,a===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:o.signal},async d=>{if(d){gn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",l,d.name);try{return await n()}finally{gn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",l,d.name)}}else{if(a===0)throw gn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",l),new Kx(`Acquiring an exclusive Navigator LockManager lock "${l}" immediately failed`);if(gn.debug)try{const h=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(h,null,"  "))}catch(h){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",h)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function Qx(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function kp(l){if(!/^0x[a-fA-F0-9]{40}$/.test(l))throw new Error(`@supabase/auth-js: Address "${l}" is invalid.`);return l.toLowerCase()}function Zx(l){return parseInt(l,16)}function Jx(l){const a=new TextEncoder().encode(l);return"0x"+Array.from(a,o=>o.toString(16).padStart(2,"0")).join("")}function Xx(l){var a;const{chainId:n,domain:o,expirationTime:d,issuedAt:h=new Date,nonce:f,notBefore:g,requestId:b,resources:p,scheme:v,uri:x,version:_}=l;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!o)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(f&&f.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${f}`);if(!x)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(_!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${_}`);if(!((a=l.statement)===null||a===void 0)&&a.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${l.statement}`)}const j=kp(l.address),A=v?`${v}://${o}`:o,C=l.statement?`${l.statement}
`:"",z=`${A} wants you to sign in with your Ethereum account:
${j}

${C}`;let D=`URI: ${x}
Version: ${_}
Chain ID: ${n}${f?`
Nonce: ${f}`:""}
Issued At: ${h.toISOString()}`;if(d&&(D+=`
Expiration Time: ${d.toISOString()}`),g&&(D+=`
Not Before: ${g.toISOString()}`),b&&(D+=`
Request ID: ${b}`),p){let R=`
Resources:`;for(const S of p){if(!S||typeof S!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${S}`);R+=`
- ${S}`}D+=R}return`${z}
${D}`}class Qt extends Error{constructor({message:a,code:n,cause:o,name:d}){var h;super(a,{cause:o}),this.__isWebAuthnError=!0,this.name=(h=d??(o instanceof Error?o.name:void 0))!==null&&h!==void 0?h:"Unknown Error",this.code=n}}class Kl extends Qt{constructor(a,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:a}),this.name="WebAuthnUnknownError",this.originalError=n}}function Wx({error:l,options:a}){var n,o,d;const{publicKey:h}=a;if(!h)throw Error("options was missing required publicKey property");if(l.name==="AbortError"){if(a.signal instanceof AbortSignal)return new Qt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:l})}else if(l.name==="ConstraintError"){if(((n=h.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Qt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:l});if(a.mediation==="conditional"&&((o=h.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new Qt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:l});if(((d=h.authenticatorSelection)===null||d===void 0?void 0:d.userVerification)==="required")return new Qt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:l})}else{if(l.name==="InvalidStateError")return new Qt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:l});if(l.name==="NotAllowedError")return new Qt({message:l.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l});if(l.name==="NotSupportedError")return h.pubKeyCredParams.filter(g=>g.type==="public-key").length===0?new Qt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:l}):new Qt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:l});if(l.name==="SecurityError"){const f=window.location.hostname;if(Ap(f)){if(h.rp.id!==f)return new Qt({message:`The RP ID "${h.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:l})}else return new Qt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:l})}else if(l.name==="TypeError"){if(h.user.id.byteLength<1||h.user.id.byteLength>64)return new Qt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:l})}else if(l.name==="UnknownError")return new Qt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:l})}return new Qt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l})}function Fx({error:l,options:a}){const{publicKey:n}=a;if(!n)throw Error("options was missing required publicKey property");if(l.name==="AbortError"){if(a.signal instanceof AbortSignal)return new Qt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:l})}else{if(l.name==="NotAllowedError")return new Qt({message:l.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l});if(l.name==="SecurityError"){const o=window.location.hostname;if(Ap(o)){if(n.rpId!==o)return new Qt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:l})}else return new Qt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:l})}else if(l.name==="UnknownError")return new Qt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:l})}return new Qt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l})}class ey{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const a=new AbortController;return this.controller=a,a.signal}cancelCeremony(){if(this.controller){const a=new Error("Manually cancelling existing WebAuthn API call");a.name="AbortError",this.controller.abort(a),this.controller=void 0}}}const ty=new ey;function sy(l){if(!l)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(l);const{challenge:a,user:n,excludeCredentials:o}=l,d=Ql(l,["challenge","user","excludeCredentials"]),h=_n(a).buffer,f=Object.assign(Object.assign({},n),{id:_n(n.id).buffer}),g=Object.assign(Object.assign({},d),{challenge:h,user:f});if(o&&o.length>0){g.excludeCredentials=new Array(o.length);for(let b=0;b<o.length;b++){const p=o[b];g.excludeCredentials[b]=Object.assign(Object.assign({},p),{id:_n(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return g}function ay(l){if(!l)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(l);const{challenge:a,allowCredentials:n}=l,o=Ql(l,["challenge","allowCredentials"]),d=_n(a).buffer,h=Object.assign(Object.assign({},o),{challenge:d});if(n&&n.length>0){h.allowCredentials=new Array(n.length);for(let f=0;f<n.length;f++){const g=n[f];h.allowCredentials[f]=Object.assign(Object.assign({},g),{id:_n(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return h}function ry(l){var a;if("toJSON"in l&&typeof l.toJSON=="function")return l.toJSON();const n=l;return{id:l.id,rawId:l.id,response:{attestationObject:Er(new Uint8Array(l.response.attestationObject)),clientDataJSON:Er(new Uint8Array(l.response.clientDataJSON))},type:"public-key",clientExtensionResults:l.getClientExtensionResults(),authenticatorAttachment:(a=n.authenticatorAttachment)!==null&&a!==void 0?a:void 0}}function ny(l){var a;if("toJSON"in l&&typeof l.toJSON=="function")return l.toJSON();const n=l,o=l.getClientExtensionResults(),d=l.response;return{id:l.id,rawId:l.id,response:{authenticatorData:Er(new Uint8Array(d.authenticatorData)),clientDataJSON:Er(new Uint8Array(d.clientDataJSON)),signature:Er(new Uint8Array(d.signature)),userHandle:d.userHandle?Er(new Uint8Array(d.userHandle)):void 0},type:"public-key",clientExtensionResults:o,authenticatorAttachment:(a=n.authenticatorAttachment)!==null&&a!==void 0?a:void 0}}function Ap(l){return l==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(l)}function ap(){var l,a;return!!(is()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((l=navigator==null?void 0:navigator.credentials)===null||l===void 0?void 0:l.create)=="function"&&typeof((a=navigator==null?void 0:navigator.credentials)===null||a===void 0?void 0:a.get)=="function")}async function iy(l){try{const a=await navigator.credentials.create(l);return a?a instanceof PublicKeyCredential?{data:a,error:null}:{data:null,error:new Kl("Browser returned unexpected credential type",a)}:{data:null,error:new Kl("Empty credential response",a)}}catch(a){return{data:null,error:Wx({error:a,options:l})}}}async function ly(l){try{const a=await navigator.credentials.get(l);return a?a instanceof PublicKeyCredential?{data:a,error:null}:{data:null,error:new Kl("Browser returned unexpected credential type",a)}:{data:null,error:new Kl("Empty credential response",a)}}catch(a){return{data:null,error:Fx({error:a,options:l})}}}const oy={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},cy={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Vl(...l){const a=d=>d!==null&&typeof d=="object"&&!Array.isArray(d),n=d=>d instanceof ArrayBuffer||ArrayBuffer.isView(d),o={};for(const d of l)if(d)for(const h in d){const f=d[h];if(f!==void 0)if(Array.isArray(f))o[h]=f;else if(n(f))o[h]=f;else if(a(f)){const g=o[h];a(g)?o[h]=Vl(g,f):o[h]=Vl(f)}else o[h]=f}return o}function uy(l,a){return Vl(oy,l,a||{})}function dy(l,a){return Vl(cy,l,a||{})}class hy{constructor(a){this.client=a,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(a){return this.client.mfa.enroll(Object.assign(Object.assign({},a),{factorType:"webauthn"}))}async _challenge({factorId:a,webauthn:n,friendlyName:o,signal:d},h){try{const{data:f,error:g}=await this.client.mfa.challenge({factorId:a,webauthn:n});if(!f)return{data:null,error:g};const b=d??ty.createNewAbortSignal();if(f.webauthn.type==="create"){const{user:p}=f.webauthn.credential_options.publicKey;p.name||(p.name=`${p.id}:${o}`),p.displayName||(p.displayName=p.name)}switch(f.webauthn.type){case"create":{const p=uy(f.webauthn.credential_options.publicKey,h==null?void 0:h.create),{data:v,error:x}=await iy({publicKey:p,signal:b});return v?{data:{factorId:a,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:v}},error:null}:{data:null,error:x}}case"request":{const p=dy(f.webauthn.credential_options.publicKey,h==null?void 0:h.request),{data:v,error:x}=await ly(Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:p,signal:b}));return v?{data:{factorId:a,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:v}},error:null}:{data:null,error:x}}}}catch(f){return ke(f)?{data:null,error:f}:{data:null,error:new Sr("Unexpected error in challenge",f)}}}async _verify({challengeId:a,factorId:n,webauthn:o}){return this.client.mfa.verify({factorId:n,challengeId:a,webauthn:o})}async _authenticate({factorId:a,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:d}={}},h){if(!n)return{data:null,error:new vi("rpId is required for WebAuthn authentication")};try{if(!ap())return{data:null,error:new Sr("Browser does not support WebAuthn",null)};const{data:f,error:g}=await this.challenge({factorId:a,webauthn:{rpId:n,rpOrigins:o},signal:d},{request:h});if(!f)return{data:null,error:g};const{webauthn:b}=f;return this._verify({factorId:a,challengeId:f.challengeId,webauthn:{type:b.type,rpId:n,rpOrigins:o,credential_response:b.credential_response}})}catch(f){return ke(f)?{data:null,error:f}:{data:null,error:new Sr("Unexpected error in authenticate",f)}}}async _register({friendlyName:a,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:d}={}},h){if(!n)return{data:null,error:new vi("rpId is required for WebAuthn registration")};try{if(!ap())return{data:null,error:new Sr("Browser does not support WebAuthn",null)};const{data:f,error:g}=await this._enroll({friendlyName:a});if(!f)return await this.client.mfa.listFactors().then(v=>{var x;return(x=v.data)===null||x===void 0?void 0:x.all.find(_=>_.factor_type==="webauthn"&&_.friendly_name===a&&_.status!=="unverified")}).then(v=>v?this.client.mfa.unenroll({factorId:v==null?void 0:v.id}):void 0),{data:null,error:g};const{data:b,error:p}=await this._challenge({factorId:f.id,friendlyName:f.friendly_name,webauthn:{rpId:n,rpOrigins:o},signal:d},{create:h});return b?this._verify({factorId:f.id,challengeId:b.challengeId,webauthn:{rpId:n,rpOrigins:o,type:b.webauthn.type,credential_response:b.webauthn.credential_response}}):{data:null,error:p}}catch(f){return ke(f)?{data:null,error:f}:{data:null,error:new Sr("Unexpected error in register",f)}}}}Qx();const fy={url:ox,storageKey:cx,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ux,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function rp(l,a,n){return await n()}const bn={};class wi{get jwks(){var a,n;return(n=(a=bn[this.storageKey])===null||a===void 0?void 0:a.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(a){bn[this.storageKey]=Object.assign(Object.assign({},bn[this.storageKey]),{jwks:a})}get jwks_cached_at(){var a,n;return(n=(a=bn[this.storageKey])===null||a===void 0?void 0:a.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(a){bn[this.storageKey]=Object.assign(Object.assign({},bn[this.storageKey]),{cachedAt:a})}constructor(a){var n,o,d;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const h=Object.assign(Object.assign({},fy),a);if(this.storageKey=h.storageKey,this.instanceID=(n=wi.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,wi.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!h.debug,typeof h.debug=="function"&&(this.logger=h.debug),this.instanceID>0&&is()){const f=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(f),this.logDebugMessages&&console.trace(f)}if(this.persistSession=h.persistSession,this.autoRefreshToken=h.autoRefreshToken,this.admin=new Yx({url:h.url,headers:h.headers,fetch:h.fetch}),this.url=h.url,this.headers=h.headers,this.fetch=Ep(h.fetch),this.lock=h.lock||rp,this.detectSessionInUrl=h.detectSessionInUrl,this.flowType=h.flowType,this.hasCustomAuthorizationHeader=h.hasCustomAuthorizationHeader,this.throwOnError=h.throwOnError,h.lock?this.lock=h.lock:this.persistSession&&is()&&(!((o=globalThis==null?void 0:globalThis.navigator)===null||o===void 0)&&o.locks)?this.lock=Vx:this.lock=rp,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new hy(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(h.storage?this.storage=h.storage:Sp()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=sp(this.memoryStorage)),h.userStorage&&(this.userStorage=h.userStorage)):(this.memoryStorage={},this.storage=sp(this.memoryStorage)),is()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(f){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",f)}(d=this.broadcastChannel)===null||d===void 0||d.addEventListener("message",async f=>{this._debug("received broadcast notification from other tab or client",f),await this._notifyAllSubscribers(f.data.event,f.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(a){if(this.throwOnError&&a&&a.error)throw a.error;return a}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${jp}) ${new Date().toISOString()}`}_debug(...a){return this.logDebugMessages&&this.logger(this._logPrefix(),...a),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var a;try{let n={},o="none";if(is()&&(n=Sx(window.location.href),this._isImplicitGrantCallback(n)?o="implicit":await this._isPKCECallback(n)&&(o="pkce")),is()&&this.detectSessionInUrl&&o!=="none"){const{data:d,error:h}=await this._getSessionFromURL(n,o);if(h){if(this._debug("#_initialize()","error detecting session from URL",h),gx(h)){const b=(a=h.details)===null||a===void 0?void 0:a.code;if(b==="identity_already_exists"||b==="identity_not_found"||b==="single_identity_not_deletable")return{error:h}}return await this._removeSession(),{error:h}}const{session:f,redirectType:g}=d;return this._debug("#_initialize()","detected session in URL",f,"redirect type",g),await this._saveSession(f),setTimeout(async()=>{g==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",f):await this._notifyAllSubscribers("SIGNED_IN",f)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return ke(n)?this._returnResult({error:n}):this._returnResult({error:new Sr("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(a){var n,o,d;try{const h=await Me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(o=(n=a==null?void 0:a.options)===null||n===void 0?void 0:n.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:(d=a==null?void 0:a.options)===null||d===void 0?void 0:d.captchaToken}},xform:ta}),{data:f,error:g}=h;if(g||!f)return this._returnResult({data:{user:null,session:null},error:g});const b=f.session,p=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",b)),this._returnResult({data:{user:p,session:b},error:null})}catch(h){if(ke(h))return this._returnResult({data:{user:null,session:null},error:h});throw h}}async signUp(a){var n,o,d;try{let h;if("email"in a){const{email:v,password:x,options:_}=a;let j=null,A=null;this.flowType==="pkce"&&([j,A]=await mn(this.storage,this.storageKey)),h=await Me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:_==null?void 0:_.emailRedirectTo,body:{email:v,password:x,data:(n=_==null?void 0:_.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken},code_challenge:j,code_challenge_method:A},xform:ta})}else if("phone"in a){const{phone:v,password:x,options:_}=a;h=await Me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:x,data:(o=_==null?void 0:_.data)!==null&&o!==void 0?o:{},channel:(d=_==null?void 0:_.channel)!==null&&d!==void 0?d:"sms",gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken}},xform:ta})}else throw new ql("You must provide either an email or phone number and a password");const{data:f,error:g}=h;if(g||!f)return await ns(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:g});const b=f.session,p=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",b)),this._returnResult({data:{user:p,session:b},error:null})}catch(h){if(await ns(this.storage,`${this.storageKey}-code-verifier`),ke(h))return this._returnResult({data:{user:null,session:null},error:h});throw h}}async signInWithPassword(a){try{let n;if("email"in a){const{email:h,password:f,options:g}=a;n=await Me(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:h,password:f,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:ep})}else if("phone"in a){const{phone:h,password:f,options:g}=a;n=await Me(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:h,password:f,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:ep})}else throw new ql("You must provide either an email or phone number and a password");const{data:o,error:d}=n;if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!o||!o.session||!o.user){const h=new fn;return this._returnResult({data:{user:null,session:null},error:h})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign({user:o.user,session:o.session},o.weak_password?{weakPassword:o.weak_password}:null),error:d})}catch(n){if(ke(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(a){var n,o,d,h;return await this._handleProviderSignIn(a.provider,{redirectTo:(n=a.options)===null||n===void 0?void 0:n.redirectTo,scopes:(o=a.options)===null||o===void 0?void 0:o.scopes,queryParams:(d=a.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:(h=a.options)===null||h===void 0?void 0:h.skipBrowserRedirect})}async exchangeCodeForSession(a){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(a))}async signInWithWeb3(a){const{chain:n}=a;switch(n){case"ethereum":return await this.signInWithEthereum(a);case"solana":return await this.signInWithSolana(a);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(a){var n,o,d,h,f,g,b,p,v,x,_;let j,A;if("message"in a)j=a.message,A=a.signature;else{const{chain:C,wallet:z,statement:D,options:R}=a;let S;if(is())if(typeof z=="object")S=z;else{const we=window;if("ethereum"in we&&typeof we.ethereum=="object"&&"request"in we.ethereum&&typeof we.ethereum.request=="function")S=we.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof z!="object"||!(R!=null&&R.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=z}const Q=new URL((n=R==null?void 0:R.url)!==null&&n!==void 0?n:window.location.href),H=await S.request({method:"eth_requestAccounts"}).then(we=>we).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!H||H.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const G=kp(H[0]);let Z=(o=R==null?void 0:R.signInWithEthereum)===null||o===void 0?void 0:o.chainId;if(!Z){const we=await S.request({method:"eth_chainId"});Z=Zx(we)}const fe={domain:Q.host,address:G,statement:D,uri:Q.href,version:"1",chainId:Z,nonce:(d=R==null?void 0:R.signInWithEthereum)===null||d===void 0?void 0:d.nonce,issuedAt:(f=(h=R==null?void 0:R.signInWithEthereum)===null||h===void 0?void 0:h.issuedAt)!==null&&f!==void 0?f:new Date,expirationTime:(g=R==null?void 0:R.signInWithEthereum)===null||g===void 0?void 0:g.expirationTime,notBefore:(b=R==null?void 0:R.signInWithEthereum)===null||b===void 0?void 0:b.notBefore,requestId:(p=R==null?void 0:R.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(v=R==null?void 0:R.signInWithEthereum)===null||v===void 0?void 0:v.resources};j=Xx(fe),A=await S.request({method:"personal_sign",params:[Jx(j),G]})}try{const{data:C,error:z}=await Me(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:j,signature:A},!((x=a.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(_=a.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:ta});if(z)throw z;if(!C||!C.session||!C.user){const D=new fn;return this._returnResult({data:{user:null,session:null},error:D})}return C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),this._returnResult({data:Object.assign({},C),error:z})}catch(C){if(ke(C))return this._returnResult({data:{user:null,session:null},error:C});throw C}}async signInWithSolana(a){var n,o,d,h,f,g,b,p,v,x,_,j;let A,C;if("message"in a)A=a.message,C=a.signature;else{const{chain:z,wallet:D,statement:R,options:S}=a;let Q;if(is())if(typeof D=="object")Q=D;else{const G=window;if("solana"in G&&typeof G.solana=="object"&&("signIn"in G.solana&&typeof G.solana.signIn=="function"||"signMessage"in G.solana&&typeof G.solana.signMessage=="function"))Q=G.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof D!="object"||!(S!=null&&S.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");Q=D}const H=new URL((n=S==null?void 0:S.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in Q&&Q.signIn){const G=await Q.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},S==null?void 0:S.signInWithSolana),{version:"1",domain:H.host,uri:H.href}),R?{statement:R}:null));let Z;if(Array.isArray(G)&&G[0]&&typeof G[0]=="object")Z=G[0];else if(G&&typeof G=="object"&&"signedMessage"in G&&"signature"in G)Z=G;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in Z&&"signature"in Z&&(typeof Z.signedMessage=="string"||Z.signedMessage instanceof Uint8Array)&&Z.signature instanceof Uint8Array)A=typeof Z.signedMessage=="string"?Z.signedMessage:new TextDecoder().decode(Z.signedMessage),C=Z.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in Q)||typeof Q.signMessage!="function"||!("publicKey"in Q)||typeof Q!="object"||!Q.publicKey||!("toBase58"in Q.publicKey)||typeof Q.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");A=[`${H.host} wants you to sign in with your Solana account:`,Q.publicKey.toBase58(),...R?["",R,""]:[""],"Version: 1",`URI: ${H.href}`,`Issued At: ${(d=(o=S==null?void 0:S.signInWithSolana)===null||o===void 0?void 0:o.issuedAt)!==null&&d!==void 0?d:new Date().toISOString()}`,...!((h=S==null?void 0:S.signInWithSolana)===null||h===void 0)&&h.notBefore?[`Not Before: ${S.signInWithSolana.notBefore}`]:[],...!((f=S==null?void 0:S.signInWithSolana)===null||f===void 0)&&f.expirationTime?[`Expiration Time: ${S.signInWithSolana.expirationTime}`]:[],...!((g=S==null?void 0:S.signInWithSolana)===null||g===void 0)&&g.chainId?[`Chain ID: ${S.signInWithSolana.chainId}`]:[],...!((b=S==null?void 0:S.signInWithSolana)===null||b===void 0)&&b.nonce?[`Nonce: ${S.signInWithSolana.nonce}`]:[],...!((p=S==null?void 0:S.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${S.signInWithSolana.requestId}`]:[],...!((x=(v=S==null?void 0:S.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||x===void 0)&&x.length?["Resources",...S.signInWithSolana.resources.map(Z=>`- ${Z}`)]:[]].join(`
`);const G=await Q.signMessage(new TextEncoder().encode(A),"utf8");if(!G||!(G instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");C=G}}try{const{data:z,error:D}=await Me(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:A,signature:Er(C)},!((_=a.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(j=a.options)===null||j===void 0?void 0:j.captchaToken}}:null),xform:ta});if(D)throw D;if(!z||!z.session||!z.user){const R=new fn;return this._returnResult({data:{user:null,session:null},error:R})}return z.session&&(await this._saveSession(z.session),await this._notifyAllSubscribers("SIGNED_IN",z.session)),this._returnResult({data:Object.assign({},z),error:D})}catch(z){if(ke(z))return this._returnResult({data:{user:null,session:null},error:z});throw z}}async _exchangeCodeForSession(a){const n=await jr(this.storage,`${this.storageKey}-code-verifier`),[o,d]=(n??"").split("/");try{if(!o&&this.flowType==="pkce")throw new bx;const{data:h,error:f}=await Me(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:a,code_verifier:o},xform:ta});if(await ns(this.storage,`${this.storageKey}-code-verifier`),f)throw f;if(!h||!h.session||!h.user){const g=new fn;return this._returnResult({data:{user:null,session:null,redirectType:null},error:g})}return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),this._returnResult({data:Object.assign(Object.assign({},h),{redirectType:d??null}),error:f})}catch(h){if(await ns(this.storage,`${this.storageKey}-code-verifier`),ke(h))return this._returnResult({data:{user:null,session:null,redirectType:null},error:h});throw h}}async signInWithIdToken(a){try{const{options:n,provider:o,token:d,access_token:h,nonce:f}=a,g=await Me(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:o,id_token:d,access_token:h,nonce:f,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:ta}),{data:b,error:p}=g;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!b||!b.session||!b.user){const v=new fn;return this._returnResult({data:{user:null,session:null},error:v})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:b,error:p})}catch(n){if(ke(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(a){var n,o,d,h,f;try{if("email"in a){const{email:g,options:b}=a;let p=null,v=null;this.flowType==="pkce"&&([p,v]=await mn(this.storage,this.storageKey));const{error:x}=await Me(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:g,data:(n=b==null?void 0:b.data)!==null&&n!==void 0?n:{},create_user:(o=b==null?void 0:b.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken},code_challenge:p,code_challenge_method:v},redirectTo:b==null?void 0:b.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:x})}if("phone"in a){const{phone:g,options:b}=a,{data:p,error:v}=await Me(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:g,data:(d=b==null?void 0:b.data)!==null&&d!==void 0?d:{},create_user:(h=b==null?void 0:b.shouldCreateUser)!==null&&h!==void 0?h:!0,gotrue_meta_security:{captcha_token:b==null?void 0:b.captchaToken},channel:(f=b==null?void 0:b.channel)!==null&&f!==void 0?f:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:v})}throw new ql("You must provide either an email or phone number.")}catch(g){if(await ns(this.storage,`${this.storageKey}-code-verifier`),ke(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async verifyOtp(a){var n,o;try{let d,h;"options"in a&&(d=(n=a.options)===null||n===void 0?void 0:n.redirectTo,h=(o=a.options)===null||o===void 0?void 0:o.captchaToken);const{data:f,error:g}=await Me(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},a),{gotrue_meta_security:{captcha_token:h}}),redirectTo:d,xform:ta});if(g)throw g;if(!f)throw new Error("An error occurred on token verification.");const b=f.session,p=f.user;return b!=null&&b.access_token&&(await this._saveSession(b),await this._notifyAllSubscribers(a.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",b)),this._returnResult({data:{user:p,session:b},error:null})}catch(d){if(ke(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async signInWithSSO(a){var n,o,d,h,f;try{let g=null,b=null;this.flowType==="pkce"&&([g,b]=await mn(this.storage,this.storageKey));const p=await Me(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in a?{provider_id:a.providerId}:null),"domain"in a?{domain:a.domain}:null),{redirect_to:(o=(n=a.options)===null||n===void 0?void 0:n.redirectTo)!==null&&o!==void 0?o:void 0}),!((d=a==null?void 0:a.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:a.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:g,code_challenge_method:b}),headers:this.headers,xform:qx});return!((h=p.data)===null||h===void 0)&&h.url&&is()&&!(!((f=a.options)===null||f===void 0)&&f.skipBrowserRedirect)&&window.location.assign(p.data.url),this._returnResult(p)}catch(g){if(await ns(this.storage,`${this.storageKey}-code-verifier`),ke(g))return this._returnResult({data:null,error:g});throw g}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async a=>{const{data:{session:n},error:o}=a;if(o)throw o;if(!n)throw new Rs;const{error:d}=await Me(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:d})})}catch(a){if(ke(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async resend(a){try{const n=`${this.url}/resend`;if("email"in a){const{email:o,type:d,options:h}=a,{error:f}=await Me(this.fetch,"POST",n,{headers:this.headers,body:{email:o,type:d,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},redirectTo:h==null?void 0:h.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}else if("phone"in a){const{phone:o,type:d,options:h}=a,{data:f,error:g}=await Me(this.fetch,"POST",n,{headers:this.headers,body:{phone:o,type:d,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:g})}throw new ql("You must provide either an email or phone number and a type")}catch(n){if(ke(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(a,n){this._debug("#_acquireLock","begin",a);try{if(this.lockAcquired){const o=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),d=(async()=>(await o,await n()))();return this.pendingInLock.push((async()=>{try{await d}catch{}})()),d}return await this.lock(`lock:${this.storageKey}`,a,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const o=n();for(this.pendingInLock.push((async()=>{try{await o}catch{}})()),await o;this.pendingInLock.length;){const d=[...this.pendingInLock];await Promise.all(d),this.pendingInLock.splice(0,d.length)}return await o}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(a){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await a(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let a=null;const n=await jr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?a=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!a)return{data:{session:null},error:null};const o=a.expires_at?a.expires_at*1e3-Date.now()<gu:!1;if(this._debug("#__loadSession()",`session has${o?"":" not"} expired`,"expires_at",a.expires_at),!o){if(this.userStorage){const f=await jr(this.userStorage,this.storageKey+"-user");f!=null&&f.user?a.user=f.user:a.user=yu()}if(this.storage.isServer&&a.user&&!a.user.__isUserNotAvailableProxy){const f={value:this.suppressGetSessionWarning};a.user=Bx(a.user,f),f.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:a},error:null}}const{data:d,error:h}=await this._callRefreshToken(a.refresh_token);return h?this._returnResult({data:{session:null},error:h}):this._returnResult({data:{session:d},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(a){if(a)return await this._getUser(a);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(a){try{return a?await Me(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:a,xform:ar}):await this._useSession(async n=>{var o,d,h;const{data:f,error:g}=n;if(g)throw g;return!(!((o=f.session)===null||o===void 0)&&o.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Rs}:await Me(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(h=(d=f.session)===null||d===void 0?void 0:d.access_token)!==null&&h!==void 0?h:void 0,xform:ar})})}catch(n){if(ke(n))return px(n)&&(await this._removeSession(),await ns(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(a,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(a,n))}async _updateUser(a,n={}){try{return await this._useSession(async o=>{const{data:d,error:h}=o;if(h)throw h;if(!d.session)throw new Rs;const f=d.session;let g=null,b=null;this.flowType==="pkce"&&a.email!=null&&([g,b]=await mn(this.storage,this.storageKey));const{data:p,error:v}=await Me(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},a),{code_challenge:g,code_challenge_method:b}),jwt:f.access_token,xform:ar});if(v)throw v;return f.user=p.user,await this._saveSession(f),await this._notifyAllSubscribers("USER_UPDATED",f),this._returnResult({data:{user:f.user},error:null})})}catch(o){if(await ns(this.storage,`${this.storageKey}-code-verifier`),ke(o))return this._returnResult({data:{user:null},error:o});throw o}}async setSession(a){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(a))}async _setSession(a){try{if(!a.access_token||!a.refresh_token)throw new Rs;const n=Date.now()/1e3;let o=n,d=!0,h=null;const{payload:f}=xu(a.access_token);if(f.exp&&(o=f.exp,d=o<=n),d){const{data:g,error:b}=await this._callRefreshToken(a.refresh_token);if(b)return this._returnResult({data:{user:null,session:null},error:b});if(!g)return{data:{user:null,session:null},error:null};h=g}else{const{data:g,error:b}=await this._getUser(a.access_token);if(b)throw b;h={access_token:a.access_token,refresh_token:a.refresh_token,user:g.user,token_type:"bearer",expires_in:o-n,expires_at:o},await this._saveSession(h),await this._notifyAllSubscribers("SIGNED_IN",h)}return this._returnResult({data:{user:h.user,session:h},error:null})}catch(n){if(ke(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(a){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(a))}async _refreshSession(a){try{return await this._useSession(async n=>{var o;if(!a){const{data:f,error:g}=n;if(g)throw g;a=(o=f.session)!==null&&o!==void 0?o:void 0}if(!(a!=null&&a.refresh_token))throw new Rs;const{data:d,error:h}=await this._callRefreshToken(a.refresh_token);return h?this._returnResult({data:{user:null,session:null},error:h}):d?this._returnResult({data:{user:d.user,session:d},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(ke(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(a,n){try{if(!is())throw new Pl("No browser detected.");if(a.error||a.error_description||a.error_code)throw new Pl(a.error_description||"Error in URL with unspecified error_description",{error:a.error||"unspecified_error",code:a.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Vm("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Pl("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!a.code)throw new Vm("No code detected.");const{data:R,error:S}=await this._exchangeCodeForSession(a.code);if(S)throw S;const Q=new URL(window.location.href);return Q.searchParams.delete("code"),window.history.replaceState(window.history.state,"",Q.toString()),{data:{session:R.session,redirectType:null},error:null}}const{provider_token:o,provider_refresh_token:d,access_token:h,refresh_token:f,expires_in:g,expires_at:b,token_type:p}=a;if(!h||!g||!f||!p)throw new Pl("No session defined in URL");const v=Math.round(Date.now()/1e3),x=parseInt(g);let _=v+x;b&&(_=parseInt(b));const j=_-v;j*1e3<=vn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${j}s, should have been closer to ${x}s`);const A=_-x;v-A>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",A,_,v):v-A<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",A,_,v);const{data:C,error:z}=await this._getUser(h);if(z)throw z;const D={provider_token:o,provider_refresh_token:d,access_token:h,expires_in:x,expires_at:_,refresh_token:f,token_type:p,user:C.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:D,redirectType:a.type},error:null})}catch(o){if(ke(o))return this._returnResult({data:{session:null,redirectType:null},error:o});throw o}}_isImplicitGrantCallback(a){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),a):!!(a.access_token||a.error_description)}async _isPKCECallback(a){const n=await jr(this.storage,`${this.storageKey}-code-verifier`);return!!(a.code&&n)}async signOut(a={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(a))}async _signOut({scope:a}={scope:"global"}){return await this._useSession(async n=>{var o;const{data:d,error:h}=n;if(h)return this._returnResult({error:h});const f=(o=d.session)===null||o===void 0?void 0:o.access_token;if(f){const{error:g}=await this.admin.signOut(f,a);if(g&&!(mx(g)&&(g.status===404||g.status===401||g.status===403)))return this._returnResult({error:g})}return a!=="others"&&(await this._removeSession(),await ns(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(a){const n=Nx(),o={id:n,callback:a,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,o),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:o}}}async _emitInitialSession(a){return await this._useSession(async n=>{var o,d;try{const{data:{session:h},error:f}=n;if(f)throw f;await((o=this.stateChangeEmitters.get(a))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",h)),this._debug("INITIAL_SESSION","callback id",a,"session",h)}catch(h){await((d=this.stateChangeEmitters.get(a))===null||d===void 0?void 0:d.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",a,"error",h),console.error(h)}})}async resetPasswordForEmail(a,n={}){let o=null,d=null;this.flowType==="pkce"&&([o,d]=await mn(this.storage,this.storageKey,!0));try{return await Me(this.fetch,"POST",`${this.url}/recover`,{body:{email:a,code_challenge:o,code_challenge_method:d,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(h){if(await ns(this.storage,`${this.storageKey}-code-verifier`),ke(h))return this._returnResult({data:null,error:h});throw h}}async getUserIdentities(){var a;try{const{data:n,error:o}=await this.getUser();if(o)throw o;return this._returnResult({data:{identities:(a=n.user.identities)!==null&&a!==void 0?a:[]},error:null})}catch(n){if(ke(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(a){return"token"in a?this.linkIdentityIdToken(a):this.linkIdentityOAuth(a)}async linkIdentityOAuth(a){var n;try{const{data:o,error:d}=await this._useSession(async h=>{var f,g,b,p,v;const{data:x,error:_}=h;if(_)throw _;const j=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,a.provider,{redirectTo:(f=a.options)===null||f===void 0?void 0:f.redirectTo,scopes:(g=a.options)===null||g===void 0?void 0:g.scopes,queryParams:(b=a.options)===null||b===void 0?void 0:b.queryParams,skipBrowserRedirect:!0});return await Me(this.fetch,"GET",j,{headers:this.headers,jwt:(v=(p=x.session)===null||p===void 0?void 0:p.access_token)!==null&&v!==void 0?v:void 0})});if(d)throw d;return is()&&!(!((n=a.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(o==null?void 0:o.url),this._returnResult({data:{provider:a.provider,url:o==null?void 0:o.url},error:null})}catch(o){if(ke(o))return this._returnResult({data:{provider:a.provider,url:null},error:o});throw o}}async linkIdentityIdToken(a){return await this._useSession(async n=>{var o;try{const{error:d,data:{session:h}}=n;if(d)throw d;const{options:f,provider:g,token:b,access_token:p,nonce:v}=a,x=await Me(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(o=h==null?void 0:h.access_token)!==null&&o!==void 0?o:void 0,body:{provider:g,id_token:b,access_token:p,nonce:v,link_identity:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:ta}),{data:_,error:j}=x;return j?this._returnResult({data:{user:null,session:null},error:j}):!_||!_.session||!_.user?this._returnResult({data:{user:null,session:null},error:new fn}):(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("USER_UPDATED",_.session)),this._returnResult({data:_,error:j}))}catch(d){if(await ns(this.storage,`${this.storageKey}-code-verifier`),ke(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}})}async unlinkIdentity(a){try{return await this._useSession(async n=>{var o,d;const{data:h,error:f}=n;if(f)throw f;return await Me(this.fetch,"DELETE",`${this.url}/user/identities/${a.identity_id}`,{headers:this.headers,jwt:(d=(o=h.session)===null||o===void 0?void 0:o.access_token)!==null&&d!==void 0?d:void 0})})}catch(n){if(ke(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(a){const n=`#_refreshAccessToken(${a.substring(0,5)}...)`;this._debug(n,"begin");try{const o=Date.now();return await kx(async d=>(d>0&&await Tx(200*Math.pow(2,d-1)),this._debug(n,"refreshing attempt",d),await Me(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:a},headers:this.headers,xform:ta})),(d,h)=>{const f=200*Math.pow(2,d);return h&&bu(h)&&Date.now()+f-o<vn})}catch(o){if(this._debug(n,"error",o),ke(o))return this._returnResult({data:{session:null,user:null},error:o});throw o}finally{this._debug(n,"end")}}_isValidSession(a){return typeof a=="object"&&a!==null&&"access_token"in a&&"refresh_token"in a&&"expires_at"in a}async _handleProviderSignIn(a,n){const o=await this._getUrlForProvider(`${this.url}/authorize`,a,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",a,"options",n,"url",o),is()&&!n.skipBrowserRedirect&&window.location.assign(o),{data:{provider:a,url:o},error:null}}async _recoverAndRefresh(){var a,n;const o="#_recoverAndRefresh()";this._debug(o,"begin");try{const d=await jr(this.storage,this.storageKey);if(d&&this.userStorage){let f=await jr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!f&&(f={user:d.user},await wn(this.userStorage,this.storageKey+"-user",f)),d.user=(a=f==null?void 0:f.user)!==null&&a!==void 0?a:yu()}else if(d&&!d.user&&!d.user){const f=await jr(this.storage,this.storageKey+"-user");f&&(f!=null&&f.user)?(d.user=f.user,await ns(this.storage,this.storageKey+"-user"),await wn(this.storage,this.storageKey,d)):d.user=yu()}if(this._debug(o,"session from storage",d),!this._isValidSession(d)){this._debug(o,"session is not valid"),d!==null&&await this._removeSession();return}const h=((n=d.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<gu;if(this._debug(o,`session has${h?"":" not"} expired with margin of ${gu}s`),h){if(this.autoRefreshToken&&d.refresh_token){const{error:f}=await this._callRefreshToken(d.refresh_token);f&&(console.error(f),bu(f)||(this._debug(o,"refresh failed with a non-retryable error, removing the session",f),await this._removeSession()))}}else if(d.user&&d.user.__isUserNotAvailableProxy===!0)try{const{data:f,error:g}=await this._getUser(d.access_token);!g&&(f!=null&&f.user)?(d.user=f.user,await this._saveSession(d),await this._notifyAllSubscribers("SIGNED_IN",d)):this._debug(o,"could not get user data, skipping SIGNED_IN notification")}catch(f){console.error("Error getting user data:",f),this._debug(o,"error getting user data, skipping SIGNED_IN notification",f)}else await this._notifyAllSubscribers("SIGNED_IN",d)}catch(d){this._debug(o,"error",d),console.error(d);return}finally{this._debug(o,"end")}}async _callRefreshToken(a){var n,o;if(!a)throw new Rs;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const d=`#_callRefreshToken(${a.substring(0,5)}...)`;this._debug(d,"begin");try{this.refreshingDeferred=new Jl;const{data:h,error:f}=await this._refreshAccessToken(a);if(f)throw f;if(!h.session)throw new Rs;await this._saveSession(h.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",h.session);const g={data:h.session,error:null};return this.refreshingDeferred.resolve(g),g}catch(h){if(this._debug(d,"error",h),ke(h)){const f={data:null,error:h};return bu(h)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(f),f}throw(o=this.refreshingDeferred)===null||o===void 0||o.reject(h),h}finally{this.refreshingDeferred=null,this._debug(d,"end")}}async _notifyAllSubscribers(a,n,o=!0){const d=`#_notifyAllSubscribers(${a})`;this._debug(d,"begin",n,`broadcast = ${o}`);try{this.broadcastChannel&&o&&this.broadcastChannel.postMessage({event:a,session:n});const h=[],f=Array.from(this.stateChangeEmitters.values()).map(async g=>{try{await g.callback(a,n)}catch(b){h.push(b)}});if(await Promise.all(f),h.length>0){for(let g=0;g<h.length;g+=1)console.error(h[g]);throw h[0]}}finally{this._debug(d,"end")}}async _saveSession(a){this._debug("#_saveSession()",a),this.suppressGetSessionWarning=!0,await ns(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},a),o=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!o&&n.user&&await wn(this.userStorage,this.storageKey+"-user",{user:n.user});const d=Object.assign({},n);delete d.user;const h=Wm(d);await wn(this.storage,this.storageKey,h)}else{const d=Wm(n);await wn(this.storage,this.storageKey,d)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await ns(this.storage,this.storageKey),await ns(this.storage,this.storageKey+"-code-verifier"),await ns(this.storage,this.storageKey+"-user"),this.userStorage&&await ns(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const a=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{a&&is()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",a)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const a=setInterval(()=>this._autoRefreshTokenTick(),vn);this.autoRefreshTicker=a,a&&typeof a=="object"&&typeof a.unref=="function"?a.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(a),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const a=this.autoRefreshTicker;this.autoRefreshTicker=null,a&&clearInterval(a)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const a=Date.now();try{return await this._useSession(async n=>{const{data:{session:o}}=n;if(!o||!o.refresh_token||!o.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const d=Math.floor((o.expires_at*1e3-a)/vn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${d} ticks, a tick lasts ${vn}ms, refresh threshold is ${Au} ticks`),d<=Au&&await this._callRefreshToken(o.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(a){if(a.isAcquireTimeout||a instanceof Tp)this._debug("auto refresh token tick lock not available");else throw a}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!is()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(a){console.error("_handleVisibilityChange",a)}}async _onVisibilityChanged(a){const n=`#_onVisibilityChanged(${a})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),a||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(a,n,o){const d=[`provider=${encodeURIComponent(n)}`];if(o!=null&&o.redirectTo&&d.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o!=null&&o.scopes&&d.push(`scopes=${encodeURIComponent(o.scopes)}`),this.flowType==="pkce"){const[h,f]=await mn(this.storage,this.storageKey),g=new URLSearchParams({code_challenge:`${encodeURIComponent(h)}`,code_challenge_method:`${encodeURIComponent(f)}`});d.push(g.toString())}if(o!=null&&o.queryParams){const h=new URLSearchParams(o.queryParams);d.push(h.toString())}return o!=null&&o.skipBrowserRedirect&&d.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${a}?${d.join("&")}`}async _unenroll(a){try{return await this._useSession(async n=>{var o;const{data:d,error:h}=n;return h?this._returnResult({data:null,error:h}):await Me(this.fetch,"DELETE",`${this.url}/factors/${a.factorId}`,{headers:this.headers,jwt:(o=d==null?void 0:d.session)===null||o===void 0?void 0:o.access_token})})}catch(n){if(ke(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(a){try{return await this._useSession(async n=>{var o,d;const{data:h,error:f}=n;if(f)return this._returnResult({data:null,error:f});const g=Object.assign({friendly_name:a.friendlyName,factor_type:a.factorType},a.factorType==="phone"?{phone:a.phone}:a.factorType==="totp"?{issuer:a.issuer}:{}),{data:b,error:p}=await Me(this.fetch,"POST",`${this.url}/factors`,{body:g,headers:this.headers,jwt:(o=h==null?void 0:h.session)===null||o===void 0?void 0:o.access_token});return p?this._returnResult({data:null,error:p}):(a.factorType==="totp"&&b.type==="totp"&&(!((d=b==null?void 0:b.totp)===null||d===void 0)&&d.qr_code)&&(b.totp.qr_code=`data:image/svg+xml;utf-8,${b.totp.qr_code}`),this._returnResult({data:b,error:null}))})}catch(n){if(ke(n))return this._returnResult({data:null,error:n});throw n}}async _verify(a){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var o;const{data:d,error:h}=n;if(h)return this._returnResult({data:null,error:h});const f=Object.assign({challenge_id:a.challengeId},"webauthn"in a?{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_response:a.webauthn.type==="create"?ry(a.webauthn.credential_response):ny(a.webauthn.credential_response)})}:{code:a.code}),{data:g,error:b}=await Me(this.fetch,"POST",`${this.url}/factors/${a.factorId}/verify`,{body:f,headers:this.headers,jwt:(o=d==null?void 0:d.session)===null||o===void 0?void 0:o.access_token});return b?this._returnResult({data:null,error:b}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+g.expires_in},g)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",g),this._returnResult({data:g,error:b}))})}catch(n){if(ke(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(a){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var o;const{data:d,error:h}=n;if(h)return this._returnResult({data:null,error:h});const f=await Me(this.fetch,"POST",`${this.url}/factors/${a.factorId}/challenge`,{body:a,headers:this.headers,jwt:(o=d==null?void 0:d.session)===null||o===void 0?void 0:o.access_token});if(f.error)return f;const{data:g}=f;if(g.type!=="webauthn")return{data:g,error:null};switch(g.webauthn.type){case"create":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:sy(g.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:ay(g.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(ke(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(a){const{data:n,error:o}=await this._challenge({factorId:a.factorId});return o?this._returnResult({data:null,error:o}):await this._verify({factorId:a.factorId,challengeId:n.id,code:a.code})}async _listFactors(){var a;const{data:{user:n},error:o}=await this.getUser();if(o)return{data:null,error:o};const d={all:[],phone:[],totp:[],webauthn:[]};for(const h of(a=n==null?void 0:n.factors)!==null&&a!==void 0?a:[])d.all.push(h),h.status==="verified"&&d[h.factor_type].push(h);return{data:d,error:null}}async _getAuthenticatorAssuranceLevel(){var a,n;const{data:{session:o},error:d}=await this.getSession();if(d)return this._returnResult({data:null,error:d});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:h}=xu(o.access_token);let f=null;h.aal&&(f=h.aal);let g=f;((n=(a=o.user.factors)===null||a===void 0?void 0:a.filter(v=>v.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(g="aal2");const p=h.amr||[];return{data:{currentLevel:f,nextLevel:g,currentAuthenticationMethods:p},error:null}}async _getAuthorizationDetails(a){try{return await this._useSession(async n=>{const{data:{session:o},error:d}=n;return d?this._returnResult({data:null,error:d}):o?await Me(this.fetch,"GET",`${this.url}/oauth/authorizations/${a}`,{headers:this.headers,jwt:o.access_token,xform:h=>({data:h,error:null})}):this._returnResult({data:null,error:new Rs})})}catch(n){if(ke(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(a,n){try{return await this._useSession(async o=>{const{data:{session:d},error:h}=o;if(h)return this._returnResult({data:null,error:h});if(!d)return this._returnResult({data:null,error:new Rs});const f=await Me(this.fetch,"POST",`${this.url}/oauth/authorizations/${a}/consent`,{headers:this.headers,jwt:d.access_token,body:{action:"approve"},xform:g=>({data:g,error:null})});return f.data&&f.data.redirect_url&&is()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(f.data.redirect_url),f})}catch(o){if(ke(o))return this._returnResult({data:null,error:o});throw o}}async _denyAuthorization(a,n){try{return await this._useSession(async o=>{const{data:{session:d},error:h}=o;if(h)return this._returnResult({data:null,error:h});if(!d)return this._returnResult({data:null,error:new Rs});const f=await Me(this.fetch,"POST",`${this.url}/oauth/authorizations/${a}/consent`,{headers:this.headers,jwt:d.access_token,body:{action:"deny"},xform:g=>({data:g,error:null})});return f.data&&f.data.redirect_url&&is()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(f.data.redirect_url),f})}catch(o){if(ke(o))return this._returnResult({data:null,error:o});throw o}}async _listOAuthGrants(){try{return await this._useSession(async a=>{const{data:{session:n},error:o}=a;return o?this._returnResult({data:null,error:o}):n?await Me(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:d=>({data:d,error:null})}):this._returnResult({data:null,error:new Rs})})}catch(a){if(ke(a))return this._returnResult({data:null,error:a});throw a}}async _revokeOAuthGrant(a){try{return await this._useSession(async n=>{const{data:{session:o},error:d}=n;return d?this._returnResult({data:null,error:d}):o?(await Me(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:o.access_token,query:{client_id:a.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Rs})})}catch(n){if(ke(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(a,n={keys:[]}){let o=n.keys.find(g=>g.kid===a);if(o)return o;const d=Date.now();if(o=this.jwks.keys.find(g=>g.kid===a),o&&this.jwks_cached_at+hx>d)return o;const{data:h,error:f}=await Me(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(f)throw f;return!h.keys||h.keys.length===0||(this.jwks=h,this.jwks_cached_at=d,o=h.keys.find(g=>g.kid===a),!o)?null:o}async getClaims(a,n={}){try{let o=a;if(!o){const{data:j,error:A}=await this.getSession();if(A||!j.session)return this._returnResult({data:null,error:A});o=j.session.access_token}const{header:d,payload:h,signature:f,raw:{header:g,payload:b}}=xu(o);n!=null&&n.allowExpired||Dx(h.exp);const p=!d.alg||d.alg.startsWith("HS")||!d.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(d.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!p){const{error:j}=await this.getUser(o);if(j)throw j;return{data:{claims:h,header:d,signature:f},error:null}}const v=Ux(d.alg),x=await crypto.subtle.importKey("jwk",p,v,!0,["verify"]);if(!await crypto.subtle.verify(v,x,f,jx(`${g}.${b}`)))throw new Ru("Invalid JWT signature");return{data:{claims:h,header:d,signature:f},error:null}}catch(o){if(ke(o))return this._returnResult({data:null,error:o});throw o}}}wi.nextInstanceID={};const my=wi,py="2.89.0";let mi="";typeof Deno<"u"?mi="deno":typeof document<"u"?mi="web":typeof navigator<"u"&&navigator.product==="ReactNative"?mi="react-native":mi="node";const gy={"X-Client-Info":`supabase-js-${mi}/${py}`},by={headers:gy},xy={schema:"public"},yy={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},vy={};function ji(l){"@babel/helpers - typeof";return ji=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},ji(l)}function wy(l,a){if(ji(l)!="object"||!l)return l;var n=l[Symbol.toPrimitive];if(n!==void 0){var o=n.call(l,a);if(ji(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(l)}function jy(l){var a=wy(l,"string");return ji(a)=="symbol"?a:a+""}function _y(l,a,n){return(a=jy(a))in l?Object.defineProperty(l,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[a]=n,l}function np(l,a){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(l);a&&(o=o.filter(function(d){return Object.getOwnPropertyDescriptor(l,d).enumerable})),n.push.apply(n,o)}return n}function Lt(l){for(var a=1;a<arguments.length;a++){var n=arguments[a]!=null?arguments[a]:{};a%2?np(Object(n),!0).forEach(function(o){_y(l,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):np(Object(n)).forEach(function(o){Object.defineProperty(l,o,Object.getOwnPropertyDescriptor(n,o))})}return l}const Ny=l=>l?(...a)=>l(...a):(...a)=>fetch(...a),Sy=()=>Headers,Ey=(l,a,n)=>{const o=Ny(n),d=Sy();return async(h,f)=>{var g;const b=(g=await a())!==null&&g!==void 0?g:l;let p=new d(f==null?void 0:f.headers);return p.has("apikey")||p.set("apikey",l),p.has("Authorization")||p.set("Authorization",`Bearer ${b}`),o(h,Lt(Lt({},f),{},{headers:p}))}};function Ty(l){return l.endsWith("/")?l:l+"/"}function ky(l,a){var n,o;const{db:d,auth:h,realtime:f,global:g}=l,{db:b,auth:p,realtime:v,global:x}=a,_={db:Lt(Lt({},b),d),auth:Lt(Lt({},p),h),realtime:Lt(Lt({},v),f),storage:{},global:Lt(Lt(Lt({},x),g),{},{headers:Lt(Lt({},(n=x==null?void 0:x.headers)!==null&&n!==void 0?n:{}),(o=g==null?void 0:g.headers)!==null&&o!==void 0?o:{})}),accessToken:async()=>""};return l.accessToken?_.accessToken=l.accessToken:delete _.accessToken,_}function Ay(l){const a=l==null?void 0:l.trim();if(!a)throw new Error("supabaseUrl is required.");if(!a.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Ty(a))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Oy=class extends my{constructor(l){super(l)}},Cy=class{constructor(l,a,n){var o,d;this.supabaseUrl=l,this.supabaseKey=a;const h=Ay(l);if(!a)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",h),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",h),this.storageUrl=new URL("storage/v1",h),this.functionsUrl=new URL("functions/v1",h);const f=`sb-${h.hostname.split(".")[0]}-auth-token`,g={db:xy,realtime:vy,auth:Lt(Lt({},yy),{},{storageKey:f}),global:by},b=ky(n??{},g);if(this.storageKey=(o=b.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(d=b.global.headers)!==null&&d!==void 0?d:{},b.accessToken)this.accessToken=b.accessToken,this.auth=new Proxy({},{get:(v,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}});else{var p;this.auth=this._initSupabaseAuthClient((p=b.auth)!==null&&p!==void 0?p:{},this.headers,b.global.fetch)}this.fetch=Ey(a,this._getAccessToken.bind(this),b.global.fetch),this.realtime=this._initRealtimeClient(Lt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},b.realtime)),this.accessToken&&this.accessToken().then(v=>this.realtime.setAuth(v)).catch(v=>console.warn("Failed to set initial Realtime auth token:",v)),this.rest=new ub(new URL("rest/v1",h).href,{headers:this.headers,schema:b.db.schema,fetch:this.fetch}),this.storage=new lx(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),b.accessToken||this._listenForAuthEvents()}get functions(){return new nb(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(l){return this.rest.from(l)}schema(l){return this.rest.schema(l)}rpc(l,a={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(l,a,n)}channel(l,a={config:{}}){return this.realtime.channel(l,a)}getChannels(){return this.realtime.getChannels()}removeChannel(l){return this.realtime.removeChannel(l)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var l=this,a,n;if(l.accessToken)return await l.accessToken();const{data:o}=await l.auth.getSession();return(a=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:l.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:l,persistSession:a,detectSessionInUrl:n,storage:o,userStorage:d,storageKey:h,flowType:f,lock:g,debug:b,throwOnError:p},v,x){const _={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Oy({url:this.authUrl.href,headers:Lt(Lt({},_),v),storageKey:h,autoRefreshToken:l,persistSession:a,detectSessionInUrl:n,storage:o,userStorage:d,flowType:f,lock:g,debug:b,throwOnError:p,fetch:x,hasCustomAuthorizationHeader:Object.keys(this.headers).some(j=>j.toLowerCase()==="authorization")})}_initRealtimeClient(l){return new Tb(this.realtimeUrl.href,Lt(Lt({},l),{},{params:Lt(Lt({},{apikey:this.supabaseKey}),l==null?void 0:l.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((l,a)=>{this._handleTokenChanged(l,"CLIENT",a==null?void 0:a.access_token)})}_handleTokenChanged(l,a,n){(l==="TOKEN_REFRESHED"||l==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):l==="SIGNED_OUT"&&(this.realtime.setAuth(),a=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Ry=(l,a,n)=>new Cy(l,a,n);function zy(){if(typeof window<"u"||typeof process>"u")return!1;const l=process.version;if(l==null)return!1;const a=l.match(/^v(\d+)\./);return a?parseInt(a[1],10)<=18:!1}zy()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const My="https://roouxunjcwzrqwyusari.supabase.co",Dy="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJvb3V4dW5qY3d6cnF3eXVzYXJpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjcwMTQxMzEsImV4cCI6MjA4MjU5MDEzMX0.wDnCr8Qhmwz-asqdY2gcC84KRqjpJIKxi5rlfL4H_Uo",de=Ry(My,Dy),Uy=async()=>"Notification"in window?Notification.permission==="granted"?!0:Notification.permission!=="denied"?await Notification.requestPermission()==="granted":!1:(console.log("This browser does not support desktop notification"),!1),ip=(l,a,n)=>{if(Notification.permission==="granted")try{navigator.vibrate&&navigator.vibrate([200,100,200]);const o={body:a,icon:n||"/kosmo/icons/icon-192x192.png",vibrate:[200,100,200],tag:"kosmo-alert"};new Notification(l,o)}catch(o){console.error("Notification error:",o)}};var ce=(l=>(l.METAL_MINE="metalMine",l.CRYSTAL_MINE="crystalMine",l.DEUTERIUM_SYNTH="deuteriumSynth",l.SOLAR_PLANT="solarPlant",l.FUSION_REACTOR="fusionReactor",l.ROBOT_FACTORY="robotFactory",l.SHIPYARD="shipyard",l.RESEARCH_LAB="researchLab",l.METAL_STORAGE="metalStorage",l.CRYSTAL_STORAGE="crystalStorage",l.DEUTERIUM_TANK="deuteriumTank",l))(ce||{}),xe=(l=>(l.ENERGY_TECH="energyTech",l.LASER_TECH="laserTech",l.ION_TECH="ionTech",l.HYPERSPACE_TECH="hyperspaceTech",l.PLASMA_TECH="plasmaTech",l.COMBUSTION_DRIVE="combustionDrive",l.IMPULSE_DRIVE="impulseDrive",l.HYPERSPACE_DRIVE="hyperspaceDrive",l.ESPIONAGE_TECH="espionageTech",l.COMPUTER_TECH="computerTech",l.ASTROPHYSICS="astrophysics",l.WEAPON_TECH="weaponTech",l.SHIELDING_TECH="shieldingTech",l.ARMOUR_TECH="armourTech",l))(xe||{}),ue=(l=>(l.LIGHT_FIGHTER="lightFighter",l.HEAVY_FIGHTER="heavyFighter",l.CRUISER="cruiser",l.BATTLESHIP="battleship",l.DESTROYER="destroyer",l.DEATH_STAR="deathStar",l.SMALL_CARGO="smallCargo",l.MEDIUM_CARGO="mediumCargo",l.HUGE_CARGO="hugeCargo",l.COLONY_SHIP="colonyShip",l.ESPIONAGE_PROBE="espionageProbe",l.PIONEER="pioneer",l.RECYCLER="recycler",l))(ue||{}),qt=(l=>(l.ROCKET_LAUNCHER="rocketLauncher",l.LIGHT_LASER="lightLaser",l.HEAVY_LASER="heavyLaser",l.GAUSS_CANNON="gaussCannon",l.ION_CANNON="ionCannon",l.PLASMA_TURRET="plasmaTurret",l.SMALL_SHIELD="smallShield",l.LARGE_SHIELD="largeShield",l))(qt||{}),Qe=(l=>(l.EXPEDITION="expedition",l.ATTACK="attack",l.TRANSPORT="transport",l.SPY="spy",l.COLONIZE="colonize",l.RECYCLE="recycle",l))(Qe||{});const Ds=l=>{if(l<0)return"00:00";const a=Math.floor(l/3600),n=Math.floor(l%3600/60),o=Math.floor(l%60);return a>0?`${a}:${n.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`:`${n.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`},lp=l=>l>=1e12?(l/1e12).toFixed(2)+"T":l>=1e9?(l/1e9).toFixed(2)+"B":l>=1e6?(l/1e6).toFixed(2)+"M":l>=1e3?(l/1e3).toFixed(1)+"k":l.toLocaleString(),He={avatar:"/kosmo/avatars/avatar_default.png",planet:"https://lh3.googleusercontent.com/aida-public/AB6AXuBSLdQjiDuWVTAfBaEU-HCuYBah9ZQiEwQ-pDEofrc4cE_VxNy9QrAshJikmgoDRsSiufik3xpY-aK01ZyAD-oMT7oiGEoiGMpFWgFdZ7P3A8bg6_W71He4ede4ePe-0BNBFOYzd9apqH_IBj5ZXTOU7lbf7qfnmAK01iO7b2ckjVagWx4YlZdAbeOGA1_vJMuSCRVCtupT_RNvx19THDplwxx3PvEcIgc4g0ljwPyZlPI8DaYq7UaMbOiwXHxzgV-oCUQBi8YwaGc",metalMine:"/kosmo/budowle/kopalniametalu.png",crystalMine:"/kosmo/budowle/kopalnia krysztalu.png",deuteriumSynth:"/kosmo/budowle/synterzator deuter.png",solarPlant:"/kosmo/budowle/elektrownia sloneczna.png",fusionReactor:"/kosmo/budowle/Reaktor Fuzyjny.png",robotFactory:"/kosmo/budowle/Fabryka Robotw.png",shipyard:"/kosmo/budowle/stocznia.png",researchLab:"/kosmo/budowle/Laboratorium Badawcz.png",metalStorage:"/kosmo/budowle/Magazyn MetaluKrysztau.png",crystalStorage:"/kosmo/budowle/Magazyn MetaluKrysztau.png",deuteriumTank:"/kosmo/budowle/zbiornik deuter.png",techEnergy:"https://lh3.googleusercontent.com/aida-public/AB6AXuAUsk_veHUVdI7Xyyen3wE1Sor8I2WXguf2jjbakOFbdtRfW9EJruiDvsIgX5IEW3yt01vrIYq_I5G3cqefGk7O7w9BvvVsHpHioXTKjEfTwaHGv1fWwoc4_coc6yXGitNBGAa3URR7KjlKaomN_pmSPD9Jalb9rxdmt1NRlt2b98OZQVQqii0zOOVaBBsICIos_bTfcnyMBW_tecAFg3TP9zzNghDVuvahMe87fSHyj_9wuv1y3NXeDTDGk2w8iBPZsl8B6D58Jhg",techLaser:"https://lh3.googleusercontent.com/aida-public/AB6AXuCttLEph3WsOd3HRlZC0zxgyo5HtGQLhoc_Nr46u_bMbqY6nTEQYuIV_gyR_hpfVBS-J_jj5GGZynbPPZti1oj5iZ3eOY_YBYNi3q8nw6c4ebgmqCgJnaJhFtJwFfpNu4nYT65VMgmQkWQU-ek95Y5Ue6RnI9LCcYQpDhod0Y_eUiJYtnqiu9_aD-u_ukPsujkP5hgKqFchbR8vhUje3E-LrA80lMR4QTQEfNKXUDobsJRFGe11_CQSYumUsrXBnYunhGfRGvl2epw",techIon:"https://lh3.googleusercontent.com/aida-public/AB6AXuAUsk_veHUVdI7Xyyen3wE1Sor8I2WXguf2jjbakOFbdtRfW9EJruiDvsIgX5IEW3yt01vrIYq_I5G3cqefGk7O7w9BvvVsHpHioXTKjEfTwaHGv1fWwoc4_coc6yXGitNBGAa3URR7KjlKaomN_pmSPD9Jalb9rxdmt1NRlt2b98OZQVQqii0zOOVaBBsICIos_bTfcnyMBW_tecAFg3TP9zzNghDVuvahMe87fSHyj_9wuv1y3NXeDTDGk2w8iBPZsl8B6D58Jhg",techHyper:"https://lh3.googleusercontent.com/aida-public/AB6AXuC_5G35L8rN6N_8x173o5o3z6c0K8P5w2Z4s7Y8l9X0M2b5Q3v6R4t8J9L1K5N7P4Q2M6v8L3z9J0x5N2k8R7w9M4P1L6O3v8K5N7Q2M6v8L3z9J0x5N2k8R7w9M4P1L6O3v8K5N7Q2",techCombustion:"https://lh3.googleusercontent.com/aida-public/AB6AXuDbgGTOOmYRO8Cx2O9AikzppzN9zC4-i7_FrPEcct-2C21HpEJmdGGu5Za7crC8JzzPSg7_h9whOWZrcV1uaeGNi-PRI2xgDrhQfv1_Lby8fBTWyDZhQ06O3AM6n76j_-cHlHjJLahmP4ygvJ-iwGSSXwntVJtmV76vprhB_mPDHFsOxjwoWadVZ5tBOQifnLzeGQYMb6Q00oYkbFwAD8554XNTDT0nmK16jTdF17V-MgWnK8RmGNBFkySydK0sEWwjYVjCScUCM6I",techImpulse:"https://lh3.googleusercontent.com/aida-public/AB6AXuCd2dUTqjUsAcUPQOTk2ukYe3jO6XM4-sDHF10X83-XP8vidQdYFHgCjpeNNuxHLjWuIETBVc4-tF48QBg635FXHK3OHl3XJtyBIkYhbuNKjm1gi-w5E5JBsKMfFkYYudLiRVf917sQBCIkRdhPmSnjKNUpHDiqn1OUmKVHK1oFpUAXDHKoc7NOKDMZCKLxm4p1GZhpnvu-GP9sZFnbzedCWMEBtk7KlYd6EiN0uuYs9gi5y-_MDWTKKT4NE1bSe52hWWJuZidIru8",techHyperDrive:"https://lh3.googleusercontent.com/aida-public/AB6AXuDbgGTOOmYRO8Cx2O9AikzppzN9zC4-i7_FrPEcct-2C21HpEJmdGGu5Za7crC8JzzPSg7_h9whOWZrcV1uaeGNi-PRI2xgDrhQfv1_Lby8fBTWyDZhQ06O3AM6n76j_-cHlHjJLahmP4ygvJ-iwGSSXwntVJtmV76vprhB_mPDHFsOxjwoWadVZ5tBOQifnLzeGQYMb6Q00oYkbFwAD8554XNTDT0nmK16jTdF17V-MgWnK8RmGNBFkySydK0sEWwjYVjCScUCM6I",techPlasma:"https://lh3.googleusercontent.com/aida-public/AB6AXuA5zJhoBmc9B_7K3kdzmS0jRGQ4TxTF1sKrsA0-Zxnv4gQMVzgicY3JzPKK5mAwCC1iuh4xUjsQTCiOr1frnHwM2FNQ59ZbM8gyFwJvf5kgN1Np1dDGsQP7vua8fW77DzSNOmAX7frp_E13Rt22KjtAxy61zJl5Drp2C1v4LUF1HPLKJqcHTdEO6D_s3q5ujXDXOR8tV0yHYqfY4Gjc1egtpZyY1hbpRfwcedU-Fd728-EDyp_LSAz12VFwRRaLGqsOpgXayb0dFUU",techEspionage:"https://lh3.googleusercontent.com/aida-public/AB6AXuAuzcKCcqW_Uwb_MHjDE4UnIS9iufqeQRG-ox9HOxWuvVuHaPFUOrPzlXsVC7PfwZ7MI1K-xoYXSIRYGuCSJskYUnvKDvMxqvSe3Gia4Hb2MB3OLyt_tMwvU9qvxgjTrPmM6wQypgXYMFoiUUJMXWeDDfXxHDYHBm1mxGIFog5PovvrH7Zb2U4gFbh_HAslZUcihLWiSiQi2WAG8mGqDZzKh4eaLLLitm105RayEmmJXCGVObylA3o_oKyx4bVz44Os-zM8jsZ59ng",techComputer:"https://lh3.googleusercontent.com/aida-public/AB6AXuCWhn2HXSCm5RHKMuQUw21Hw6EWLXbJVTX6WMPGH0zSgbJ5FrOtwFl3GoA7TburBE1sfekcUVJknBOryC06NelUAT8HKLx_GxRk7p7zy_6yTCsUIteUJ1P-m68zJ-LqyQZ_hz53P1KnKtNVNIoJZvor1YyzW2ZN49ItxXjuLoIAl6Run1afN28jy6tc9scmfRtvAzO2Ixv0SIek4-r4SWglDDGR-aZYAweEP3K9zyWk8ez2EY6n6s7_UCU10S04j1dHEXCQ6GDjpDc",techAstro:"https://lh3.googleusercontent.com/aida-public/AB6AXuBSOTflDav4MFvu_Yvg-9qCDKqpS6BwAJDvSFmXbaK1M4mBatMw8wpRPT_bROfe2lelYtoxtN-ew041hcpd7KHjnZTbZ7Ov1q8gvcDdQ-zV7WCHlysly8ohvQJqhXRh1J3QUSfnu95xoFJX3O50BjiNefxhrFKws1eSBVnIPiB0iOWl_S8NDWo5mwLU-rA0pT6VOakhtRCgKUZrJmDumK6NIAyB0H60AK5EdDlixy4qsNd1SagA7z0AUEAqWHF43uun44RCqVq1hOY",techWeapon:"https://lh3.googleusercontent.com/aida-public/AB6AXuCd2dUTqjUsAcUPQOTk2ukYe3jO6XM4-sDHF10X83-XP8vidQdYFHgCjpeNNuxHLjWuIETBVc4-tF48QBg635FXHK3OHl3XJtyBIkYhbuNKjm1gi-w5E5JBsKMfFkYYudLiRVf917sQBCIkRdhPmSnjKNUpHDiqn1OUmKVHK1oFpUAXDHKoc7NOKDMZCKLxm4p1GZhpnvu-GP9sZFnbzedCWMEBtk7KlYd6EiN0uuYs9gi5y-_MDWTKKT4NE1bSe52hWWJuZidIru8",techShield:"https://lh3.googleusercontent.com/aida-public/AB6AXuAUSEKlHxUvCzxVOgj1Y6MtxX1VhQuac5X-CQBCwdETPQW0ynuAd-uEVEWMCGnx7FyX7vOxy4epq_CKJImgHYAUcz04j5B4DL1cjdUqVefFWq4dFoTwzLUivuBxpd4Q1i7dnsLEZAlkOwXPiYSMTau5dTr7XWhZMcXfDAG4bloSSPGJYItXueBQ_uivo-IdPPh5ad4npHg32fLsQj__8JNmEc7rzx0kjjz3wz_upv0MPt66tV9BzNqd29cwpdNqoUhnRVHjteACKYU",techArmour:"https://lh3.googleusercontent.com/aida-public/AB6AXuDKFYodx8aYkS3L0_aZKv8NQVKCFFLEp_aIojke7fVSBUGfftz5yRPvF1fuXX4vvvHwtId36V6DzP398lKo5i9fDlbC3dgYH7qP5VhLyKyyn_n9D4fSyvnoiPHulQLtl5Do1YYRpVvhVcfGOS4IyPuY7dVya1qor3vSjhE-KsxkO9Nr0rKccvd0lp1OQYWa4fOwAJKWnx24KLrcu70jfMTpcUW-Fb5dXiBJkD9UFjV4B07Jr5EhFLNsjASa8zQIzRaxg3XKdJnmvFs",lightFighter:"/kosmo/ships/light_fighter.png",heavyFighter:"/kosmo/ships/heavy_fighter.png",cruiser:"/kosmo/ships/cruiser.png",battleship:"/kosmo/ships/battleship.png",destroyer:"/kosmo/ships/destroyer.png",deathStar:"/kosmo/ships/death_star.png",smallCargo:"/kosmo/ships/small_cargo.png",mediumCargo:"/kosmo/ships/medium_cargo.png",hugeCargo:"/kosmo/ships/huge_cargo.png",colonyShip:"/kosmo/ships/colony_ship.png",espionageProbe:"/kosmo/ships/espionage_probe.png",recycler:"/kosmo/ships/recycler.png",pioneer:"/kosmo/ships/pioneer.png"},Tr={terran:"https://lh3.googleusercontent.com/aida-public/AB6AXuBSLdQjiDuWVTAfBaEU-HCuYBah9ZQiEwQ-pDEofrc4cE_VxNy9QrAshJikmgoDRsSiufik3xpY-aK01ZyAD-oMT7oiGEoiGMpFWgFdZ7P3A8bg6_W71He4ede4ePe-0BNBFOYzd9apqH_IBj5ZXTOU7lbf7qfnmAK01iO7b2ckjVagWx4YlZdAbeOGA1_vJMuSCRVCtupT_RNvx19THDplwxx3PvEcIgc4g0ljwPyZlPI8DaYq7UaMbOiwXHxzgV-oCUQBi8YwaGc",desert:"https://lh3.googleusercontent.com/aida-public/AB6AXuBSLdQjiDuWVTAfBaEU-HCuYBah9ZQiEwQ-pDEofrc4cE_VxNy9QrAshJikmgoDRsSiufik3xpY-aK01ZyAD-oMT7oiGEoiGMpFWgFdZ7P3A8bg6_W71He4ede4ePe-0BNBFOYzd9apqH_IBj5ZXTOU7lbf7qfnmAK01iO7b2ckjVagWx4YlZdAbeOGA1_vJMuSCRVCtupT_RNvx19THDplwxx3PvEcIgc4g0ljwPyZlPI8DaYq7UaMbOiwXHxzgV-oCUQBi8YwaGc",ice:"https://lh3.googleusercontent.com/aida-public/AB6AXuBSLdQjiDuWVTAfBaEU-HCuYBah9ZQiEwQ-pDEofrc4cE_VxNy9QrAshJikmgoDRsSiufik3xpY-aK01ZyAD-oMT7oiGEoiGMpFWgFdZ7P3A8bg6_W71He4ede4ePe-0BNBFOYzd9apqH_IBj5ZXTOU7lbf7qfnmAK01iO7b2ckjVagWx4YlZdAbeOGA1_vJMuSCRVCtupT_RNvx19THDplwxx3PvEcIgc4g0ljwPyZlPI8DaYq7UaMbOiwXHxzgV-oCUQBi8YwaGc",default:He.planet},Ze={[ue.LIGHT_FIGHTER]:{id:ue.LIGHT_FIGHTER,name:"Myliwiec Przechwytujcy",description:"Szybki i zwrotny myliwiec przechwytujcy, podstawa kadej floty.",baseCost:{metal:1e3,crystal:300,deuterium:0},image:He.lightFighter,buildTime:5,attack:80,defense:10,capacity:50,requirements:[{type:"building",id:ce.SHIPYARD,level:1},{type:"research",id:xe.COMBUSTION_DRIVE,level:1}],bonuses:{[ue.DEATH_STAR]:2,[ue.ESPIONAGE_PROBE]:.5}},[ue.HEAVY_FIGHTER]:{id:ue.HEAVY_FIGHTER,name:"Myliwiec Szturmowy",description:"Ciej opancerzona wersja myliwca z silniejszym uzbrojeniem.",baseCost:{metal:2e3,crystal:1500,deuterium:0},image:He.heavyFighter,buildTime:10,attack:150,defense:25,capacity:100,requirements:[{type:"building",id:ce.SHIPYARD,level:3},{type:"research",id:xe.IMPULSE_DRIVE,level:2}],bonuses:{[ue.LIGHT_FIGHTER]:.5,[ue.SMALL_CARGO]:.5}},[ue.CRUISER]:{id:ue.CRUISER,name:"Kanonierka",description:"Szybki okrt bojowy skuteczny przeciwko lekkim myliwcom.",baseCost:{metal:6e3,crystal:2500,deuterium:500},image:He.cruiser,buildTime:30,attack:400,defense:50,capacity:800,requirements:[{type:"building",id:ce.SHIPYARD,level:5},{type:"research",id:xe.ION_TECH,level:2},{type:"research",id:xe.IMPULSE_DRIVE,level:4}],bonuses:{[ue.LIGHT_FIGHTER]:1,[ue.HEAVY_FIGHTER]:.5,[ue.ESPIONAGE_PROBE]:1}},[ue.BATTLESHIP]:{id:ue.BATTLESHIP,name:"Niszczyciel Klasy A",description:"Potna jednostka bojowa o ogromnej sile ognia.",baseCost:{metal:15e3,crystal:5e3,deuterium:0},image:He.battleship,buildTime:60,attack:1e3,defense:200,capacity:1500,requirements:[{type:"building",id:ce.SHIPYARD,level:7},{type:"research",id:xe.HYPERSPACE_DRIVE,level:4}],bonuses:{[ue.CRUISER]:.5,[ue.HEAVY_FIGHTER]:.3,[ue.SMALL_CARGO]:.5,[ue.MEDIUM_CARGO]:.5,[ue.HUGE_CARGO]:.5}},[ue.DESTROYER]:{id:ue.DESTROYER,name:"Drednot",description:"Krl pola bitwy. Niszczy lekkie statki w mgnieniu oka.",baseCost:{metal:2e4,crystal:17e3,deuterium:5e3},image:He.destroyer,buildTime:90,attack:2e3,defense:500,capacity:2e3,requirements:[{type:"building",id:ce.SHIPYARD,level:9},{type:"research",id:xe.HYPERSPACE_DRIVE,level:6},{type:"research",id:xe.HYPERSPACE_TECH,level:5}],bonuses:{[ue.BATTLESHIP]:.5,[ue.CRUISER]:.5,[ue.LIGHT_FIGHTER]:.5,[qt.LIGHT_LASER]:1,[qt.ROCKET_LAUNCHER]:1}},[ue.DEATH_STAR]:{id:ue.DEATH_STAR,name:"Leviathan",description:"Mobilna stacja bojowa klasy Leviathan. Zdolna niszczy cae ksiyce.",baseCost:{metal:5e6,crystal:4e6,deuterium:1e6},image:He.deathStar,buildTime:1e3,attack:2e5,defense:1e5,capacity:1e6,requirements:[{type:"building",id:ce.SHIPYARD,level:12},{type:"research",id:xe.HYPERSPACE_DRIVE,level:7},{type:"research",id:xe.ASTROPHYSICS,level:5}],bonuses:{[ue.DESTROYER]:1,[ue.BATTLESHIP]:1,[ue.HUGE_CARGO]:1,[ue.ESPIONAGE_PROBE]:10,[qt.GAUSS_CANNON]:1,[qt.ION_CANNON]:1,[qt.PLASMA_TURRET]:1,[qt.LARGE_SHIELD]:1,[qt.SMALL_SHIELD]:1,[qt.HEAVY_LASER]:1,[qt.LIGHT_LASER]:1,[qt.ROCKET_LAUNCHER]:1}},[ue.SMALL_CARGO]:{id:ue.SMALL_CARGO,name:"May Transporter",description:"Podstawowa jednostka do transportu surowcw na inne planety.",baseCost:{metal:500,crystal:500,deuterium:0},image:He.smallCargo,buildTime:5,attack:5,defense:10,capacity:5e3,requirements:[{type:"building",id:ce.SHIPYARD,level:2},{type:"research",id:xe.COMBUSTION_DRIVE,level:2}]},[ue.MEDIUM_CARGO]:{id:ue.MEDIUM_CARGO,name:"redni Transporter",description:"Zbalansowany statek transportowy o wikszej pojemnoci.",baseCost:{metal:1500,crystal:1500,deuterium:0},image:He.mediumCargo,buildTime:10,attack:10,defense:25,capacity:12e3,requirements:[{type:"building",id:ce.SHIPYARD,level:4},{type:"research",id:xe.COMBUSTION_DRIVE,level:4}]},[ue.HUGE_CARGO]:{id:ue.HUGE_CARGO,name:"Ogromny Transporter",description:"Kolos transportowy zdolny przewie zasoby caej kolonii.",baseCost:{metal:7e3,crystal:7e3,deuterium:500},image:He.hugeCargo,buildTime:25,attack:25,defense:100,capacity:5e4,requirements:[{type:"building",id:ce.SHIPYARD,level:8},{type:"research",id:xe.IMPULSE_DRIVE,level:6}]},[ue.COLONY_SHIP]:{id:ue.COLONY_SHIP,name:"Statek Kolonizacyjny",description:"Umoliwia zasiedlanie nowych planet w niezbadanych ukadach.",baseCost:{metal:3e3,crystal:6e3,deuterium:3e3},image:He.colonyShip,buildTime:150,attack:50,defense:100,capacity:7500,requirements:[{type:"building",id:ce.SHIPYARD,level:4},{type:"research",id:xe.IMPULSE_DRIVE,level:3}]},[ue.RECYCLER]:{id:ue.RECYCLER,name:"Statek Odzysku",description:"Specjalistyczna jednostka do zbierania szcztkw z pl bitew.",baseCost:{metal:3e4,crystal:15e3,deuterium:5e3},image:He.recycler,buildTime:60,attack:10,defense:30,capacity:2e4,requirements:[{type:"building",id:ce.SHIPYARD,level:4},{type:"research",id:xe.COMBUSTION_DRIVE,level:6},{type:"research",id:xe.SHIELDING_TECH,level:2}]},[ue.ESPIONAGE_PROBE]:{id:ue.ESPIONAGE_PROBE,name:"Dron Zwiadowczy",description:"May dron do zdobywania informacji o innych planetach.",baseCost:{metal:0,crystal:1e3,deuterium:0},image:He.espionageProbe,buildTime:2,attack:0,defense:0,capacity:5,requirements:[{type:"building",id:ce.SHIPYARD,level:3},{type:"research",id:xe.COMBUSTION_DRIVE,level:3}]},[ue.PIONEER]:{id:ue.PIONEER,name:"Pionier",description:"Zaawansowany statek ekspedycyjny. Zwiksza szans na sukces i chroni flot przed zagroeniami.",baseCost:{metal:3e3,crystal:1500,deuterium:500},image:He.pioneer,buildTime:45,attack:200,defense:200,capacity:2e3,requirements:[{type:"building",id:ce.SHIPYARD,level:6},{type:"research",id:xe.ESPIONAGE_TECH,level:4},{type:"research",id:xe.IMPULSE_DRIVE,level:4}]}},ra={[ce.METAL_MINE]:{id:ce.METAL_MINE,name:"Wiertnia Tytanu",description:"Pozyskuje rud tytanu z gbi planety.",baseCost:{metal:60,crystal:15,deuterium:0},baseProduction:{metal:30,crystal:0,deuterium:0,energy:-20},image:He.metalMine,buildTimeBase:10},[ce.CRYSTAL_MINE]:{id:ce.CRYSTAL_MINE,name:"Ekstraktor Krzemu",description:"Wydobywa krzem niezbdny do elektroniki.",baseCost:{metal:48,crystal:24,deuterium:0},baseProduction:{metal:0,crystal:20,deuterium:0,energy:-15},image:He.crystalMine,buildTimeBase:15},[ce.DEUTERIUM_SYNTH]:{id:ce.DEUTERIUM_SYNTH,name:"Syntezator Plazmy",description:"Generuje stabiln plazm.",baseCost:{metal:225,crystal:75,deuterium:0},baseProduction:{metal:0,crystal:0,deuterium:10,energy:-30},image:He.deuteriumSynth,buildTimeBase:20},[ce.SOLAR_PLANT]:{id:ce.SOLAR_PLANT,name:"Elektrownia Soneczna",description:"Wytwarza energi z promieniowania gwiazdy.",baseCost:{metal:75,crystal:30,deuterium:0},baseProduction:{metal:0,crystal:0,deuterium:0,energy:30},image:He.solarPlant,buildTimeBase:12},[ce.FUSION_REACTOR]:{id:ce.FUSION_REACTOR,name:"Reaktor Plazmowy",description:"Wydajna elektrownia zuywajca plazm.",baseCost:{metal:900,crystal:360,deuterium:180},baseProduction:{metal:0,crystal:0,deuterium:-5,energy:60},image:He.fusionReactor,buildTimeBase:40,requirements:[{type:"research",id:xe.ENERGY_TECH,level:3}]},[ce.METAL_STORAGE]:{id:ce.METAL_STORAGE,name:"Magazyn Tytanu",description:"Zwiksza limit przechowywania tytanu.",baseCost:{metal:1e3,crystal:0,deuterium:0},image:He.metalStorage,buildTimeBase:25},[ce.CRYSTAL_STORAGE]:{id:ce.CRYSTAL_STORAGE,name:"Magazyn Krzemu",description:"Zwiksza limit przechowywania krzemu.",baseCost:{metal:1e3,crystal:500,deuterium:0},image:He.crystalStorage,buildTimeBase:25},[ce.DEUTERIUM_TANK]:{id:ce.DEUTERIUM_TANK,name:"Zbiornik Plazmy",description:"Zwiksza limit przechowywania plazmy.",baseCost:{metal:1e3,crystal:1e3,deuterium:0},image:He.deuteriumTank,buildTimeBase:25},[ce.ROBOT_FACTORY]:{id:ce.ROBOT_FACTORY,name:"Fabryka Robotw",description:"Skraca czas budowy budynkw.",baseCost:{metal:400,crystal:120,deuterium:200},image:He.robotFactory,buildTimeBase:30},[ce.SHIPYARD]:{id:ce.SHIPYARD,name:"Stocznia",description:"Umoliwia budow statkw.",baseCost:{metal:800,crystal:400,deuterium:200},image:He.shipyard,buildTimeBase:50,requirements:[{type:"building",id:ce.ROBOT_FACTORY,level:2}]},[ce.RESEARCH_LAB]:{id:ce.RESEARCH_LAB,name:"Laboratorium Badawcze",description:"Niezbdne do odkrywania technologii.",baseCost:{metal:200,crystal:400,deuterium:200},image:He.researchLab,buildTimeBase:60}},kr={[xe.ENERGY_TECH]:{id:xe.ENERGY_TECH,name:"Technologia Energetyczna",description:"Kluczowa do odblokowania zaawansowanych elektrowni i broni.",baseCost:{metal:0,crystal:800,deuterium:400},image:He.techEnergy,buildTimeBase:40,requirements:[{type:"building",id:ce.RESEARCH_LAB,level:1}],maxLevel:20},[xe.LASER_TECH]:{id:xe.LASER_TECH,name:"Technologia Laserowa",description:"Podstawa dla systemw uzbrojenia.",baseCost:{metal:200,crystal:100,deuterium:0},image:He.techLaser,buildTimeBase:20,requirements:[{type:"building",id:ce.RESEARCH_LAB,level:1},{type:"research",id:xe.ENERGY_TECH,level:2}],maxLevel:20},[xe.ION_TECH]:{id:xe.ION_TECH,name:"Technologia Jonowa",description:"Wymagana dla kanonierek i broni jonowej.",baseCost:{metal:1e3,crystal:300,deuterium:100},image:He.techIon,buildTimeBase:60,requirements:[{type:"building",id:ce.RESEARCH_LAB,level:4},{type:"research",id:xe.LASER_TECH,level:5}],maxLevel:20},[xe.HYPERSPACE_TECH]:{id:xe.HYPERSPACE_TECH,name:"Technologia Nadprzestrzenna",description:"Wymagana dla drednotw i zaawansowanych napdw.",baseCost:{metal:0,crystal:4e3,deuterium:2e3},image:He.techHyper,buildTimeBase:120,requirements:[{type:"building",id:ce.RESEARCH_LAB,level:7},{type:"research",id:xe.ENERGY_TECH,level:5}],maxLevel:20},[xe.COMBUSTION_DRIVE]:{id:xe.COMBUSTION_DRIVE,name:"Napd Rakietowy",description:"Podstawowy napd dla lekkich statkw.",baseCost:{metal:400,crystal:0,deuterium:600},image:He.techCombustion,buildTimeBase:30,requirements:[{type:"building",id:ce.RESEARCH_LAB,level:1},{type:"research",id:xe.ENERGY_TECH,level:1}],maxLevel:20},[xe.IMPULSE_DRIVE]:{id:xe.IMPULSE_DRIVE,name:"Napd Jonowy",description:"Dla ciszych myliwcw i okrtw.",baseCost:{metal:2e3,crystal:4e3,deuterium:600},image:He.techImpulse,buildTimeBase:80,requirements:[{type:"building",id:ce.RESEARCH_LAB,level:2},{type:"research",id:xe.ENERGY_TECH,level:1}],maxLevel:20},[xe.HYPERSPACE_DRIVE]:{id:xe.HYPERSPACE_DRIVE,name:"Napd Warp",description:"Umoliwia podre midzygalaktyczne drednotw.",baseCost:{metal:1e4,crystal:2e4,deuterium:6e3},image:He.techHyperDrive,buildTimeBase:200,requirements:[{type:"research",id:xe.HYPERSPACE_TECH,level:3}],maxLevel:20},[xe.PLASMA_TECH]:{id:xe.PLASMA_TECH,name:"Technologia Plazmowa",description:"",baseCost:{metal:2e3,crystal:4e3,deuterium:1e3},image:He.techPlasma,buildTimeBase:100,maxLevel:20},[xe.ESPIONAGE_TECH]:{id:xe.ESPIONAGE_TECH,name:"Sensoryka",description:"",baseCost:{metal:200,crystal:1e3,deuterium:200},image:He.techEspionage,buildTimeBase:40,maxLevel:20},[xe.COMPUTER_TECH]:{id:xe.COMPUTER_TECH,name:"Technologia Komputerowa",description:"",baseCost:{metal:0,crystal:400,deuterium:600},image:He.techComputer,buildTimeBase:50,maxLevel:25},[xe.ASTROPHYSICS]:{id:xe.ASTROPHYSICS,name:"Eksploracja Kosmosu",description:"",baseCost:{metal:4e3,crystal:8e3,deuterium:4e3},image:He.techAstro,buildTimeBase:100,maxLevel:30},[xe.WEAPON_TECH]:{id:xe.WEAPON_TECH,name:"Technologia Bojowa",description:"",baseCost:{metal:800,crystal:200,deuterium:0},image:He.techWeapon,buildTimeBase:60,maxLevel:50},[xe.SHIELDING_TECH]:{id:xe.SHIELDING_TECH,name:"Technologia Ochronna",description:"",baseCost:{metal:200,crystal:600,deuterium:0},image:He.techShield,buildTimeBase:60,maxLevel:50},[xe.ARMOUR_TECH]:{id:xe.ARMOUR_TECH,name:"Opancerzenie",description:"",baseCost:{metal:1e3,crystal:0,deuterium:0},image:He.techArmour,buildTimeBase:60,maxLevel:50}},Zs={rocketLauncher:{id:"rocketLauncher",name:"Bateria Rakietowa",desc:"Podstawowa obrona planetarna. Skuteczna przeciwko lekkim celom.",attack:40,defense:10,cost:{metal:500,crystal:0,deuterium:0},buildTime:20,icon:"rocket_launch",bonuses:{[ue.ESPIONAGE_PROBE]:2}},lightLaser:{id:"lightLaser",name:"Lekkie Dziako Laserowe",desc:"Szybkostrzelna wieyczka laserowa. Idealna do zwalczania myliwcw. Skuteczna przeciwko myliwcom przechwytujcym.",attack:50,defense:12,cost:{metal:400,crystal:100,deuterium:0},buildTime:30,icon:"electric_bolt",bonuses:{[ue.LIGHT_FIGHTER]:1.5,[ue.ESPIONAGE_PROBE]:2}},heavyLaser:{id:"heavyLaser",name:"Cikie Dziako Laserowe",desc:"Potny laser zdolny przebi pancerz rednich okrtw.",attack:125,defense:50,cost:{metal:1500,crystal:500,deuterium:0},buildTime:60,icon:"bolt",bonuses:{[ue.HEAVY_FIGHTER]:1.5,[ue.CRUISER]:1}},gaussCannon:{id:"gaussCannon",name:"Dziao Kinetyczne",desc:"Elektromagnetyczne dziao wystrzeliwujce pociski z ogromn prdkoci.",attack:550,defense:100,cost:{metal:5e3,crystal:3500,deuterium:500},buildTime:150,icon:"target",bonuses:{[ue.CRUISER]:2,[ue.BATTLESHIP]:1,[qt.SMALL_SHIELD]:2}},ionCannon:{id:"ionCannon",name:"Emitery EMP",desc:"Zaawansowana technologia jonowa dezaktywujca systemy wroga.",attack:75,defense:250,cost:{metal:1200,crystal:700,deuterium:250},buildTime:120,icon:"storm",bonuses:{[ue.BATTLESHIP]:1.5,[ue.DESTROYER]:.5,[qt.LARGE_SHIELD]:2}},plasmaTurret:{id:"plasmaTurret",name:"Wieyczka Plazmowa",desc:"Najpotniejsza bro obronna. Zdolna zniszczy drednoty jednym strzaem.",attack:1500,defense:150,cost:{metal:12e3,crystal:12e3,deuterium:7500},buildTime:300,icon:"whatshot",bonuses:{[ue.DESTROYER]:1.5,[ue.DEATH_STAR]:.1,[ue.BATTLESHIP]:1.5}},smallShield:{id:"smallShield",name:"Maa Osona Tarczowa",desc:"Kopua energetyczna chronica cz planety przed atakami.",attack:1,defense:500,cost:{metal:2500,crystal:2500,deuterium:0},buildTime:60,icon:"shield",bonuses:{}},largeShield:{id:"largeShield",name:"Dua Osona Tarczowa",desc:"Masywna tarcza energetyczna obejmujca ca planet.",attack:1,defense:2500,cost:{metal:12e3,crystal:12e3,deuterium:0},buildTime:300,icon:"security",bonuses:{}}},Ly=l=>{var p;const a=(l.ships[ue.PIONEER]||0)>0;(l.ships[ue.ESPIONAGE_PROBE]||0)>0;let n=0,o=0;Object.entries(l.ships).forEach(([v,x])=>{const _=Ze[v];_&&(n+=_.capacity*x,o+=_.attack*x+_.defense*x)});const d=Math.random(),h=a?.98:.85,f=Date.now(),g={id:`exp-${f}-${Math.random().toString(36).substr(2,9)}`,timestamp:f};if(d>h){const v=["Sensory nie wykryy adnych anomalii w sektorze.","Pusta przestrze. Zaoga spdzia czas na kalibracji systemw.","Wyprawa dotara do koordynatw, ale znaleziono jedynie kosmiczny py.","Sektor wydaje si opuszczony od tysicleci.","Brak znaczcych odkry. Morale zaogi stabilne."];return{log:{...g,title:"Pusta Przestrze",message:v[Math.floor(Math.random()*v.length)],outcome:"neutral"},rewards:{}}}const b=Math.random();if(b<.4){let v=Math.floor(Math.random()*5e4)+12e3,x=Math.floor(Math.random()*3e4)+6e3,_=Math.floor(Math.random()*1e4)+2e3;const j=Math.random();let A={},C="";j<.5?(_=0,C="Odkryto pole asteroid bogate w mineray."):j<.8?(v=0,C="Znaleziono obok gazowy zawierajcy deuter."):C="Trafiono na opuszczony magazyn piratw!";const z=v+x+_;if(z>n){const D=n/z;v=Math.floor(v*D),x=Math.floor(x*D),_=Math.floor(_*D),C+=` (adownie pene: ${n})`}return v>0&&(A.metal=v),x>0&&(A.crystal=x),_>0&&(A.deuterium=_),C+=" Pozyskano:",v>0&&(C+=` Metal: ${v}`),x>0&&(C+=` Kryszta: ${x}`),_>0&&(C+=` Deuter: ${_}.`),{log:{...g,title:"Pozyskano Zasoby",message:C,outcome:"success",rewards:A},rewards:A}}else if(b<.75){const v=Math.random();let x,_=1;v<.6?(x=[ue.LIGHT_FIGHTER,ue.HEAVY_FIGHTER,ue.SMALL_CARGO,ue.ESPIONAGE_PROBE],_=8):v<.9?(x=[ue.MEDIUM_CARGO,ue.PIONEER,ue.CRUISER],_=4):(x=[ue.BATTLESHIP,ue.DESTROYER,ue.HUGE_CARGO],_=2);const j=x[Math.floor(Math.random()*x.length)],A=Math.floor(Math.random()*_)+1,C=((p=Ze[j])==null?void 0:p.name)||j;return{log:{...g,title:"Odnaleziono Statki",message:`Flota napotkaa dryfujce wraki, ktre udao si przywrci do dziaania. Doczono do floty: ${A}x ${C}.`,outcome:"success"},rewards:{ships:{[j]:A}}}}else if(b<.9){const v=Math.floor(Math.random()*1e4)+2e3;return{log:{...g,title:"Antyczny Artefakt",message:`Znaleziono dziwny artefakt obcych. Po jego analizie uzyskano technologi wart ${v} Metalu.`,outcome:"success",rewards:{metal:v}},rewards:{metal:v}}}else{const v=Math.floor(Math.random()*150)+50;return{log:{...g,title:"Czarna Materia (Rzadkie!)",message:`Eksperymentalne skanery wykryy anomali czasoprzestrzenn. Skondensowano a ${v} jednostek Czarnej Materii!`,outcome:"success"},rewards:{darkMatter:v}}}},xn=l=>JSON.parse(JSON.stringify(l||{})),op=(l,a,n,o,d,h,f=!1,g={})=>{const b=xn(l),p=xn(a||{}),v=xn(n||{}),x=1+(g[xe.WEAPON_TECH]||0)*.1,_=1+(g[xe.SHIELDING_TECH]||0)*.05+(g[xe.ARMOUR_TECH]||0)*.05,j=1+(d[xe.WEAPON_TECH]||0)*.1,A=1+(d[xe.SHIELDING_TECH]||0)*.05+(d[xe.ARMOUR_TECH]||0)*.05;let C=xn(l),z=xn(a||{}),D=xn(n||{});const R=6,S=[];for(let ie=1;ie<=R;ie++){let ge=0,Te=0;if(Object.values(z).forEach($e=>Te+=$e),Object.values(D).forEach($e=>Te+=$e),Te===0)break;Object.entries(C).forEach(([$e,zt])=>{const ot=Ze[$e],he=zt;if(he<=0)return;let ae=ot.attack*he*x;ot.bonuses&&Object.entries(ot.bonuses).forEach(([Pe,Ge])=>{let dt=(z[Pe]||0)+(D[Pe]||0);if(dt>0){const Bt=Math.min(1,dt/he),nt=ot.attack*he*x*Ge*Bt;ae+=nt}}),ge+=ae});let k=0,X=0;if(Object.values(C).forEach($e=>X+=$e),X===0)break;Object.entries(z).forEach(([$e,zt])=>{const ot=Ze[$e],he=zt;if(he<=0)return;let ae=ot.attack*he*j;ot.bonuses&&Object.entries(ot.bonuses).forEach(([Pe,Ge])=>{let dt=C[Pe]||0;if(dt>0){const Bt=Math.min(1,dt/he),nt=ot.attack*he*j*Ge*Bt;ae+=nt}}),k+=ae}),Object.entries(D).forEach(([$e,zt])=>{const ot=Zs[$e],he=zt;if(he<=0)return;let ae=ot.attack*he*j;k+=ae});const me=($e,zt,ot)=>Object.entries($e).reduce((he,[ae,Pe])=>{const Ge=zt&&Zs[ae]||Ze[ae];if(!Ge)return he;const dt=Ge.baseCost||Ge.cost||{metal:0,crystal:0},Bt=(dt.metal+dt.crystal)/10,nt=Ge.defense*ot;return he+(Bt+nt)*Pe},0),be=me(l,!1,_),_e=me(z,!0,A);S.push(`Runda ${ie}: Agresor atakuje si ${Math.floor(ge)}. Obroca atakuje si ${Math.floor(k)}.`);const Le=Math.min(1,k/be);be>0&&k>0&&Object.keys(C).forEach($e=>{const zt=C[$e],ot=Math.floor(zt*Le);C[$e]-=ot,C[$e]<0&&(C[$e]=0)});const Je=Math.min(1,ge/_e);_e>0&&ge>0&&(Object.keys(z).forEach($e=>{const zt=z[$e],ot=Math.floor(zt*Je);z[$e]-=ot,z[$e]<0&&(z[$e]=0)}),Object.keys(D).forEach($e=>{const zt=D[$e],ot=Math.floor(zt*Je);D[$e]-=ot,D[$e]<0&&(D[$e]=0)}));let Rt=0;Object.values(C).forEach($e=>Rt+=$e);let ft=0;if(Object.values(z).forEach($e=>ft+=$e),Object.values(D).forEach($e=>ft+=$e),Rt<=0||ft<=0)break}const Q=Object.values(C).reduce((ie,ge)=>ie+ge,0),H=Object.values(z).reduce((ie,ge)=>ie+ge,0)+Object.values(D).reduce((ie,ge)=>ie+ge,0),G=Q>0&&H<=0,Z={};let fe=0;Object.keys(b).forEach(ie=>{const ge=b[ie]-(C[ie]||0);Z[ie]=ge,fe+=ge});const we={};Object.keys(p).forEach(ie=>{we[ie]=p[ie]-(z[ie]||0)});const ze={},qe={};Object.keys(v).forEach(ie=>{const ge=v[ie]-(D[ie]||0),Te=Math.floor(ge*.7),k=ge-Te;ze[ie]=k,qe[ie]=(D[ie]||0)+Te});let Ue={metal:0,crystal:0,deuterium:0};G&&(Ue.metal=Math.floor((h.metal||0)*.5),Ue.crystal=Math.floor((h.crystal||0)*.5),Ue.deuterium=Math.floor((h.deuterium||0)*.5));const Ve={};G&&o&&Object.entries(o).forEach(([ie,ge])=>{ge>0&&Math.random()<.1&&(Ve[ie]=1)});const Se={rounds:6,initialAttackerShips:b,initialDefenderShips:p,initialDefenderDefenses:v,finalAttackerShips:C,finalDefenderShips:z,finalDefenderDefenses:qe,attackerLosses:Z,defenderLosses:we,defenderDefensesLost:ze,loot:Ue,bonuses:{attacker:{weapon:x,shield:_,armour:1},defender:{weapon:j,shield:A,armour:1}},logMessages:S,result:G?"attacker_win":"defender_win"};let ye=0,N=0;const J=(ie,ge)=>{if(Ze[ie]){const Te=Ze[ie].baseCost;ye+=Te.metal*ge*.3,N+=Te.crystal*ge*.3}};return Object.entries(Z).forEach(([ie,ge])=>J(ie,ge)),Object.entries(we).forEach(([ie,ge])=>J(ie,ge)),{report:Se,survivingAttackerShips:C,survivingDefenderShips:z,survivingDefenderDefenses:qe,damagedBuildings:Ve,loot:Ue,attackerWon:G,totalAttackerLost:fe,debris:{metal:Math.floor(ye),crystal:Math.floor(N)}}},By=1e3,tr=100,ka="cosmos_conquest_save_v1",js={avatarUrl:"/kosmo/avatars/avatar_default.png",planetType:"terran",planetName:"Nowa Kolonia",nickname:"Player",resources:{metal:500,crystal:300,deuterium:100,darkMatter:0,energy:0,maxEnergy:0,storage:{metal:1e4,crystal:1e4,deuterium:1e4}},productionSettings:{[ce.METAL_MINE]:100,[ce.CRYSTAL_MINE]:100,[ce.DEUTERIUM_SYNTH]:100,[ce.SOLAR_PLANT]:100,[ce.FUSION_REACTOR]:100},productionRates:{metal:0,crystal:0,deuterium:0},buildings:{[ce.METAL_MINE]:1,[ce.CRYSTAL_MINE]:0,[ce.DEUTERIUM_SYNTH]:0,[ce.SOLAR_PLANT]:1,[ce.FUSION_REACTOR]:0,[ce.ROBOT_FACTORY]:0,[ce.SHIPYARD]:0,[ce.RESEARCH_LAB]:0,[ce.METAL_STORAGE]:0,[ce.CRYSTAL_STORAGE]:0,[ce.DEUTERIUM_TANK]:0},research:{[xe.ENERGY_TECH]:0,[xe.LASER_TECH]:0,[xe.ION_TECH]:0,[xe.HYPERSPACE_TECH]:0,[xe.PLASMA_TECH]:0,[xe.COMBUSTION_DRIVE]:0,[xe.IMPULSE_DRIVE]:0,[xe.HYPERSPACE_DRIVE]:0,[xe.ESPIONAGE_TECH]:0,[xe.COMPUTER_TECH]:0,[xe.ASTROPHYSICS]:0,[xe.WEAPON_TECH]:0,[xe.SHIELDING_TECH]:0,[xe.ARMOUR_TECH]:0},ships:{[ue.LIGHT_FIGHTER]:0,[ue.HEAVY_FIGHTER]:0,[ue.CRUISER]:0,[ue.BATTLESHIP]:0,[ue.DESTROYER]:0,[ue.DEATH_STAR]:0,[ue.SMALL_CARGO]:0,[ue.MEDIUM_CARGO]:0,[ue.HUGE_CARGO]:0,[ue.COLONY_SHIP]:0,[ue.ESPIONAGE_PROBE]:0,[ue.PIONEER]:1,[ue.RECYCLER]:0},defenses:{[qt.ROCKET_LAUNCHER]:0,[qt.LIGHT_LASER]:0,[qt.HEAVY_LASER]:0,[qt.GAUSS_CANNON]:0,[qt.ION_CANNON]:0,[qt.PLASMA_TURRET]:0,[qt.SMALL_SHIELD]:0,[qt.LARGE_SHIELD]:0},constructionQueue:[],shipyardQueue:[],activeMissions:[],incomingMissions:[],missionLogs:[],lastTick:Date.now(),xp:0,level:1,version:1},ea=(l,a,n,o,d)=>{const h=x=>(x.metal||0)+(x.crystal||0)+(x.deuterium||0)*2;let f=0;Object.entries(a||{}).forEach(([x,_])=>{const j=ra[x];if(!j)return;let A=0,C=0,z=0;for(let D=1;D<=_;D++){const R=Math.pow(1.5,D-1);A+=Math.floor(j.baseCost.metal*R),C+=Math.floor(j.baseCost.crystal*R),z+=Math.floor(j.baseCost.deuterium*R)}f+=h({metal:A,crystal:C,deuterium:z})});let g=0;Object.entries(o||{}).forEach(([x,_])=>{const j=kr[x];if(!j)return;let A=0,C=0,z=0;for(let D=1;D<=_;D++){const R=Math.pow(1.5,D-1);A+=Math.floor(j.baseCost.metal*R),C+=Math.floor(j.baseCost.crystal*R),z+=Math.floor(j.baseCost.deuterium*R)}g+=h({metal:A,crystal:C,deuterium:z})});let b=0;Object.entries(n||{}).forEach(([x,_])=>{const j=Ze[x];j&&(b+=h(j.baseCost)*_)});let p=0;Object.entries(d||{}).forEach(([x,_])=>{const j=Zs[x];j&&(p+=h(j.cost)*_)});const v=f+g+b+p;return Math.floor(v/1e3)},Op=te.createContext(void 0),Hy=({children:l,session:a})=>{const[n,o]=te.useState({...js,userId:a==null?void 0:a.user.id}),[d,h]=te.useState(!1),[f,g]=te.useState(!1),[b,p]=te.useState(navigator.onLine);te.useEffect(()=>{Uy()},[]);const v=te.useRef(new Set);te.useEffect(()=>{const w=()=>{console.log(" Status: ONLINE"),p(!0),g(!1)},E=()=>{console.log(" Status: OFFLINE"),p(!1)};return window.addEventListener("online",w),window.addEventListener("offline",E),()=>{window.removeEventListener("online",w),window.removeEventListener("offline",E)}},[]);const[x,_]=te.useState([]),[j,A]=te.useState(null),[C,z]=te.useState("Gwna"),[D,R]=te.useState(null),[S,Q]=te.useState(null),H=te.useRef(n),G=te.useRef(j),Z=te.useRef(S);te.useEffect(()=>{H.current=n,G.current=j,Z.current=S},[n,j,S]),te.useEffect(()=>{},[]);const fe=te.useRef(null),we=te.useRef(new Set),ze=async w=>{var W,K,ee,$;if(f)return console.warn(" [SAVE] Paused due to auth error"),!1;const E=H.current,M=G.current,B=M&&M!=="main"&&M!==null;console.log(""),console.log(` [SAVE START] Reason: ${w}`),console.log(` [SAVE] Target: ${B?`Colony (${M})`:"Main Planet"}`),console.log(" [SAVE] Current State:"),console.log("   Resources:",JSON.stringify(E.resources)),console.log("   Buildings:",JSON.stringify(E.buildings)),console.log("   Research:",JSON.stringify(E.research)),console.log("   Ships:",JSON.stringify(E.ships)),console.log("   Defenses:",JSON.stringify(E.defenses)),console.log("   ConstructionQueue:",((W=E.constructionQueue)==null?void 0:W.length)||0,"items"),console.log("   ShipyardQueue:",((K=E.shipyardQueue)==null?void 0:K.length)||0,"items"),console.log("   GalaxyCoords:",JSON.stringify(E.galaxyCoords)),console.log("   Nickname:",E.nickname),console.log("   PlanetName:",E.planetName),localStorage.setItem(ka,JSON.stringify(E));let U={},le=null,oe=null;if(B){le={buildings:E.buildings,ships:E.ships,defenses:E.defenses,resources:E.resources,construction_queue:E.constructionQueue,shipyard_queue:E.shipyardQueue},oe=M;const{data:P}=await de.from("profiles").select("resources, debris").eq("id",a.user.id).single(),pe={...(P==null?void 0:P.resources)||{},darkMatter:n.resources.darkMatter};U={research:E.research,production_settings:{...E.productionSettings,avatarUrl:E.avatarUrl,planetType:E.planetType,nickname:E.nickname},nickname:E.nickname,active_missions:E.activeMissions,resources:pe,last_updated:Date.now(),level:E.level,xp:E.xp,points:(()=>{let Ae=0;return Ae+=ea(null,E.buildings,E.ships,E.research,E.defenses),Ae})()},fe.current={...E}}else U={planet_name:E.planetName,nickname:E.nickname,resources:E.resources,buildings:E.buildings,research:E.research,ships:E.ships,defenses:E.defenses,construction_queue:E.constructionQueue,shipyard_queue:E.shipyardQueue,production_settings:{...E.productionSettings,avatarUrl:E.avatarUrl,planetType:E.planetType,nickname:E.nickname},active_missions:E.activeMissions,mission_logs:E.missionLogs,galaxy_coords:E.galaxyCoords,points:(()=>{let P=0;return P+=ea(null,E.buildings,E.ships,E.research,E.defenses),x.forEach(se=>{se.id!==j&&(P+=ea(null,se.buildings,se.ships,{},se.defenses))}),P})(),last_updated:Date.now(),level:E.level,xp:E.xp};try{console.log(` [SAVE] Calling RPC save_game_atomic (Ver: ${E.version||1})`);const{data:P,error:se}=await de.rpc("save_game_atomic",{p_user_id:a.user.id,p_profile_data:U,p_planet_id:oe,p_planet_data:le,p_expected_version:E.version||1});if(se){if(console.error(" [SAVE RPC ERROR]",se),se.message&&se.message.includes("VERSION_MISMATCH"))return console.warn(" Version mismatch, reloading..."),window.location.reload(),!1;throw se}if(P&&P.success){const pe=P.new_version;return console.log(` [SAVE SUCCESS] Version bumped to ${pe}`),o(Ae=>({...Ae,version:pe})),H.current.version=pe,fe.current=JSON.parse(JSON.stringify(E)),!0}}catch(P){return console.error(" [SAVE EXCEPTION]",P),((ee=P==null?void 0:P.message)!=null&&ee.includes("Failed to fetch")||($=P==null?void 0:P.message)!=null&&$.includes("NetworkError"))&&p(!1),(P.code==="401"||P.code==="403")&&g(!0),!1}return!1},qe=(w,E)=>{const M=fe.current;if(!M){console.log(" [VALIDATE] No previous state to compare");return}console.log(" [VALIDATE] Comparing loaded state vs last saved...");const B=[],U=(le,oe,W,K=[])=>{if(!W||!oe){if(le==="research"){console.log(" [VALIDATE] Skipping research (global, not per-planet)");return}W!==oe&&B.push(` [DESYNC] ${le}: one is null/undefined`);return}const ee=new Set([...Object.keys(W),...Object.keys(oe)]),$=[];ee.forEach(P=>{if(K.includes(P))return;const se=W[P],pe=oe[P];if(typeof se=="object"&&se!==null){const Ae=JSON.stringify(se),Ce=JSON.stringify(pe);Ae!==Ce&&$.push(`  ${P}: SAVED=${Ae.substring(0,50)} LOADED=${Ce==null?void 0:Ce.substring(0,50)}`)}else if(typeof se=="number"&&typeof pe=="number"){const Ae=Math.max(1,Math.abs(se)*.01);Math.abs(se-pe)>Ae&&$.push(`  ${P}: SAVED=${se}  LOADED=${pe}`)}else se!==pe&&$.push(`  ${P}: SAVED=${se}  LOADED=${pe}`)}),$.length>0&&(B.push(` [DESYNC] ${le} has ${$.length} differences:`),$.forEach(P=>console.warn(P)))};U("buildings",w.buildings,M.buildings),U("research",w.research,M.research),U("ships",w.ships,M.ships),U("defenses",w.defenses,M.defenses),U("resources",w.resources,M.resources,["energy","maxEnergy"]),JSON.stringify(w.constructionQueue)!==JSON.stringify(M.constructionQueue)&&B.push(` [DESYNC] constructionQueue:
SAVED=${JSON.stringify(M.constructionQueue)}
LOADED=${JSON.stringify(w.constructionQueue)}`),JSON.stringify(w.shipyardQueue)!==JSON.stringify(M.shipyardQueue)&&B.push(` [DESYNC] shipyardQueue:
SAVED=${JSON.stringify(M.shipyardQueue)}
LOADED=${JSON.stringify(w.shipyardQueue)}`),B.length>0?(console.warn(""),console.warn(" [VALIDATION FAILED] Data desync detected:"),B.forEach(le=>console.warn(le)),console.warn("")):console.log(" [VALIDATE] State matches - no desync detected from",E)},Ue=async w=>{const{data:E,error:M}=await de.from("profiles").select("id, galaxy_coords").not("galaxy_coords","is",null);if(M)return console.error("Error finding target user:",M),null;const B=E==null?void 0:E.find(U=>{var le,oe,W;return((le=U.galaxy_coords)==null?void 0:le.galaxy)===w.galaxy&&((oe=U.galaxy_coords)==null?void 0:oe.system)===w.system&&((W=U.galaxy_coords)==null?void 0:W.position)===w.position});return(B==null?void 0:B.id)||null},Ve=async()=>{if(!(a!=null&&a.user)||f)return;const{data:w,error:E}=await de.from("missions").select("*").or(`owner_id.eq.${a.user.id}, target_user_id.eq.${a.user.id}`);if(w&&!E){const M=w.map(K=>({id:K.id,ownerId:K.owner_id,targetUserId:K.target_user_id,type:K.mission_type,ships:K.ships,targetCoords:K.target_coords,originCoords:K.origin_coords,startTime:K.start_time,arrivalTime:K.arrival_time,returnTime:K.return_time,eventProcessed:K.status!=="flying",status:K.status,resources:K.resources,result:K.result})),U=Date.now()-1e4,le=M.filter(K=>K.status==="flying"&&K.arrivalTime<U&&!we.current.has(K.id));le.length>0&&(console.log(" [SILENT RESCUE] Zombies detected:",le.length),le.forEach(K=>{we.current.add(K.id),de.from("missions").update({status:"completed",result:{id:`${K.id}-rescue`,timestamp:Date.now(),outcome:"neutral",title:"Zaginiona Flota",message:"Misja zakoczona awaryjnie (Silent Rescue)."}}).eq("id",K.id).then(({error:ee})=>{ee?console.error("Silent Rescue DB Error:",ee):console.log(" [SILENT RESCUE] DB Updated for",K.id)})}));const oe=M.filter(K=>K.ownerId===a.user.id&&K.status!=="completed"&&!we.current.has(K.id));let W=M.filter(K=>K.targetUserId===a.user.id&&K.ownerId!==a.user.id&&K.status==="flying"&&K.arrivalTime>U&&!we.current.has(K.id));if(W.length>0){const K=W.map($=>$.ownerId).filter($=>!!$),ee=Array.from(new Set(K));if(ee.length>0){console.log(" Resolving Incoming Attackers:",ee);const{data:$,error:P}=await de.from("profiles").select("id, nickname").in("id",ee);if(P&&console.error(" Error fetching incoming attackers:",P),$){const se=new Map($.map(pe=>[pe.id,pe.nickname]));W=W.map(pe=>{var Ae;return{...pe,attackerName:pe.ownerId&&se.get(pe.ownerId)||`Obcy [${((Ae=pe.ownerId)==null?void 0:Ae.slice(0,4))||"???"}]`}})}}W.forEach($=>{if(!v.current.has($.id)){v.current.add($.id);const P=$.originCoords?`[${$.originCoords.galaxy}:${$.originCoords.system}:${$.originCoords.position}]`:"[?:?:?]";ip(" WYKRYTO ZAGROENIE!",`Gracz ${$.attackerName||"Nieznany"} ${P} zblia si do Twojej planety!`,"/kosmo/icons/warning.png")}}),console.log("Incoming Attacks Detected:",W)}o(K=>({...K,activeMissions:oe,incomingMissions:W}))}else E&&(console.error("Error fetching missions:",E),(E.code==="401"||E.code==="403"||E.message.includes("JWT"))&&(console.error(" CRITICAL: Pausing Sync due to Auth Error. Please run SQL RLS script."),g(!0)))},Se=async()=>{var M,B,U,le,oe,W;if(!(a!=null&&a.user))return;const{data:w,error:E}=await de.from("profiles").select("*").eq("id",a.user.id).single();if(w&&!E){const K=w.last_updated||Date.now(),ee=Date.now(),$=Math.max(0,(ee-K)/1e3);let P={...w.resources};if($>1){console.log(` Calculating offline production for ${$.toFixed(0)} seconds...`);const pe={...js.buildings,...w.buildings},Ae={...js.productionSettings,...w.production_settings},Ce=pe[ce.METAL_MINE]||0,wt=pe[ce.CRYSTAL_MINE]||0,it=pe[ce.DEUTERIUM_SYNTH]||0,rt=pe[ce.SOLAR_PLANT]||0,jt=pe[ce.FUSION_REACTOR]||0,Jt=20*rt*Math.pow(1.1,rt),ls=30*jt*Math.pow(1.05+.01*(pe[xe.ENERGY_TECH]||0),jt),Ne=Math.floor(Jt+ls),At=10*Ce*Math.pow(1.1,Ce),gt=10*wt*Math.pow(1.1,wt),Pt=20*it*Math.pow(1.1,it),ve=Math.ceil(At+gt+Pt),Be=Ne>=ve?1:Ne/(ve||1),st=30*Ce*Math.pow(1.1,Ce)*Be*(Ae[ce.METAL_MINE]??100)/100,lt=20*wt*Math.pow(1.1,wt)*Be*(Ae[ce.CRYSTAL_MINE]??100)/100,Xe=10*it*Math.pow(1.1,it)*1*Be*(Ae[ce.DEUTERIUM_SYNTH]??100)/100;let Nt=0,os=0;Object.entries(w.ships||{}).forEach(([_s,rr])=>{const ps=Ze[_s];ps&&(os+=(ps.baseCost.metal+ps.baseCost.crystal)*rr)}),Nt=os/1e3*tr*.1/3600;const Ca=Xe-Nt;P.storage||(P.storage=JSON.parse(JSON.stringify(js.resources.storage))),P.metal=Math.max(0,Math.min(P.storage.metal,P.metal+st*$)),P.crystal=Math.max(0,Math.min(P.storage.crystal,P.crystal+lt*$)),P.deuterium=Math.max(0,Math.min(P.storage.deuterium,P.deuterium+Ca*$))}z(w.planet_name||"Gwna"),console.log(""),console.log(" [LOAD] Profile loaded from Supabase"),console.log(" [LOAD] Raw DB Data:"),console.log("   Resources:",JSON.stringify(w.resources)),console.log("   Buildings:",JSON.stringify(w.buildings)),console.log("   Research:",JSON.stringify(w.research)),console.log("   Ships:",JSON.stringify(w.ships)),console.log("   Defenses:",JSON.stringify(w.defenses)),console.log("   ConstructionQueue:",((M=w.construction_queue)==null?void 0:M.length)||0,"items"),console.log("   ShipyardQueue:",((B=w.shipyard_queue)==null?void 0:B.length)||0,"items"),console.log("   GalaxyCoords:",JSON.stringify(w.galaxy_coords)),console.log("   Nickname:",w.nickname),console.log("   PlanetName:",w.planet_name),console.log("");const se={planetName:w.planet_name||"Nowa Kolonia",nickname:w.nickname||((U=w.production_settings)==null?void 0:U.nickname)||"Player",resources:{...js.resources,...P},buildings:{...js.buildings,...w.buildings},research:{...js.research,...w.research},ships:{...js.ships,...w.ships},defenses:{...js.defenses,...w.defenses},constructionQueue:w.construction_queue||[],shipyardQueue:w.shipyard_queue||[],productionSettings:{...js.productionSettings,...w.production_settings},avatarUrl:((le=w.production_settings)==null?void 0:le.avatarUrl)||js.avatarUrl,planetType:((oe=w.production_settings)==null?void 0:oe.planetType)||"terran",missionLogs:w.mission_logs||[],galaxyCoords:w.galaxy_coords,version:w.version||1,debris:w.debris||{metal:0,crystal:0}};w.galaxy_coords&&R(w.galaxy_coords),qe(se,"refreshProfile (Main Planet)"),o(pe=>({...pe,...se,lastTick:Date.now()})),$>1&&de.from("profiles").update({resources:P}).eq("id",a.user.id).then(({error:pe})=>{pe&&console.error("Failed to save offline production:",pe)})}else{if(E){if(console.error("Profile Load Error:",E),E.code==="401"||E.code==="403"){console.error(" RLS Policy Missing"),g(!0);return}if(E.code!=="PGRST116"){alert("Bd poczenia z baz danych (Profile Load). Nie nadpisuj danych.");return}}const K=localStorage.getItem(ka);if(K)try{const ee=JSON.parse(K);ee.userId&&ee.userId===a.user.id?((W=ee.production_settings)!=null&&W.nickname&&(ee.nickname=ee.production_settings.nickname),o($=>({...$,...ee,userId:a.user.id,lastTick:Date.now()}))):(console.warn("Cleared mismatching local storage data"),localStorage.removeItem(ka),o($=>({...js,userId:a.user.id})))}catch{localStorage.removeItem(ka)}}h(!0)};te.useEffect(()=>{Se(),Ve(),ae();const w=setInterval(()=>{var E;document.visibilityState==="visible"&&!f&&(Ve(),de.from("profiles").select("mission_logs, nickname").eq("id",(E=a==null?void 0:a.user)==null?void 0:E.id).single().then(({data:M})=>{M&&o(B=>({...B,missionLogs:M.mission_logs||B.missionLogs,nickname:M.nickname||B.nickname}))}))},6e4);return()=>clearInterval(w)},[a]),te.useEffect(()=>{if(!d||!(a!=null&&a.user)||f)return;const w=async()=>{await ze("Auto-Save (60s interval)")},E=setInterval(w,6e4),M=B=>{const U=H.current;localStorage.setItem(ka,JSON.stringify(U)),localStorage.setItem(ka+"_backup",JSON.stringify({...U,_savedAt:Date.now(),_savedBy:"beforeunload"})),console.log(" [BEFOREUNLOAD] Saved to localStorage"),w()};return window.addEventListener("beforeunload",M),()=>{clearInterval(E),window.removeEventListener("beforeunload",M),w()}},[d,a]);const ye=async w=>{var le,oe,W,K,ee,$,P,se,pe,Ae,Ce,wt,it;if(w.eventProcessed)return;const{data:E,error:M}=await de.from("missions").update({status:"processing"}).eq("id",w.id).eq("status","flying").select("id");if(M||!E||E.length===0){console.log(" Mission already being processed by another session:",w.id);return}let B=0;const U=5;for(;B<U;){let rt={},jt={},Jt={...w.ships};try{if(console.log(`Przetwarzanie Przylotu (Prba ${B+1}):`,w.id,w.type),w.type===Qe.COLONIZE){const{data:Ne}=await de.from("planets").select("id").contains("galaxy_coords",w.targetCoords),{data:At}=await de.from("profiles").select("id").contains("galaxy_coords",w.targetCoords);if(Ne&&Ne.length>0||At&&At.length>0)rt={id:`${w.id}-fail`,timestamp:Date.now(),title:"Kolonizacja Nieudana",message:`Pozycja [${w.targetCoords.galaxy}:${w.targetCoords.system}:${w.targetCoords.position}] zajta.`,outcome:"failure"};else{const{error:gt}=await de.from("planets").insert({owner_id:w.ownerId,planet_name:`Kolonia ${x.length+1}`,planet_type:"terran",galaxy_coords:w.targetCoords,resources:{metal:500+(((le=w.resources)==null?void 0:le.metal)||0),crystal:300+(((oe=w.resources)==null?void 0:oe.crystal)||0),deuterium:100+(((W=w.resources)==null?void 0:W.deuterium)||0),darkMatter:0,energy:0,maxEnergy:0,storage:{metal:1e4,crystal:1e4,deuterium:1e4}},buildings:{},ships:{},defenses:{},is_main:!1});gt?rt={id:`${w.id}-error`,timestamp:Date.now(),title:"Bd Kolonizacji",message:gt.message,outcome:"failure"}:(rt={id:`${w.id}-success`,timestamp:Date.now(),title:"Kolonizacja Zakoczona",message:"Nowa kolonia zaoona.",outcome:"success"},Jt={},ae())}B=U+1}else if(w.type===Qe.EXPEDITION){const Ne=Ly(w);rt=Ne.log,Ne.rewards&&(jt=Ne.rewards),B=U+1}else if(w.type===Qe.RECYCLE){const{data:Ne}=await de.from("planets").select("*").contains("galaxy_coords",w.targetCoords),{data:At}=await de.from("profiles").select("*").contains("galaxy_coords",w.targetCoords);let gt=Ne&&Ne[0]||At&&At[0],Pt=!!(Ne&&Ne[0]);if(!gt)rt={id:`${w.id}-fail`,timestamp:Date.now(),title:"Recykling Nieudany",message:"Brak pola zniszcze na tych koordynatach.",outcome:"failure"};else{const ve=gt.debris||{metal:0,crystal:0};if((ve.metal||0)+(ve.crystal||0)<=0)rt={id:`${w.id}-empty`,timestamp:Date.now(),title:"Raport Recyklingu",message:"Pole zniszcze jest puste.",outcome:"neutral"};else{let Xe=(w.ships[ue.RECYCLER]||0)*2e4;const Nt=Math.min(ve.metal||0,Xe);Xe-=Nt;const os=Math.min(ve.crystal||0,Xe),Ca={metal:-Nt,crystal:-os},{error:_s}=await de.rpc("apply_mission_outcome",{p_mission_id:w.id,p_target_id:gt.id,p_is_planet:Pt,p_log_entry:null,p_resources_diff:null,p_debris_diff:Ca,p_ships_new:null,p_defenses_new:null,p_buildings_new:null});_s?(console.error("Recycle RPC Error:",_s),rt={id:`${w.id}-err`,timestamp:Date.now(),title:"Bd Recyklingu",message:_s.message,outcome:"failure"}):(await de.from("fleets").update({resources:{metal:Nt,crystal:os,deuterium:0}}).eq("id",w.id),rt={id:`${w.id}-success`,timestamp:Date.now(),title:"Recykling Zakoczony",message:`Odzyskano: M:${Nt} K:${os}.`,outcome:"success",rewards:{metal:Nt,crystal:os}})}}B=U+1}else if(w.type===Qe.ATTACK||w.type===Qe.SPY||w.type===Qe.TRANSPORT)if(w.targetUserId){let Ne=null,At=!1,gt=w.targetUserId;const{data:Pt,error:ve}=await de.from("planets").select("*").eq("galaxy",w.targetCoords.galaxy).eq("system",w.targetCoords.system).eq("position",w.targetCoords.position).single();if(Pt)Ne=Pt,At=!0,gt=Pt.id;else{const{data:St,error:Mt}=await de.from("profiles").select("*").eq("id",w.targetUserId).single();if(Mt)throw new Error("Target fetch error");Ne=St,At=!1,gt=St.id}let Be={},st=[...Ne.mission_logs||[]],lt=w.attackerName||"Nieznany";if(w.ownerId===a.user.id)lt=H.current.nickname||"Ty";else if(!w.attackerName||w.attackerName==="Nieznany"){console.log(` Fetching attacker name for ID: ${w.ownerId}`);const{data:St,error:Mt}=await de.from("profiles").select("nickname, research").eq("id",w.ownerId).single();Mt&&console.error(" Error fetching attacker profile:",Mt),St&&St.nickname?(lt=St.nickname,console.log(` Attacker identified: ${lt}`)):console.warn(` Attacker profile not found or no nickname for ID: ${w.ownerId}`)}let Xe=null;if(w.type===Qe.ATTACK){let St={};w.ownerId===a.user.id&&(St=H.current.research);const Mt=op(w.ships,Ne.ships,Ne.defenses||{},Ne.buildings,Ne.research,Ne.resources,!1,St);Xe=Mt;const Ls=`[${w.originCoords.galaxy}:${w.originCoords.system}:${w.originCoords.position}]`,Et=`[${w.targetCoords.galaxy}:${w.targetCoords.system}:${w.targetCoords.position}]`;rt={id:`${w.id}-result`,timestamp:Date.now(),title:Xe.attackerWon?"Zwycistwo!":"Poraka",message:`Atak na ${Ne.nickname||"Gracza"} ${Et} zakoczony. Wynik: ${Xe.attackerWon?"Wygrana":"Przegrana"}. Zrabowano: M:${Math.floor(Xe.loot.metal)} C:${Math.floor(Xe.loot.crystal)}.`,outcome:Xe.attackerWon?"success":"failure",rewards:Xe.loot,report:Xe.report},jt=Xe.loot,Jt=Xe.survivingAttackerShips,Xe.report.result==="attacker_win"&&Js(50,"PvP Victory"),Be.ships=Mt.survivingDefenderShips,Be.defenses=Mt.survivingDefenderDefenses;const Bs={...Ne.buildings};Object.entries(Mt.damagedBuildings||{}).forEach(([Ft,Ti])=>{Bs[Ft]&&(Bs[Ft]=Math.max(0,Bs[Ft]-Ti))}),Be.buildings=Bs,Be.resources={...Ne.resources,metal:Math.max(0,Ne.resources.metal-(jt.metal||0)),crystal:Math.max(0,Ne.resources.crystal-(jt.crystal||0)),deuterium:Math.max(0,Ne.resources.deuterium-(jt.deuterium||0))};const na=Ne.debris||{metal:0,crystal:0},Ns=Mt.debris||{metal:0,crystal:0};Be.debris={metal:(na.metal||0)+(Ns.metal||0),crystal:(na.crystal||0)+(Ns.crystal||0)},st.unshift({id:`${w.id}-def-log`,timestamp:Date.now(),title:"ZOSTAE ZAATAKOWANY!",message:`Gracz ${lt} ${Ls} zaatakowa Twoj planet ${Et}. Wynik: ${Mt.attackerWon?"PRZEGRANA":"OBRONA"}.`,outcome:"danger",report:Mt.report})}else if(w.type===Qe.TRANSPORT)Be.resources={...Ne.resources||{},metal:(((K=Ne.resources)==null?void 0:K.metal)||0)+(((ee=w.resources)==null?void 0:ee.metal)||0),crystal:((($=Ne.resources)==null?void 0:$.crystal)||0)+(((P=w.resources)==null?void 0:P.crystal)||0),deuterium:(((se=Ne.resources)==null?void 0:se.deuterium)||0)+(((pe=w.resources)==null?void 0:pe.deuterium)||0)},st.unshift({id:Date.now().toString(),timestamp:Date.now(),title:"Dostawa Surowcw",message:`Otrzymano surowce od ${lt}.`,outcome:"success"}),rt={id:Date.now().toString(),timestamp:Date.now(),outcome:"success",title:"Transport",message:"Surowce dostarczone."};else if(w.type===Qe.SPY){let St={};if(w.ownerId===a.user.id)St=H.current.research;else{const{data:Ft,error:Ti}=await de.from("profiles").select("nickname, research").eq("id",w.ownerId).single();St=(Ft==null?void 0:Ft.research)||{},(!lt||lt==="Nieznany")&&(Ft!=null&&Ft.nickname)&&(lt=Ft.nickname,console.log(` Spy Attacker identified (Fallback): ${lt}`))}const Mt=(St==null?void 0:St.espionageTech)||0,Ls=((Ae=Ne.research)==null?void 0:Ae.espionageTech)||0,Et=Mt-Ls,Bs={targetName:Ne.nickname||"Nieznany Cel",attackerSpyLevel:Mt,defenderSpyLevel:Ls,resources:Ne.resources};let na=[`Surowce: M:${Math.floor(Ne.resources.metal)} K:${Math.floor(Ne.resources.crystal)} D:${Math.floor(Ne.resources.deuterium)}`];Et>=2&&(Bs.ships=Ne.ships,na.push(`Flota: ${Object.keys(Ne.ships||{}).length} typw.`)),Et>=3&&(Bs.defenses=Ne.defenses,na.push(`Obrona: ${Object.keys(Ne.defenses||{}).length} typw.`)),Et>=5&&(Bs.buildings=Ne.buildings,na.push(`Budynki: ${Object.keys(Ne.buildings||{}).length} typw.`));const Ns=w.originCoords?`[${w.originCoords.galaxy}:${w.originCoords.system}:${w.originCoords.position}]`:"[?:?:?]";ip(" WYKRYTO SKANOWANIE",`Gracz ${lt} ${Ns} przeskanowa Twoj planet.`,"/kosmo/icons/spy.png"),st.unshift({id:`${w.id}-def-log`,timestamp:Date.now(),title:"Wykryto Skanowanie!",message:`Gracz ${lt} ${Ns} przeskanowa Twoj planet.`,outcome:"danger"}),rt={id:`${w.id}-result`,timestamp:Date.now(),title:"Raport Szpiegowski",message:`Skanowanie zakoczone. Poziomy: Ty:${Mt} vs Cel:${Ls}. 
${na.join(`
`)}`,outcome:"success",report:Bs}}const Nt={};w.type===Qe.ATTACK?(Nt.metal=-(jt.metal||0),Nt.crystal=-(jt.crystal||0),Nt.deuterium=-(jt.deuterium||0)):w.type===Qe.TRANSPORT&&(Nt.metal=((Ce=w.resources)==null?void 0:Ce.metal)||0,Nt.crystal=((wt=w.resources)==null?void 0:wt.crystal)||0,Nt.deuterium=((it=w.resources)==null?void 0:it.deuterium)||0);const os={};if(w.type===Qe.ATTACK){const St=(Xe==null?void 0:Xe.debris)||{metal:0,crystal:0};os.metal=St.metal,os.crystal=St.crystal}const Ca=w.type===Qe.ATTACK?Xe==null?void 0:Xe.survivingDefenderShips:void 0,_s=w.type===Qe.ATTACK?Xe==null?void 0:Xe.survivingDefenderDefenses:void 0,rr=w.type===Qe.ATTACK?Be.buildings:void 0,{error:ps}=await de.rpc("apply_mission_outcome",{p_mission_id:w.id,p_target_id:gt,p_is_planet:At,p_log_entry:st[0],p_resources_diff:Nt,p_debris_diff:os,p_ships_new:Ca,p_defenses_new:_s,p_buildings_new:rr});ps&&(console.error("Mission Outcome RPC Error:",ps),ps.message.includes("UNAUTHORIZED")&&console.error("Critical Auth Error in Mission RPC")),B=U+1}else{if(w.type===Qe.ATTACK){const Ne=op(w.ships,{},{},{},{},{metal:5e3,crystal:3e3,deuterium:500},!0);rt={id:`${w.id}-pve`,timestamp:Date.now(),title:"Bitwa z Piratami",message:`Wynik: ${Ne.attackerWon?"Wygrana":"Przegrana"}.`,outcome:"success",rewards:Ne.loot,report:Ne.report},jt=Ne.loot,Jt=Ne.survivingAttackerShips,Js(30,"Pirate Combat")}else rt={id:Date.now().toString(),timestamp:Date.now(),outcome:"neutral",title:"Raport",message:"Cel nie istnieje (Pustka)."},w.type===Qe.TRANSPORT&&(jt=w.resources||{});B=U+1}const ls=(w.returnTime-w.startTime)/2;await de.from("missions").update({status:"returning",resources:jt,ships:Jt,result:rt,return_time:Date.now()+ls}).eq("id",w.id),Ve()}catch(ls){console.error("Critical Mission Arrival Error:",ls),await de.from("missions").update({status:"returning",return_time:Date.now()+6e4,result:{id:Date.now().toString(),title:"Bd Systemowy",message:"Awaryjny powrt.",outcome:"neutral"}}).eq("id",w.id),B=U+1}}},N=async w=>{var B,U,le,oe,W;let E=0;const M=5;for(;E<M;)try{console.log(`Processing Return (Attempt ${E+1}):`,w.id);const{data:K}=await de.from("missions").select("*").eq("id",w.id).single(),{data:ee,error:$}=await de.from("profiles").select("*").eq("id",a.user.id).single();if($||!ee)throw new Error("Profile fetch error");const P=K?{...w,resources:K.resources,result:K.result,ships:K.ships||w.ships,type:K.mission_type}:w,se=`${P.id}-return`;if((B=ee.mission_logs)==null?void 0:B.some(ve=>ve.id===se)){console.warn(" Powrt misji ju przetworzony (Dubel). Pomijam."),await de.from("missions").update({status:"completed"}).eq("id",P.id),Ve();return}const Ae={...ee.ships};P.ships&&Object.entries(P.ships).forEach(([ve,Be])=>{Ae[ve]=(Number(Ae[ve])||0)+(Number(Be)||0)});const Ce={...js.resources,...ee.resources||{}};P.resources&&(Ce.metal=(Number(Ce.metal)||0)+(Number(P.resources.metal)||0),Ce.crystal=(Number(Ce.crystal)||0)+(Number(P.resources.crystal)||0),Ce.deuterium=(Number(Ce.deuterium)||0)+(Number(P.resources.deuterium)||0),Ce.darkMatter=(Number(Ce.darkMatter)||0)+(Number(P.resources.darkMatter)||0),P.resources.ships&&Object.entries(P.resources.ships).forEach(([ve,Be])=>{Ae[ve]=(Number(Ae[ve])||0)+(Number(Be)||0)}));const wt=((U=P.result)==null?void 0:U.title)||"Powrt Floty (Anulowana)";let it="";Object.entries(P.ships||{}).forEach(([ve,Be])=>{Be>0&&(it+=`${Ze[ve].name}: ${Be}, `)}),it&&(it=it.slice(0,-2));const rt=P.resources,jt=rt&&(rt.metal||rt.crystal||rt.deuterium)?`Surowce: M:${Math.floor(rt.metal||0)} K:${Math.floor(rt.crystal||0)} D:${Math.floor(rt.deuterium||0)}`:"",Jt=((le=P.result)==null?void 0:le.message)||`Flota wrcia z anulowanej misji ${P.type}. 
Flota: ${it}. 
${jt}`,ls=((oe=P.result)==null?void 0:oe.outcome)||"neutral",Ne=(W=P.result)==null?void 0:W.report,At=[{id:se,timestamp:Date.now(),title:wt,message:Jt,outcome:ls,rewards:P.resources,report:Ne},...ee.mission_logs||[]].slice(0,50),{data:gt,error:Pt}=await de.rpc("save_game_atomic",{p_user_id:a.user.id,p_profile_data:{ships:Ae,resources:Ce,mission_logs:At,points:ea(Ce,n.buildings,Ae,n.research,n.defenses),last_updated:Date.now()},p_expected_version:ee.version||1});if(Pt)if(Pt.message.includes("VERSION_MISMATCH")){console.warn(` Konflikt Wersji (Zmiana w tle). Ponawiam ${E+1}/${M}...`),E++,await new Promise(ve=>setTimeout(ve,Math.random()*500+200));continue}else throw Pt;console.log(" Powrt Misji Zapisany (Atomowo)."),fe.current={...fe.current,ships:Ae,resources:Ce,missionLogs:At,version:gt.new_version},o(ve=>({...ve,ships:Ae,resources:Ce,missionLogs:At,version:gt.new_version})),await de.from("missions").update({status:"completed"}).eq("id",P.id),Ve();return}catch(K){console.error("Critical Error in processMissionReturn:",K),alert(`BD MISJI: ${K.message||K} `);return}console.error(" Max Retries Exceeded for Mission Return"),alert("Nie udao si zapisa powrotu misji (Bd poczenia/Wersji). Sprbuj odwiey stron.")};te.useEffect(()=>{if(!(a!=null&&a.user))return;Ve();const w=de.channel("missions-changes").on("postgres_changes",{event:"*",schema:"public",table:"missions",filter:`source_user=eq.${a.user.id}`},()=>Ve()).on("postgres_changes",{event:"*",schema:"public",table:"missions",filter:`target_user=eq.${a.user.id}`},()=>{console.log(" Incoming mission detected via Realtime"),Ve()}).subscribe(M=>{M==="SUBSCRIBED"&&console.log(" Connected to Missions stream (Filtered)")}),E=de.channel("profile-changes").on("postgres_changes",{event:"UPDATE",schema:"public",table:"profiles",filter:`id=eq.${a.user.id}`},M=>{const B=M.new;B&&(console.log(" Profile update received via Realtime"),o(U=>({...U,missionLogs:B.mission_logs||U.missionLogs,nickname:B.nickname||U.nickname})))}).subscribe(M=>{M==="SUBSCRIBED"&&console.log(" Connected to Profile stream")});return()=>{de.removeChannel(w),de.removeChannel(E)}},[a]),te.useEffect(()=>{if(!d||!(a!=null&&a.user))return;let w=0;const E=async()=>{const B=Date.now(),U=[...H.current.activeMissions||[],...H.current.incomingMissions||[]];w++,w>=30&&(w=0,Ve());const le=B-60*1e3,oe=U.filter($=>$.status==="flying"&&$.arrivalTime<le),W=new Set;for(const $ of oe){console.warn(` AGGRESSIVE RESCUE: Force-completing stuck mission ${$.id}`),W.add($.id),we.current.add($.id),o(se=>({...se,activeMissions:se.activeMissions.filter(pe=>pe.id!==$.id),incomingMissions:se.incomingMissions.filter(pe=>pe.id!==$.id)}));const{error:P}=await de.from("missions").update({status:"completed",result:{id:B.toString(),timestamp:B,title:"Misja Anulowana (System)",message:"Misja utkna i zostaa automatycznie zakoczona przez system.",outcome:"neutral"}}).eq("id",$.id);if(P?console.error(" AGGRESSIVE RESCUE DB ERROR:",P):console.log(" AGGRESSIVE RESCUE: Success"),$.ownerId===a.user.id){const{data:se}=await de.from("profiles").select("ships").eq("id",a.user.id).single();if(se&&$.ships){const pe={...se.ships};Object.entries($.ships).forEach(([Ae,Ce])=>{pe[Ae]=(Number(pe[Ae])||0)+(Number(Ce)||0)}),await de.from("profiles").update({ships:pe}).eq("id",a.user.id)}}}const K=U.filter($=>!W.has($.id)&&$.status==="flying"&&B>=$.arrivalTime&&!$.eventProcessed&&($.ownerId===a.user.id||$.targetUserId===a.user.id&&B>$.arrivalTime+1e4));for(const $ of K)o(P=>({...P,activeMissions:P.activeMissions.map(se=>se.id===$.id?{...se,eventProcessed:!0}:se)})),await ye($);const ee=U.filter($=>$.status==="returning"&&B>=$.returnTime&&$.ownerId===a.user.id);for(const $ of ee)o(P=>({...P,activeMissions:P.activeMissions.filter(se=>se.id!==$.id)})),await N($);W.size>0&&Ve()};Ve();const M=setInterval(E,1e3);return()=>clearInterval(M)},[d,a]);const J=(w,E,M)=>{const B=w==="building"?ra[E]:kr[E],U=Math.pow(1.5,M);return{metal:Math.floor(B.baseCost.metal*U),crystal:Math.floor(B.baseCost.crystal*U),deuterium:Math.floor(B.baseCost.deuterium*U)}},ie=w=>{if(!w)return!0;for(const E of w)if(E.type==="building"){if(n.buildings[E.id]<E.level)return!1}else if(E.type==="research"&&n.research[E.id]<E.level)return!1;return!0},ge=w=>{let E=0;return Object.entries(w).forEach(([B,U])=>{const le=Ze[B];if(le){const oe=le.baseCost.metal+le.baseCost.crystal;E+=oe*U}}),E/1e3*tr*.1/3600},Te=w=>{const E=w.productionSettings,M=os=>(E[os]!==void 0?E[os]:100)/100,B=w.buildings[ce.METAL_MINE],U=M(ce.METAL_MINE),le=Math.floor(30*B*Math.pow(1.1,B))*tr*U,oe=Math.floor(20*B*Math.pow(1.1,B))*U,W=w.buildings[ce.CRYSTAL_MINE],K=M(ce.CRYSTAL_MINE),ee=Math.floor(20*W*Math.pow(1.1,W))*tr*K,$=Math.floor(20*W*Math.pow(1.1,W))*K,P=w.buildings[ce.DEUTERIUM_SYNTH],se=M(ce.DEUTERIUM_SYNTH),pe=Math.floor(10*P*Math.pow(1.1,P))*tr*se,Ae=Math.floor(40*P*Math.pow(1.1,P))*se,Ce=w.buildings[ce.SOLAR_PLANT],wt=M(ce.SOLAR_PLANT),it=w.buildings[ce.FUSION_REACTOR],rt=M(ce.FUSION_REACTOR),jt=w.research[xe.ENERGY_TECH]||0;let Jt=Math.floor(20*Ce*Math.pow(1.1,Ce))*wt;Jt+=Math.floor(30*it*Math.pow(1.05+.01*jt,it))*rt;const ls=Math.floor(10*it*Math.pow(1.1,it))*rt,Ne=oe+$+Ae,At=Jt-Ne,gt=At>=0?1:Math.max(0,Jt/(Ne||1)),Pt=w.buildings[ce.METAL_STORAGE],ve=w.buildings[ce.CRYSTAL_STORAGE],Be=w.buildings[ce.DEUTERIUM_TANK],st=1e4+5e3*Math.floor(Math.pow(2.5,Pt)),lt=1e4+5e3*Math.floor(Math.pow(2.5,ve)),Xe=1e4+5e3*Math.floor(Math.pow(2.5,Be)),Nt=ge(w.ships);return{metal:le*gt/3600,crystal:ee*gt/3600,deuterium:(pe-ls)*gt/3600-Nt,energy:At,maxEnergy:Jt,storage:{metal:st,crystal:lt,deuterium:Xe},upkeep:Nt}},k=(w,E)=>{const M=Math.floor(w/1e3)+1;return E!=null&&E.reachedLevel16?Math.max(16,M):M},X=async(w,E)=>{if(n.resources.darkMatter<w)return"no_funds";if(E.metal&&n.resources.metal+E.metal>n.resources.storage.metal||E.crystal&&n.resources.crystal+E.crystal>n.resources.storage.crystal||E.deuterium&&n.resources.deuterium+E.deuterium>n.resources.storage.deuterium)return"storage_full";const M={...n.resources,darkMatter:n.resources.darkMatter-w,metal:Math.min(n.resources.storage.metal,n.resources.metal+(E.metal||0)),crystal:Math.min(n.resources.storage.crystal,n.resources.crystal+(E.crystal||0)),deuterium:Math.min(n.resources.storage.deuterium,n.resources.deuterium+(E.deuterium||0))};o(U=>({...U,resources:M}));const{error:B}=await de.from("profiles").update({resources:M}).eq("id",a.user.id);return B?(console.error("buyPremium DB save failed:",B),o(U=>({...U,resources:n.resources})),"no_funds"):(fe.current={...fe.current,resources:M},fe.current={...fe.current,resources:M},"success")},me=async(w,E)=>{const B=Date.now(),U=crypto.randomUUID(),le={id:U,ownerId:a==null?void 0:a.user.id,type:Qe.EXPEDITION,ships:w,targetCoords:E,originCoords:n.galaxyCoords||{galaxy:1,system:1,position:1},startTime:B,arrivalTime:B+1e4/2,returnTime:B+1e4,eventProcessed:!1,status:"flying"};o(K=>{const ee={...K.ships};return Object.entries(w).forEach(([$,P])=>{ee[$]-=P}),{...K,ships:ee,activeMissions:[...K.activeMissions,le]}});const{error:oe}=await de.from("missions").insert({id:U,owner_id:a.user.id,mission_type:Qe.EXPEDITION,ships:w,target_coords:E,origin_coords:n.galaxyCoords||{galaxy:1,system:1,position:1},start_time:B,arrival_time:B+1e4/2,return_time:B+1e4,status:"flying"});if(oe){console.error("Failed to start expedition:",oe),alert("Bd wysyania ekspedycji. Sprbuj ponownie."),o(K=>{const ee={...K.ships};return Object.entries(w).forEach(([$,P])=>{ee[$]=(ee[$]||0)+P}),{...K,ships:ee,activeMissions:K.activeMissions.filter($=>$.id!==U)}});return}const W={...n.ships};Object.entries(w).forEach(([K,ee])=>{W[K]=(W[K]||0)-ee}),await de.from("profiles").update({ships:W,points:ea(n.resources,n.buildings,W,n.research,n.defenses)}).eq("id",a.user.id)},be=async(w,E)=>{const B=Date.now(),U=crypto.randomUUID(),le=await Ue(E);if(console.log(" ATTACK: Target at coords",E,"resolved to userId:",le),le){const{data:$,error:P}=await de.from("profiles").select("points").eq("id",le).single();if(!P&&$){const se=Math.floor(Math.pow($.points||0,.3333333333333333));if(se<7){alert(`Ten gracz znajduje si pod ochron pocztkujcych(Poziom ${se} < 7).Atak niemoliwy.`);return}}}const oe={...n.ships};Object.entries(w).forEach(([$,P])=>{oe[$]=(oe[$]||0)-P});const{error:W}=await de.from("profiles").update({ships:oe,points:ea(n.resources,n.buildings,oe,n.research,n.defenses)}).eq("id",a.user.id);if(W){console.error(" ATTACK PROFILE UPDATE ERROR:",W),alert("Bd odejmowania statkw.");return}const K={id:U,ownerId:a==null?void 0:a.user.id,type:Qe.ATTACK,ships:w,targetCoords:E,targetUserId:le,originCoords:n.galaxyCoords||{galaxy:1,system:1,position:1},startTime:B,arrivalTime:B+3e4,returnTime:B+3e4*2,eventProcessed:!1,status:"flying"};o($=>({...$,ships:oe,activeMissions:[...$.activeMissions,K]}));const{error:ee}=await de.from("missions").insert({id:U,owner_id:a.user.id,target_user_id:le,mission_type:Qe.ATTACK,ships:w,target_coords:E,origin_coords:n.galaxyCoords||{galaxy:1,system:1,position:1},start_time:B,arrival_time:B+3e4,return_time:B+3e4*2,status:"flying"});ee?console.error(" ATTACK INSERT ERROR:",ee):console.log(" ATTACK INSERTED")},_e=async(w,E)=>{if((n.ships[ue.ESPIONAGE_PROBE]||0)<w)return!1;const M=Date.now(),B=30*1e3,U=crypto.randomUUID(),le=await Ue(E),oe={...n.ships};oe[ue.ESPIONAGE_PROBE]=(oe[ue.ESPIONAGE_PROBE]||0)-w;const{error:W}=await de.from("profiles").update({ships:oe,points:ea(n.resources,n.buildings,oe,n.research,n.defenses)}).eq("id",a.user.id);if(W)return console.error(" SPY PROFILE UPDATE ERROR:",W),alert("Bd odejmowania sond."),!1;const K={id:U,ownerId:a==null?void 0:a.user.id,type:Qe.SPY,ships:{[ue.ESPIONAGE_PROBE]:w},targetCoords:E,targetUserId:le,originCoords:n.galaxyCoords||{galaxy:1,system:1,position:1},startTime:M,arrivalTime:M+B/2,returnTime:M+B,eventProcessed:!1,status:"flying"};o($=>({...$,ships:oe,activeMissions:[...$.activeMissions,K]}));const{error:ee}=await de.from("missions").insert({id:U,owner_id:a.user.id,target_user_id:le,mission_type:Qe.SPY,ships:{[ue.ESPIONAGE_PROBE]:w},target_coords:E,origin_coords:n.galaxyCoords||{galaxy:1,system:1,position:1},start_time:M,arrival_time:M+B/2,return_time:M+B,status:"flying"});return ee&&console.error("Failed to send spy probe:",ee),!0},Le=async(w,E,M)=>{const U=Date.now(),le=crypto.randomUUID(),oe=await Ue(M),W={...n.ships};Object.entries(w).forEach(([se,pe])=>{W[se]=(W[se]||0)-pe});const K={...n.resources,metal:n.resources.metal-(E.metal||0),crystal:n.resources.crystal-(E.crystal||0),deuterium:n.resources.deuterium-(E.deuterium||0)},{error:ee}=await de.from("profiles").update({ships:W,resources:K,points:ea(K,n.buildings,W,n.research,n.defenses)}).eq("id",a.user.id);if(ee){console.error("Error deducting resources:",ee),alert("Bd odejmowania surowcw.");return}const $={id:le,ownerId:a==null?void 0:a.user.id,type:Qe.TRANSPORT,ships:w,resources:E,targetCoords:M,targetUserId:oe,originCoords:n.galaxyCoords||{galaxy:1,system:1,position:1},startTime:U,arrivalTime:U+3e5/2,returnTime:U+3e5,eventProcessed:!1,status:"flying"};o(se=>({...se,ships:W,resources:K,activeMissions:[...se.activeMissions,$]}));const{error:P}=await de.from("missions").insert({id:le,owner_id:a.user.id,target_user_id:oe,mission_type:Qe.TRANSPORT,ships:w,resources:E,target_coords:M,origin_coords:n.galaxyCoords||{galaxy:1,system:1,position:1},start_time:U,arrival_time:U+3e5/2,return_time:U+3e5,status:"flying"});P&&console.error("Error creating mission:",P)},Je=async w=>{const E=n.activeMissions.find(oe=>oe.id===w);if(!E||E.status!=="flying")return;const M=Date.now(),B=M-E.startTime,U=M+B;o(oe=>({...oe,activeMissions:oe.activeMissions.map(W=>W.id===w?{...W,status:"returning",returnTime:U,arrivalTime:M}:W)}));const{error:le}=await de.from("missions").update({status:"returning",return_time:U,arrival_time:M}).eq("id",w);if(E.type==="attack"&&E.targetUserId){const{data:oe}=await de.from("profiles").select("mission_logs").eq("id",E.targetUserId).single();if(oe){const K=[{id:Date.now().toString(),timestamp:Date.now(),title:"Atak Anulowany",message:`Gracz ${H.current.nickname||"Nieznany"} [${E.originCoords.galaxy}: ${E.originCoords.system}: ${E.originCoords.position}] zawrci flot tu przed atakiem.
Skad floty: ${Object.entries(E.ships).map(([ee,$])=>{var P;return`${((P=Ze[ee])==null?void 0:P.name)||ee}: ${$}`}).join(", ")}.`,outcome:"info"},...oe.mission_logs||[]].slice(0,50);await de.from("profiles").update({mission_logs:K}).eq("id",E.targetUserId)}}le&&(console.error("Failed to cancel mission:",le),alert("Bd anulowania misji."),o(oe=>({...oe,activeMissions:oe.activeMissions.map(W=>W.id===w?{...W,status:"flying",returnTime:E.returnTime,arrivalTime:E.arrivalTime}:W)})))},Rt=async w=>{const E=n.buildings[w],M=J("building",w,E);if(n.resources.metal<M.metal||n.resources.crystal<M.crystal||n.resources.deuterium<M.deuterium){console.log("Not enough resources");return}const B=n.constructionQueue.filter(Ae=>Ae.type==="building");if(B.length>=5){console.log("Queue full");return}const U=M.metal+M.crystal;let le=U/2500*3600*1e3;le=le/(n.buildings[ce.ROBOT_FACTORY]+1),le=le/tr;const oe=Math.max(1e3,le),W=B.sort((Ae,Ce)=>Ce.endTime-Ae.endTime)[0],K=W?W.endTime:Date.now(),ee=K+oe,$={id:Date.now().toString(),type:"building",itemId:w,targetLevel:E+1,startTime:K,endTime:ee},P={...n.resources,metal:n.resources.metal-M.metal,crystal:n.resources.crystal-M.crystal,deuterium:n.resources.deuterium-M.deuterium},se=[...n.constructionQueue,$];o(Ae=>({...Ae,resources:{...Ae.resources,...P},constructionQueue:[...Ae.constructionQueue,$]})),Js(Math.floor(U/100),"Building Construction");const{error:pe}=await de.from("profiles").update({resources:P,construction_queue:se}).eq("id",a.user.id);pe&&(console.error("Building upgrade failed:",pe),o(Ae=>{const Ce=Ae.constructionQueue.filter(wt=>wt.id!==$.id);return{...Ae,resources:{...Ae.resources,metal:Ae.resources.metal+M.metal,crystal:Ae.resources.crystal+M.crystal,deuterium:Ae.resources.deuterium+M.deuterium},constructionQueue:Ce}}),alert("Bd budowy."))},ft=async(w,E)=>{const M=n.ships[w]||0;if(E<=0||E>M)return;const B=Ze[w];if(!B)return;const U=Math.floor(B.baseCost.metal*E*.5),le=Math.floor(B.baseCost.crystal*E*.5),oe=Math.floor(B.baseCost.deuterium*E*.5),W={...n.ships,[w]:M-E},K={...n.resources,metal:n.resources.metal+U,crystal:n.resources.crystal+le,deuterium:n.resources.deuterium+oe};o($=>({...$,ships:W,resources:K}));const{error:ee}=await de.from("profiles").update({ships:W,resources:K,points:ea(K,n.buildings,W,n.research,n.defenses)}).eq("id",a.user.id);ee&&(console.error("Scrap failed:",ee),alert("Bd zomowania."),o($=>({...$,ships:{...$.ships,[w]:M},resources:n.resources})))},$e=async w=>{const E=n.constructionQueue.findIndex($=>$.id===w);if(E===-1)return;const M=n.constructionQueue[E];if(M.type!=="building"&&M.type!=="research"){console.error("Cannot cancel item of type:",M.type);return}const B=(M.targetLevel||1)-1,U=J(M.type,M.itemId,B),le=Math.floor(U.metal||0),oe=Math.floor(U.crystal||0),W=Math.floor(U.deuterium||0),K={...n.resources,metal:(n.resources.metal||0)+le,crystal:(n.resources.crystal||0)+oe,deuterium:(n.resources.deuterium||0)+W},ee=[...n.constructionQueue];ee.splice(E,1);for(let $=E;$<ee.length;$++){const P=$>0?ee[$-1]:null,se=P?P.endTime:Date.now(),pe=ee[$].endTime-ee[$].startTime;ee[$]={...ee[$],startTime:se,endTime:se+pe}}if(o($=>({...$,resources:K,constructionQueue:ee})),M.type==="building"){const $=le+oe;Js(-Math.floor($/100),"Construction Cancelled")}try{const{error:$}=await de.from("profiles").update({resources:K,construction_queue:ee}).eq("id",a.user.id);if($)throw $}catch($){console.error("Cancel constr sync failed:",$),o(P=>({...P,resources:n.resources,constructionQueue:n.constructionQueue}))}},zt=async w=>{const E=n.research[w],M=J("research",w,E);if(n.resources.metal<M.metal||n.resources.crystal<M.crystal||n.resources.deuterium<M.deuterium||n.constructionQueue.some(P=>P.type==="research"))return;const B=kr[w];if(B.maxLevel&&E>=B.maxLevel)return;const U=n.buildings[ce.RESEARCH_LAB];if(U===0)return;let oe=(M.metal+M.crystal)/1e3*3600*1e3;oe=oe/(U+1),oe=oe/tr;const W=Math.max(1e3,oe),K=Date.now(),ee={id:K.toString(),type:"research",itemId:w,targetLevel:E+1,startTime:K,endTime:K+W};o(P=>({...P,resources:{...P.resources,metal:P.resources.metal-M.metal,crystal:P.resources.crystal-M.crystal,deuterium:P.resources.deuterium-M.deuterium},constructionQueue:[...P.constructionQueue,ee]}));const{error:$}=await de.from("profiles").update({resources:{...n.resources,metal:n.resources.metal-M.metal,crystal:n.resources.crystal-M.crystal,deuterium:n.resources.deuterium-M.deuterium},construction_queue:[...n.constructionQueue,ee]}).eq("id",a.user.id);$&&(console.error("upgradeResearch DB save failed:",$),o(P=>({...P,resources:{...P.resources,metal:P.resources.metal+M.metal,crystal:P.resources.crystal+M.crystal,deuterium:P.resources.deuterium+M.deuterium},constructionQueue:P.constructionQueue.filter(se=>se.id!==ee.id)})))},ot=async(w,E)=>{const M=Math.max(1,Math.floor(E)),B=Ze[w],U={metal:B.baseCost.metal*M,crystal:B.baseCost.crystal*M,deuterium:B.baseCost.deuterium*M};if(n.resources.metal<U.metal||n.resources.crystal<U.crystal||n.resources.deuterium<U.deuterium)return;const le=n.buildings[ce.SHIPYARD];if(le===0)return;const oe=B.buildTime*1e3/(le+1),W=Date.now();let K=W;n.shipyardQueue.length>0&&(K=n.shipyardQueue[n.shipyardQueue.length-1].endTime);const ee={id:W.toString()+Math.random(),type:"ship",itemId:w,quantity:M,startTime:K,endTime:K+oe*M},$=[...n.shipyardQueue,ee];o(se=>({...se,resources:{...se.resources,metal:se.resources.metal-U.metal,crystal:se.resources.crystal-U.crystal,deuterium:se.resources.deuterium-U.deuterium},shipyardQueue:$})),Js(Math.floor((U.metal+U.crystal)/200),"Fleet Production");const{error:P}=await de.from("profiles").update({resources:{...n.resources,metal:n.resources.metal-U.metal,crystal:n.resources.crystal-U.crystal,deuterium:n.resources.deuterium-U.deuterium},shipyard_queue:$}).eq("id",a.user.id);P&&(console.error("buildShip DB save failed:",P),o(se=>({...se,resources:{...se.resources,metal:se.resources.metal+U.metal,crystal:se.resources.crystal+U.crystal,deuterium:se.resources.deuterium+U.deuterium},shipyardQueue:se.shipyardQueue.filter(pe=>pe.id!==ee.id)})))},he=async(w,E)=>{const M=Math.max(1,Math.floor(E)),B=Zs[w];if(!B)return;const U={metal:B.cost.metal*M,crystal:B.cost.crystal*M,deuterium:B.cost.deuterium*M};if(n.resources.metal<U.metal||n.resources.crystal<U.crystal||n.resources.deuterium<U.deuterium)return;const le=n.buildings[ce.SHIPYARD];if(le===0)return;const oe=B.buildTime*1e3/(le+1),W=Date.now();let K=W;n.shipyardQueue.length>0&&(K=n.shipyardQueue[n.shipyardQueue.length-1].endTime);const ee={id:`def - ${W} -${Math.random()} `,type:"defense",itemId:w,quantity:M,startTime:K,endTime:K+oe*M},$=[...n.shipyardQueue,ee];o(se=>({...se,resources:{...se.resources,metal:se.resources.metal-U.metal,crystal:se.resources.crystal-U.crystal,deuterium:se.resources.deuterium-U.deuterium},shipyardQueue:$})),Js(Math.floor((U.metal+U.crystal)/200),"Defense Production");const{error:P}=await de.from("profiles").update({resources:{...n.resources,metal:n.resources.metal-U.metal,crystal:n.resources.crystal-U.crystal,deuterium:n.resources.deuterium-U.deuterium},shipyard_queue:$}).eq("id",a.user.id);P&&(console.error("buildDefense DB save failed:",P),o(se=>({...se,resources:{...se.resources,metal:se.resources.metal+U.metal,crystal:se.resources.crystal+U.crystal,deuterium:se.resources.deuterium+U.deuterium},shipyardQueue:se.shipyardQueue.filter(pe=>pe.id!==ee.id)})))},ae=async()=>{var M;if(!((M=a==null?void 0:a.user)!=null&&M.id))return;const{data:w,error:E}=await de.from("planets").select("*").eq("owner_id",a.user.id);w&&!E&&_(w)},Pe=async(w,E)=>{if((n.ships[ue.COLONY_SHIP]||0)<1)return alert("Potrzebujesz Statku Kolonizacyjnego!"),!1;if(x.length>=8)return alert("Osigne limit 8 planet!"),!1;const{data:M}=await de.from("planets").select("id").contains("galaxy_coords",w),{data:B}=await de.from("profiles").select("id").contains("galaxy_coords",w);if(M&&M.length>0||B&&B.length>0)return alert("Ta pozycja jest ju zajta!"),!1;const U={metal:Math.min(E.metal,15e3),crystal:Math.min(E.crystal,15e3),deuterium:Math.min(E.deuterium,15e3)};if(n.resources.metal<U.metal||n.resources.crystal<U.crystal||n.resources.deuterium<U.deuterium)return alert("Brak wystarczajcych zasobw!"),!1;const le={...n.ships,[ue.COLONY_SHIP]:(n.ships[ue.COLONY_SHIP]||0)-1},oe={...n.resources,metal:n.resources.metal-U.metal,crystal:n.resources.crystal-U.crystal,deuterium:n.resources.deuterium-U.deuterium},W=Date.now(),K=60*1e3,ee=n.galaxyCoords||{galaxy:1,system:1,position:1};let $=K;if(ee.galaxy!==w.galaxy)$=3600*1e3;else if(ee.system!==w.system){const Ce=Math.abs(ee.system-w.system);$=K+Ce*30*1e3}else{const Ce=Math.abs(ee.position-w.position);$=K+Ce*10*1e3}const P=crypto.randomUUID(),se={id:P,ownerId:a==null?void 0:a.user.id,type:Qe.COLONIZE,ships:{[ue.COLONY_SHIP]:1},targetCoords:w,targetUserId:a.user.id,originCoords:ee,startTime:W,arrivalTime:W+$,eventProcessed:!1,status:"flying",resources:U},{error:pe}=await de.from("profiles").update({ships:le,resources:oe}).eq("id",a.user.id);if(pe)return console.error(" COLONIZE PROFILE UPDATE ERROR:",pe),alert("Bd odejmowania surowcw."),!1;o(Ce=>({...Ce,ships:le,resources:oe,activeMissions:[...Ce.activeMissions,se]}));const{error:Ae}=await de.from("missions").insert({id:P,owner_id:a.user.id,target_user_id:a.user.id,mission_type:Qe.COLONIZE,ships:{[ue.COLONY_SHIP]:1},target_coords:w,origin_coords:ee,start_time:W,arrival_time:W+$,status:"flying",resources:U});return Ae?(console.error(" COLONIZE MISSION ERROR:",Ae),alert("Bd tworzenia misji. Surowce zostay odjte."),!1):(Js(500,"New Colony"),fe.current={...fe.current,ships:le,resources:oe},console.log(" Colonization mission sent!",se),alert(`Misja kolonizacyjna rozpoczta! Czas lotu: ${($/1e3).toFixed(0)}s`),!0)},Ge=async(w,E,M,B,U,le,oe)=>{const W={buildings:E,ships:M,defenses:B,resources:U,construction_queue:le,shipyard_queue:oe};console.log(""),console.log(` [COLONY SAVE] Planet: ${w}`),console.log(" [COLONY SAVE] Payload:"),console.log("   Buildings:",JSON.stringify(E)),console.log("   Ships:",JSON.stringify(M)),console.log("   Defenses:",JSON.stringify(B)),console.log("   Resources:",JSON.stringify(U)),console.log("   Queue:",(le==null?void 0:le.length)||0,"items"),console.log("   Shipyard:",(oe==null?void 0:oe.length)||0,"items");const{error:K,data:ee}=await de.from("planets").update(W).eq("id",w).select();return K?(console.error(" [COLONY SAVE ERROR]:",K.message),console.warn(""),!1):(console.log(" [COLONY SAVE SUCCESS] Rows affected:",(ee==null?void 0:ee.length)||0),ee&&ee[0]&&console.log("   DB Response Buildings:",JSON.stringify(ee[0].buildings)),console.log(""),!0)},dt=async w=>{var M,B,U,le,oe;console.log(" Switching to planet:",w);const E=H.current;if(j&&j!=="main"){if(console.log(" Saving current colony before switch:",j),!await Ge(j,E.buildings,E.ships,E.defenses,E.resources,E.constructionQueue,E.shipyardQueue)){alert("Bd zapisu stanu kolonii! Przeczanie przerwane, aby zapobiec utracie danych.");return}}else(!j||j==="main")&&(console.log(" Saving main planet before switch"),await de.from("profiles").update({buildings:E.buildings,resources:E.resources,ships:E.ships,defenses:E.defenses,construction_queue:E.constructionQueue,shipyard_queue:E.shipyardQueue}).eq("id",a.user.id));if(w==="main")A("main"),S?(o(S),fe.current=JSON.parse(JSON.stringify(S)),Q(null),console.log(" Restored main planet from cache (ref updated)")):(await Se(),console.log(" Reloaded main planet from DB (no cache)"));else{console.log(" Fetching colony data from DB:",w);const{data:W,error:K}=await de.from("planets").select("*").eq("id",w).single();if(W&&!K){(!j||j==="main")&&(Q(E),console.log(" Cached main planet data")),A(w);const ee=W.resources||{},$={metal:ee.metal??500,crystal:ee.crystal??300,deuterium:ee.deuterium??100,darkMatter:ee.darkMatter??0,energy:0,maxEnergy:0,storage:{metal:((M=ee.storage)==null?void 0:M.metal)??1e4,crystal:((B=ee.storage)==null?void 0:B.crystal)??1e4,deuterium:((U=ee.storage)==null?void 0:U.deuterium)??1e4}},P=W.buildings||{},se={};Object.keys(js.buildings).forEach(pe=>{se[pe]=P[pe]??0}),console.log(""),console.log(" [LOAD] Colony loaded from Supabase:",w),console.log("   Resources:",JSON.stringify($)),console.log("   Buildings:",JSON.stringify(se)),console.log("   Ships:",JSON.stringify(W.ships)),console.log("   Defenses:",JSON.stringify(W.defenses)),console.log("   ConstructionQueue:",((le=W.construction_queue)==null?void 0:le.length)||0,"items"),console.log("   ShipyardQueue:",((oe=W.shipyard_queue)==null?void 0:oe.length)||0,"items"),console.log(""),fe.current={...n,resources:$,buildings:se,ships:W.ships||{},defenses:W.defenses||{},constructionQueue:W.construction_queue||[],shipyardQueue:W.shipyard_queue||[]},o(pe=>({...pe,planetName:W.planet_name||`Kolonia ${x.indexOf(W)+1}`,planetType:W.planet_type||"terran",resources:$,buildings:se,ships:W.ships||{},defenses:W.defenses||{},constructionQueue:W.construction_queue||[],shipyardQueue:W.shipyard_queue||[],galaxyCoords:W.galaxy_coords,debris:W.debris||{metal:0,crystal:0}})),console.log(" Switched to colony (Fresh DB Load):",W.planet_name)}else console.error("Failed to load colony:",K),alert("Bd wczytywania kolonii.")}},Bt=(w,E)=>{o(M=>({...M,productionSettings:{...M.productionSettings,[w]:E}}))},nt=async(w,E)=>{if(!w.trim())return;const M=w.trim(),B=E||G.current,U=B==="main";if(console.log(` Renaming ${B} to ${M}`),B===G.current&&o(le=>({...le,planetName:M})),U&&z(M),U){const{error:le}=await de.from("profiles").update({planet_name:M}).eq("id",a.user.id);le?console.error(" Main rename error:",le):(console.log(" Main renamed"),await ae())}else{const{error:le}=await de.from("planets").update({planet_name:M}).eq("id",B);le?console.error(" Colony rename error:",le):(console.log(" Colony renamed"),await ae())}},fs=async w=>{w.trim()&&(o(E=>({...E,nickname:w.trim(),productionSettings:{...E.productionSettings,nickname:w.trim()}})),await de.from("profiles").update({nickname:w.trim(),production_settings:{...n.productionSettings,nickname:w.trim()}}).eq("id",a.user.id),console.log(" User renamed to:",w))},ms=()=>{localStorage.removeItem(ka),window.location.reload()},Ht=async()=>{o(w=>({...w,missionLogs:[]})),await de.from("profiles").update({mission_logs:[]}).eq("id",a.user.id)},ds=async()=>{try{await ze("Logout")}catch(w){console.error("Logout save failed:",w)}localStorage.removeItem(ka),localStorage.removeItem(ka+"_backup"),await de.auth.signOut(),window.location.reload()},Zt=async(w,E)=>{if(!w||w==="main")return alert("Nie moesz porzuci Gwnej Planety!"),!1;if(E!=="DELETE")return!1;console.log(" Abandoning colony:",w);const{error:M}=await de.from("planets").delete().eq("id",w);return M?(console.error("Failed to abandon colony:",M),alert(`Bd: ${M.message}`),!1):(j===w&&(A("main"),S&&(o(S),Q(null))),ae(),alert("Kolonia zostaa porzucona."),!0)},Ar=async()=>{if(a!=null&&a.user&&confirm("Czy na pewno chcesz usun konto? Tej operacji nie mona cofn. Twoje imperium zostanie zniszczone."))try{await de.from("missions").delete().eq("owner_id",a.user.id),await de.from("profiles").delete().eq("id",a.user.id),await ds()}catch(w){console.error("Error deleting account:",w),alert("Bd podczas usuwania konta. Sprbuj ponownie.")}},Si=async w=>{o(M=>({...M,avatarUrl:w}));const E=n.productionSettings||{};await de.from("profiles").update({production_settings:{...E,avatarUrl:w}}).eq("id",a.user.id)},Ei=async w=>{o(M=>({...M,planetType:w}));const E=n.productionSettings||{};await de.from("profiles").update({production_settings:{...E,planetType:w}}).eq("id",a.user.id)},Or=async(w,E)=>{try{const{data:M,error:B}=await de.from("profiles").select("id, planet_name, galaxy_coords, points, production_settings, buildings, nickname, level, debris").contains("galaxy_coords",{galaxy:w,system:E});if(B)throw B;const{data:U,error:le}=await de.from("planets").select("id, owner_id, planet_name, planet_type, galaxy_coords, buildings, ships, defenses, debris").contains("galaxy_coords",{galaxy:w,system:E});if(le)throw le;let oe=M||[];if(U&&U.length>0){const W=[...new Set(U.map(se=>se.owner_id))],{data:K,error:ee}=await de.from("profiles").select("id, nickname, points, production_settings, level").in("id",W);ee&&console.error("Error fetching colony owners:",ee);const $=new Map((K==null?void 0:K.map(se=>[se.id,se]))||[]),P=U.map(se=>{const pe=$.get(se.owner_id);return{id:se.owner_id,colony_id:se.id,planet_name:se.planet_name,galaxy_coords:se.galaxy_coords,points:(pe==null?void 0:pe.points)||0,level:(pe==null?void 0:pe.level)||1,production_settings:{...(pe==null?void 0:pe.production_settings)||{},planetType:se.planet_type},buildings:se.buildings,nickname:((pe==null?void 0:pe.nickname)||"Unknown")+" (Kolonia)",isColony:!0,debris:se.debris}});oe=[...oe,...P]}return oe}catch(M){return console.error("Error fetching system users:",M),[]}};te.useEffect(()=>{if(!d)return;const E=setInterval(()=>{const M=Date.now(),B=H.current,U=Te(B),le=(M-B.lastTick)/1e3;if(le<=0)return;const oe=U.metal*le,W=U.crystal*le,K=U.deuterium*le;let ee={...B.buildings},$={...B.research},P=[...B.constructionQueue],se=0;const pe=P.filter(ve=>M>=ve.endTime),Ae=P.filter(ve=>M<ve.endTime);pe.length>0&&(pe.forEach(ve=>{if(ve.type==="building")ee[ve.itemId]=ve.targetLevel||1;else if(ve.type==="research"){const Be=ve.targetLevel||1;$[ve.itemId]=Be,se+=Math.pow(Be,2)*10}}),P=Ae);let Ce={...B.ships},wt={...B.defenses},it=[...B.shipyardQueue];for(;it.length>0&&M>=it[0].endTime;){const ve=it.shift();ve&&(ve.type==="defense"?wt[ve.itemId]=(wt[ve.itemId]||0)+(ve.quantity||0):Ce[ve.itemId]=(Ce[ve.itemId]||0)+(ve.quantity||0))}const rt=(B.xp||0)+se,jt=Math.floor(Math.sqrt(rt/500))+1,Jt=B.level||1;let ls=0;if(jt>Jt)for(let ve=Jt+1;ve<=jt;ve++)ls+=10+ve*2;const Ne=ea(B.resources,ee,Ce,$,wt),At=Math.floor(Ne/1e3)+1;let gt={...B.productionSettings},Pt=!1;if(At>=16&&!gt.reachedLevel16&&(gt.reachedLevel16=!0,Pt=!0),pe.length>0||B.shipyardQueue.length!==it.length||Pt||M-B.lastTick>3e4){const ve=G.current,Be=pe.length>0?"Queue Completed":M-B.lastTick>3e4?"Tick 30s":"Settings Changed";if(console.log(` [TICK SAVE] Reason: ${Be}, Target: ${ve||"main"}`),!ve||ve==="main"){const st={buildings:ee,research:$,ships:Ce,defenses:wt,resources:{...B.resources,metal:Math.min(U.storage.metal,(B.resources.metal||0)+oe),crystal:Math.min(U.storage.crystal,(B.resources.crystal||0)+W),deuterium:Math.min(U.storage.deuterium,(B.resources.deuterium||0)+K),darkMatter:(B.resources.darkMatter||0)+ls},xp:rt,level:jt,shipyard_queue:it,construction_queue:P,production_settings:gt,last_updated:Date.now()};console.log(" [TICK SAVE] Payload:",JSON.stringify(st).substring(0,200)+"..."),de.from("profiles").update(st).eq("id",a.user.id).then(({error:lt})=>{lt?console.error(" [TICK SAVE ERROR] Main:",lt):console.log(" [TICK SAVE] Main Success")})}else{console.log(` [TICK SAVE] Colony ${ve} - Buildings:`,JSON.stringify(ee));const st={...B.resources,metal:Math.min(U.storage.metal,(B.resources.metal||0)+oe),crystal:Math.min(U.storage.crystal,(B.resources.crystal||0)+W),deuterium:Math.min(U.storage.deuterium,(B.resources.deuterium||0)+K)};Ge(ve,ee,Ce,wt,st,P,it),de.from("profiles").update({production_settings:gt,research:$,points:ea(st,ee,Ce,$,wt),xp:rt,level:jt,last_updated:Date.now()}).eq("id",a.user.id).then(lt=>{lt.error&&console.error("Colony profile sync error:",lt.error)})}fe.current={...B,buildings:ee,research:$,ships:Ce,defenses:wt,resources:{...B.resources,metal:Math.max(0,Math.min(U.storage.metal,(B.resources.metal||0)+oe)),crystal:Math.max(0,Math.min(U.storage.crystal,(B.resources.crystal||0)+W)),deuterium:Math.max(0,Math.min(U.storage.deuterium,(B.resources.deuterium||0)+K)),darkMatter:(B.resources.darkMatter||0)+ls},constructionQueue:P,shipyardQueue:it}}o(ve=>{const Be=(ve.xp||0)+se,st=Math.floor(Math.sqrt(Be/500))+1,lt=ve.level||1;let Xe=0;if(st>lt){for(let Nt=lt+1;Nt<=st;Nt++)Xe+=10+Nt*2;Xe>0&&console.log(` Level Up! ${lt} -> ${st}. Reward: ${Xe} DM`)}return{...ve,productionSettings:Pt?gt:ve.productionSettings,resources:{...ve.resources,metal:Math.max(0,Math.min(U.storage.metal,(ve.resources.metal||0)+oe)),crystal:Math.max(0,Math.min(U.storage.crystal,(ve.resources.crystal||0)+W)),deuterium:Math.max(0,Math.min(U.storage.deuterium,(ve.resources.deuterium||0)+K)),energy:U.energy,maxEnergy:U.maxEnergy,storage:U.storage,darkMatter:(ve.resources.darkMatter||0)+Xe},buildings:ee,research:$,ships:Ce,defenses:wt,constructionQueue:P,shipyardQueue:it,productionRates:{metal:U.metal,crystal:U.crystal,deuterium:U.deuterium},xp:Be,level:st,lastTick:M}})},By);return()=>clearInterval(E)},[d]);const Js=(w,E)=>{w<=0||(o(M=>{const B=M.xp||0,U=M.level||1,le=B+w,oe=Math.floor(Math.sqrt(le/500))+1;if(oe>U){const W=10+oe*2;return{...M,xp:le,level:oe,resources:{...M.resources,darkMatter:(M.resources.darkMatter||0)+W}}}return{...M,xp:le,level:oe}}),E&&console.log(` [XP] +${w} (${E})`))},Cr=te.useRef(!1);te.useEffect(()=>{if(!d||Cr.current)return;let w=0;const E=U=>{let le=0;return Object.entries(U).forEach(([oe,W])=>{const K=ra[oe];if(!K)return;let ee=0;for(let $=1;$<=W;$++){const P=Math.pow(1.5,$-1);ee+=Math.floor(K.baseCost.metal*P)+Math.floor(K.baseCost.crystal*P)}le+=Math.floor(ee/100)}),le},M=U=>{let le=0;return Object.entries(U).forEach(([oe,W])=>{const K=Ze[oe];if(!K)return;const ee=K.baseCost.metal+K.baseCost.crystal;le+=Math.floor(ee*W/200)}),le};w+=E(n.buildings),w+=M(n.ships),x.forEach(U=>{U.buildings&&(w+=E(U.buildings)),U.ships&&(w+=M(U.ships))}),Object.entries(n.research).forEach(([U,le])=>{let oe=0;for(let W=1;W<=le;W++)oe+=Math.pow(W,2)*10;w+=oe});const B=n.xp||0;if(w>B+10){const U=w-B;console.log(` Retroactive XP Fix: Player has ${B}, Assets worth ${w}. Adding ${U}.`),Cr.current=!0,Js(U,"Retroactive Catch-Up")}else Cr.current=!0},[d,x.length]);const Xl={...n,addXP:Js,upgradeBuilding:Rt,upgradeResearch:zt,buildShip:ot,buildDefense:he,scrapShip:ft,sendExpedition:me,sendAttack:be,sendSpyProbe:_e,sendTransport:Le,cancelMission:Je,cancelConstruction:$e,buyPremium:X,getCost:J,checkRequirements:ie,renamePlanet:nt,updateProductionSetting:Bt,resetGame:ms,isOnline:b,clearLogs:Ht,logout:ds,deleteAccount:Ar,abandonColony:Zt,updateAvatar:Si,updatePlanetType:Ei,getPlayersInSystem:Or,renameUser:fs,getLevel:k,session:a,planets:x,currentPlanetId:j,mainPlanetName:C,mainPlanetCoords:D,sendColonize:Pe,switchPlanet:dt,fetchPlanets:ae};return r.jsx(Op.Provider,{value:Xl,children:l})},us=()=>{const l=te.useContext(Op);if(l===void 0)throw new Error("useGame must be used within a GameProvider");return l},$y=({activeView:l,onNavigate:a})=>{var b,p,v;const n=us();n!=null&&n.resetGame;const o=(n==null?void 0:n.avatarUrl)||"/kosmo/avatars/avatar_default.png",d=(n==null?void 0:n.nickname)||(n!=null&&n.userId?`Kmdr. ${n.userId.split("-")[0]}`:"Kmdr. DareG"),h=[{id:"overview",label:"Podgld",icon:"dashboard"},{id:"buildings",label:"Budynki",icon:"domain"},{id:"shipyard",label:"Stocznia",icon:"rocket_launch"},{id:"research",label:"Badania",icon:"science"},{id:"galaxy",label:"Galaktyka",icon:"public"},{id:"fleet",label:"Flota",icon:"flight_takeoff"},{id:"shop",label:"Sklep",icon:"shopping_cart"},{id:"defense",label:"Obrona",icon:"shield"},{id:"clans",label:"Klany",icon:"groups"},{id:"ranking",label:"Ranking",icon:"leaderboard"},{id:"settings",label:"Opcje",icon:"settings"}],f=["admin@kosmo.pl","dareg@kosmo.pl","admin@kosmo.com"],g=(v=(p=(b=n.session)==null?void 0:b.user)==null?void 0:p.email)==null?void 0:v.toLowerCase();return g&&f.includes(g)&&h.push({id:"admin",label:"ADMIN",icon:"shield_person"}),r.jsxs("aside",{className:"w-64 flex-shrink-0 flex flex-col bg-[#111422] border-r border-white/5 z-20 hidden lg:flex h-full",children:[r.jsx("div",{className:"p-6 border-b border-white/5",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 flex-shrink-0 aspect-square bg-center bg-no-repeat bg-cover rounded-full border-2 border-primary",style:{backgroundImage:`url("${o}")`}}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("h1",{className:"text-white text-base font-bold tracking-tight uppercase",children:"Centrum Dowodzenia"}),r.jsx("p",{className:"text-[#929bc9] text-xs font-normal",children:d})]})]})}),n.planets&&n.planets.length>0&&r.jsxs("div",{className:"mx-4 mt-4 p-3 bg-[#1a1f35] border border-white/10 rounded-lg",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-xs text-[#929bc9] uppercase font-bold",children:"Twoje Planety"}),r.jsxs("span",{className:"text-xs text-primary",children:[n.planets.length+1,"/9"]})]}),r.jsx("button",{onClick:()=>n.switchPlanet("main"),className:`w-full text-left px-3 py-2 rounded mb-1 text-sm transition-colors ${!n.currentPlanetId||n.currentPlanetId==="main"?"bg-primary/20 text-white border border-primary/50":"bg-white/5 text-[#929bc9] hover:bg-white/10 border border-transparent"}`,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"material-symbols-outlined text-sm",children:"home"}),r.jsx("span",{className:"truncate",children:n.mainPlanetName||n.planetName}),n.galaxyCoords&&r.jsxs("span",{className:"text-xs text-gray-500 ml-auto",children:["[",n.galaxyCoords.galaxy,":",n.galaxyCoords.system,":",n.galaxyCoords.position,"]"]})]})}),n.planets.map(x=>{var _,j,A;return r.jsx("button",{onClick:()=>n.switchPlanet(x.id),className:`w-full text-left px-3 py-2 rounded mb-1 text-sm transition-colors ${n.currentPlanetId===x.id?"bg-primary/20 text-white border border-primary/50":"bg-white/5 text-[#929bc9] hover:bg-white/10 border border-transparent"}`,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"material-symbols-outlined text-sm",children:"public"}),r.jsx("span",{className:"truncate",children:x.planet_name}),r.jsxs("span",{className:"text-xs text-gray-500 ml-auto",children:["[",(_=x.galaxy_coords)==null?void 0:_.galaxy,":",(j=x.galaxy_coords)==null?void 0:j.system,":",(A=x.galaxy_coords)==null?void 0:A.position,"]"]})]})},x.id)})]}),n.incomingMissions&&n.incomingMissions.length>0&&r.jsxs("div",{className:"mx-4 mt-4 p-3 bg-red-900/50 border border-red-500 rounded-lg animate-pulse flex items-center gap-3 shadow-[0_0_15px_rgba(239,68,68,0.5)]",children:[r.jsx("span",{className:"material-symbols-outlined text-red-500 animate-bounce",children:"warning"}),r.jsxs("div",{children:[r.jsx("div",{className:"text-red-400 text-xs font-bold uppercase tracking-wider",children:"Uwaga!"}),r.jsx("div",{className:"text-white text-xs font-medium",children:"Nadciga Wrg!"})]})]}),r.jsx("nav",{className:"flex-1 overflow-y-auto px-4 py-4 space-y-2",children:h.map(x=>{const _=l===x.id,j=x.id==="shop";return r.jsxs("button",{onClick:()=>a(x.id),className:`w-full flex items-center gap-3 px-3 py-3 rounded-lg transition-all group ${_?"bg-primary/20 text-white border border-primary/50 shadow-[0_0_15px_rgba(19,55,236,0.3)]":"text-[#929bc9] hover:bg-white/5 hover:text-white"} ${j?"text-yellow-400 hover:text-yellow-300":""}`,children:[r.jsx("span",{className:`material-symbols-outlined ${_?"text-primary":j?"text-yellow-500":"group-hover:text-primary transition-colors"}`,children:x.icon}),r.jsx("span",{className:"text-sm font-medium",children:x.label})]},x.id)})}),r.jsxs("div",{className:"p-4 border-t border-white/10",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("div",{className:`w-2 h-2 rounded-full ${n.isOnline?"bg-green-500 animate-pulse":"bg-red-500"} `}),r.jsx("span",{className:`text-xs font-bold uppercase tracking-wider ${n.isOnline?"text-[#929bc9]":"text-red-500"}`,children:n.isOnline?"Status: Online":"Status: Offline"})]}),r.jsx("div",{className:"text-white text-sm font-medium mb-1",children:d}),r.jsx("div",{className:"text-[#555a7a] text-xs font-mono",children:"v1.2.8"})]})]})},fi=({name:l,value:a,icon:n,production:o,subValue:d,colorClass:h,bgClass:f})=>r.jsxs("div",{className:`flex items-center gap-2 md:gap-3 min-w-[90px] md:min-w-[150px] px-2 py-1 md:px-3 md:py-2 rounded-xl border border-white/5 ${f} backdrop-blur-md flex-shrink-0 shadow-sm transition-colors`,children:[r.jsx("div",{className:`size-6 md:size-10 rounded-full flex items-center justify-center shadow-lg ${h}`,children:r.jsx("span",{className:"material-symbols-outlined text-white text-xs md:text-lg",children:n})}),r.jsxs("div",{className:"flex flex-col justify-center",children:[r.jsx("span",{className:"text-[9px] md:text-[10px] text-[#929bc9] font-bold uppercase tracking-wider mb-0.5",children:l}),r.jsxs("div",{className:"flex flex-col md:flex-row md:items-baseline md:gap-2",children:[r.jsx("span",{className:`text-xs md:text-lg font-bold font-mono leading-none ${(a??0)<0?"text-red-500 animate-pulse":"text-white"}`,children:Math.floor(a??0).toLocaleString()}),o!==void 0&&r.jsxs("div",{className:"flex items-center gap-0.5 mt-0.5 md:mt-0",children:[r.jsx("span",{className:"material-symbols-outlined text-[10px] text-[#0bda65]",children:"trending_up"}),r.jsxs("span",{className:"text-[#0bda65] text-[10px] font-medium font-mono leading-none whitespace-nowrap",children:[Math.floor((o??0)*3600).toLocaleString(),"/h"]})]}),d!==void 0&&r.jsxs("span",{className:"text-[#929bc9] text-[10px] font-medium leading-none whitespace-nowrap mt-0.5 md:mt-0",children:["/ ",(d??0).toLocaleString()]})]})]})]}),Iy=()=>{const{resources:l,productionRates:a,logout:n,planets:o,currentPlanetId:d,switchPlanet:h,planetName:f,mainPlanetName:g,galaxyCoords:b}=us(),[p,v]=_i.useState(!1);return r.jsx("header",{className:"bg-[#111422]/90 backdrop-blur-md border-b border-white/5 p-3 flex-shrink-0 relative z-50",children:r.jsxs("div",{className:"flex flex-wrap gap-3 justify-between items-center w-full",children:[o&&o.length>0&&r.jsxs("div",{className:"relative lg:hidden",children:[r.jsx("button",{onClick:()=>v(!p),className:"flex items-center justify-center p-2 bg-[#1c2136] border border-white/10 rounded-lg hover:border-primary/50 transition-colors",children:r.jsx("span",{className:"material-symbols-outlined text-primary text-xl",children:"public"})}),p&&r.jsxs("div",{className:"absolute top-full left-0 mt-1 bg-[#1c2136] border border-white/10 rounded-lg shadow-xl z-50 min-w-[200px]",children:[r.jsxs("button",{onClick:()=>{h("main"),v(!1)},className:`w-full text-left px-4 py-3 text-sm hover:bg-white/5 transition-colors flex items-center gap-3 border-b border-white/5 ${!d||d==="main"?"text-primary bg-primary/10":"text-white"}`,children:[r.jsx("span",{className:"material-symbols-outlined text-lg",children:"home"}),g||"Gwna"]}),o.map((x,_)=>r.jsxs("button",{onClick:()=>{h(x.id),v(!1)},className:`w-full text-left px-4 py-3 text-sm hover:bg-white/5 transition-colors flex items-center gap-3 border-b border-white/5 last:border-0 ${d===x.id?"text-primary bg-primary/10":"text-white"}`,children:[r.jsx("span",{className:"material-symbols-outlined text-lg",children:"public"}),x.planet_name||`Kolonia ${_+1}`]},x.id))]})]}),r.jsxs("div",{className:"flex gap-2 md:gap-3 flex-1 overflow-x-auto pb-2 items-center",children:[r.jsx(fi,{name:"Tytan",value:l.metal,production:a==null?void 0:a.metal,icon:"handyman",colorClass:"bg-gradient-to-br from-gray-500 to-gray-700",bgClass:"bg-[#1c2136]"}),r.jsx(fi,{name:"Krzem",value:l.crystal,production:a==null?void 0:a.crystal,icon:"diamond",colorClass:"bg-gradient-to-br from-blue-400 to-blue-600",bgClass:"bg-[#1c2136]"}),r.jsx(fi,{name:"Plazma",value:l.deuterium,production:a==null?void 0:a.deuterium,icon:"propane",colorClass:"bg-gradient-to-br from-teal-400 to-teal-600",bgClass:"bg-[#1c2136]"}),r.jsx(fi,{name:"Energia",value:l.energy,subValue:l.maxEnergy,icon:"bolt",colorClass:"bg-gradient-to-br from-yellow-400 to-orange-500",bgClass:"bg-[#1c2136]"}),r.jsx(fi,{name:"Nanity",value:l.darkMatter||0,icon:"all_inclusive",colorClass:"bg-gradient-to-br from-purple-500 to-indigo-600",bgClass:"bg-[#1c2136] border-purple-500/20 shadow-purple-900/20"})]}),r.jsx("div",{className:"hidden lg:block",children:r.jsx("button",{onClick:n,className:"bg-center bg-no-repeat bg-cover rounded-full size-10 border-2 border-primary cursor-pointer hover:scale-105 transition-transform shadow-lg shadow-primary/20 flex items-center justify-center group bg-[#111422]",title:"Wyloguj",children:r.jsx("span",{className:"material-symbols-outlined text-white group-hover:text-red-400 transition-colors",children:"logout"})})})]})})},cp=100,Cp="kosmo_error_logs";let Us=[],Gl=[],qy=null;const Py=()=>`${Date.now()}-${Math.random().toString(36).slice(2,9)}`,Gy=()=>{try{const l=localStorage.getItem(Cp);l&&(Us=JSON.parse(l))}catch{Us=[]}return Us},Rp=()=>{try{Us.length>cp&&(Us=Us.slice(-cp)),localStorage.setItem(Cp,JSON.stringify(Us))}catch{}},zp=()=>{Gl.forEach(l=>l([...Us]))},Yy=async l=>{try{await de.from("error_logs").insert({user_id:qy,error_type:l.type,message:l.message,context:l.context,stack:l.stack,user_agent:navigator.userAgent,url:window.location.href})}catch(a){console.warn("Failed to send error to Supabase:",a)}},Mp=(l,a,n,o)=>{const d={id:Py(),timestamp:Date.now(),type:l,message:a,context:n,stack:o};return Us.push(d),Rp(),zp(),d},wu=(l,a,n)=>{console.error(` [ERROR] ${l}`,a,n);const o=Mp("error",l,a,n==null?void 0:n.stack);return Yy(o),o},Ky=()=>{Us=[],Rp(),zp()},Vy=()=>[...Us],Qy=()=>Us.filter(l=>l.type==="error").length,Dp=l=>(Gl.push(l),()=>{Gl=Gl.filter(a=>a!==l)}),Zy=()=>{window.onerror=(a,n,o,d,h)=>(wu(String(a),`${n}:${o}:${d}`,h),!1),window.onunhandledrejection=a=>{var o;const n=((o=a.reason)==null?void 0:o.message)||String(a.reason);wu(n,"UnhandledPromiseRejection",a.reason instanceof Error?a.reason:void 0)},window.addEventListener("error",a=>{if(a.target&&a.target instanceof HTMLElement){const n=a.target,o=n.src||n.href||"unknown",d=n.tagName.toLowerCase();wu(`Failed to load resource: <${d} src="${o}">`,"ResourceLoader")}},!0);const l=console.error;console.error=(...a)=>{l.apply(console,a);const n=a.map(o=>typeof o=="object"?o.message||JSON.stringify(o):String(o)).join(" ");n.includes(" [ERROR]")||Mp("error",n,"Console")}};Gy();console.log(" Error Logger initialized");const Jy=async()=>{try{const l=Us.map(a=>`[${new Date(a.timestamp).toLocaleTimeString()}] ${a.type.toUpperCase()}: ${a.message}${a.context?` (${a.context})`:""}`).join(`
`);return await navigator.clipboard.writeText(l),!0}catch{return!1}},Xy=({visible:l,onClose:a})=>{const[n,o]=te.useState([]),[d,h]=te.useState("all"),[f,g]=te.useState(null),[b,p]=te.useState(!1),[v,x]=te.useState(!1);te.useEffect(()=>(o(Vy()),Dp(o)),[]);const _=d==="all"?n:n.filter(z=>z.type===d),j=async()=>{await Jy()&&(p(!0),setTimeout(()=>p(!1),2e3))},A=()=>{Ky()},C=z=>new Date(z).toLocaleTimeString("pl-PL");return l?r.jsxs("div",{style:{position:"fixed",bottom:0,left:0,right:0,height:v?"40px":"50vh",maxHeight:v?"40px":"400px",background:"linear-gradient(180deg, #1a1a2e 0%, #16213e 100%)",borderTop:"2px solid #e94560",zIndex:9999,display:"flex",flexDirection:"column",fontFamily:"monospace",fontSize:"12px",transition:"height 0.2s, max-height 0.2s"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 12px",background:"rgba(0,0,0,0.3)",borderBottom:v?"none":"1px solid rgba(255,255,255,0.1)",cursor:"pointer"},onClick:()=>x(!v),children:[r.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[r.jsx("span",{style:{color:"#e94560",fontWeight:"bold"},children:" Debug Console"}),r.jsxs("span",{style:{color:"#666",fontSize:"10px"},children:["(",n.length," wpisw)"]}),v&&n.filter(z=>z.type==="error").length>0&&r.jsxs("span",{style:{color:"#ff4444",fontSize:"10px"},children:[" ",n.filter(z=>z.type==="error").length," bdw"]})]}),r.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[!v&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"hidden sm:flex",style:{gap:"8px"},children:[r.jsx("button",{onClick:z=>{z.stopPropagation(),h("all")},style:{padding:"4px 8px",background:d==="all"?"#e94560":"#333",border:"none",borderRadius:"4px",color:"white",cursor:"pointer",fontSize:"10px"},children:"Wszystkie"}),r.jsx("button",{onClick:z=>{z.stopPropagation(),h("error")},style:{padding:"4px 8px",background:d==="error"?"#ff4444":"#333",border:"none",borderRadius:"4px",color:"white",cursor:"pointer",fontSize:"10px"},children:" Bdy"}),r.jsx("button",{onClick:z=>{z.stopPropagation(),h("warning")},style:{padding:"4px 8px",background:d==="warning"?"#ffaa00":"#333",border:"none",borderRadius:"4px",color:"white",cursor:"pointer",fontSize:"10px"},children:" Ostrzeenia"})]}),r.jsx("button",{onClick:z=>{z.stopPropagation(),j()},style:{padding:"4px 12px",background:b?"#4CAF50":"#0f3460",border:"none",borderRadius:"4px",color:"white",cursor:"pointer",fontSize:"10px"},children:b?"":""}),r.jsx("button",{onClick:z=>{z.stopPropagation(),A()},style:{padding:"4px 12px",background:"#333",border:"none",borderRadius:"4px",color:"white",cursor:"pointer",fontSize:"10px"},children:""})]}),r.jsx("button",{onClick:z=>{z.stopPropagation(),x(!v)},style:{padding:"4px 8px",background:"#333",border:"none",borderRadius:"4px",color:"white",cursor:"pointer",fontSize:"14px"},children:v?"":""}),r.jsx("button",{onClick:z=>{z.stopPropagation(),a()},style:{padding:"4px 12px",background:"#e94560",border:"none",borderRadius:"4px",color:"white",cursor:"pointer",fontSize:"10px"},children:""})]})]}),!v&&r.jsx("div",{style:{flex:1,overflowY:"auto",padding:"8px"},children:_.length===0?r.jsx("div",{style:{color:"#666",textAlign:"center",padding:"20px"},children:"Brak logw do wywietlenia"}):[..._].reverse().map(z=>r.jsxs("div",{onClick:()=>g(f===z.id?null:z.id),style:{padding:"8px",marginBottom:"4px",background:z.type==="error"?"rgba(255,68,68,0.1)":z.type==="warning"?"rgba(255,170,0,0.1)":"rgba(68,136,255,0.1)",borderLeft:`3px solid ${z.type==="error"?"#ff4444":z.type==="warning"?"#ffaa00":"#4488ff"}`,borderRadius:"4px",cursor:"pointer"},children:[r.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"flex-start",flexWrap:"wrap"},children:[r.jsx("span",{style:{color:"#666",minWidth:"60px",fontSize:"10px"},children:C(z.timestamp)}),r.jsx("span",{style:{color:z.type==="error"?"#ff4444":z.type==="warning"?"#ffaa00":"#4488ff",fontWeight:"bold",fontSize:"10px"},children:z.type==="error"?"":z.type==="warning"?"":""}),r.jsx("span",{style:{color:"#eee",flex:1,fontSize:"11px",wordBreak:"break-word"},children:z.message})]}),z.context&&r.jsxs("div",{style:{color:"#888",marginTop:"4px",fontSize:"10px"},children:[" ",z.context]}),f===z.id&&z.stack&&r.jsx("pre",{style:{color:"#666",marginTop:"8px",fontSize:"9px",whiteSpace:"pre-wrap",wordBreak:"break-all",maxHeight:"150px",overflow:"auto"},children:z.stack})]},z.id))})]}):null},Wy=({onClick:l})=>{const[a,n]=te.useState(0);return te.useEffect(()=>{const o=()=>n(Qy());return o(),Dp(o)},[]),r.jsxs("button",{onClick:l,style:{position:"fixed",bottom:"80px",right:"10px",width:"40px",height:"40px",borderRadius:"50%",background:a>0?"#e94560":"rgba(15, 52, 96, 0.8)",border:"2px solid rgba(255,255,255,0.2)",color:"white",fontSize:"16px",cursor:"pointer",zIndex:9998,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 10px rgba(0,0,0,0.3)",transition:"all 0.2s"},title:"Otwrz konsol debug",children:["",a>0&&r.jsx("span",{style:{position:"absolute",top:"-5px",right:"-5px",background:"#ff4444",color:"white",borderRadius:"50%",width:"18px",height:"18px",fontSize:"9px",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold"},children:a>9?"9+":a})]})},Fy=({onClose:l})=>r.jsx("div",{className:"fixed inset-0 z-[100] bg-black/80 backdrop-blur-sm flex items-center justify-center p-4",onClick:l,children:r.jsxs("div",{className:"bg-[#1c2136] w-full max-w-2xl max-h-[80vh] overflow-hidden rounded-2xl border border-white/10 shadow-2xl flex flex-col",onClick:a=>a.stopPropagation(),children:[r.jsxs("div",{className:"p-4 border-b border-white/10 flex justify-between items-center bg-[#15192b]",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 rounded-lg bg-blue-500/20 text-blue-400",children:r.jsx("span",{className:"material-symbols-outlined text-2xl",children:"info"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold text-white tracking-wide",children:"Aktualnoci i Zmiany"}),r.jsx("p",{className:"text-xs text-[#929bc9]",children:"Ostatnie aktualizacje (Od wczoraj)"})]})]}),r.jsx("button",{onClick:l,className:"text-[#929bc9] hover:text-white p-2 hover:bg-white/5 rounded-lg transition-colors",children:r.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-[#0b0d17]/50 space-y-6",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsxs("h3",{className:"text-red-400 font-bold uppercase text-sm border-b border-red-500/20 pb-2 flex items-center gap-2",children:[r.jsx("span",{className:"material-symbols-outlined text-lg",children:"swords"}),"Nowy System Walki"]}),r.jsxs("div",{className:"text-sm text-[#cdd6f7] space-y-2",children:[r.jsx("p",{children:"Wprowadzono system kontr (Kamie-Papier-Noyce) dla statkw!"}),r.jsxs("ul",{className:"list-disc list-inside text-[#929bc9] pl-2 space-y-1",children:[r.jsx("li",{children:"Kady statek posiada teraz bonusy przeciwko konkretnym typom jednostek (np. Myliwiec Lekki jest skuteczny przeciwko Krownikom)."}),r.jsx("li",{children:'Informacje o bonusach ("Silny przeciwko") s widoczne w Stoczni oraz Sklepie.'}),r.jsx("li",{children:"Walki s teraz symulowane w rundach (max 6), co daje bardziej realistyczne wyniki star."})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"bg-[#111422]/50 p-4 rounded-lg border border-white/5",children:[r.jsxs("h3",{className:"font-bold text-yellow-400 mb-2 flex items-center gap-2",children:[r.jsx("span",{className:"material-symbols-outlined text-sm",children:"shopping_cart"}),"Sklep Premium Nowoci"]}),r.jsxs("ul",{className:"list-disc list-inside text-sm text-[#929bc9] space-y-1",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Nowe Pakiety:"})," Dostpne nowe pakiety surowcw i ulepsze."]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Gwiazda mierci:"})," Teraz dostpna rwnie w ofercie specjalnej."]})]})]}),r.jsxs("div",{className:"bg-[#111422]/50 p-4 rounded-lg border border-white/5",children:[r.jsxs("h3",{className:"font-bold text-primary mb-2 flex items-center gap-2",children:[r.jsx("span",{className:"material-symbols-outlined text-sm",children:"new_releases"}),"System Poziomw i Ranking"]}),r.jsxs("ul",{className:"list-disc list-inside text-sm text-[#929bc9] space-y-1",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"System Poziomw:"})," Zbieraj XP za budow i flot, aby awansowa!"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Korona Lidera:"})," Gracz #1 w rankingu otrzymuje zot koron przy nicku."]}),r.jsx("li",{children:"Ranking jest teraz bardziej dynamiczny i przejrzysty."})]})]}),r.jsxs("div",{className:"bg-[#111422]/50 p-4 rounded-lg border border-white/5",children:[r.jsxs("h3",{className:"font-bold text-blue-400 mb-2 flex items-center gap-2",children:[r.jsx("span",{className:"material-symbols-outlined text-sm",children:"shield"}),"System Obrony i Kontry"]}),r.jsxs("ul",{className:"list-disc list-inside text-sm text-[#929bc9] space-y-1",children:[r.jsxs("li",{children:["Dodano informacj ",r.jsx("strong",{children:'"Silny Przeciwko"'})," w widoku Obrony i Stoczni."]}),r.jsx("li",{children:"Teraz atwo sprawdzisz, co najlepiej kontruje dan jednostk."})]})]}),r.jsxs("div",{className:"bg-[#111422]/50 p-4 rounded-lg border border-white/5",children:[r.jsxs("h3",{className:"font-bold text-green-400 mb-2 flex items-center gap-2",children:[r.jsx("span",{className:"material-symbols-outlined text-sm",children:"pest_control"}),"Inne Zmiany"]}),r.jsxs("ul",{className:"list-disc list-inside text-sm text-[#929bc9] space-y-1",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Tryb Penoekranowy:"})," Dostpny w menu bocznym (dla lepszej immersji)."]}),r.jsx("li",{children:"Usunito przycisk debugowania (robaczka) na rzecz tego okna Info."}),r.jsx("li",{children:"Optymalizacja wydajnoci gry."})]})]})]})]}),r.jsxs("div",{className:"p-4 border-t border-white/10 bg-[#15192b] text-center text-xs text-[#555a7a]",children:["Kosmo v2.1.0 - Build ",new Date().toLocaleDateString()]})]})}),ev=({children:l,activeView:a,onNavigate:n})=>{const[o,d]=te.useState(!1),[h,f]=te.useState(!1),[g,b]=te.useState(!1),[p,v]=te.useState(!1);te.useEffect(()=>{Zy()},[]);const x=us(),_=(x==null?void 0:x.logout)||(()=>window.location.reload()),j=(x==null?void 0:x.incomingMissions)||[],A=[{id:"overview",icon:"dashboard",label:"Podgld"},{id:"buildings",icon:"domain",label:"Budynki"},{id:"fleet",icon:"flight_takeoff",label:"Flota"},{id:"galaxy",icon:"public",label:"Galaktyka"}],C=[{id:"overview",label:"Podgld",icon:"dashboard"},{id:"buildings",label:"Budynki",icon:"domain"},{id:"shipyard",label:"Stocznia",icon:"rocket_launch"},{id:"research",label:"Badania",icon:"science"},{id:"fleet",label:"Centrum Floty",icon:"flight_takeoff"},{id:"galaxy",label:"Galaktyka",icon:"public"},{id:"defense",label:"Obrona",icon:"shield"},{id:"clans",label:"Klany",icon:"groups"},{id:"shop",label:"Sklep Premium",icon:"shopping_cart"},{id:"ranking",label:"Ranking",icon:"leaderboard"},{id:"settings",label:"Opcje",icon:"settings"}],z=D=>{n(D),d(!1)};return r.jsxs("div",{className:"flex h-screen w-full bg-[#101322] text-white font-display overflow-hidden relative",children:[r.jsx("div",{className:"absolute inset-0 pointer-events-none z-0",style:{backgroundImage:`
            linear-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px),
            linear-gradient(90deg, rgba(255, 255, 255, 0.03) 1px, transparent 1px)
          `,backgroundSize:"40px 40px"}}),r.jsx($y,{activeView:a,onNavigate:n}),r.jsxs("main",{className:"flex-1 flex flex-col h-full relative z-10 overflow-hidden mb-16 lg:mb-0",children:[r.jsx(Iy,{}),j&&j.length>0&&r.jsxs("div",{className:`mx-2 md:mx-6 lg:mx-8 mt-2 transition-all duration-300 ${h?"bg-red-900/40 border-red-900/30":"bg-red-900/80 border-red-500 animate-pulse"} border-2 rounded-xl overflow-hidden shadow-[0_0_30px_rgba(239,68,68,0.2)]`,children:[r.jsxs("div",{className:`p-2 px-4 flex items-center justify-between cursor-pointer hover:bg-white/5 transition-colors ${h?"py-1":"py-2"}`,onClick:()=>f(!h),children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:`material-symbols-outlined text-red-500 ${!h&&"animate-bounce"}`,children:"warning"}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsxs("h3",{className:`text-red-400 font-bold uppercase tracking-wider flex items-center gap-2 ${h?"text-xs":"text-sm"}`,children:[h?"Wykryto Zagroenie":" WYKRYTO ZAGROENIE!",r.jsxs("span",{className:`font-normal text-red-300 normal-case hidden sm:inline ${h?"text-[10px]":"text-xs"}`,children:["(",j.length," ",j.length===1?"flota":"floty",")"]})]})})]}),!h&&r.jsx("div",{className:"mt-2 text-red-100/80 space-y-2 w-full hidden md:block"}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:`text-red-300 uppercase ${h?"text-[8px] hidden sm:block":"text-[10px]"}`,children:"Kontakt za:"}),r.jsx("div",{className:`text-red-400 font-bold font-mono leading-none ${h?"text-sm":"text-lg"}`,children:Ds(Math.max(0,(j[0].arrivalTime-Date.now())/1e3))})]}),r.jsx("span",{className:"material-symbols-outlined text-red-400 transition-transform duration-300",style:{transform:h?"rotate(180deg)":"rotate(0deg)"},children:"expand_less"})]})]}),!h&&r.jsxs("div",{className:"px-4 pb-2 text-red-100/80 space-y-2",children:[j.map(D=>r.jsxs("div",{className:"text-xs border-t border-red-500/30 pt-2",children:[r.jsx("p",{className:"font-bold text-red-200 mb-1",children:D.attackerName?`Atakuje: ${D.attackerName}`:"Nadciga wroga flota!"}),r.jsxs("p",{className:"opacity-80",children:["Flota: ",Object.entries(D.ships||{}).map(([R,S])=>{var Q;return`${((Q=Ze[R])==null?void 0:Q.name)||R}: ${S}`}).join(", ")]})]},D.id)),r.jsx("div",{className:"text-center pt-2",children:r.jsx("span",{className:"text-[10px] text-red-400 opacity-70",children:"(Kliknij, aby zminimalizowa pasek)"})})]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-2 md:p-6 lg:p-8 scrollbar-thin scrollbar-thumb-primary scrollbar-track-background-dark",children:r.jsx("div",{className:"max-w-[1400px] mx-auto pb-20 lg:pb-0",children:l})})]}),o&&r.jsxs("div",{className:"lg:hidden fixed inset-0 z-40 bg-[#101322]/95 backdrop-blur-xl flex flex-col animate-in fade-in slide-in-from-bottom-10 duration-200",children:[r.jsxs("div",{className:"p-6 flex items-center justify-between border-b border-white/10",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"bg-center bg-no-repeat bg-cover rounded-full size-12 border-2 border-primary",style:{backgroundImage:`url("${(x==null?void 0:x.avatarUrl)||"/kosmo/avatars/avatar_default.png"}")`}}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("h1",{className:"text-white text-lg font-bold tracking-tight uppercase",children:"Centrum"}),r.jsxs("p",{className:"text-[#929bc9] text-sm font-normal",children:["Kmdr. ",(x==null?void 0:x.nickname)||"Gracz"]})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>{document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen().catch(D=>console.log(D))},className:"p-2 bg-white/5 rounded-full text-white hover:bg-white/10 transition-colors",title:"Peny ekran",children:r.jsx("span",{className:"material-symbols-outlined",children:"fullscreen"})}),r.jsx("button",{onClick:()=>d(!1),className:"p-2 bg-white/5 rounded-full text-white hover:bg-white/10 transition-colors",children:r.jsx("span",{className:"material-symbols-outlined",children:"close"})})]})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-4 grid grid-cols-2 gap-3 overscroll-y-contain touch-action-manipulation pb-24",children:[C.map(D=>r.jsxs("button",{onClick:()=>z(D.id),className:`flex flex-col items-center justify-center p-4 rounded-xl border transition-all ${a===D.id?"bg-primary/20 border-primary text-white":"bg-[#1c2136] border-white/5 text-[#929bc9] hover:bg-white/5"}`,children:[r.jsx("span",{className:`material-symbols-outlined text-3xl mb-2 ${D.id==="shop"?"text-yellow-500":""}`,children:D.icon}),r.jsx("span",{className:"text-sm font-bold",children:D.label})]},D.id)),r.jsxs("button",{onClick:()=>_(),className:"flex flex-col items-center justify-center p-4 rounded-xl border border-red-500/20 bg-red-500/10 text-red-400 hover:bg-red-500/20 col-span-2 mt-4",children:[r.jsx("span",{className:"material-symbols-outlined text-3xl mb-2",children:"logout"}),r.jsx("span",{className:"text-sm font-bold",children:"Wyloguj Si"})]})]})]}),r.jsx("nav",{className:"lg:hidden fixed bottom-0 left-0 right-0 bg-[#1c2136]/95 backdrop-blur-md border-t border-white/10 z-50 pb-safe",children:r.jsxs("div",{className:"flex justify-around items-center h-16 px-1",children:[A.map(D=>{const R=a===D.id;return r.jsxs("button",{onClick:()=>{n(D.id),d(!1)},className:`flex flex-col items-center justify-center w-full h-full gap-1 transition-colors ${R?"text-primary":"text-[#929bc9] hover:text-white"}`,children:[r.jsx("span",{className:`material-symbols-outlined transition-transform ${R?"scale-110":""} text-2xl`,children:D.icon}),r.jsx("span",{className:"text-[10px] font-medium leading-none",children:D.label})]},D.id)}),r.jsxs("button",{onClick:()=>d(!o),className:`flex flex-col items-center justify-center w-full h-full gap-1 transition-colors ${o?"text-white":"text-[#929bc9] hover:text-white"}`,children:[r.jsx("span",{className:"material-symbols-outlined text-2xl",children:"menu"}),r.jsx("span",{className:"text-[10px] font-medium leading-none",children:"Menu"})]})]})}),r.jsx(Wy,{onClick:()=>b(!0)}),r.jsx(Xy,{visible:g,onClose:()=>b(!1)}),p&&r.jsx(Fy,{onClose:()=>v(!1)})]})},tv=()=>{const[l,a]=te.useState(!0),[n,o]=te.useState(""),[d,h]=te.useState(""),[f,g]=te.useState(!1),[b,p]=te.useState(null),v=async x=>{x.preventDefault(),g(!0),p(null);const _=`${n.trim()}@kosmo.com`;try{if(l){const{error:j}=await de.auth.signInWithPassword({email:_,password:d});if(j)throw j}else{const{data:j,error:A}=await de.auth.signUp({email:_,password:d,options:{data:{full_name:n.trim()}}});if(A)throw A;if(j.user&&!j.session){const{error:C}=await de.auth.signInWithPassword({email:_,password:d});C&&(alert('Konto utworzone! Jeli nie zostae zalogowany automatycznie, sprawd czy wyczye "Confirm Email" w Supabase lub sprbuj si zalogowa.'),a(!0))}}}catch(j){p(j.message)}finally{g(!1)}};return r.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-[#101322] relative overflow-hidden",children:[r.jsxs("div",{className:"absolute inset-0 z-0",children:[r.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-primary/20 rounded-full blur-[100px] animate-pulse"}),r.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-purple-600/20 rounded-full blur-[100px] animate-pulse",style:{animationDelay:"2s"}})]}),r.jsxs("div",{className:"relative z-10 w-full max-w-md p-6 md:p-8 bg-[#1c2136]/80 backdrop-blur-xl border border-white/10 rounded-2xl shadow-2xl mx-4 animate-in fade-in zoom-in-95 duration-500",children:[r.jsxs("div",{className:"flex flex-col items-center mb-8 group",children:[r.jsxs("div",{className:"rounded-full size-24 border-2 border-primary mb-4 shadow-lg shadow-primary/30 overflow-hidden bg-[#111422] transition-transform duration-500 group-hover:scale-110 group-hover:shadow-primary/50 relative",children:[r.jsx("div",{className:"absolute inset-0 bg-primary/20 animate-pulse z-10 pointer-events-none"}),r.jsx("img",{src:He.avatar,alt:"Logo",className:"w-full h-full object-cover relative z-0",onError:x=>{x.currentTarget.src="/kosmo/avatars/avatar_default.png"}})]}),r.jsx("h1",{className:"text-4xl font-bold text-white tracking-tight uppercase font-display text-transparent bg-clip-text bg-gradient-to-r from-white to-primary animate-in slide-in-from-top-4 duration-700 delay-150",children:"Kosmo 2.0"}),r.jsx("p",{className:"text-gray-500 mt-2 animate-in slide-in-from-top-2 duration-700 delay-200",children:"v1.2.5 (PvP & Commander Update)"}),r.jsx("p",{className:"text-[#929bc9] text-sm md:text-base text-center mt-2 animate-in slide-in-from-top-2 duration-700 delay-300",children:"Zaloguj si do terminala dowdcy"})]}),r.jsxs("form",{onSubmit:v,className:"flex flex-col gap-4 animate-in slide-in-from-bottom-4 duration-700 delay-300",children:[b&&r.jsx("div",{className:"bg-red-500/10 border border-red-500/20 text-red-400 p-3 rounded-lg text-sm text-center animate-pulse",children:b}),r.jsxs("div",{className:"group",children:[r.jsx("label",{className:"text-xs font-bold text-[#929bc9] uppercase mb-1 block group-focus-within:text-primary transition-colors",children:"Nick Dowdcy"}),r.jsx("input",{type:"text",required:!0,value:n,onChange:x=>o(x.target.value),className:"w-full bg-[#111422] border border-white/10 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary/50 transition-all shadow-inner",placeholder:"Wpisz swj nick..."})]}),r.jsxs("div",{className:"group",children:[r.jsx("label",{className:"text-xs font-bold text-[#929bc9] uppercase mb-1 block group-focus-within:text-primary transition-colors",children:"Haso"}),r.jsx("input",{type:"password",required:!0,value:d,onChange:x=>h(x.target.value),className:"w-full bg-[#111422] border border-white/10 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-primary focus:ring-1 focus:ring-primary/50 transition-all shadow-inner",placeholder:""})]}),r.jsxs("button",{type:"submit",disabled:f,className:`mt-4 py-3 rounded-lg font-bold uppercase tracking-wider transition-all shadow-lg relative overflow-hidden group
                            ${f?"bg-gray-600 cursor-not-allowed":"bg-primary hover:bg-blue-600 text-white shadow-primary/20 hover:shadow-primary/40 hover:-translate-y-0.5"}
                        `,children:[r.jsx("span",{className:"relative z-10",children:f?"Przetwarzanie...":l?"Zaloguj si":"Zarejestruj konto"}),!f&&r.jsx("div",{className:"absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300"})]})]}),r.jsx("div",{className:"mt-6 text-center animate-in fade-in duration-1000 delay-500",children:r.jsx("button",{onClick:()=>a(!l),className:"text-sm text-[#929bc9] hover:text-white transition-colors hover:underline underline-offset-4",children:l?"Nie masz konta? Zarejestruj si":"Masz ju konto? Zaloguj si"})})]}),r.jsx("div",{className:"absolute bottom-4 left-0 right-0 text-center text-xs text-[#929bc9]/50 font-mono",children:"Stworzone przez DareG TV"})]})},sv=({session:l,onComplete:a})=>{const[n,o]=te.useState({galaxy:1,system:1}),[d,h]=te.useState(new Map),[f,g]=te.useState(!0),[b,p]=te.useState(null),[v,x]=te.useState(null);te.useEffect(()=>{(async()=>{g(!0);const{data:S,error:Q}=await de.from("profiles").select("galaxy_coords, planet_name").not("galaxy_coords","is",null),{data:H,error:G}=await de.from("planets").select("*");if(!Q&&!G){const Z=new Map;S==null||S.forEach(fe=>{if(fe.galaxy_coords){const we=fe.galaxy_coords;Z.set(`${we.galaxy}:${we.system}:${we.position}`,fe.planet_name||"Gwna Planeta")}}),H==null||H.forEach(fe=>{if(fe.galaxy_coords){const we=fe.galaxy_coords;Z.set(`${we.galaxy}:${we.system}:${we.position}`,fe.planet_name||"Kolonia")}}),Z.set("1:1:2","Piracka Baza"),h(Z)}g(!1)})()},[]);const _=R=>d.has(`${n.galaxy}:${n.system}:${R}`),j=R=>d.get(`${n.galaxy}:${n.system}:${R}`),A=async R=>{if(b||_(R))return;p(R),x(null);const S={galaxy:n.galaxy,system:n.system,position:R},Q={metal:500,crystal:300,deuterium:100,darkMatter:0,energy:0,maxEnergy:0,storage:{metal:1e4,crystal:1e4,deuterium:1e4}},H={metal_mine:1,crystal_mine:0,deuterium_synth:0,solar_plant:1,fusion_reactor:0,robot_factory:0,shipyard:0,research_lab:0,metal_storage:0,crystal_storage:0,deuterium_tank:0},G={light_fighter:0,heavy_fighter:0,cruiser:0,battleship:0,destroyer:0,death_star:0,small_cargo:0,medium_cargo:0,huge_cargo:0,colony_ship:0,espionage_probe:0,pioneer:1,recycler:0},{error:Z}=await de.from("profiles").upsert({id:l.user.id,galaxy_coords:S,planet_name:`Kolonia [${S.galaxy}:${S.system}:${S.position}]`,last_updated:Date.now(),resources:Q,buildings:H,ships:G,research:{},defenses:{},debris:{metal:0,crystal:0},construction_queue:[],shipyard_queue:[],mission_logs:[],points:0,xp:0,level:1,version:1});if(Z){x("Bd przy zapisie pozycji: "+Z.message),p(null);return}a(S)},C=R=>{o(S=>{const Q=S.system+R;return Q<1||Q>499?S:{...S,system:Q}})},z=R=>{o(S=>{const Q=S.galaxy+R;return Q<1||Q>9?S:{...S,galaxy:Q}})},D=Array.from({length:15},(R,S)=>S+1);return f?r.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-[#101322] flex-col gap-4",children:[r.jsx("div",{className:"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin"}),r.jsx("div",{className:"text-white text-xl",children:"Skanowanie Galaktyki..."})]}):r.jsxs("div",{className:"min-h-screen bg-[#101322] overflow-y-auto",children:[r.jsxs("div",{className:"max-w-4xl mx-auto p-4 flex flex-col gap-6 pb-20 relative min-h-full",children:[r.jsxs("div",{className:"text-center py-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-white uppercase tracking-tight mb-2",children:"Wybierz miejsce pod koloni"}),r.jsx("p",{className:"text-[#929bc9]",children:'Znajd woln planet w dowolnym ukadzie i kliknij "Zasiedl".'}),v&&r.jsx("div",{className:"mt-4 p-3 bg-red-500/20 text-red-400 rounded-lg",children:v})]}),r.jsx("div",{className:"absolute top-40 left-1/2 -translate-x-1/2 pointer-events-none z-0 opacity-40 w-full flex justify-center overflow-hidden",children:r.jsx("div",{className:"w-[600px] h-[600px] rounded-full bg-blue-500/20 blur-[120px] -translate-y-1/2"})}),r.jsx("div",{className:"bg-[#1c2136] p-4 rounded-xl border border-white/10 shadow-lg sticky top-0 z-20 backdrop-blur-md bg-opacity-90",children:r.jsx("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between",children:r.jsxs("div",{className:"flex gap-2 w-full justify-center",children:[r.jsxs("div",{className:"flex flex-col gap-1 w-32 md:w-40",children:[r.jsx("span",{className:"text-[10px] uppercase font-bold text-[#929bc9] tracking-wider text-center",children:"Galaktyka"}),r.jsxs("div",{className:"flex items-center h-10 md:h-12 bg-[#111422] rounded-lg border border-white/10 overflow-hidden",children:[r.jsx("button",{onClick:()=>z(-1),className:"w-8 md:w-10 h-full hover:bg-white/5 active:bg-white/10 flex items-center justify-center text-[#929bc9]",children:r.jsx("span",{className:"material-symbols-outlined text-lg",children:"chevron_left"})}),r.jsx("div",{className:"flex-1 text-center font-mono font-bold text-lg text-white",children:n.galaxy}),r.jsx("button",{onClick:()=>z(1),className:"w-8 md:w-10 h-full hover:bg-white/5 active:bg-white/10 flex items-center justify-center text-[#929bc9]",children:r.jsx("span",{className:"material-symbols-outlined text-lg",children:"chevron_right"})})]})]}),r.jsxs("div",{className:"flex flex-col gap-1 w-32 md:w-40",children:[r.jsx("span",{className:"text-[10px] uppercase font-bold text-[#929bc9] tracking-wider text-center",children:"Ukad"}),r.jsxs("div",{className:"flex items-center h-10 md:h-12 bg-[#111422] rounded-lg border border-white/10 overflow-hidden",children:[r.jsx("button",{onClick:()=>C(-1),className:"w-8 md:w-10 h-full hover:bg-white/5 active:bg-white/10 flex items-center justify-center text-[#929bc9]",children:r.jsx("span",{className:"material-symbols-outlined text-lg",children:"chevron_left"})}),r.jsx("div",{className:"flex-1 text-center font-mono font-bold text-lg text-white",children:n.system}),r.jsx("button",{onClick:()=>C(1),className:"w-8 md:w-10 h-full hover:bg-white/5 active:bg-white/10 flex items-center justify-center text-[#929bc9]",children:r.jsx("span",{className:"material-symbols-outlined text-lg",children:"chevron_right"})})]})]})]})})}),r.jsx("div",{className:"flex flex-col gap-3 relative z-10",children:D.map(R=>{const S=_(R),Q=j(R),H=n.galaxy===1&&n.system===1&&R===2;return r.jsxs("div",{className:`relative flex items-center gap-2 md:gap-3 p-2 md:p-3 rounded-xl border transition-all ${S?"bg-[#1a2342]/50 border-red-500/20":"bg-[#1c2136] border-white/5 hover:border-green-500/30 hover:bg-[#1c2136]/80"}`,children:[r.jsx("div",{className:"flex flex-col items-center justify-center w-6 md:w-8 text-[#929bc9] font-mono text-xs md:text-sm opacity-50",children:R}),r.jsx("div",{className:"shrink-0",children:S?r.jsxs("div",{className:"w-10 h-10 md:w-12 md:h-12 rounded-full shadow-lg relative overflow-hidden bg-black/20 opacity-80 grayscale-[0.5]",children:[r.jsx("img",{src:H?"https://lh3.googleusercontent.com/aida-public/AB6AXuCttLEph3WsOd3HRlZC0zxgyo5HtGQLhoc_Nr46u_bMbqY6nTEQYuIV_gyR_hpfVBS-J_jj5GGZynbPPZti1oj5iZ3eOY_YBYNi3q8nw6c4ebgmqCgJnaJhFtJwFfpNu4nYT65VMgmQkWQU-ek95Y5Ue6RnI9LCcYQpDhod0Y_eUiJYtnqiu9_aD-u_ukPsujkP5hgKqFchbR8vhUje3E-LrA80lMR4QTQEfNKXUDobsJRFGe11_CQSYumUsrXBnYunhGfRGvl2epw":He.planet,alt:"Planet",className:"w-full h-full object-cover"}),r.jsx("div",{className:"absolute inset-0 rounded-full bg-red-500/10"})]}):r.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 rounded-full border-2 border-dashed border-white/10 flex items-center justify-center opacity-40 group-hover:opacity-100 transition-opacity",children:r.jsx("span",{className:"material-symbols-outlined text-white text-base",children:"add_location"})})}),r.jsx("div",{className:"flex-1 min-w-0",children:S?r.jsx("div",{className:"flex flex-col justify-center",children:r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r.jsx("span",{className:"font-bold text-sm md:text-base truncate text-white",children:Q}),r.jsx("span",{className:"text-red-400 text-xs uppercase font-bold tracking-wider",children:"ZAJTE"})]})}):r.jsxs("div",{className:"flex flex-col justify-center",children:[r.jsx("span",{className:"text-green-400 text-sm font-bold",children:"Wolna przestrzen"}),r.jsx("span",{className:"text-[#929bc9] text-xs",children:"Planeta gotowa do kolonizacji"})]})}),r.jsxs("div",{className:"flex items-center gap-3",children:[!S&&r.jsx("button",{onClick:()=>A(R),disabled:b!==null,className:`px-4 py-2 rounded-lg font-bold text-sm uppercase tracking-wider shadow-lg transition-all ${b===R?"bg-white text-black animate-pulse":"bg-green-600 hover:bg-green-500 text-white"}`,children:b===R?"Zasiedlanie...":"Zasiedl"}),S&&r.jsx("span",{className:"material-symbols-outlined text-white/10",children:"lock"})]})]},R)})})]}),r.jsx("div",{className:"fixed bottom-4 right-4 text-xs text-[#929bc9]/50 font-mono z-50",children:"v1.1.2"})]})},up=({onNavigate:l})=>{const{constructionQueue:a,buildings:n,ships:o,resources:d,shipyardQueue:h,planetName:f,renamePlanet:g,planetType:b,galaxyCoords:p,incomingMissions:v,activeMissions:x,productionSettings:_,getLevel:j,cancelMission:A,cancelConstruction:C,level:z,xp:D}=us(),R=b&&Tr[b]?Tr[b]:Tr.default,S=h[0],[Q,H]=te.useState({}),[G,Z]=te.useState(""),[fe,we]=te.useState(!1),[ze,qe]=te.useState(f);te.useEffect(()=>{qe(f)},[f]),te.useEffect(()=>{const ye=()=>{const J=Date.now(),ie={};if(a.forEach(ge=>{const Te=Math.max(0,Math.floor((ge.endTime-J)/1e3));ie[ge.id]=Ds(Te)}),H(ie),S){const ge=Math.max(0,Math.floor((S.endTime-J)/1e3));Z(Ds(ge))}else Z("")};ye();const N=setInterval(ye,1e3);return()=>clearInterval(N)},[a,S]);const Ue=()=>{ze.trim().length>0?g(ze.trim()):qe(f),we(!1)},Ve=ye=>{ye.key==="Enter"?Ue():ye.key==="Escape"&&(qe(f),we(!1))},Se=Object.values(o).reduce((ye,N)=>ye+N,0);return r.jsxs("div",{className:"space-y-6",children:[v.length>0&&r.jsx("div",{className:"bg-red-900/50 border border-red-500 rounded-xl p-4 flex items-center justify-between animate-pulse shadow-[0_0_20px_rgba(239,68,68,0.4)]",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"material-symbols-outlined text-red-500 text-3xl",children:"warning"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-red-400 font-bold text-lg",children:"WYKRYTO ZAGROENIE!"}),r.jsxs("p",{className:"text-red-200 text-sm",children:["Nadciga wroga flota! Szacowany czas kontaktu: ",Ds(Math.max(0,(v[0].arrivalTime-Date.now())/1e3))]})]})]})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[r.jsx("div",{className:"lg:col-span-5 xl:col-span-4",children:r.jsxs("div",{className:"bg-[#161b2e] rounded-2xl overflow-hidden border border-white/10 shadow-xl relative group",children:[r.jsxs("div",{className:"relative h-48 overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#161b2e] via-transparent to-transparent z-10"}),r.jsx("img",{src:R,alt:"Planet",className:"w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-700 opacity-80"}),r.jsx("div",{className:"absolute top-4 right-4 z-20 flex flex-col items-end",children:r.jsxs("div",{className:"flex items-center gap-2 text-[#929bc9] text-sm bg-black/40 px-2 py-1 rounded backdrop-blur-sm",children:[r.jsx("span",{className:"material-symbols-outlined text-sm",children:"my_location"}),"[",(p==null?void 0:p.galaxy)||1,":",(p==null?void 0:p.system)||1,":",(p==null?void 0:p.position)||1,"]"]})}),r.jsx("div",{className:"absolute bottom-4 left-4 w-full pr-8 z-20",children:r.jsx("div",{className:"flex items-center gap-2 h-10",children:fe?r.jsxs("div",{className:"flex items-center gap-2 bg-black/60 rounded p-1 backdrop-blur-md",children:[r.jsx("input",{autoFocus:!0,value:ze,onChange:ye=>qe(ye.target.value),onBlur:Ue,onKeyDown:Ve,className:"bg-transparent border-b border-primary text-white font-bold text-xl w-32 focus:outline-none"}),r.jsx("button",{onClick:Ue,className:"text-green-400 hover:text-green-300",children:r.jsx("span",{className:"material-symbols-outlined text-lg",children:"check"})})]}):r.jsxs(r.Fragment,{children:[r.jsx("h2",{className:"text-3xl font-bold text-white mb-1 truncate shadow-black drop-shadow-md",children:f}),r.jsx("button",{onClick:()=>we(!0),className:"w-8 h-8 flex items-center justify-center rounded-full bg-white/10 hover:bg-white/20 text-white border border-white/20 backdrop-blur-sm transition-colors",title:"Zmie nazw",children:r.jsx("span",{className:"material-symbols-outlined text-sm",children:"edit"})})]})})})]}),r.jsxs("div",{className:"p-6 flex flex-col gap-4",children:[r.jsxs("div",{className:"flex justify-between items-center border-b border-white/5 pb-3",children:[r.jsx("span",{className:"text-[#929bc9] text-sm",children:"rednica"}),r.jsx("span",{className:"text-white font-medium",children:"12,800 km"})]}),r.jsxs("div",{className:"flex justify-between items-center border-b border-white/5 pb-3",children:[r.jsx("span",{className:"text-[#929bc9] text-sm",children:"Temperatura"}),r.jsx("span",{className:"text-white font-medium",children:"12C do 50C"})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-[#929bc9] text-sm",children:"Zajte Pola"}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsxs("span",{className:"text-white font-medium",children:[Object.values(n).reduce((ye,N)=>ye+N,0)," / 163"]})})]})]}),r.jsxs("div",{className:"p-4 border-t border-white/10",children:[r.jsxs("h4",{className:"text-white font-bold text-sm uppercase tracking-wider mb-3 flex items-center gap-2",children:[r.jsx("span",{className:"material-symbols-outlined text-primary text-lg",children:"person"}),"Statystyki Dowdcy"]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{className:"bg-[#111422] rounded-lg p-3 text-center",children:[r.jsxs("div",{className:"text-yellow-400 font-bold text-2xl relative group cursor-help",children:[z||1,r.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-max max-w-[200px] bg-black/90 border border-white/20 rounded p-2 text-xs text-gray-300 hidden group-hover:block z-50 pointer-events-none shadow-xl",children:[r.jsx("div",{className:"font-bold text-yellow-400 mb-1",children:"Dowiadczenie (XP)"}),r.jsxs("div",{children:["Aktualne: ",r.jsx("span",{className:"text-white",children:lp(Math.floor(D||0))})]}),r.jsxs("div",{children:["Nastpny poziom: ",r.jsx("span",{className:"text-white",children:lp(Math.floor(500*Math.pow(z||1,2)))})]})]})]}),r.jsx("div",{className:"text-[#929bc9] text-xs uppercase mb-2",children:"Poziom"}),r.jsx("div",{className:"w-full h-1.5 bg-black/40 rounded-full overflow-hidden border border-white/5",children:r.jsx("div",{className:"h-full bg-gradient-to-r from-yellow-600 to-yellow-400 transition-all duration-500",style:{width:`${Math.min(100,Math.max(0,((D||0)-500*Math.pow((z||1)-1,2))/(500*Math.pow(z||1,2)-500*Math.pow((z||1)-1,2))*100))}%`}})})]}),r.jsxs("div",{className:"bg-[#111422] rounded-lg p-3 text-center",children:[r.jsx("div",{className:"text-primary font-bold text-2xl",children:Se}),r.jsx("div",{className:"text-[#929bc9] text-xs uppercase",children:"Flota"})]}),r.jsxs("div",{className:"bg-[#111422] rounded-lg p-3 text-center",children:[r.jsx("div",{className:"text-green-400 font-bold text-lg",children:"~2-5k"}),r.jsx("div",{className:"text-[#929bc9] text-xs uppercase",children:"Zysk/Exp."})]}),r.jsxs("div",{className:"bg-[#111422] rounded-lg p-3 text-center",children:[r.jsx("div",{className:"text-purple-400 font-bold text-lg",children:x.length}),r.jsx("div",{className:"text-[#929bc9] text-xs uppercase",children:"Aktywne Misje"})]})]})]})]})}),r.jsxs("div",{className:"lg:col-span-7 xl:col-span-8 flex flex-col gap-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsx("h3",{className:"text-2xl font-bold tracking-tight",children:"Status Operacyjny"})}),a.length>0?r.jsx("div",{className:"space-y-4",children:a.map((ye,N)=>{const J=N===0;return r.jsxs("div",{className:`bg-[#232948] border ${J?"border-primary/50":"border-white/10"} rounded-xl p-4 flex flex-col md:flex-row items-center gap-6 relative overflow-hidden group shadow-[0_0_15px_rgba(19,55,236,0.1)]`,children:[J&&r.jsx("div",{className:"absolute top-0 left-0 bottom-0 w-1 bg-primary animate-pulse"}),r.jsx("div",{className:"size-16 rounded-xl bg-[#111422] shrink-0 flex items-center justify-center border border-white/10",children:r.jsx("span",{className:`material-symbols-outlined text-3xl ${J?"text-primary animate-spin-slow":"text-[#929bc9]"}`,style:{animationDuration:"3s"},children:"construction"})}),r.jsxs("div",{className:"flex-1 min-w-0 w-full text-center md:text-left",children:[r.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-3 mb-2",children:[r.jsxs("h4",{className:"text-white font-bold text-lg truncate flex items-center gap-2",children:[J?"Rozbudowa w toku":"W kolejce",!J&&r.jsxs("span",{className:"text-xs bg-white/10 px-2 py-0.5 rounded text-[#929bc9]",children:["#",N+1]})]}),r.jsxs("span",{className:"px-2 py-0.5 rounded text-xs bg-primary/20 text-primary border border-primary/20 font-bold",children:["Lvl ",ye.targetLevel]})]}),r.jsxs("div",{className:"flex items-center gap-4 justify-center md:justify-start text-sm text-[#929bc9]",children:[r.jsx("span",{className:J?"text-primary font-medium animate-pulse":"",children:J?"Pozostay czas:":"Start za:"}),r.jsx("span",{className:`text-2xl font-mono ${J?"text-white font-bold":"text-[#929bc9]"}`,children:Q[ye.id]||"..."})]})]}),r.jsxs("button",{onClick:()=>C(ye.id),className:"px-3 py-1.5 bg-red-500/10 hover:bg-red-500/20 text-red-500 border border-red-500/20 rounded-lg text-xs font-bold uppercase transition-colors flex items-center gap-2",children:[r.jsx("span",{className:"material-symbols-outlined text-sm",children:"cancel"}),"Anuluj"]})]},ye.id)})}):r.jsxs("div",{className:"bg-[#1c2136] border border-white/5 rounded-xl p-6 flex flex-col items-center justify-center gap-2 text-center h-28",children:[r.jsx("p",{className:"text-[#929bc9] text-sm",children:"Brak aktywnych procesw budowy."}),r.jsx("button",{onClick:()=>l("buildings"),className:"text-primary hover:text-white text-xs font-bold uppercase tracking-wider transition-colors",children:"Rozpocznij budow "})]}),S?(()=>{const ye=S.type==="defense",N=ye?Zs[S.itemId]:Ze[S.itemId],J=(N==null?void 0:N.name)||S.itemId,ie=(N==null?void 0:N.icon)||(ye?"shield":"rocket");return r.jsxs("div",{className:"bg-[#2a2d40] border border-white/10 rounded-xl p-6 flex flex-col md:flex-row items-center gap-6 relative overflow-hidden",children:[r.jsx("div",{className:`absolute top-0 left-0 bottom-0 w-1 ${ye?"bg-blue-500":"bg-orange-500"} animate-pulse`}),r.jsx("div",{className:"size-20 rounded-xl bg-[#111422] shrink-0 flex items-center justify-center border border-white/10",children:r.jsx("span",{className:`material-symbols-outlined text-4xl ${ye?"text-blue-500":"text-orange-500"} animate-pulse`,children:ie})}),r.jsxs("div",{className:"flex-1 min-w-0 w-full text-center md:text-left",children:[r.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-3 mb-2",children:[r.jsx("h4",{className:"text-white font-bold text-xl truncate",children:ye?"Budowa Obrony":"Produkcja Floty"}),r.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${ye?"bg-blue-500/20 text-blue-500 border-blue-500/20":"bg-orange-500/20 text-orange-500 border-orange-500/20"} border font-bold`,children:J})]}),r.jsxs("div",{className:"flex items-center gap-4 justify-center md:justify-start text-sm text-[#929bc9]",children:[r.jsxs("span",{className:`${ye?"text-blue-500":"text-orange-500"} font-medium`,children:["x",S.quantity]}),r.jsx("span",{className:"text-2xl font-mono text-white font-bold",children:G})]})]})]})})():null]})]}),r.jsxs("div",{className:"bg-[#1c2136] rounded-xl border border-white/10 p-6",children:[r.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[r.jsx("span",{className:"material-symbols-outlined",children:"rocket_launch"}),"Status Floty"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"bg-[#111422] p-4 rounded-lg border border-white/5",children:[r.jsx("div",{className:"text-[#929bc9] text-xs uppercase font-bold mb-1",children:"Jednostki Bojowe"}),r.jsx("div",{className:"text-2xl text-white font-mono",children:Se})]}),r.jsxs("div",{className:"bg-[#111422] p-4 rounded-lg border border-white/5",children:[r.jsx("div",{className:"text-[#929bc9] text-xs uppercase font-bold mb-1",children:"Gotowo Bojowa"}),r.jsx("div",{className:"text-2xl text-green-400 font-mono",children:"100%"})]}),r.jsxs("div",{className:"bg-[#111422] p-4 rounded-lg border border-white/5",children:[r.jsx("div",{className:"text-[#929bc9] text-xs uppercase font-bold mb-1",children:"Misje w toku"}),r.jsx("div",{className:"text-2xl text-white font-mono",children:"0 / 2"})]})]}),r.jsx("div",{className:"mt-4 flex justify-end",children:r.jsx("button",{onClick:()=>l("shipyard"),className:"text-primary text-sm font-bold hover:text-white transition-colors",children:"Do Stoczni "})})]}),r.jsxs("div",{className:"bg-[#1c2136] rounded-xl border border-white/10 p-6",children:[r.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[r.jsx("span",{className:"material-symbols-outlined",children:"radar"}),"Aktywne Misje"]}),x.length===0?r.jsx("p",{className:"text-[#929bc9] text-sm text-center py-4",children:"Brak aktywnych misji."}):r.jsx("div",{className:"flex flex-col gap-3",children:x.map(ye=>{const N=ye.status==="returning",J=ye.targetCoords,ie=ye.type==="attack"?"Atak":ye.type==="spy"?"Szpiegowanie":ye.type==="expedition"?"Ekspedycja":"Misja";return r.jsxs("div",{className:"bg-[#111422] p-4 rounded-lg border border-white/5 flex flex-col md:flex-row items-center justify-between gap-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${N?"bg-blue-500/20 text-blue-400":ye.type==="attack"?"bg-red-500/20 text-red-400":"bg-purple-500/20 text-purple-400"}`,children:r.jsx("span",{className:"material-symbols-outlined",children:N?"keyboard_return":ye.type==="attack"?"swords":"visibility"})}),r.jsxs("div",{children:[r.jsx("div",{className:"font-bold text-white",children:N?`Powrt z ${ie}`:ie}),r.jsxs("div",{className:"text-xs text-[#929bc9]",children:["Cel: [",J.galaxy,":",J.system,":",J.position,"]"]})]})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"text-xs text-[#929bc9]",children:"Czas do celu"}),r.jsx("div",{className:"font-mono text-white font-bold",children:Ds(Math.max(0,((N?ye.returnTime:ye.arrivalTime)-Date.now())/1e3))})]}),ye.status==="flying"&&r.jsx("button",{onClick:()=>A(ye.id),className:"px-3 py-1 bg-red-900/40 hover:bg-red-900/60 text-red-400 border border-red-500/30 rounded text-sm transition-colors uppercase font-bold tracking-wider",children:"Odwoaj"})]})]},ye.id)})})]})]})},av=()=>{const{buildings:l,research:a,resources:n,upgradeBuilding:o,getCost:d,constructionQueue:h,checkRequirements:f,productionSettings:g,updateProductionSetting:b}=us(),[p,v]=te.useState(""),x=Object.values(ra),_=h.find(D=>D.type==="building"),j=l[ce.ROBOT_FACTORY]||0,A=100;te.useEffect(()=>{if(!_){v("");return}const D=()=>{const S=Date.now(),Q=Math.max(0,Math.floor((_.endTime-S)/1e3));v(Ds(Q))};D();const R=setInterval(D,1e3);return()=>clearInterval(R)},[_]);const C=(D,R)=>{if(D===ce.METAL_MINE){const S=Math.floor(30*R*Math.pow(1.1,R))*100,Q=Math.floor(30*(R+1)*Math.pow(1.1,R+1))*100,H=Math.floor(20*R*Math.pow(1.1,R)),G=Math.floor(20*(R+1)*Math.pow(1.1,R+1));return{text:`Produkcja: +${(Q-S).toLocaleString()}/h`,energyText:`Energia: -${(G-H).toLocaleString()}`,type:"gain"}}if(D===ce.CRYSTAL_MINE){const S=Math.floor(20*R*Math.pow(1.1,R))*100,Q=Math.floor(20*(R+1)*Math.pow(1.1,R+1))*100,H=Math.floor(20*R*Math.pow(1.1,R)),G=Math.floor(20*(R+1)*Math.pow(1.1,R+1));return{text:`Produkcja: +${(Q-S).toLocaleString()}/h`,energyText:`Energia: -${(G-H).toLocaleString()}`,type:"gain"}}if(D===ce.DEUTERIUM_SYNTH){const S=Math.floor(10*R*Math.pow(1.1,R))*100,Q=Math.floor(10*(R+1)*Math.pow(1.1,R+1))*100,H=Math.floor(40*R*Math.pow(1.1,R)),G=Math.floor(40*(R+1)*Math.pow(1.1,R+1));return{text:`Produkcja: +${(Q-S).toLocaleString()}/h`,energyText:`Energia: -${(G-H).toLocaleString()}`,type:"gain"}}if(D===ce.SOLAR_PLANT){const S=Math.floor(20*R*Math.pow(1.1,R));return{text:`Energia: +${(Math.floor(20*(R+1)*Math.pow(1.1,R+1))-S).toLocaleString()}`,type:"energy"}}if(D===ce.FUSION_REACTOR){const S=Math.floor(30*R*Math.pow(1.05,R));return{text:`Energia: +${(Math.floor(30*(R+1)*Math.pow(1.05,R+1))-S).toLocaleString()}`,type:"energy"}}if(D===ce.METAL_STORAGE){const S=1e4+5e3*Math.floor(Math.pow(2.5,R)),Q=1e4+5e3*Math.floor(Math.pow(2.5,R+1));return{text:`Pojemno: ${(S/1e3).toFixed(0)}k -> ${(Q/1e3).toFixed(0)}k`,type:"capacity"}}if(D===ce.CRYSTAL_STORAGE){const S=1e4+5e3*Math.floor(Math.pow(2.5,R)),Q=1e4+5e3*Math.floor(Math.pow(2.5,R+1));return{text:`Pojemno: ${(S/1e3).toFixed(0)}k -> ${(Q/1e3).toFixed(0)}k`,type:"capacity"}}if(D===ce.DEUTERIUM_TANK){const S=1e4+5e3*Math.floor(Math.pow(2.5,R)),Q=1e4+5e3*Math.floor(Math.pow(2.5,R+1));return{text:`Pojemno: ${(S/1e3).toFixed(0)}k -> ${(Q/1e3).toFixed(0)}k`,type:"capacity"}}if(D===ce.ROBOT_FACTORY){const S=100/(R+1),Q=100/(R+2);return R>=20?{text:`Czas budowy: ${S.toFixed(2)}% -> ${Q.toFixed(2)}%`,type:"capacity"}:{text:`Czas budowy: ${S.toFixed(1)}% -> ${Q.toFixed(1)}%`,type:"capacity"}}return null},z=[ce.METAL_MINE,ce.CRYSTAL_MINE,ce.DEUTERIUM_SYNTH,ce.SOLAR_PLANT,ce.FUSION_REACTOR];return r.jsxs("div",{className:"flex flex-col gap-6",children:[r.jsxs("div",{className:"flex items-center justify-between border-b border-white/10 pb-4",children:[r.jsxs("h2",{className:"text-3xl font-bold text-white flex items-center gap-3",children:[r.jsx("span",{className:"material-symbols-outlined text-3xl text-primary",children:"domain"}),"Infrastruktura"]}),r.jsx("div",{className:"flex gap-2",children:r.jsxs("span",{className:"text-sm text-[#929bc9]",children:["Kolejka: ",h.filter(D=>D.type==="building").length," / 2"]})})]}),r.jsxs("div",{className:"bg-[#1c2136] rounded-xl border border-white/10 p-4",children:[r.jsxs("h3",{className:"text-sm font-bold text-white uppercase mb-3 flex items-center gap-2",children:[r.jsx("span",{className:"material-symbols-outlined text-sm text-yellow-400",children:"bolt"}),"Zarzdzanie Energi"]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:z.map(D=>{if(l[D]===0)return null;const S=g[D]??100;return r.jsxs("div",{className:"flex flex-col gap-1 bg-[#111422] p-2 rounded border border-white/5",children:[r.jsxs("div",{className:"flex justify-between text-xs text-[#929bc9]",children:[r.jsx("span",{className:"truncate",children:ra[D].name}),r.jsxs("span",{className:"font-bold text-white",children:[S,"%"]})]}),r.jsx("input",{type:"range",min:"0",max:"100",step:"10",value:S,onChange:Q=>b(D,parseInt(Q.target.value)),className:"w-full h-1 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-primary"})]},D)})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-2",children:[r.jsxs("div",{className:"bg-[#1c2136] p-3 rounded-lg border border-white/5 flex items-center justify-between",children:[r.jsx("span",{className:"text-[#929bc9] text-xs uppercase font-bold",children:ra[ce.METAL_STORAGE].name}),r.jsxs("span",{className:`text-sm font-mono ${n.metal>=n.storage.metal?"text-red-400 font-bold":"text-white"}`,children:[Math.floor(n.metal).toLocaleString()," / ",(n.storage.metal/1e3).toFixed(0),"k"]})]}),r.jsxs("div",{className:"bg-[#1c2136] p-3 rounded-lg border border-white/5 flex items-center justify-between",children:[r.jsx("span",{className:"text-[#929bc9] text-xs uppercase font-bold",children:ra[ce.CRYSTAL_STORAGE].name}),r.jsxs("span",{className:`text-sm font-mono ${n.crystal>=n.storage.crystal?"text-red-400 font-bold":"text-white"}`,children:[Math.floor(n.crystal).toLocaleString()," / ",(n.storage.crystal/1e3).toFixed(0),"k"]})]}),r.jsxs("div",{className:"bg-[#1c2136] p-3 rounded-lg border border-white/5 flex items-center justify-between",children:[r.jsx("span",{className:"text-[#929bc9] text-xs uppercase font-bold",children:ra[ce.DEUTERIUM_TANK].name}),r.jsxs("span",{className:`text-sm font-mono ${n.deuterium>=n.storage.deuterium?"text-red-400 font-bold":"text-white"}`,children:[Math.floor(n.deuterium).toLocaleString()," / ",(n.storage.deuterium/1e3).toFixed(0),"k"]})]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:x.map(D=>{var Ve;const R=l[D.id],S=d("building",D.id,R),Q=n.metal>=S.metal&&n.crystal>=S.crystal&&n.deuterium>=S.deuterium,H=(_==null?void 0:_.itemId)===D.id,Z=h.filter(Se=>Se.type==="building").length>=2,fe=f(D.requirements),ze=(S.metal+S.crystal)/2500*3600*1e3/(j+1)/A,qe=Math.max(1,Math.floor(ze/1e3)),Ue=C(D.id,R);return r.jsxs("div",{className:`bg-[#1c2136] rounded-xl border border-white/10 overflow-hidden hover:border-primary/50 transition-all group flex flex-col h-full ${fe?"":"opacity-60 grayscale"}`,children:[r.jsxs("div",{className:"h-40 bg-cover bg-center relative",style:{backgroundImage:`url("${D.image}")`},children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#1c2136] to-transparent"}),r.jsxs("div",{className:"absolute top-2 right-2 bg-black/60 backdrop-blur px-2 py-1 rounded text-xs text-white border border-white/10 font-mono",children:["Lvl ",R]}),H&&r.jsxs("div",{className:"absolute inset-0 bg-black/70 flex flex-col items-center justify-center backdrop-blur-sm p-4 text-center",children:[r.jsx("div",{className:"bg-primary text-white px-3 py-1 rounded-full text-xs font-bold animate-pulse shadow-lg mb-2",children:"W Budowie"}),r.jsx("div",{className:"text-2xl font-mono font-bold text-white",children:p})]})]}),r.jsxs("div",{className:"p-4 flex flex-col flex-1",children:[r.jsx("h4",{className:"text-lg font-bold text-white mb-1 group-hover:text-primary transition-colors",children:D.name}),r.jsx("p",{className:"text-xs text-[#929bc9] mb-4 line-clamp-2 min-h-[32px]",children:D.description}),Ue&&r.jsxs("div",{className:"mb-3 flex flex-col gap-0.5",children:[r.jsx("div",{className:`text-xs font-bold ${Ue.type==="energy"?"text-yellow-400":"text-green-400"}`,children:Ue.text}),Ue.energyText&&r.jsx("div",{className:"text-xs font-bold text-red-400",children:Ue.energyText})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs mb-4",children:[r.jsxs("div",{className:`flex items-center gap-1 ${n.metal<S.metal?"text-red-400":"text-[#929bc9]"}`,children:[r.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"handyman"}),S.metal>=1e3?`${(S.metal/1e3).toFixed(1)}k`:S.metal]}),r.jsxs("div",{className:`flex items-center gap-1 ${n.crystal<S.crystal?"text-red-400":"text-[#929bc9]"}`,children:[r.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"diamond"}),S.crystal>=1e3?`${(S.crystal/1e3).toFixed(1)}k`:S.crystal]}),r.jsxs("div",{className:`flex items-center gap-1 ${n.deuterium<S.deuterium?"text-red-400":"text-[#929bc9]"}`,children:[r.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"propane"}),S.deuterium>=1e3?`${(S.deuterium/1e3).toFixed(1)}k`:S.deuterium]})]}),fe?r.jsxs("div",{className:"mt-auto pt-3 border-t border-white/5 flex items-center justify-between",children:[r.jsxs("span",{className:"text-xs text-[#929bc9] flex items-center gap-1",children:[r.jsx("span",{className:"material-symbols-outlined text-sm",children:"schedule"}),Ds(qe)]}),r.jsx("button",{onClick:()=>o(D.id),disabled:!Q||Z,className:`px-4 py-2 rounded text-xs font-bold uppercase transition-all shadow-lg
                                                ${!Q||Z?"bg-[#232948] text-[#929bc9]/50 cursor-not-allowed":"bg-primary hover:bg-blue-600 text-white hover:shadow-primary/30"}
                                            `,children:H?"Czekaj...":Q?"Rozbuduj":"Braki"})]}):r.jsxs("div",{className:"mt-auto pt-3 border-t border-red-500/20",children:[r.jsx("p",{className:"text-red-400 text-xs font-bold mb-1",children:"Wymagania:"}),r.jsx("div",{className:"flex flex-col gap-1",children:(Ve=D.requirements)==null?void 0:Ve.map((Se,ye)=>{const N=Se.type==="building"?ra[Se.id].name:kr[Se.id].name,J=Se.type==="building"?l[Se.id]:a[Se.id];return r.jsxs("div",{className:`text-xs ${J>=Se.level?"text-green-400":"text-red-400/70"}`,children:["- ",N," (Lvl ",Se.level,")"]},ye)})})]})]})]},D.id)})})]})},rv=()=>{var Q;const{ships:l,resources:a,buildShip:n,scrapShip:o,checkRequirements:d,buildings:h,research:f,shipyardQueue:g}=us(),b=Object.values(Ze).sort((H,G)=>{const Z=H.baseCost.metal+H.baseCost.crystal+H.baseCost.deuterium,fe=G.baseCost.metal+G.baseCost.crystal+G.baseCost.deuterium;return Z-fe}),p=h[ce.SHIPYARD],[v,x]=te.useState({}),[_,j]=te.useState(""),[A,C]=te.useState(!1),z=g[0];te.useEffect(()=>{if(!z){j("");return}const H=()=>{const Z=Date.now(),fe=Math.max(0,Math.floor((z.endTime-Z)/1e3));j(Ds(fe))};H();const G=setInterval(H,1e3);return()=>clearInterval(G)},[z]);const D=(H,G)=>{const Z=parseInt(G,10);!isNaN(Z)&&Z>=0?x(fe=>({...fe,[H]:Z})):G===""&&x(fe=>({...fe,[H]:0}))},R=H=>{const G=v[H.id]||0;G>0&&(n(H.id,G),x(Z=>({...Z,[H.id]:0})))},S=H=>{const G=v[H.id]||0;G>0&&confirm(`Czy na pewno chcesz zezomowa ${G}x ${H.name}? Odzyskasz 50% metalu i krysztau.`)&&(o(H.id,G),x(Z=>({...Z,[H.id]:0})))};return p===0?r.jsxs("div",{className:"bg-[#1c2136] border border-red-500/20 rounded-xl p-8 flex flex-col items-center justify-center text-center gap-4 mt-8",children:[r.jsx("span",{className:"material-symbols-outlined text-5xl text-red-500/50",children:"rocket_launch"}),r.jsx("h3",{className:"text-xl font-bold text-white",children:"Stocznia Wymagana"}),r.jsx("p",{className:"text-[#929bc9]",children:"Musisz wybudowa Stoczni w menu Budynki, aby rozpocz budow floty."})]}):r.jsxs("div",{className:"flex flex-col gap-6",children:[r.jsxs("div",{className:"flex items-center justify-between border-b border-white/10 pb-4",children:[r.jsxs("h2",{className:"text-3xl font-bold text-white flex items-center gap-3",children:[r.jsx("span",{className:"material-symbols-outlined text-3xl text-primary",children:"rocket_launch"}),"Stocznia"]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:()=>C(!A),className:`px-3 py-1 rounded-lg text-xs font-bold uppercase transition-colors border ${A?"bg-red-500/20 text-red-400 border-red-500/30":"bg-white/5 text-[#929bc9] border-white/10 hover:bg-white/10"}`,children:A?"Tryb Zomowania":"Zarzdzaj"}),z?r.jsxs("div",{className:"bg-primary/20 border border-primary/30 px-3 py-1 rounded text-xs text-primary flex items-center gap-2",children:[r.jsx("span",{className:"material-symbols-outlined text-sm animate-spin",children:"settings"}),"Budowa: ",((Q=Ze[z.itemId])==null?void 0:Q.name)||z.itemId," (",z.quantity,") - ",_]}):r.jsx("span",{className:"text-sm text-[#929bc9]",children:"Oczekuj na rozkazy"}),r.jsxs("span",{className:"text-sm text-[#929bc9] border-l border-white/10 pl-4",children:["Lvl ",p]})]})]}),g.length>0&&r.jsxs("div",{className:"bg-[#1c2136] border border-white/10 rounded-xl p-4 mb-4",children:[r.jsx("h3",{className:"text-sm font-bold text-[#929bc9] uppercase mb-3",children:"Kolejka Produkcyjna"}),r.jsx("div",{className:"flex flex-col gap-2",children:g.map((H,G)=>{var Z;return r.jsxs("div",{className:`flex items-center justify-between p-2 rounded ${G===0?"bg-primary/10 border border-primary/20":"bg-[#111422] border border-white/5"}`,children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"text-xs font-mono text-[#929bc9] w-4",children:[G+1,"."]}),r.jsx("div",{className:"font-bold text-sm text-white",children:((Z=Ze[H.itemId])==null?void 0:Z.name)||H.itemId}),r.jsxs("div",{className:"text-xs text-[#929bc9]",children:["x",H.quantity]})]}),r.jsx("div",{className:"text-xs font-mono text-white",children:G===0?_:Ds(Math.floor((H.endTime-H.startTime)/1e3))})]},H.id)})})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:b.map(H=>{var Ve;const G=l[H.id]||0,Z=v[H.id]||0,fe=d(H.requirements),we={metal:H.baseCost.metal*(Z||1),crystal:H.baseCost.crystal*(Z||1),deuterium:H.baseCost.deuterium*(Z||1)},ze=a.metal>=we.metal&&a.crystal>=we.crystal&&a.deuterium>=we.deuterium,qe=H.buildTime*1e3/(p+1),Ue=Math.max(1,Math.floor(qe*(Z||1)/1e3));return r.jsxs("div",{className:`bg-[#1c2136] border border-white/10 rounded-xl overflow-hidden group hover:border-primary/50 transition-all duration-300 relative ${fe?"":"opacity-50"} ${A?"border-red-500/20":""}`,children:[r.jsxs("div",{className:"absolute top-3 right-3 z-10 bg-black/60 backdrop-blur px-2 py-0.5 rounded text-xs text-[#929bc9] border border-white/10",children:["Posiadasz: ",r.jsx("span",{className:"text-white font-bold",children:G})]}),r.jsxs("div",{className:"h-40 lg:h-32 bg-cover bg-center relative",style:{backgroundImage:`url("${H.image}")`},children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#1c2136] to-transparent"}),!fe&&r.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-grayscale"}),A&&r.jsx("div",{className:"absolute inset-0 bg-red-900/40 backdrop-grayscale flex items-center justify-center",children:r.jsx("span",{className:"text-red-400 font-bold uppercase tracking-widest border-2 border-red-400 px-2 py-1 rotate-[-15deg] opacity-80",children:"Zomowanie"})})]}),r.jsxs("div",{className:"p-5 lg:p-3 relative",children:[r.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r.jsx("h4",{className:"text-white text-xl font-bold",children:H.name}),r.jsxs("div",{className:"flex flex-col gap-1 text-[10px] items-end",children:[r.jsxs("span",{className:"bg-red-500/10 text-red-400 px-1.5 py-0.5 rounded border border-red-500/20 whitespace-nowrap min-w-[80px] text-center",children:["Atak ",H.attack]}),r.jsxs("span",{className:"bg-blue-500/10 text-blue-400 px-1.5 py-0.5 rounded border border-blue-500/20 whitespace-nowrap min-w-[80px] text-center",children:["Obrona ",H.defense]}),r.jsxs("span",{className:"bg-green-500/10 text-green-400 px-1.5 py-0.5 rounded border border-green-500/20 whitespace-nowrap min-w-[80px] text-center",children:["adowno ",H.capacity]})]})]}),r.jsx("p",{className:"text-[#929bc9] text-xs mb-4 line-clamp-2 h-8",children:H.description}),A?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"p-3 bg-red-900/20 border border-red-500/20 rounded-lg mb-4",children:[r.jsx("p",{className:"text-red-300 text-xs mb-2",children:"Odzyskasz za sztuk:"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[r.jsxs("div",{className:"text-blue-200",children:["Metal: ",r.jsx("span",{className:"text-white font-mono",children:Math.floor(H.baseCost.metal*.5)})]}),r.jsxs("div",{className:"text-purple-200",children:["Kryszta: ",r.jsx("span",{className:"text-white font-mono",children:Math.floor(H.baseCost.crystal*.5)})]})]})]}),r.jsxs("div",{className:"flex items-center gap-2 mt-4",children:[r.jsxs("div",{className:"flex items-center bg-[#111422] rounded-lg border border-red-500/20 overflow-hidden shadow-sm",children:[r.jsx("button",{onClick:()=>D(H.id,Math.max(0,Z-1).toString()),className:"w-10 h-10 flex items-center justify-center text-red-400 hover:text-white hover:bg-red-500/20 transition-colors border-r border-red-500/10",children:r.jsx("span",{className:"material-symbols-outlined text-base",children:"remove"})}),r.jsx("input",{type:"number",min:"0",max:G,placeholder:"0",value:v[H.id]>0?v[H.id]:"",onChange:Se=>D(H.id,Se.target.value),className:"w-16 bg-transparent text-white text-sm text-center focus:outline-none appearance-none font-mono font-bold"}),r.jsx("button",{onClick:()=>D(H.id,(Z+1).toString()),className:"w-10 h-10 flex items-center justify-center text-red-400 hover:text-white hover:bg-red-500/20 transition-colors border-l border-red-500/10",children:r.jsx("span",{className:"material-symbols-outlined text-base",children:"add"})})]}),r.jsx("button",{onClick:()=>D(H.id,G.toString()),className:"h-10 px-3 rounded-lg bg-red-900/20 text-red-400 text-xs font-bold uppercase border border-red-500/20 hover:bg-red-500/30 transition-all",children:"Max"}),r.jsx("button",{onClick:()=>S(H),disabled:Z<=0||Z>G,className:`flex-1 h-10 rounded-lg text-sm font-bold uppercase transition-all shadow-lg flex items-center justify-center gap-2 active:scale-95
                                                ${Z>0&&Z<=G?"bg-red-600 hover:bg-red-500 text-white shadow-red-500/20":"bg-[#232948] text-[#929bc9] cursor-not-allowed opacity-50"}
                                            `,children:r.jsx("span",{className:"material-symbols-outlined text-lg",children:"delete"})})]})]}):r.jsxs(r.Fragment,{children:[H.bonuses&&Object.keys(H.bonuses).length>0&&r.jsxs("div",{className:"mb-3 text-[10px] text-[#929bc9]",children:[r.jsx("span",{className:"font-bold text-white uppercase block mb-1",children:"Silny przeciwko:"}),r.jsx("div",{className:"flex flex-wrap gap-1",children:Object.keys(H.bonuses).map(Se=>{var ye,N;return r.jsx("span",{className:"bg-primary/10 text-primary border border-primary/20 px-1.5 py-0.5 rounded flex items-center gap-1",children:((ye=Ze[Se])==null?void 0:ye.name)||((N=Zs[Se])==null?void 0:N.name)||Se},Se)})})]}),fe?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4 p-3 bg-[#111422] rounded-lg border border-white/5",children:[r.jsxs("div",{className:`flex flex-col text-xs ${a.metal<H.baseCost.metal?"text-red-400":"text-[#929bc9]"}`,children:[r.jsx("span",{className:"uppercase text-[10px] tracking-wider",children:"Metal"}),r.jsx("span",{className:"font-mono text-white",children:H.baseCost.metal.toLocaleString()})]}),r.jsxs("div",{className:`flex flex-col text-xs ${a.crystal<H.baseCost.crystal?"text-red-400":"text-[#929bc9]"}`,children:[r.jsx("span",{className:"uppercase text-[10px] tracking-wider",children:"Kryszta"}),r.jsx("span",{className:"font-mono text-white",children:H.baseCost.crystal.toLocaleString()})]}),r.jsxs("div",{className:`flex flex-col text-xs ${a.deuterium<H.baseCost.deuterium?"text-red-400":"text-[#929bc9]"}`,children:[r.jsx("span",{className:"uppercase text-[10px] tracking-wider",children:"Deuter"}),r.jsx("span",{className:"font-mono text-white",children:H.baseCost.deuterium.toLocaleString()})]})]}),r.jsx("div",{className:"flex items-center justify-between mb-3 text-xs text-[#929bc9]",children:r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx("span",{className:"material-symbols-outlined text-sm",children:"schedule"})," ",Ds(Ue)," (x",Z||1,")"]})}),r.jsxs("div",{className:"flex items-center gap-2 mt-4",children:[r.jsxs("div",{className:"flex items-center bg-[#111422] rounded-lg border border-white/10 overflow-hidden shadow-sm",children:[r.jsx("button",{onClick:()=>D(H.id,Math.max(0,Z-1).toString()),className:"w-10 h-10 flex items-center justify-center text-[#929bc9] hover:text-white hover:bg-white/5 active:bg-white/10 transition-colors border-r border-white/5",children:r.jsx("span",{className:"material-symbols-outlined text-base",children:"remove"})}),r.jsx("input",{type:"number",min:"0",placeholder:"0",value:v[H.id]>0?v[H.id]:"",onChange:Se=>D(H.id,Se.target.value),className:"w-16 bg-transparent text-white text-sm text-center focus:outline-none appearance-none font-mono font-bold"}),r.jsx("button",{onClick:()=>D(H.id,(Z+1).toString()),className:"w-10 h-10 flex items-center justify-center text-[#929bc9] hover:text-white hover:bg-white/5 active:bg-white/10 transition-colors border-l border-white/5",children:r.jsx("span",{className:"material-symbols-outlined text-base",children:"add"})})]}),r.jsx("button",{onClick:()=>{const Se=Math.floor(a.metal/H.baseCost.metal),ye=H.baseCost.crystal>0?Math.floor(a.crystal/H.baseCost.crystal):1/0,N=H.baseCost.deuterium>0?Math.floor(a.deuterium/H.baseCost.deuterium):1/0,J=Math.min(Se,ye,N);D(H.id,J.toString())},className:"h-10 px-3 rounded-lg bg-[#232948] text-[#929bc9] text-xs font-bold uppercase border border-white/5 hover:bg-primary/20 hover:text-primary hover:border-primary/30 transition-all active:scale-95",children:"Max"}),r.jsxs("button",{onClick:()=>R(H),disabled:Z<=0||!ze,className:`flex-1 h-10 rounded-lg text-sm font-bold uppercase transition-all shadow-lg flex items-center justify-center gap-2 active:scale-95
                                                        ${Z>0&&ze?"bg-primary hover:bg-blue-600 text-white shadow-primary/20":"bg-[#232948] text-[#929bc9] cursor-not-allowed opacity-50"}
                                                    `,children:[r.jsx("span",{className:"material-symbols-outlined text-lg",children:"precision_manufacturing"}),r.jsx("span",{children:"Produkuj"})]})]})]}):r.jsxs("div",{className:"p-3 bg-red-500/10 border border-red-500/20 rounded-lg",children:[r.jsx("p",{className:"text-red-400 text-xs font-bold mb-1",children:"Wymagane technologie:"}),r.jsx("div",{className:"flex flex-col gap-1",children:(Ve=H.requirements)==null?void 0:Ve.map((Se,ye)=>{const N=Se.type==="building"?ra[Se.id].name:kr[Se.id].name,J=Se.type==="building"?h[Se.id]:f[Se.id];return r.jsxs("div",{className:`text-xs ${J>=Se.level?"text-green-400":"text-red-400/70"}`,children:["- ",N," (Lvl ",Se.level,")"]},ye)})})]})]})]})]},H.id)})})]})},nv=()=>{const{planetName:l,ships:a,sendSpyProbe:n,sendAttack:o,sendTransport:d,sendColonize:h,planets:f,resources:g,galaxyCoords:b,mainPlanetCoords:p,planetType:v,getPlayersInSystem:x,userId:_,buildings:j,currentPlanetId:A,mainPlanetName:C,level:z,debris:D}=us(),[R,S]=te.useState({galaxy:(b==null?void 0:b.galaxy)||1,system:(b==null?void 0:b.system)||1}),[Q,H]=te.useState([]),[G,Z]=te.useState(null),[fe,we]=te.useState(null),[ze,qe]=te.useState(null),[Ue,Ve]=te.useState(null),[Se,ye]=te.useState({}),[N,J]=te.useState({metal:0,crystal:0,deuterium:0}),[ie,ge]=te.useState(1),[Te,k]=te.useState(null),[X,me]=te.useState({metal:0,crystal:0,deuterium:0}),[be,_e]=te.useState(null);_i.useEffect(()=>{x(R.galaxy,R.system).then(H)},[R.galaxy,R.system,x]);const Le=he=>{var dt,Bt,nt,fs,ms;const ae=p||b;if(ae&&R.galaxy===ae.galaxy&&R.system===ae.system&&ae.position===he){const Ht=v==="ice"?"Lodowa":v==="desert"?"Pustynna":"Ziemiopodobna";return{name:A?C||"Gwna":l,player:"Ty",rank:z||1,img:Tr[v]||He.planet,type:Ht,isPlayer:!0,activity:"",isSelected:!A,debris:D||{metal:0,crystal:0}}}const Pe=f.find(Ht=>{var ds,Zt,Ar;return((ds=Ht.galaxy_coords)==null?void 0:ds.galaxy)===R.galaxy&&((Zt=Ht.galaxy_coords)==null?void 0:Zt.system)===R.system&&((Ar=Ht.galaxy_coords)==null?void 0:Ar.position)===he});if(Pe){const Ht=Pe.planet_type==="ice"?"Lodowa":Pe.planet_type==="desert"?"Pustynna":"Ziemiopodobna";return{name:Pe.planet_name||"Kolonia",player:"Ty (Kolonia)",rank:z||1,img:Tr[Pe.planet_type]||He.planet,type:Ht,isPlayer:!0,isColony:!0,colonyId:Pe.id,activity:"",debris:Pe.debris||{metal:0,crystal:0}}}const Ge=Q.find(Ht=>{var ds;return((ds=Ht.galaxy_coords)==null?void 0:ds.position)===he&&Ht.id!==_});if(Ge){const Ht=((dt=Ge.production_settings)==null?void 0:dt.planetType)==="ice"?"Lodowa":((Bt=Ge.production_settings)==null?void 0:Bt.planetType)==="desert"?"Pustynna":"Ziemiopodobna";(nt=Ge.production_settings)!=null&&nt.avatarUrl;const ds=Ge.level||1;return{name:Ge.planet_name||"Nieznana Kolonia",player:((fs=Ge.production_settings)==null?void 0:fs.nickname)||"Gracz",rank:ds,img:Tr[(ms=Ge.production_settings)==null?void 0:ms.planetType]||He.planet,type:Ht,isPlayer:!1,isBot:!1,activity:"",debris:Ge.debris||{metal:0,crystal:0}}}return null},Je=he=>{const ae=Le(he);ae&&(we({galaxy:R.galaxy,system:R.system,pos:he,name:ae.name}),ge(1),_e(null))},Rt=async()=>{if(!fe)return;await n(ie,{galaxy:R.galaxy,system:R.system,position:fe.pos})!==!1?(_e("Wysyanie sond..."),setTimeout(()=>{R.galaxy===1&&R.system===1&&fe.pos===2&&Z({metal:Math.floor(Math.random()*5e4)+1e4,crystal:Math.floor(Math.random()*3e4)+5e3,deuterium:Math.floor(Math.random()*1e4)+2e3,energy:4e3,ships:Math.floor(Math.random()*50),defense:Math.floor(Math.random()*20)}),we(null)},1500)):_e("Brak wystarczajcej iloci sond!")},ft=he=>{S(ae=>{const Pe=ae.system+he;return Pe<1||Pe>499?ae:{...ae,system:Pe}})},$e=he=>{S(ae=>{const Pe=ae.galaxy+he;return Pe<1||Pe>9?ae:{...ae,galaxy:Pe}})},zt=Array.from({length:15},(he,ae)=>ae+1),ot=a[ue.ESPIONAGE_PROBE]||0;return r.jsxs("div",{className:"flex flex-col gap-6 pb-20 relative min-h-full",children:[r.jsxs("div",{className:"absolute top-20 left-1/2 -translate-x-1/2 pointer-events-none z-0 opacity-40 w-full flex justify-center overflow-hidden",children:[r.jsx("div",{className:"w-[600px] h-[600px] rounded-full bg-yellow-500/20 blur-[120px] -translate-y-1/2"}),r.jsx("div",{className:"absolute top-0 w-[300px] h-[300px] rounded-full bg-orange-500/10 blur-[60px] animate-pulse -translate-y-1/2"})]}),r.jsx("div",{className:"bg-[#1c2136] p-4 rounded-xl border border-white/10 shadow-lg sticky top-0 z-20 backdrop-blur-md bg-opacity-90",children:r.jsx("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between",children:r.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[r.jsxs("div",{className:"flex-1 flex flex-col gap-1",children:[r.jsx("span",{className:"text-[10px] uppercase font-bold text-[#929bc9] tracking-wider text-center",children:"Galaktyka"}),r.jsxs("div",{className:"flex items-center h-10 md:h-12 bg-[#111422] rounded-lg border border-white/10 overflow-hidden",children:[r.jsx("button",{onClick:()=>$e(-1),className:"w-8 md:w-12 h-full hover:bg-white/5 active:bg-white/10 flex items-center justify-center text-[#929bc9]",children:r.jsx("span",{className:"material-symbols-outlined text-lg",children:"chevron_left"})}),r.jsx("div",{className:"flex-1 text-center font-mono font-bold text-lg md:text-xl text-white",children:R.galaxy}),r.jsx("button",{onClick:()=>$e(1),className:"w-8 md:w-12 h-full hover:bg-white/5 active:bg-white/10 flex items-center justify-center text-[#929bc9]",children:r.jsx("span",{className:"material-symbols-outlined text-lg",children:"chevron_right"})})]})]}),r.jsxs("div",{className:"flex-1 flex flex-col gap-1",children:[r.jsx("span",{className:"text-[10px] uppercase font-bold text-[#929bc9] tracking-wider text-center",children:"Ukad"}),r.jsxs("div",{className:"flex items-center h-10 md:h-12 bg-[#111422] rounded-lg border border-white/10 overflow-hidden",children:[r.jsx("button",{onClick:()=>ft(-1),className:"w-8 md:w-12 h-full hover:bg-white/5 active:bg-white/10 flex items-center justify-center text-[#929bc9]",children:r.jsx("span",{className:"material-symbols-outlined text-lg",children:"chevron_left"})}),r.jsx("div",{className:"flex-1 text-center font-mono font-bold text-lg md:text-xl text-white",children:R.system}),r.jsx("button",{onClick:()=>ft(1),className:"w-8 md:w-12 h-full hover:bg-white/5 active:bg-white/10 flex items-center justify-center text-[#929bc9]",children:r.jsx("span",{className:"material-symbols-outlined text-lg",children:"chevron_right"})})]})]})]})})}),r.jsx("div",{className:"flex flex-col gap-3 relative z-10",children:zt.map(he=>{const ae=Le(he);return r.jsxs("div",{className:`relative flex items-center gap-2 md:gap-3 p-2 md:p-3 rounded-xl border transition-all ${ae!=null&&ae.isPlayer?"bg-[#1a2342] border-primary/40 shadow-[0_0_15px_rgba(59,130,246,0.15)]":"bg-[#1c2136] border-white/5 hover:border-white/20"}`,children:[r.jsx("div",{className:"flex flex-col items-center justify-center w-6 md:w-8 text-[#929bc9] font-mono text-xs md:text-sm opacity-50",children:he}),r.jsx("div",{className:"shrink-0",children:ae?r.jsxs("div",{className:"w-10 h-10 md:w-12 md:h-12 rounded-full shadow-lg relative overflow-hidden bg-black/20",children:[r.jsx("img",{src:ae.img,alt:"Planet",className:"w-full h-full object-cover"}),r.jsx("div",{className:"absolute inset-0 rounded-full bg-black/10"}),r.jsx("div",{className:"absolute -inset-1 rounded-full border border-white/10 opacity-50"})]}):r.jsx("div",{className:"w-10 h-10 md:w-12 md:h-12 rounded-full border-2 border-dashed border-white/10 flex items-center justify-center opacity-20",children:r.jsx("span",{className:"material-symbols-outlined text-white text-base",children:"add"})})}),r.jsx("div",{className:"flex-1 min-w-0",children:ae?r.jsxs("div",{className:"flex flex-col justify-center",children:[r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r.jsx("span",{className:`font-bold text-sm md:text-base truncate ${ae.isPlayer?"text-primary":ae.isBot?"text-red-400":"text-white"}`,children:ae.name}),r.jsxs("span",{className:"text-[#929bc9] text-sm",children:["(",ae.player,")"]}),ae.activity&&r.jsx("span",{className:"text-[9px] text-red-400",children:"(*)"})]}),ae.rank&&r.jsxs("div",{className:"text-xs text-green-400 font-mono",children:["Level ",ae.rank]}),ae.debris&&((ae.debris.metal||0)>0||(ae.debris.crystal||0)>0)&&r.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-orange-400 mt-1",title:`Pole Zniszcze: Metal ${ae.debris.metal||0}, Kryszta ${ae.debris.crystal||0}`,children:[r.jsx("span",{className:"material-symbols-outlined text-[10px]",children:"recycling"}),r.jsxs("span",{children:["M:",((ae.debris.metal||0)/1e3).toFixed(1),"k C:",((ae.debris.crystal||0)/1e3).toFixed(1),"k"]})]})]}):r.jsx("span",{className:"text-white/20 text-xs md:text-sm italic",children:"Pusta przestrze"})}),r.jsx("div",{className:"flex items-center gap-1",children:ae?r.jsxs("div",{className:"flex gap-1",children:[ae.debris&&((ae.debris.metal||0)>0||(ae.debris.crystal||0)>0)&&r.jsx("button",{onClick:()=>{console.log("Open Recycle Modal")},className:"w-8 h-8 rounded bg-white/5 hover:bg-orange-500/20 hover:text-orange-400 text-[#929bc9] flex items-center justify-center border border-white/5 transition-colors",title:"Recykling (Wymaga Recyklera)",children:r.jsx("span",{className:"material-symbols-outlined text-lg",children:"recycling"})}),ae.isPlayer&&!ae.isSelected?r.jsx("button",{onClick:()=>{Ve({galaxy:R.galaxy,system:R.system,pos:he,name:ae.name}),ye({}),J({metal:0,crystal:0,deuterium:0}),_e(null)},className:"w-8 h-8 rounded bg-white/5 hover:bg-blue-500/20 hover:text-blue-400 text-[#929bc9] flex items-center justify-center border border-white/5 transition-colors",title:"Transportuj Surowce",children:r.jsx("span",{className:"material-symbols-outlined text-lg",children:"local_shipping"})}):!ae.isPlayer&&!ae.isBot?r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>Je(he),className:"w-8 h-8 rounded bg-white/5 hover:bg-purple-500/20 hover:text-purple-400 text-[#929bc9] flex items-center justify-center border border-white/5 transition-colors",title:"Szpieguj",children:r.jsx("span",{className:"material-symbols-outlined text-lg",children:"visibility"})}),r.jsx("button",{onClick:()=>{qe({galaxy:R.galaxy,system:R.system,pos:he,name:ae.name}),ye({}),_e(null)},className:"w-8 h-8 rounded bg-white/5 hover:bg-red-500/20 hover:text-red-400 text-[#929bc9] flex items-center justify-center border border-white/5 transition-colors",title:"Atakuj",children:r.jsx("span",{className:"material-symbols-outlined text-lg",children:"swords"})}),r.jsx("button",{onClick:()=>{Ve({galaxy:R.galaxy,system:R.system,pos:he,name:ae.name}),ye({}),J({metal:0,crystal:0,deuterium:0}),_e(null)},className:"w-8 h-8 rounded bg-white/5 hover:bg-blue-500/20 hover:text-blue-400 text-[#929bc9] flex items-center justify-center border border-white/5 transition-colors",title:"Transportuj",children:r.jsx("span",{className:"material-symbols-outlined text-lg",children:"local_shipping"})})]}):ae.isBot&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>Je(he),className:"w-8 h-8 rounded bg-white/5 hover:bg-purple-500/20 hover:text-purple-400 text-[#929bc9] flex items-center justify-center border border-white/5 transition-colors",title:"Szpieguj",children:r.jsx("span",{className:"material-symbols-outlined text-lg",children:"visibility"})}),r.jsx("button",{onClick:()=>{qe({galaxy:R.galaxy,system:R.system,pos:he,name:ae.name}),ye({}),_e(null)},className:"w-8 h-8 rounded bg-white/5 hover:bg-red-500/20 hover:text-red-400 text-[#929bc9] flex items-center justify-center border border-white/5 transition-colors",title:"Atakuj",children:r.jsx("span",{className:"material-symbols-outlined text-lg",children:"swords"})})]})]}):r.jsx("button",{onClick:()=>{if((a[ue.COLONY_SHIP]||0)<1){alert("Potrzebujesz Statku Kolonizacyjnego!");return}if(f.length>=8){alert("Osigne limit 8 planet!");return}k({galaxy:R.galaxy,system:R.system,pos:he}),me({metal:0,crystal:0,deuterium:0})},className:"w-8 h-8 rounded bg-white/5 hover:bg-green-500/20 hover:text-green-400 text-[#929bc9] flex items-center justify-center border border-white/5 transition-colors",title:`Kolonizuj (Masz: ${a[ue.COLONY_SHIP]||0} statkw kolonizacyjnych)`,children:r.jsx("span",{className:"material-symbols-outlined text-lg",children:"flag"})})})]},he)})}),fe&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",children:r.jsxs("div",{className:"bg-[#1c2136] w-full max-w-sm rounded-xl border border-purple-500/50 shadow-2xl p-6 relative",children:[r.jsx("button",{onClick:()=>we(null),className:"absolute top-4 right-4 text-[#929bc9] hover:text-white",children:r.jsx("span",{className:"material-symbols-outlined",children:"close"})}),r.jsxs("div",{className:"flex items-center gap-3 mb-6 border-b border-white/10 pb-4",children:[r.jsx("span",{className:"material-symbols-outlined text-purple-400 text-3xl",children:"visibility"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-bold text-white",children:"Wylij Sondy"}),r.jsxs("p",{className:"text-xs text-[#929bc9]",children:["Cel: ",fe.name," [",fe.galaxy,":",fe.system,":",fe.pos,"]"]})]})]}),be?r.jsx("div",{className:"text-center py-4",children:r.jsx("p",{className:`text-lg font-bold ${be.includes("Wysyanie")?"text-green-400":"text-red-400"}`,children:be})}):r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsxs("div",{className:"bg-[#111422] p-4 rounded-lg border border-white/5 text-center",children:[r.jsx("p",{className:"text-sm text-[#929bc9] mb-2",children:"Dostpne sondy"}),r.jsx("p",{className:"text-2xl font-mono text-white font-bold",children:ot})]}),r.jsxs("div",{className:"flex items-center bg-[#111422] rounded-lg border border-white/10 overflow-hidden",children:[r.jsx("button",{onClick:()=>ge(Math.max(1,ie-1)),className:"w-12 h-12 flex items-center justify-center text-[#929bc9] hover:bg-white/5",children:r.jsx("span",{className:"material-symbols-outlined",children:"remove"})}),r.jsx("input",{type:"number",className:"flex-1 bg-transparent text-center text-white font-bold text-lg focus:outline-none",value:ie,onFocus:he=>he.target.select(),onChange:he=>ge(Math.min(ot,Math.max(1,parseInt(he.target.value)||1))),max:ot}),r.jsx("button",{onClick:()=>ge(Math.min(ot,ie+1)),className:"w-12 h-12 flex items-center justify-center text-[#929bc9] hover:bg-white/5",children:r.jsx("span",{className:"material-symbols-outlined",children:"add"})})]}),r.jsx("button",{onClick:Rt,disabled:ot<1,className:`w-full py-3 rounded-lg font-bold uppercase tracking-widest transition-colors ${ot>0?"bg-purple-600 hover:bg-purple-500 text-white":"bg-[#232948] text-white/20 cursor-not-allowed"}`,children:"Wylij Flot"})]})]})}),ze&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",children:r.jsxs("div",{className:"bg-[#1c2136] w-full max-w-lg rounded-xl border border-red-500/50 shadow-2xl p-6 relative max-h-[90vh] overflow-y-auto",children:[r.jsx("button",{onClick:()=>qe(null),className:"absolute top-4 right-4 text-[#929bc9] hover:text-white",children:r.jsx("span",{className:"material-symbols-outlined",children:"close"})}),r.jsxs("div",{className:"flex items-center gap-3 mb-6 border-b border-white/10 pb-4",children:[r.jsx("span",{className:"material-symbols-outlined text-red-500 text-3xl",children:"swords"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-bold text-white",children:"Rozpocznij Atak"}),r.jsxs("p",{className:"text-xs text-[#929bc9]",children:["Cel: ",ze.name," [",ze.galaxy,":",ze.system,":",ze.pos,"]"]})]})]}),be?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("p",{className:`text-xl font-bold ${be.includes("Wysyanie")?"text-green-400":"text-red-400"}`,children:be}),be.includes("Wysyanie")&&r.jsx("p",{className:"text-sm text-[#929bc9] mt-2",children:"Flota dotrze do celu za 5 minut."})]}):r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[Object.entries(a).map(([he,ae])=>{var Ge;if(ae<=0||he==="solarSatellite"||he==="crawlers")return null;const Pe=Se[he]||0;return r.jsxs("div",{className:"flex items-center justify-between bg-[#111422] p-3 rounded-lg border border-white/5",children:[r.jsx("span",{className:"text-sm text-[#929bc9] font-bold capitalize",children:(Ge=Ze[he])==null?void 0:Ge.name}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:"text-xs text-[#555a7a] mr-2",children:["Dostpne: ",ae]}),r.jsx("input",{type:"number",max:ae,min:0,value:Pe,onFocus:dt=>dt.target.select(),onChange:dt=>{const Bt=Math.min(ae,Math.max(0,parseInt(dt.target.value)||0));ye(nt=>({...nt,[he]:Bt}))},className:"w-20 bg-black/20 border border-white/10 rounded px-2 py-1 text-right text-white focus:outline-none focus:border-red-500"}),r.jsx("button",{onClick:()=>ye(dt=>({...dt,[he]:ae})),className:"text-xs text-red-400 hover:text-white px-2 uppercase font-bold",children:"Max"})]})]},he)}),Object.values(a).every(he=>!he)&&r.jsx("p",{className:"text-center text-white/20 italic",children:"Brak dostpnych statkw bojowych."})]}),r.jsx("button",{onClick:()=>{if(!Object.values(Se).some(ae=>ae>0)){_e("Wybierz przynajmniej jeden statek!");return}o(Se,{galaxy:R.galaxy,system:R.system,position:ze.pos}),_e("Wysyanie floty..."),setTimeout(()=>qe(null),2e3)},className:"w-full py-4 mt-2 bg-gradient-to-r from-red-600 to-red-800 hover:from-red-500 hover:to-red-700 text-white font-bold uppercase tracking-widest rounded-lg shadow-lg shadow-red-900/20 transition-all active:scale-95",children:"Wylij Atak"})]})]})}),Ue&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",children:r.jsxs("div",{className:"bg-[#1c2136] w-full max-w-lg rounded-xl border border-blue-500/50 shadow-2xl p-6 relative max-h-[90vh] overflow-y-auto",children:[r.jsx("button",{onClick:()=>Ve(null),className:"absolute top-4 right-4 text-[#929bc9] hover:text-white",children:r.jsx("span",{className:"material-symbols-outlined",children:"close"})}),r.jsxs("div",{className:"flex items-center gap-3 mb-6 border-b border-white/10 pb-4",children:[r.jsx("span",{className:"material-symbols-outlined text-blue-500 text-3xl",children:"local_shipping"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-bold text-white",children:"Transportuj Surowce"}),r.jsxs("p",{className:"text-xs text-[#929bc9]",children:["Cel: ",Ue.name," [",Ue.galaxy,":",Ue.system,":",Ue.pos,"]"]})]})]}),be?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("p",{className:`text-xl font-bold ${be.includes("Wysyanie")?"text-green-400":"text-blue-400"}`,children:be}),be.includes("Wysyanie")&&r.jsx("p",{className:"text-sm text-[#929bc9] mt-2",children:"Dostawa dotrze za 5 minut."})]}):r.jsxs("div",{className:"flex flex-col gap-6",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-bold text-white mb-2",children:"Wybierz Statki"}),r.jsxs("div",{className:"grid grid-cols-1 gap-2 bg-[#111422] p-2 rounded-lg border border-white/5",children:[Object.entries(a).map(([he,ae])=>{var Ge;if(ae<=0||he==="solarSatellite"||he==="crawlers"||he==="espionageProbe")return null;const Pe=Se[he]||0;return r.jsxs("div",{className:"flex items-center justify-between p-2 rounded hover:bg-white/5",children:[r.jsx("span",{className:"text-xs text-[#929bc9] font-bold capitalize",children:(Ge=Ze[he])==null?void 0:Ge.name}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:"text-[10px] text-[#555a7a] mr-1",children:["Max: ",ae]}),r.jsx("input",{type:"number",max:ae,min:0,value:Pe,onFocus:dt=>dt.target.select(),onChange:dt=>{const Bt=Math.min(ae,Math.max(0,parseInt(dt.target.value)||0));ye(nt=>({...nt,[he]:Bt}))},className:"w-16 bg-black/20 border border-white/10 rounded px-1 py-1 text-right text-xs text-white focus:outline-none focus:border-blue-500"}),r.jsx("button",{onClick:()=>ye(dt=>({...dt,[he]:ae})),className:"text-[10px] text-blue-400 hover:text-white px-1 font-bold",children:"ALL"})]})]},he)}),Object.values(a).every(he=>!he)&&r.jsx("p",{className:"text-center text-white/20 italic text-xs",children:"Brak dostpnych transporterw."})]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-end mb-2",children:[r.jsx("h4",{className:"text-sm font-bold text-white",children:"Zaaduj Surowce"}),r.jsxs("span",{className:`text-xs font-mono ${N.metal+N.crystal+N.deuterium>Object.entries(Se).reduce((he,[ae,Pe])=>{var Ge;return he+Pe*(((Ge=Ze[ae])==null?void 0:Ge.capacity)||0)},0)?"text-red-400":"text-blue-400"}`,children:["adowno: ",(N.metal+N.crystal+N.deuterium).toLocaleString()," / ",Object.entries(Se).reduce((he,[ae,Pe])=>{var Ge;return he+Pe*(((Ge=Ze[ae])==null?void 0:Ge.capacity)||0)},0).toLocaleString()]})]}),r.jsx("div",{className:"flex flex-col gap-2",children:["metal","crystal","deuterium"].map(he=>{const ae=he,Pe=Object.entries(Se).reduce((nt,[fs,ms])=>{var Ht;return nt+ms*(((Ht=Ze[fs])==null?void 0:Ht.capacity)||0)},0),dt=N.metal+N.crystal+N.deuterium-(N[ae]||0),Bt=Math.max(0,Pe-dt);return Math.min(g[ae]||0,Bt),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-20 text-xs uppercase font-bold text-[#929bc9]",children:he==="metal"?"Metal":he==="crystal"?"Kryszta":"Deuter"}),r.jsxs("div",{className:"flex-1 relative",children:[r.jsx("input",{type:"number",value:N[ae]||0,onFocus:nt=>nt.target.select(),onChange:nt=>{const fs=Math.max(0,parseInt(nt.target.value)||0);J(ms=>({...ms,[ae]:fs}))},className:`w-full bg-[#111422] border rounded px-3 py-2 text-white font-mono text-sm focus:border-blue-500 outline-none ${N[ae]>(g[ae]||0)?"border-red-500 text-red-400":"border-white/10"}`,placeholder:"0"}),r.jsx("button",{onClick:()=>J(nt=>{const fs=nt[ae],ms=nt.metal+nt.crystal+nt.deuterium-fs,Ht=Math.max(0,Pe-ms),ds=Math.min(g[ae]||0,Ht);return{...nt,[ae]:ds}}),className:"absolute right-2 top-1/2 -translate-y-1/2 text-[10px] text-blue-400 hover:text-white font-bold uppercase",children:"MAX"})]}),r.jsxs("div",{className:"text-[10px] text-[#929bc9] w-16 text-right",children:["/ ",(g[ae]||0).toLocaleString()]})]},he)})})]}),r.jsx("button",{onClick:()=>{if(!Object.values(Se).some(Ge=>Ge>0)){_e("Wybierz statki transportowe!");return}const ae=N.metal+N.crystal+N.deuterium,Pe=Object.entries(Se).reduce((Ge,[dt,Bt])=>{var nt;return Ge+Bt*(((nt=Ze[dt])==null?void 0:nt.capacity)||0)},0);if(ae>Pe){_e(`Przeadowanie! (Limit: ${Pe.toLocaleString()})`);return}d(Se,N,{galaxy:R.galaxy,system:R.system,position:Ue.pos}),_e("Wysyanie floty transportowej..."),setTimeout(()=>Ve(null),2e3)},className:"w-full py-4 bg-gradient-to-r from-blue-600 to-blue-800 hover:from-blue-500 hover:to-blue-700 text-white font-bold uppercase tracking-widest rounded-lg shadow-lg shadow-blue-900/20 transition-all active:scale-95",children:"Wylij Transport"})]})]})}),G&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",children:r.jsxs("div",{className:"bg-[#1c2136] w-full max-w-md rounded-xl border border-purple-500/50 shadow-2xl p-6 relative",children:[r.jsx("button",{onClick:()=>Z(null),className:"absolute top-4 right-4 text-[#929bc9] hover:text-white",children:r.jsx("span",{className:"material-symbols-outlined",children:"close"})}),r.jsxs("div",{className:"flex items-center gap-3 mb-6 border-b border-white/10 pb-4",children:[r.jsx("span",{className:"material-symbols-outlined text-purple-400 text-3xl",children:"description"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-bold text-white",children:"Raport Szpiegowski"}),r.jsx("p",{className:"text-xs text-[#929bc9]",children:"Baza Piracka [1:1:2]"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[r.jsxs("div",{className:"bg-[#111422] p-3 rounded-lg border border-white/5",children:[r.jsx("span",{className:"text-[10px] uppercase font-bold text-[#929bc9]",children:"Surowce"}),r.jsxs("div",{className:"flex flex-col gap-1 mt-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-[#929bc9]",children:"Metal"})," ",r.jsx("span",{className:"text-white font-mono",children:G.metal.toLocaleString()})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-[#929bc9]",children:"Kryszta"})," ",r.jsx("span",{className:"text-white font-mono",children:G.crystal.toLocaleString()})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-[#929bc9]",children:"Deuter"})," ",r.jsx("span",{className:"text-white font-mono",children:G.deuterium.toLocaleString()})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-[#929bc9]",children:"Energia"})," ",r.jsx("span",{className:"text-white font-mono",children:G.energy.toLocaleString()})]})]})]}),r.jsxs("div",{className:"bg-[#111422] p-3 rounded-lg border border-white/5",children:[r.jsx("span",{className:"text-[10px] uppercase font-bold text-[#929bc9]",children:"Flota i Obrona"}),r.jsxs("div",{className:"flex flex-col gap-1 mt-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-[#929bc9]",children:"Statki"})," ",r.jsx("span",{className:"text-red-400 font-mono font-bold",children:G.ships})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-[#929bc9]",children:"Obrona"})," ",r.jsx("span",{className:"text-blue-400 font-mono font-bold",children:G.defense})]})]})]})]}),r.jsx("button",{onClick:()=>Z(null),className:"w-full py-3 bg-purple-600 hover:bg-purple-500 text-white font-bold rounded-lg transition-colors",children:"Zamknij Raport"})]})}),Te&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",children:r.jsxs("div",{className:"bg-[#1c2136] w-full max-w-md rounded-xl border border-green-500/50 shadow-2xl p-6 relative",children:[r.jsx("button",{onClick:()=>k(null),className:"absolute top-4 right-4 text-[#929bc9] hover:text-white",children:r.jsx("span",{className:"material-symbols-outlined",children:"close"})}),r.jsxs("div",{className:"flex items-center gap-3 mb-6 border-b border-white/10 pb-4",children:[r.jsx("span",{className:"material-symbols-outlined text-green-400 text-3xl",children:"flag"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-bold text-white",children:"Kolonizuj Planet"}),r.jsxs("p",{className:"text-xs text-[#929bc9]",children:["[",Te.galaxy,":",Te.system,":",Te.pos,"]"]})]})]}),r.jsxs("div",{className:"bg-[#111422] p-4 rounded-lg border border-white/5 mb-4",children:[r.jsx("p",{className:"text-sm text-[#929bc9] mb-2",children:"Statek Kolonizacyjny zostanie zuyty."}),r.jsxs("p",{className:"text-xs text-green-400",children:["Posiadasz: ",a[ue.COLONY_SHIP]||0," statkw kolonizacyjnych"]}),r.jsxs("p",{className:"text-xs text-yellow-400 mt-1",children:["Planety: ",f.length,"/8"]})]}),r.jsxs("div",{className:"mb-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("p",{className:"text-sm font-bold text-white",children:"Wylij surowce z now koloni:"}),r.jsx("button",{onClick:()=>me({metal:Math.min(g.metal,15e3),crystal:Math.min(g.crystal,15e3),deuterium:Math.min(g.deuterium,15e3)}),className:"px-2 py-1 bg-green-600/20 hover:bg-green-600/40 text-green-400 text-xs font-bold rounded border border-green-500/30",children:"MAX (15k)"})]}),r.jsx("p",{className:"text-xs text-yellow-400 mb-3",children:"Limit: 15,000 kadego surowca"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-[#929bc9] text-xs w-16",children:"Metal:"}),r.jsx("input",{type:"number",min:"0",max:"15000",value:X.metal,onFocus:he=>he.target.select(),onChange:he=>me(ae=>({...ae,metal:Math.min(15e3,Math.max(0,parseInt(he.target.value)||0))})),className:"flex-1 bg-[#111422] border border-white/10 rounded px-2 py-1 text-white text-sm"}),r.jsx("span",{className:"text-gray-500 text-xs",children:"/ 15k"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-[#929bc9] text-xs w-16",children:"Kryszta:"}),r.jsx("input",{type:"number",min:"0",max:"15000",value:X.crystal,onFocus:he=>he.target.select(),onChange:he=>me(ae=>({...ae,crystal:Math.min(15e3,Math.max(0,parseInt(he.target.value)||0))})),className:"flex-1 bg-[#111422] border border-white/10 rounded px-2 py-1 text-white text-sm"}),r.jsx("span",{className:"text-gray-500 text-xs",children:"/ 15k"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-[#929bc9] text-xs w-16",children:"Deuter:"}),r.jsx("input",{type:"number",min:"0",max:"15000",value:X.deuterium,onFocus:he=>he.target.select(),onChange:he=>me(ae=>({...ae,deuterium:Math.min(15e3,Math.max(0,parseInt(he.target.value)||0))})),className:"flex-1 bg-[#111422] border border-white/10 rounded px-2 py-1 text-white text-sm"}),r.jsx("span",{className:"text-gray-500 text-xs",children:"/ 15k"})]})]})]}),r.jsxs("button",{onClick:async()=>{const he={galaxy:Te.galaxy,system:Te.system,position:Te.pos};console.log(" [COLONIZE] Sending to coords:",he),await h(he,X)&&(k(null),_e(" Nowa kolonia zaoona!"))},className:"w-full py-3 bg-green-600 hover:bg-green-500 text-white font-bold rounded-lg transition-colors flex items-center justify-center gap-2",children:[r.jsx("span",{className:"material-symbols-outlined",children:"rocket_launch"}),"Kolonizuj!"]})]})})]})},iv=()=>{const{research:l,buildings:a,resources:n,upgradeResearch:o,getCost:d,constructionQueue:h,checkRequirements:f}=us(),[g,b]=te.useState(""),p=Object.values(kr),v=a[ce.RESEARCH_LAB],x=h.find(j=>j.type==="research"),_=100;return te.useEffect(()=>{if(!x){b("");return}const j=()=>{const C=Date.now(),z=Math.max(0,Math.floor((x.endTime-C)/1e3));b(Ds(z))};j();const A=setInterval(j,1e3);return()=>clearInterval(A)},[x]),r.jsxs("div",{className:"flex flex-col gap-6",children:[r.jsxs("div",{className:"flex items-center justify-between border-b border-white/10 pb-4",children:[r.jsxs("h2",{className:"text-3xl font-bold text-white flex items-center gap-3",children:[r.jsx("span",{className:"material-symbols-outlined text-3xl text-purple-400",children:"science"}),"Badania"]}),r.jsx("div",{className:"flex gap-2",children:x?r.jsxs("div",{className:"bg-purple-900/30 border border-purple-500/30 px-3 py-1 rounded text-xs text-purple-300 flex items-center gap-2",children:[r.jsx("span",{className:"material-symbols-outlined text-sm animate-spin",children:"sync"}),"Badanie w toku: ",g]}):r.jsxs("span",{className:"text-sm text-[#929bc9]",children:["Laboratorium: Lvl ",v]})})]}),v===0?r.jsxs("div",{className:"bg-[#1c2136] border border-red-500/20 rounded-xl p-8 flex flex-col items-center justify-center text-center gap-4",children:[r.jsx("span",{className:"material-symbols-outlined text-5xl text-red-500/50",children:"block"}),r.jsx("h3",{className:"text-xl font-bold text-white",children:"Laboratorium Badawcze Wymagane"}),r.jsx("p",{className:"text-[#929bc9]",children:"Musisz wybudowa Laboratorium Badawcze w menu Budynki, aby rozpocz badania nad nowymi technologiami."})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:p.map(j=>{var we;const A=l[j.id],C=d("research",j.id,A),z=n.metal>=C.metal&&n.crystal>=C.crystal&&n.deuterium>=C.deuterium,D=(x==null?void 0:x.itemId)===j.id,R=!!x,S=f(j.requirements),H=(C.metal+C.crystal)/1e3*3600*1e3/(v+1)/_,G=Math.max(1,Math.floor(H/1e3)),fe=((ze,qe)=>ze===xe.WEAPON_TECH?{text:`Atak: +${qe*10}% -> +${(qe+1)*10}%`,type:"combat",color:"text-red-400"}:ze===xe.SHIELDING_TECH?{text:`Tarcza: +${qe*5}% -> +${(qe+1)*5}%`,type:"combat",color:"text-blue-400"}:ze===xe.ARMOUR_TECH?{text:`Pancerz: +${qe*5}% -> +${(qe+1)*5}%`,type:"combat",color:"text-emerald-400"}:ze===xe.ENERGY_TECH?{text:`Reaktor: +${qe*1}% efektywnoci`,type:"eco",color:"text-yellow-400"}:ze===xe.ASTROPHYSICS?{text:`Ekspedycje: +${qe}`,type:"eco",color:"text-purple-400"}:null)(j.id,A);return r.jsxs("div",{className:`bg-[#1c2136] rounded-xl border border-white/10 overflow-hidden hover:border-purple-500/50 transition-all group flex flex-col h-full ${S?"":"opacity-60 grayscale"}`,children:[r.jsxs("div",{className:"h-40 bg-cover bg-center relative",style:{backgroundImage:`url("${j.image}")`},children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#1c2136] to-transparent mix-blend-multiply"}),r.jsx("div",{className:"absolute inset-0 bg-purple-900/10"}),r.jsxs("div",{className:"absolute top-2 right-2 bg-black/60 backdrop-blur px-2 py-1 rounded text-xs text-purple-300 border border-purple-500/30 font-mono",children:["Lvl ",A]}),D&&r.jsxs("div",{className:"absolute inset-0 bg-black/70 flex flex-col items-center justify-center backdrop-blur-sm p-4 text-center",children:[r.jsx("div",{className:"bg-purple-600 text-white px-3 py-1 rounded-full text-xs font-bold animate-pulse shadow-lg mb-2",children:"Badanie..."}),r.jsx("div",{className:"text-2xl font-mono font-bold text-white",children:g})]})]}),r.jsxs("div",{className:"p-4 flex flex-col flex-1",children:[r.jsx("h4",{className:"text-lg font-bold text-white mb-1 group-hover:text-purple-400 transition-colors",children:j.name}),r.jsx("p",{className:"text-xs text-[#929bc9] mb-4 line-clamp-2 min-h-[32px]",children:j.description}),fe&&r.jsx("div",{className:`mb-3 text-[10px] font-bold uppercase tracking-wider ${fe.color}`,children:fe.text}),r.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs mb-4",children:[r.jsxs("div",{className:`flex items-center gap-1 ${n.metal<C.metal?"text-red-400":"text-[#929bc9]"}`,children:[r.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"handyman"}),C.metal>=1e3?`${(C.metal/1e3).toFixed(1)}k`:C.metal]}),r.jsxs("div",{className:`flex items-center gap-1 ${n.crystal<C.crystal?"text-red-400":"text-[#929bc9]"}`,children:[r.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"diamond"}),C.crystal>=1e3?`${(C.crystal/1e3).toFixed(1)}k`:C.crystal]}),r.jsxs("div",{className:`flex items-center gap-1 ${n.deuterium<C.deuterium?"text-red-400":"text-[#929bc9]"}`,children:[r.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"propane"}),C.deuterium>=1e3?`${(C.deuterium/1e3).toFixed(1)}k`:C.deuterium]})]}),S?r.jsxs("div",{className:"mt-auto pt-3 border-t border-white/5 flex items-center justify-between",children:[r.jsxs("span",{className:"text-xs text-[#929bc9] flex items-center gap-1",children:[r.jsx("span",{className:"material-symbols-outlined text-sm",children:"schedule"}),Ds(G)]}),r.jsx("button",{onClick:()=>o(j.id),disabled:!z||R,className:`px-4 py-2 rounded text-xs font-bold uppercase transition-all shadow-lg
                                                    ${!z||R?"bg-[#232948] text-[#929bc9]/50 cursor-not-allowed":"bg-purple-600 hover:bg-purple-500 text-white hover:shadow-purple-500/30"}
                                                `,children:D?"Badanie...":z?"Badaj":"Braki"})]}):r.jsxs("div",{className:"mt-auto pt-3 border-t border-red-500/20",children:[r.jsx("p",{className:"text-red-400 text-xs font-bold mb-1",children:"Wymagania:"}),r.jsx("div",{className:"flex flex-col gap-1",children:(we=j.requirements)==null?void 0:we.map((ze,qe)=>{const Ue=ze.type==="building"?ra[ze.id].name:kr[ze.id].name,Ve=ze.type==="building"?a[ze.id]:l[ze.id];return r.jsxs("div",{className:`text-xs ${Ve>=ze.level?"text-green-400":"text-red-400/70"}`,children:["- ",Ue," (Lvl ",ze.level,")"]},qe)})})]})]})]},j.id)})})]})},lv=({report:l,onClose:a})=>{const[n,o]=te.useState("summary"),d=l.result==="attacker_win";return(l.loot.metal||0)+(l.loot.crystal||0)+(l.loot.deuterium||0),r.jsx("div",{className:"fixed inset-0 z-[100] bg-black/80 backdrop-blur-sm flex items-center justify-center p-4",onClick:a,children:r.jsxs("div",{className:"bg-[#1c2136] w-full max-w-4xl max-h-[90vh] overflow-hidden rounded-2xl border border-white/10 shadow-2xl flex flex-col",onClick:h=>h.stopPropagation(),children:[r.jsxs("div",{className:`p-4 border-b border-white/10 flex justify-between items-center ${d?"bg-green-900/20":"bg-red-900/20"}`,children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`p-2 rounded-lg ${d?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"}`,children:r.jsx("span",{className:"material-symbols-outlined text-2xl",children:d?"emoji_events":"sentiment_very_dissatisfied"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold text-white uppercase tracking-wider",children:d?"Zwycistwo Agresora":"Zwycistwo Obrocy"}),r.jsx("p",{className:"text-xs text-[#929bc9]",children:"Raport Bojowy"})]})]}),r.jsx("button",{onClick:a,className:"text-[#929bc9] hover:text-white p-2 hover:bg-white/5 rounded-lg transition-colors",children:r.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),r.jsxs("div",{className:"flex border-b border-white/10 bg-[#15192b]",children:[r.jsx("button",{onClick:()=>o("summary"),className:`flex-1 py-3 text-sm font-bold uppercase tracking-wide transition-colors border-b-2 ${n==="summary"?"border-primary text-primary bg-primary/5":"border-transparent text-[#929bc9] hover:bg-white/5"}`,children:"Podsumowanie"}),r.jsx("button",{onClick:()=>o("fleets"),className:`flex-1 py-3 text-sm font-bold uppercase tracking-wide transition-colors border-b-2 ${n==="fleets"?"border-primary text-primary bg-primary/5":"border-transparent text-[#929bc9] hover:bg-white/5"}`,children:"Floty i Straty"}),r.jsx("button",{onClick:()=>o("log"),className:`flex-1 py-3 text-sm font-bold uppercase tracking-wide transition-colors border-b-2 ${n==="log"?"border-primary text-primary bg-primary/5":"border-transparent text-[#929bc9] hover:bg-white/5"}`,children:"Przebieg Walki"})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-[#0b0d17]/50",children:[n==="summary"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"bg-[#111422] rounded-xl p-4 border border-white/5 flex flex-col items-center",children:[r.jsx("span",{className:"text-xs uppercase text-[#555a7a] font-bold mb-2",children:"Zrabowany Tytan"}),r.jsx("span",{className:"text-2xl font-mono text-blue-400",children:Math.floor(l.loot.metal).toLocaleString()})]}),r.jsxs("div",{className:"bg-[#111422] rounded-xl p-4 border border-white/5 flex flex-col items-center",children:[r.jsx("span",{className:"text-xs uppercase text-[#555a7a] font-bold mb-2",children:"Zrabowany Krzem"}),r.jsx("span",{className:"text-2xl font-mono text-purple-400",children:Math.floor(l.loot.crystal).toLocaleString()})]}),r.jsxs("div",{className:"bg-[#111422] rounded-xl p-4 border border-white/5 flex flex-col items-center",children:[r.jsx("span",{className:"text-xs uppercase text-[#555a7a] font-bold mb-2",children:"Zrabowana Plazma"}),r.jsx("span",{className:"text-2xl font-mono text-green-400",children:Math.floor(l.loot.deuterium).toLocaleString()})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-8",children:[r.jsxs("div",{className:"space-y-3",children:[r.jsx("h4",{className:"text-red-400 font-bold uppercase text-sm border-b border-red-500/20 pb-2",children:"Technologia Agresora"}),r.jsxs("div",{className:"flex justify-between text-sm text-[#929bc9]",children:[r.jsx("span",{children:"Bro:"}),r.jsxs("span",{className:"text-white font-mono",children:["+",Math.round((l.bonuses.attacker.weapon-1)*100),"%"]})]}),r.jsxs("div",{className:"flex justify-between text-sm text-[#929bc9]",children:[r.jsx("span",{children:"Osony:"}),r.jsxs("span",{className:"text-white font-mono",children:["+",Math.round((l.bonuses.attacker.shield-1)*100),"%"]})]}),r.jsxs("div",{className:"flex justify-between text-sm text-[#929bc9]",children:[r.jsx("span",{children:"Pancerz:"}),r.jsxs("span",{className:"text-white font-mono",children:["+",Math.round((l.bonuses.attacker.armour-1)*100),"%"]})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("h4",{className:"text-blue-400 font-bold uppercase text-sm border-b border-blue-500/20 pb-2",children:"Technologia Obrocy"}),r.jsxs("div",{className:"flex justify-between text-sm text-[#929bc9]",children:[r.jsx("span",{children:"Bro:"}),r.jsxs("span",{className:"text-white font-mono",children:["+",Math.round((l.bonuses.defender.weapon-1)*100),"%"]})]}),r.jsxs("div",{className:"flex justify-between text-sm text-[#929bc9]",children:[r.jsx("span",{children:"Osony:"}),r.jsxs("span",{className:"text-white font-mono",children:["+",Math.round((l.bonuses.defender.shield-1)*100),"%"]})]}),r.jsxs("div",{className:"flex justify-between text-sm text-[#929bc9]",children:[r.jsx("span",{children:"Pancerz:"}),r.jsxs("span",{className:"text-white font-mono",children:["+",Math.round((l.bonuses.defender.armour-1)*100),"%"]})]})]})]})]}),n==="fleets"&&r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-red-400 font-bold text-lg mb-4 flex items-center gap-2",children:[r.jsx("span",{className:"material-symbols-outlined",children:"rocket_launch"}),"Flota Agresora"]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm text-left",children:[r.jsx("thead",{className:"bg-[#111422] text-[#555a7a] uppercase font-bold text-xs",children:r.jsxs("tr",{children:[r.jsx("th",{className:"p-3 rounded-tl-lg",children:"Jednostka"}),r.jsx("th",{className:"p-3 text-right",children:"Start"}),r.jsx("th",{className:"p-3 text-right text-red-400",children:"Straty"}),r.jsx("th",{className:"p-3 text-right rounded-tr-lg",children:"Koniec"})]})}),r.jsx("tbody",{className:"divide-y divide-white/5",children:Object.keys(l.initialAttackerShips).map(h=>{var p;const f=l.initialAttackerShips[h]||0,g=l.finalAttackerShips[h]||0,b=l.attackerLosses[h]||0;return f===0?null:r.jsxs("tr",{className:"hover:bg-white/5 transition-colors",children:[r.jsx("td",{className:"p-3 font-medium text-white",children:((p=Ze[h])==null?void 0:p.name)||h}),r.jsx("td",{className:"p-3 text-right font-mono text-[#929bc9]",children:f}),r.jsx("td",{className:"p-3 text-right font-mono text-red-400",children:b>0?`-${b}`:"-"}),r.jsx("td",{className:"p-3 text-right font-mono text-white",children:g})]},h)})})]})})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-blue-400 font-bold text-lg mb-4 flex items-center gap-2",children:[r.jsx("span",{className:"material-symbols-outlined",children:"shield"}),"Flota i Obrona Obrocy"]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm text-left",children:[r.jsx("thead",{className:"bg-[#111422] text-[#555a7a] uppercase font-bold text-xs",children:r.jsxs("tr",{children:[r.jsx("th",{className:"p-3 rounded-tl-lg",children:"Jednostka"}),r.jsx("th",{className:"p-3 text-right",children:"Start"}),r.jsx("th",{className:"p-3 text-right text-red-400",children:"Straty"}),r.jsx("th",{className:"p-3 text-right rounded-tr-lg",children:"Koniec"})]})}),r.jsxs("tbody",{className:"divide-y divide-white/5",children:[Object.keys(l.initialDefenderShips).map(h=>{var p;const f=l.initialDefenderShips[h]||0,g=l.finalDefenderShips[h]||0,b=l.defenderLosses[h]||0;return f===0?null:r.jsxs("tr",{className:"hover:bg-white/5 transition-colors",children:[r.jsx("td",{className:"p-3 font-medium text-white",children:((p=Ze[h])==null?void 0:p.name)||h}),r.jsx("td",{className:"p-3 text-right font-mono text-[#929bc9]",children:f}),r.jsx("td",{className:"p-3 text-right font-mono text-red-400",children:b>0?`-${b}`:"-"}),r.jsx("td",{className:"p-3 text-right font-mono text-white",children:g})]},`ship-${h}`)}),Object.keys(l.initialDefenderDefenses).map(h=>{var p;const f=l.initialDefenderDefenses[h]||0,g=l.finalDefenderDefenses[h]||0,b=l.defenderDefensesLost[h]||0;return f===0&&g===0?null:r.jsxs("tr",{className:"hover:bg-white/5 transition-colors bg-blue-900/5",children:[r.jsx("td",{className:"p-3 font-medium text-blue-200",children:((p=Zs[h])==null?void 0:p.name)||h}),r.jsx("td",{className:"p-3 text-right font-mono text-[#929bc9]",children:f}),r.jsx("td",{className:"p-3 text-right font-mono text-red-400",children:b>0?`-${b}`:"-"}),r.jsx("td",{className:"p-3 text-right font-mono text-white",children:g})]},`def-${h}`)})]})]})})]})]}),n==="log"&&r.jsxs("div",{className:"space-y-2 font-mono text-sm",children:[l.logMessages.map((h,f)=>r.jsx("div",{className:"p-3 bg-[#111422] rounded border border-white/5 text-[#cdd6f7]",children:h},f)),l.logMessages.length===0&&r.jsx("div",{className:"text-center text-[#555a7a] py-8 italic",children:"Brak szczegowego logu walki."})]})]})]})})},ov=({report:l,onClose:a})=>{const n=l.attackerSpyLevel||0,o=l.defenderSpyLevel||0;return r.jsx("div",{className:"fixed inset-0 z-[100] bg-black/80 backdrop-blur-sm flex items-center justify-center p-4",onClick:a,children:r.jsxs("div",{className:"bg-[#1c2136] w-full max-w-2xl max-h-[90vh] overflow-hidden rounded-2xl border border-white/10 shadow-2xl flex flex-col",onClick:d=>d.stopPropagation(),children:[r.jsxs("div",{className:"p-4 border-b border-white/10 flex justify-between items-center bg-blue-900/20",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 rounded-lg bg-blue-500/20 text-blue-400",children:r.jsx("span",{className:"material-symbols-outlined text-2xl",children:"visibility"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold text-white uppercase tracking-wider",children:"Raport Szpiegowski"}),r.jsxs("p",{className:"text-sm text-[#929bc9]",children:["Cel: ",r.jsx("span",{className:"text-white font-bold",children:l.targetName})]})]})]}),r.jsx("button",{onClick:a,className:"text-[#929bc9] hover:text-white p-2 hover:bg-white/5 rounded-lg transition-colors",children:r.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),r.jsxs("div",{className:"bg-[#15192b] px-6 py-3 border-b border-white/5 flex justify-between items-center text-sm",children:[r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-[#555a7a] text-xs font-bold uppercase",children:"Twoja Technologia"}),r.jsxs("span",{className:"text-blue-400 font-mono font-bold text-lg",children:["Poziom ",n]})]}),r.jsxs("div",{className:"flex flex-col items-end",children:[r.jsx("span",{className:"text-[#555a7a] text-xs font-bold uppercase",children:"Technologia Celu"}),r.jsxs("span",{className:"text-red-400 font-mono font-bold text-lg",children:["Poziom ",o]})]})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-[#0b0d17]/50 space-y-6",children:[l.resources&&r.jsxs("div",{children:[r.jsx("h3",{className:"text-[#929bc9] font-bold uppercase text-xs mb-3 border-b border-white/5 pb-1",children:"Zasoby"}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"bg-[#111422] rounded p-3 text-center border border-white/5",children:[r.jsx("div",{className:"text-xs text-[#555a7a] font-bold mb-1",children:"Tytan"}),r.jsx("div",{className:"font-mono text-blue-400",children:Math.floor(l.resources.metal).toLocaleString()})]}),r.jsxs("div",{className:"bg-[#111422] rounded p-3 text-center border border-white/5",children:[r.jsx("div",{className:"text-xs text-[#555a7a] font-bold mb-1",children:"Krzem"}),r.jsx("div",{className:"font-mono text-purple-400",children:Math.floor(l.resources.crystal).toLocaleString()})]}),r.jsxs("div",{className:"bg-[#111422] rounded p-3 text-center border border-white/5",children:[r.jsx("div",{className:"text-xs text-[#555a7a] font-bold mb-1",children:"Plazma"}),r.jsx("div",{className:"font-mono text-green-400",children:Math.floor(l.resources.deuterium).toLocaleString()})]})]})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-[#929bc9] font-bold uppercase text-xs mb-3 border-b border-white/5 pb-1 flex justify-between",children:["Flota",!l.ships&&r.jsx("span",{className:"text-red-500 text-[10px]",children:"Wymagana rnica poziomw: +2"})]}),l.ships?r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[Object.entries(l.ships).map(([d,h])=>{var f;return r.jsxs("div",{className:"flex justify-between p-2 bg-[#111422] rounded border border-white/5 text-sm",children:[r.jsx("span",{className:"text-white",children:((f=Ze[d])==null?void 0:f.name)||d}),r.jsx("span",{className:"font-mono text-[#929bc9]",children:h})]},d)}),Object.keys(l.ships).length===0&&r.jsx("span",{className:"text-white/30 italic text-sm",children:"Brak stacjonujcej floty."})]}):r.jsx("div",{className:"p-4 bg-red-900/10 border border-red-500/20 rounded text-center text-red-400 text-sm",children:" Dane niedostpne. Zbadaj wyszy poziom Technologii Szpiegowskiej."})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-[#929bc9] font-bold uppercase text-xs mb-3 border-b border-white/5 pb-1 flex justify-between",children:["Obrona",!l.defenses&&r.jsx("span",{className:"text-red-500 text-[10px]",children:"Wymagana rnica poziomw: +3"})]}),l.defenses?r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[Object.entries(l.defenses).map(([d,h])=>{var f;return r.jsxs("div",{className:"flex justify-between p-2 bg-[#111422] rounded border border-white/5 text-sm",children:[r.jsx("span",{className:"text-white",children:((f=Zs[d])==null?void 0:f.name)||d}),r.jsx("span",{className:"font-mono text-[#929bc9]",children:h})]},d)}),Object.keys(l.defenses).length===0&&r.jsx("span",{className:"text-white/30 italic text-sm",children:"Brak systemw obronnych."})]}):r.jsx("div",{className:"p-4 bg-red-900/10 border border-red-500/20 rounded text-center text-red-400 text-sm",children:" Dane niedostpne."})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-[#929bc9] font-bold uppercase text-xs mb-3 border-b border-white/5 pb-1 flex justify-between",children:["Budynki",!l.buildings&&r.jsx("span",{className:"text-red-500 text-[10px]",children:"Wymagana rnica poziomw: +5"})]}),l.buildings?r.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(l.buildings).map(([d,h])=>r.jsxs("div",{className:"flex justify-between p-2 bg-[#111422] rounded border border-white/5 text-sm",children:[r.jsx("span",{className:"text-white capitalize",children:d.replace(/_/g," ")}),r.jsxs("span",{className:"font-mono text-[#929bc9]",children:["Poz. ",h]})]},d))}):r.jsx("div",{className:"p-4 bg-red-900/10 border border-red-500/20 rounded text-center text-red-400 text-sm",children:" Dane niedostpne."})]})]})]})})},cv=()=>{const{missionLogs:l,clearLogs:a}=us(),[n,o]=te.useState("all"),[d,h]=te.useState(null),f=p=>{var _;const v=((_=p.title)==null?void 0:_.toLowerCase())||"",x=String(p.outcome||"").toLowerCase();return x==="danger"||x==="info"||v.includes("anulowany")||v.includes("wykryto")?"threats":v.includes("bojowy")||v.includes("atak")?"attack":v.includes("ekspedycja")||v.includes("przestrze")||v.includes("pus")||v.includes("zasoby")||v.includes("pirat")||v.includes("obok")||v.includes("znalez")||v.includes("statki")||v.includes("artefakt")||v.includes("materia")||v.includes("pozyskano")?"expedition":v.includes("szpieg")||v.includes("skan")?"spy":v.includes("transport")||v.includes("dostarcz")||v.includes("surow")?"transport":"other"},g=te.useMemo(()=>n==="all"?l:l.filter(p=>f(p)===n),[l,n]),b=[{id:"all",label:"Wszystkie",icon:"history"},{id:"threats",label:"Zagroenia",icon:"crisis_alert"},{id:"attack",label:"Ataki",icon:"swords"},{id:"spy",label:"Szpiegowskie",icon:"visibility"},{id:"expedition",label:"Ekspedycje",icon:"rocket_launch"},{id:"transport",label:"Transport",icon:"local_shipping"}];return r.jsxs("div",{className:"bg-[#1c2136] rounded-xl border border-white/10 shadow-lg flex flex-col h-[600px]",children:[r.jsxs("div",{className:"flex flex-col border-b border-white/10 bg-[#15192b]",children:[r.jsxs("div",{className:"p-4 flex items-center justify-between",children:[r.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[r.jsx("span",{className:"material-symbols-outlined text-primary",children:"menu_book"}),"Dziennik Pokadowy"]}),l.length>0&&r.jsx("button",{onClick:a,className:"text-xs text-red-400 hover:text-white px-3 py-1 rounded border border-white/5 hover:bg-red-500/20 transition-colors",children:"Wyczy"})]}),r.jsx("div",{className:"flex overflow-x-auto no-scrollbar px-2 md:px-4 gap-2 pb-3",children:b.map(p=>r.jsxs("button",{onClick:()=>o(p.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition-colors border ${n===p.id?"bg-primary/20 border-primary text-white":"bg-[#1c2136] border-white/5 text-[#929bc9] hover:bg-white/5"}`,children:[r.jsx("span",{className:"material-symbols-outlined text-lg",children:p.icon}),p.label]},p.id))})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 bg-[#0b0d17]/50",children:[g.length===0&&r.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-[#555a7a] gap-4",children:[r.jsx("span",{className:"material-symbols-outlined text-6xl opacity-20",children:"inbox"}),r.jsx("p",{children:"Brak raportw w tej kategorii."})]}),g.map(p=>r.jsx(uv,{log:p,type:f(p),onDetail:()=>h(p)},p.id))]}),d&&(d.report?d.title&&d.title.includes("Szpieg")?r.jsx(ov,{report:d.report,onClose:()=>h(null)}):r.jsx(lv,{report:d.report,onClose:()=>h(null)}):r.jsx(dv,{log:d,onClose:()=>h(null)}))]})},uv=({log:l,type:a,onDetail:n})=>{const o=l.outcome==="success",d=l.outcome==="danger";return a==="spy"||a==="threats"&&l.title.toLowerCase().includes("skan")?r.jsxs("div",{className:`${d?"bg-red-900/20 border-red-500/30":"bg-[#1c2136] border-white/10"} border rounded-lg overflow-hidden group hover:border-primary/50 transition-colors`,children:[r.jsxs("div",{className:`${d?"bg-red-900/30 border-red-500/20":"bg-[#111422] border-white/5"} p-3 border-b flex justify-between items-center`,children:[r.jsxs("span",{className:`${d?"text-red-400":"text-orange-400"} font-bold text-sm flex items-center gap-2`,children:[r.jsx("span",{className:"material-symbols-outlined text-sm",children:"visibility"}),l.title]}),r.jsx("span",{className:"text-[10px] text-[#555a7a] font-mono",children:new Date(l.timestamp).toLocaleTimeString()})]}),r.jsxs("div",{className:"p-3",children:[r.jsx("p",{className:"text-sm text-[#cdd6f7] mb-2",children:l.message}),r.jsx("button",{onClick:n,className:"w-full mt-2 py-2 bg-orange-500/10 hover:bg-orange-500/20 text-orange-300 text-xs font-bold rounded border border-orange-500/20 transition-colors flex items-center justify-center gap-1",children:"Peny Raport"})]})]}):a==="attack"?r.jsxs("div",{className:`rounded-lg border overflow-hidden ${o?"bg-green-900/10 border-green-500/30":"bg-red-900/10 border-red-500/30"}`,children:[r.jsxs("div",{className:"p-3 flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsx("div",{className:`font-bold text-sm mb-1 ${o?"text-green-400":"text-red-400"}`,children:l.title}),r.jsx("div",{className:"text-xs text-[#929bc9]",children:new Date(l.timestamp).toLocaleString()})]}),l.report&&r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"text-[10px] uppercase text-[#555a7a] font-bold",children:"Zrabowano"}),r.jsxs("div",{className:"text-xs text-white font-mono",children:[Math.floor((l.report.loot.metal+l.report.loot.crystal+l.report.loot.deuterium)/1e3),"k"]})]})]}),l.report&&r.jsxs("button",{onClick:n,className:"w-full py-2 bg-black/20 hover:bg-black/40 text-xs text-white/70 hover:text-white border-t border-white/5 transition-colors flex items-center justify-center gap-2",children:[r.jsx("span",{className:"material-symbols-outlined text-sm",children:"sticky_note_2"}),"Zobacz Szczegy"]})]}):r.jsxs("div",{className:`p-4 rounded-lg border ${o?"bg-green-500/5 border-green-500/20":d?"bg-red-500/5 border-red-500/20":"bg-[#1c2136] border-white/5"}`,children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("span",{className:`text-sm font-bold ${o?"text-green-400":d?"text-red-400":"text-blue-300"}`,children:l.title}),r.jsx("span",{className:"text-[10px] text-[#555a7a]",children:new Date(l.timestamp).toLocaleTimeString()})]}),r.jsx("p",{className:"text-sm text-[#929bc9] leading-relaxed",children:l.message}),l.rewards&&r.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[Object.entries(l.rewards).map(([h,f])=>!f||h==="items"||h==="ships"?null:r.jsxs("span",{className:"text-[10px] bg-[#111422] border border-white/10 px-2 py-1 rounded text-white font-mono",children:["+",f," ",h.charAt(0).toUpperCase()]},h)),l.rewards.ships&&Object.entries(l.rewards.ships).map(([h,f])=>{var g;return r.jsxs("span",{className:"text-[10px] bg-[#111422] border border-white/10 px-2 py-1 rounded text-white font-mono flex items-center gap-1",children:[r.jsx("span",{className:"material-symbols-outlined text-[10px]",children:"rocket"})," ",f," ",(g=Ze[h])==null?void 0:g.name]},h)})]}),l.report&&r.jsxs("button",{onClick:n,className:"w-full mt-3 py-2 bg-white/5 hover:bg-white/10 text-xs text-blue-200 border-t border-white/10 transition-colors flex items-center justify-center gap-2 rounded",children:[r.jsx("span",{className:"material-symbols-outlined text-sm",children:"assignment"}),"Zobacz Raport Bitewny"]})]})},dv=({log:l,onClose:a})=>{var o,d,h,f,g,b,p,v,x,_;const n=l.report;return r.jsx("div",{className:"fixed inset-0 z-[100] bg-black/80 backdrop-blur-sm flex items-center justify-center p-4",onClick:a,children:r.jsxs("div",{className:"bg-[#1c2136] w-full max-w-lg max-h-[80vh] overflow-y-auto rounded-2xl border border-white/10 shadow-2xl",onClick:j=>j.stopPropagation(),children:[r.jsxs("div",{className:"sticky top-0 bg-[#1c2136] border-b border-white/10 p-4 flex justify-between items-center z-10",children:[r.jsxs("h3",{className:"text-white font-bold flex items-center gap-2",children:[r.jsx("span",{className:`material-symbols-outlined ${(o=l.title)!=null&&o.toLowerCase().includes("szpieg")?"text-blue-400":(d=l.title)!=null&&d.toLowerCase().includes("transport")||(h=l.title)!=null&&h.toLowerCase().includes("dostawa")?"text-green-400":(f=l.title)!=null&&f.toLowerCase().includes("bojowy")||(g=l.title)!=null&&g.toLowerCase().includes("pirat")?"text-red-500":"text-purple-400"}`,children:(b=l.title)!=null&&b.toLowerCase().includes("szpieg")?"visibility":(p=l.title)!=null&&p.toLowerCase().includes("transport")||(v=l.title)!=null&&v.toLowerCase().includes("dostawa")?"local_shipping":(x=l.title)!=null&&x.toLowerCase().includes("bojowy")||(_=l.title)!=null&&_.toLowerCase().includes("pirat")?"swords":"public"}),l.title]}),r.jsx("button",{onClick:a,className:"text-[#929bc9] hover:text-white",children:r.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),r.jsx("div",{className:"p-4 space-y-6",children:n?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"bg-[#111422] rounded-xl p-4 border border-white/5",children:[r.jsx("div",{className:"text-xs text-[#555a7a] uppercase font-bold mb-3 text-center",children:"Zrabowane Surowce"}),r.jsxs("div",{className:"flex justify-around",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-blue-400 font-bold font-mono",children:Math.floor(n.loot.metal)}),r.jsx("div",{className:"text-[10px] text-[#929bc9]",children:"Metal"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-purple-400 font-bold font-mono",children:Math.floor(n.loot.crystal)}),r.jsx("div",{className:"text-[10px] text-[#929bc9]",children:"Kryszta"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-green-400 font-bold font-mono",children:Math.floor(n.loot.deuterium)}),r.jsx("div",{className:"text-[10px] text-[#929bc9]",children:"Deutery"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"text-red-400 font-bold text-xs uppercase border-b border-red-500/20 pb-1",children:"Agresor (Ty)"}),Object.entries(n.attackerLosses).length===0?r.jsx("div",{className:"text-green-500 text-xs",children:"Brak strat"}):Object.entries(n.attackerLosses).map(([j,A])=>{var C;return r.jsxs("div",{className:"flex justify-between text-xs text-[#929bc9]",children:[r.jsx("span",{children:(C=Ze[j])==null?void 0:C.name}),r.jsxs("span",{className:"text-red-400",children:["-",A]})]},j)})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"text-blue-400 font-bold text-xs uppercase border-b border-blue-500/20 pb-1",children:"Obroca"}),Object.entries(n.defenderLosses).length===0&&Object.entries(n.defenderDefensesLost||{}).length===0?r.jsx("div",{className:"text-green-500 text-xs",children:"Brak strat"}):r.jsxs(r.Fragment,{children:[Object.entries(n.defenderLosses).map(([j,A])=>{var C;return r.jsxs("div",{className:"flex justify-between text-xs text-[#929bc9]",children:[r.jsx("span",{children:(C=Ze[j])==null?void 0:C.name}),r.jsxs("span",{className:"text-red-400",children:["-",A]})]},j)}),Object.entries(n.defenderDefensesLost||{}).map(([j,A])=>{var C;return r.jsxs("div",{className:"flex justify-between text-xs text-[#929bc9]",children:[r.jsx("span",{children:(C=Zs[j])==null?void 0:C.name}),r.jsxs("span",{className:"text-red-400",children:["-",A]})]},j)})]})]})]})]}):r.jsx("div",{className:"text-[#cdd6f7] text-sm whitespace-pre-wrap leading-relaxed bg-[#111422] p-4 rounded-lg border border-white/5",children:l.message})})]})})},hv=()=>{const{ships:l,sendExpedition:a,sendAttack:n,activeMissions:o,missionLogs:d,clearLogs:h,cancelMission:f,galaxyCoords:g}=us(),[b,p]=te.useState({}),[v,x]=te.useState({galaxy:1,system:1,position:2}),[_,j]=te.useState(Qe.ATTACK);te.useEffect(()=>{g&&x({galaxy:g.galaxy||1,system:g.system||1,position:g.position||1})},[g]);const A=(S,Q)=>{const H=l[S]||0;let G=parseInt(Q,10);isNaN(G)&&(G=0),G=Math.min(Math.max(0,G),H),p(Z=>({...Z,[S]:G}))},C=()=>{const S={};Object.entries(l).forEach(([Q,H])=>{const G=H;G>0&&(S[Q]=G)}),p(S)},z=()=>{const S={};let Q=0;Object.entries(b).forEach(([H,G])=>{const Z=G;Z>0&&(S[H]=Z,Q+=Z)}),Q!==0&&(_===Qe.EXPEDITION?a(S,v):_===Qe.ATTACK&&n(S,v),p({}))},D=Object.values(b).reduce((S,Q)=>S+Q,0),R=Object.entries(b).reduce((S,[Q,H])=>S+Ze[Q].capacity*H,0);return r.jsxs("div",{className:"flex flex-col gap-6",children:[r.jsxs("div",{className:"flex items-center justify-between border-b border-white/10 pb-4",children:[r.jsxs("h2",{className:"text-3xl font-bold text-white flex items-center gap-3",children:[r.jsx("span",{className:"material-symbols-outlined text-3xl text-primary",children:"flight_takeoff"}),"Centrum Floty"]}),r.jsx("div",{className:"flex gap-4 text-sm text-[#929bc9]",children:r.jsxs("div",{className:"px-3 py-1 bg-white/5 rounded-lg border border-white/10",children:["Flota: ",r.jsx("span",{className:"text-white font-medium",children:Object.values(l).reduce((S,Q)=>S+Q,0)})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"bg-[#1a1d2e] border border-white/5 rounded-xl p-4 flex items-center gap-4",children:[r.jsx("div",{className:"w-10 h-10 rounded-lg bg-orange-500/20 flex items-center justify-center",children:r.jsx("span",{className:"material-symbols-outlined text-orange-400",children:"local_gas_station"})}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xs text-[#929bc9] uppercase tracking-wider",children:"Koszt Utrzymania"}),r.jsxs("div",{className:"text-xl font-bold text-white",children:[(()=>{let S=0;return Object.entries(l).forEach(([H,G])=>{const Z=Ze[H];Z&&(S+=(Z.baseCost.metal+Z.baseCost.crystal)*G)}),Math.floor(S/1e3*tr*.1).toLocaleString()})()," ",r.jsx("span",{className:"text-sm font-normal text-orange-400",children:"Deuter / h"})]})]})]}),r.jsxs("div",{className:"bg-[#1a1d2e] border border-white/5 rounded-xl p-4 flex items-center gap-4",children:[r.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-500/20 flex items-center justify-center",children:r.jsx("span",{className:"material-symbols-outlined text-blue-400",children:"flight"})}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xs text-[#929bc9] uppercase tracking-wider",children:"Gotowo Bojowa"}),r.jsx("div",{className:"text-xl font-bold text-white",children:"100%"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[r.jsxs("div",{className:"lg:col-span-7 space-y-6",children:[r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:(()=>{let S=0,Q=0,H=0,G=0;return Object.entries(l).forEach(([Z,fe])=>{const we=Ze[Z];fe>0&&we&&(S+=fe,Q+=fe*we.attack,H+=fe*we.defense,G+=fe*we.capacity)}),r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"bg-[#1c2136] p-4 rounded-xl border border-white/10 shadow-lg",children:[r.jsx("div",{className:"text-[#929bc9] text-[10px] uppercase font-bold mb-1",children:"Liczebno Floty"}),r.jsx("div",{className:"text-white text-xl font-mono font-bold",children:S})]}),r.jsxs("div",{className:"bg-[#1c2136] p-4 rounded-xl border border-white/10 shadow-lg",children:[r.jsx("div",{className:"text-[#929bc9] text-[10px] uppercase font-bold mb-1",children:"Sia Ognia"}),r.jsx("div",{className:"text-red-400 text-xl font-mono font-bold",children:Q.toLocaleString()})]}),r.jsxs("div",{className:"bg-[#1c2136] p-4 rounded-xl border border-white/10 shadow-lg",children:[r.jsx("div",{className:"text-[#929bc9] text-[10px] uppercase font-bold mb-1",children:"Wytrzymao"}),r.jsx("div",{className:"text-green-400 text-xl font-mono font-bold",children:H.toLocaleString()})]}),r.jsxs("div",{className:"bg-[#1c2136] p-4 rounded-xl border border-white/10 shadow-lg",children:[r.jsx("div",{className:"text-[#929bc9] text-[10px] uppercase font-bold mb-1",children:"adowno (Cak.)"}),r.jsx("div",{className:"text-blue-400 text-xl font-mono font-bold",children:G.toLocaleString()})]})]})})()}),r.jsxs("div",{className:"bg-[#1c2136] rounded-xl border border-white/10 p-6 shadow-lg",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[r.jsx("span",{className:"material-symbols-outlined text-primary",children:"rocket_launch"}),"Dostpna Flota"]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:C,className:"text-xs bg-primary/20 text-primary hover:bg-primary hover:text-white px-3 py-1 rounded font-bold transition-colors",children:"Wybierz wszystkie"}),r.jsx("button",{onClick:()=>p({}),className:"text-xs text-[#929bc9] hover:text-white underline",children:"Zeruj wybr"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[Object.entries(l).map(([S,Q])=>{const H=Ze[S];if(Q<=0)return null;const G=b[S]>0;return r.jsxs("div",{className:`p-4 rounded-xl border transition-all ${G?"bg-primary/5 border-primary/30 shadow-lg shadow-primary/5":"bg-[#1c2136] border-white/5 hover:border-white/10"}`,children:[r.jsxs("div",{className:"flex justify-between items-start mb-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"size-12 rounded-lg bg-[#111422] flex items-center justify-center border border-white/10 bg-cover bg-center",style:{backgroundImage:`url(${H.image})`},children:!H.image&&r.jsx("span",{className:"material-symbols-outlined text-primary text-2xl",children:"rocket"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-white font-bold",children:H.name}),r.jsxs("div",{className:"flex gap-2 text-[10px] mt-1",children:[r.jsxs("span",{className:"text-[#929bc9] bg-white/5 px-1.5 py-0.5 rounded",children:["Dostpne: ",r.jsx("span",{className:"text-white font-mono",children:Q})]}),r.jsxs("span",{className:"text-blue-400 bg-blue-500/10 px-1.5 py-0.5 rounded",children:["ad.: ",(H.capacity||0).toLocaleString()]})]})]})]}),r.jsxs("div",{className:"flex flex-col items-end gap-1",children:[r.jsx("div",{className:"text-[10px] text-[#555a7a] uppercase font-bold",children:"Wybierz"}),r.jsx("input",{type:"number",min:"0",max:Q,value:b[S]||"",onChange:Z=>A(S,Z.target.value),className:"w-20 bg-[#111422] border border-white/10 rounded px-2 py-1 text-right text-white font-mono text-sm focus:border-primary focus:outline-none",placeholder:"0"})]})]}),r.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[r.jsx("button",{onClick:()=>A(S,"0"),className:"h-8 text-[10px] uppercase font-bold text-[#555a7a] hover:text-white border border-white/5 hover:bg-white/5 rounded transition-colors",children:"0"}),r.jsx("button",{onClick:()=>A(S,Math.max(0,Math.floor(Q/2)).toString()),className:"h-8 text-[10px] uppercase font-bold text-[#929bc9] hover:text-white border border-white/5 hover:bg-white/5 rounded transition-colors",children:"50%"}),r.jsxs("button",{onClick:()=>A(S,Q.toString()),className:"col-span-2 h-8 text-[10px] uppercase font-bold text-primary hover:text-white border border-primary/20 hover:bg-primary/20 rounded transition-colors",children:["MAX (",Q,")"]})]})]},S)}),Object.values(l).every(S=>S===0)&&r.jsxs("div",{className:"text-center py-8 text-[#929bc9]",children:[r.jsx("span",{className:"material-symbols-outlined text-4xl mb-2 opacity-50",children:"sailing"}),r.jsx("p",{children:"Brak statkw w dokach. Wybuduj flot w Stoczni."})]})]})]})]}),r.jsx("div",{className:"lg:col-span-5 flex flex-col gap-6",children:r.jsxs("div",{className:"bg-[#1c2136] rounded-xl border border-white/10 p-6 shadow-lg",children:[r.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Cel i Misja"}),r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsxs("div",{className:"p-4 bg-[#111422] rounded-lg border border-white/5",children:[r.jsx("label",{className:"text-xs text-[#929bc9] uppercase font-bold mb-3 block",children:"Wsprzdne Celu"}),r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsxs("div",{className:"flex flex-col items-center gap-1 w-20",children:[r.jsx("span",{className:"text-[10px] text-[#555a7a] uppercase",children:"Gal"}),r.jsx("input",{type:"number",value:v.galaxy,onChange:S=>x({...v,galaxy:parseInt(S.target.value)||1}),className:"w-full bg-[#232948] text-center py-3 rounded-lg text-white font-mono font-bold border border-white/10 focus:border-primary focus:ring-1 focus:ring-primary outline-none"})]}),r.jsx("span",{className:"text-white/20 text-xl font-light mt-4",children:":"}),r.jsxs("div",{className:"flex flex-col items-center gap-1 w-20",children:[r.jsx("span",{className:"text-[10px] text-[#555a7a] uppercase",children:"Uk"}),r.jsx("input",{type:"number",value:v.system,onChange:S=>x({...v,system:parseInt(S.target.value)||1}),className:"w-full bg-[#232948] text-center py-3 rounded-lg text-white font-mono font-bold border border-white/10 focus:border-primary focus:ring-1 focus:ring-primary outline-none"})]}),r.jsx("span",{className:"text-white/20 text-xl font-light mt-4",children:":"}),r.jsxs("div",{className:"flex flex-col items-center gap-1 w-20",children:[r.jsx("span",{className:"text-[10px] text-[#555a7a] uppercase",children:"Poz"}),r.jsx("input",{type:"number",value:v.position,onChange:S=>x({...v,position:parseInt(S.target.value)||1}),className:"w-full bg-[#232948] text-center py-3 rounded-lg text-white font-mono font-bold border border-white/10 focus:border-primary focus:ring-1 focus:ring-primary outline-none"})]})]}),r.jsxs("div",{className:"flex justify-center mt-3 gap-2",children:[r.jsx("button",{onClick:()=>{x({...v,position:16}),j(Qe.EXPEDITION)},className:`text-xs px-2 py-1 rounded border border-transparent hover:border-white/10 transition-colors ${v.position===16?"text-primary font-bold bg-primary/10":"text-[#929bc9] hover:text-white"}`,children:"[16] Gboka Przestrze"}),r.jsx("button",{onClick:()=>{x({...v,position:2}),j(Qe.ATTACK)},className:`text-xs px-2 py-1 rounded border border-transparent hover:border-white/10 transition-colors ${v.position===2?"text-red-400 font-bold bg-red-500/10":"text-[#929bc9] hover:text-white"}`,children:"[2] Baza Piratw"})]})]}),D>0&&r.jsxs("div",{className:"p-4 bg-[#111422] rounded-lg border border-white/5 flex flex-col gap-2",children:[r.jsxs("div",{className:"flex justify-between items-center text-sm",children:[r.jsx("span",{className:"text-[#929bc9]",children:"Ilo Statkw:"}),r.jsx("span",{className:"text-white font-mono",children:D})]}),r.jsxs("div",{className:"flex justify-between items-center text-sm",children:[r.jsx("span",{className:"text-[#929bc9]",children:"Cakowita adowno:"}),r.jsx("span",{className:"text-green-400 font-mono font-bold",children:R.toLocaleString()})]})]}),r.jsxs("div",{className:"p-4 bg-[#111422] rounded-lg border border-white/5",children:[r.jsx("label",{className:"text-xs text-[#929bc9] uppercase font-bold mb-2 block",children:"Typ Misji"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>j(Qe.EXPEDITION),className:`flex-1 py-3 rounded-lg font-bold text-sm border transition-colors ${_===Qe.EXPEDITION?"bg-primary text-white border-primary/50 shadow-lg shadow-primary/20":"bg-[#232948] text-[#929bc9] border-white/5"}`,children:"Ekspedycja"}),r.jsx("button",{onClick:()=>j(Qe.ATTACK),className:`flex-1 py-3 rounded-lg font-bold text-sm border transition-colors ${_===Qe.ATTACK?"bg-red-500 text-white border-red-500/50 shadow-lg shadow-red-500/20":"bg-[#232948] text-[#929bc9] border-white/5"}`,children:"Atak"})]})]}),r.jsx("button",{onClick:z,disabled:D===0,className:`w-full py-4 rounded-xl font-bold text-lg uppercase tracking-widest transition-all shadow-xl
                                    ${D>0?_===Qe.ATTACK?"bg-gradient-to-r from-red-600 to-orange-600 hover:from-red-500 hover:to-orange-500 text-white transform hover:scale-[1.02] shadow-red-900/30":"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500 text-white transform hover:scale-[1.02] shadow-blue-900/30":"bg-[#232948] text-white/20 cursor-not-allowed"}
                                `,children:r.jsxs("div",{className:"flex flex-col leading-none gap-1",children:[r.jsx("span",{children:_===Qe.ATTACK?"ROZPOCZNIJ ATAK":"WYLIJ FLOT"}),D>0&&r.jsxs("span",{className:"text-[10px] font-normal opacity-70",children:["Statkw: ",D]})]})})]})]})})]}),o.length>0&&r.jsxs("div",{className:"bg-[#1c2136] rounded-xl border border-white/10 p-6 shadow-lg",children:[r.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Aktywne Misje"}),r.jsx("div",{className:"space-y-4",children:o.map(S=>r.jsx(fv,{mission:S,onCancel:f},S.id))})]}),r.jsx(cv,{})]})},fv=({mission:l,onCancel:a})=>{const[n,o]=te.useState("outbound"),[d,h]=te.useState(0),[f,g]=te.useState(""),[b,p]=te.useState(!1);te.useEffect(()=>{const x=()=>{const j=Date.now();let A=0,C=0;if(j<l.arrivalTime){o("outbound");const z=l.arrivalTime-l.startTime||6e4,D=j-l.startTime;A=Math.min(100,Math.max(0,D/z*100)),C=Math.max(0,(l.arrivalTime-j)/1e3)}else{o("inbound");const z=l.returnTime-l.arrivalTime||6e4,D=j-l.arrivalTime;A=Math.min(100,Math.max(0,D/z*100)),C=Math.max(0,(l.returnTime-j)/1e3)}(isNaN(A)||!isFinite(A))&&(A=0),(isNaN(C)||!isFinite(C))&&(C=0),h(A),g(Ds(C))};x();const _=setInterval(x,100);return()=>clearInterval(_)},[l]);const v=l.type===Qe.ATTACK;return r.jsxs("div",{className:`rounded-lg p-4 border relative overflow-hidden ${v?"bg-red-900/10 border-red-500/20":"bg-[#111422] border-white/5"}`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-4 relative px-4 py-2",children:[r.jsxs("div",{className:"flex flex-col items-center z-10",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-500/20 border border-blue-500 flex items-center justify-center",children:r.jsx("span",{className:"material-symbols-outlined text-sm text-blue-400",children:"home"})}),r.jsx("span",{className:"text-[10px] text-[#929bc9] mt-1",children:"Baza"})]}),r.jsx("div",{className:"flex-1 h-1 bg-white/10 mx-2 relative rounded-full overflow-hidden",children:r.jsx("div",{className:`h-full transition-all duration-100 ease-linear ${n==="outbound"?v?"bg-red-500 origin-left":"bg-primary origin-left":"bg-green-500 origin-right ml-auto"}`,style:{width:`${d}%`}})}),r.jsx("div",{className:"absolute top-1/2 -translate-y-[calc(50%+12px)] transition-all duration-100 ease-linear z-20",style:{left:`calc(10% + ${n==="outbound"?d*.8:(100-d)*.8}%)`},children:r.jsx("span",{className:`material-symbols-outlined text-white text-xl drop-shadow-lg transform ${n==="inbound"?"rotate-180 text-green-400":v?"text-red-500":"text-primary"}`,children:"rocket"})}),r.jsxs("div",{className:"flex flex-col items-center z-10",children:[r.jsx("div",{className:`w-8 h-8 rounded-full border flex items-center justify-center ${n==="inbound"?"bg-green-500/20 border-green-500":v?"bg-red-500/20 border-red-500":l.type==="transport"?"bg-blue-500/20 border-blue-500":"bg-white/5 border-white/20"}`,children:r.jsx("span",{className:`material-symbols-outlined text-sm ${n==="inbound"?"text-green-400":v?"text-red-400":l.type==="transport"?"text-blue-400":"text-[#929bc9]"}`,children:v?"swords":l.type==="transport"?"local_shipping":l.type==="spy"?"visibility":"public"})}),r.jsx("span",{className:"text-[10px] text-[#929bc9] mt-1",children:v?"Bitwa":l.type==="transport"?"Transport":l.type==="spy"?"Szpieg":"Ekspedycja"})]})]}),r.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4 border-t border-white/5 pt-3",children:[r.jsxs("div",{className:"flex flex-col gap-1 w-full md:w-auto",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"text-white font-bold text-sm",children:["Cel: [",l.targetCoords.galaxy,":",l.targetCoords.system,":",l.targetCoords.position,"]"]}),r.jsxs("div",{className:"text-[#929bc9] text-xs",children:["Flota: ",Object.values(l.ships).reduce((x,_)=>x+Number(_),0)," jedn."]})]}),r.jsxs("div",{className:"text-[10px] text-[#555a7a] flex flex-wrap gap-2 mt-1",children:[l.type==="transport"&&l.resources&&r.jsxs("div",{className:"flex gap-2 bg-[#0b0d17] px-2 py-1 rounded border border-white/5",children:[l.resources.metal>0&&r.jsxs("span",{className:"text-blue-400",children:["M: ",Math.floor(l.resources.metal).toLocaleString()]}),l.resources.crystal>0&&r.jsxs("span",{className:"text-purple-400",children:["C: ",Math.floor(l.resources.crystal).toLocaleString()]}),l.resources.deuterium>0&&r.jsxs("span",{className:"text-green-400",children:["D: ",Math.floor(l.resources.deuterium).toLocaleString()]})]}),r.jsx("div",{className:"flex gap-2 bg-[#0b0d17] px-2 py-1 rounded border border-white/5 overflow-x-auto max-w-[300px] scrollbar-hide",children:Object.entries(l.ships).map(([x,_])=>{var j;return _>0&&r.jsxs("span",{className:"text-white whitespace-nowrap",children:[(j=Ze[x])==null?void 0:j.name,": ",_]},x)})})]})]}),r.jsxs("div",{className:"text-right flex items-center gap-3 md:shrink-0",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-white font-mono font-bold",children:f}),r.jsx("div",{className:`text-xs animate-pulse ${n==="outbound"?v?"text-red-400":"text-primary":"text-green-400"}`,children:n==="outbound"?v?"Atak w toku!":"Dolot do celu...":"Powrt do bazy..."})]}),n==="outbound"&&r.jsx("button",{onClick:async()=>{p(!0),await a(l.id),p(!1)},disabled:b,className:"px-3 py-2 text-xs font-bold uppercase rounded-lg border border-red-500/30 text-red-400 hover:bg-red-500/20 hover:text-white transition-colors disabled:opacity-50",children:b?"Anulowanie...":"Odwoaj"})]})]})]})},mv=()=>{const{resources:l,buyPremium:a}=us(),[n,o]=_i.useState("resources"),d=[{id:"metal_small",name:"Maa Paczka Metalu",description:"Dostarcza 50,000 Metalu natychmiast.",cost:100,reward:{metal:5e4},icon:"handyman",color:"from-gray-500 to-gray-700"},{id:"crystal_small",name:"Maa Paczka Krysztau",description:"Dostarcza 25,000 Krysztau natychmiast.",cost:100,reward:{crystal:25e3},icon:"diamond",color:"from-blue-400 to-blue-600"},{id:"deuterium_small",name:"Maa Paczka Deuteru",description:"Dostarcza 10,000 Deuteru natychmiast.",cost:100,reward:{deuterium:1e4},icon:"propane",color:"from-teal-400 to-teal-600"},{id:"metal_large",name:"Wielka Skrzynia Metalu",description:"Ogromny zasb 250,000 Metalu.",cost:400,reward:{metal:25e4},icon:"inventory_2",color:"from-yellow-600 to-yellow-800"},{id:"crystal_large",name:"Wielka Skrzynia Krysztau",description:"Ogromny zasb 125,000 Krysztau.",cost:400,reward:{crystal:125e3},icon:"diamond",color:"from-blue-600 to-blue-800"},{id:"deuterium_large",name:"Wielka Skrzynia Deuteru",description:"Ogromny zasb 50,000 Deuteru.",cost:400,reward:{deuterium:5e4},icon:"science",color:"from-teal-600 to-teal-800"}],h=[{id:"build_speed_1h",name:"Przyspieszenie Budowy (1h)",description:"Skraca czas budowy wszystkich budynkw o 1 godzin.",cost:500,reward:{custom:"build_speed_1h"},icon:"speed",color:"from-green-500 to-green-700"},{id:"research_speed_1h",name:"Przyspieszenie Bada (1h)",description:"Skraca czas trwania bada o 1 godzin.",cost:500,reward:{custom:"research_speed_1h"},icon:"science",color:"from-purple-500 to-purple-700"},{id:"fleet_speed_24h",name:"Dopalacz Napdu (24h)",description:"Zwiksza prdko wszystkich flot o 20% na 24 godziny.",cost:1e3,reward:{custom:"fleet_speed_24h"},icon:"rocket_launch",color:"from-orange-500 to-orange-700"}],f=[{id:"death_star",name:"Projekt Leviathan",description:"Schematy mobilnej stacji bojowej zdolnej do niszczenia planet. (Prototyp)",cost:1e7,reward:{custom:"death_star"},icon:"public_off",color:"from-red-900 to-black",special:!0,unavailable:!0,image:"/kosmo/ships/Death.png"}],g=async p=>{if(p.unavailable)return;if(p.reward.custom){alert("Ten przedmiot jest obecnie niedostpny w sklepie (Wkrtce!).");return}const v=await a(p.cost,p.reward);v==="success"?alert(`Pomylnie zakupiono: ${p.name}`):v==="no_funds"?alert("Niewystarczajca ilo Antymaterii!"):v==="storage_full"&&alert("Magazyny s przepenione! Powiksz magazyny, aby kupi ten pakiet.")},b=()=>{switch(n){case"resources":return d;case"bonuses":return h;case"ships":return f;default:return[]}};return r.jsxs("div",{className:"flex flex-col gap-6",children:[r.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-start md:items-center justify-between border-b border-white/10 pb-4",children:[r.jsxs("h2",{className:"text-3xl font-bold text-white flex items-center gap-3",children:[r.jsx("span",{className:"material-symbols-outlined text-3xl text-yellow-500",children:"shopping_cart"}),"Sklep Premium"]}),r.jsxs("div",{className:"bg-purple-900/30 border border-purple-500/50 px-4 py-2 rounded-lg flex items-center gap-2 shadow-lg shadow-purple-900/20",children:[r.jsx("span",{className:"text-[#929bc9] text-sm font-bold uppercase",children:"Twoja Antymateria:"}),r.jsx("span",{className:"text-purple-300 font-mono font-bold text-xl",children:l.darkMatter}),r.jsx("span",{className:"material-symbols-outlined text-purple-400 text-sm",children:"all_inclusive"})]})]}),r.jsxs("div",{className:"flex gap-2 border-b border-white/10 pb-1",children:[r.jsxs("button",{onClick:()=>o("resources"),className:`px-4 py-2 rounded-t-lg font-bold text-sm transition-colors flex items-center gap-2 ${n==="resources"?"bg-yellow-600/20 text-yellow-500 border-b-2 border-yellow-500":"text-[#929bc9] hover:text-white hover:bg-white/5"}`,children:[r.jsx("span",{className:"material-symbols-outlined text-lg",children:"inventory_2"}),"Surowce"]}),r.jsxs("button",{onClick:()=>o("bonuses"),className:`px-4 py-2 rounded-t-lg font-bold text-sm transition-colors flex items-center gap-2 ${n==="bonuses"?"bg-blue-600/20 text-blue-500 border-b-2 border-blue-500":"text-[#929bc9] hover:text-white hover:bg-white/5"}`,children:[r.jsx("span",{className:"material-symbols-outlined text-lg",children:"stars"}),"Bonusy"]}),r.jsxs("button",{onClick:()=>o("ships"),className:`px-4 py-2 rounded-t-lg font-bold text-sm transition-colors flex items-center gap-2 ${n==="ships"?"bg-red-600/20 text-red-500 border-b-2 border-red-500":"text-[#929bc9] hover:text-white hover:bg-white/5"}`,children:[r.jsx("span",{className:"material-symbols-outlined text-lg",children:"rocket"}),"Statki"]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:b().map(p=>r.jsxs("div",{className:`bg-[#1c2136] rounded-xl border overflow-hidden group transition-all flex flex-col ${p.special?"border-red-500/50 shadow-[0_0_30px_rgba(220,38,38,0.2)]":"border-white/10 hover:border-yellow-500/50"}`,children:[r.jsxs("div",{className:`h-48 bg-gradient-to-br ${p.color} relative flex items-center justify-center overflow-hidden`,children:[p.image?r.jsx("div",{className:"absolute inset-0 bg-cover bg-center transition-transform duration-700 group-hover:scale-110",style:{backgroundImage:`url("${p.image}")`},children:r.jsx("div",{className:"absolute inset-0 bg-black/10"})}):r.jsx("div",{className:"absolute inset-0 bg-black/30"}),p.special&&r.jsx("div",{className:"absolute inset-0 opacity-30 animate-pulse pointer-events-none",style:{background:"radial-gradient(circle at center, rgba(255,0,0,0.4) 0%, transparent 70%)"}}),!p.image&&r.jsx("span",{className:`material-symbols-outlined text-5xl text-white drop-shadow-lg relative z-10 ${p.special?"animate-[pulse_4s_ease-in-out_infinite] opacity-80":""}`,children:p.icon}),r.jsxs("div",{className:"absolute bottom-2 right-2 bg-black/60 backdrop-blur px-2 py-1 rounded text-xs font-mono text-white border border-white/10 z-20",children:[p.cost.toLocaleString()," DM"]})]}),r.jsxs("div",{className:"p-4 flex flex-col flex-1",children:[r.jsx("h4",{className:`text-base font-bold mb-2 truncate ${p.special?"text-red-400":"text-white"}`,children:p.name}),r.jsx("p",{className:"text-xs text-[#929bc9] mb-4 flex-1",children:p.description}),r.jsx("button",{onClick:()=>g(p),disabled:p.unavailable,className:`w-full py-2.5 rounded-lg font-bold uppercase tracking-wider text-xs transition-colors shadow-lg flex items-center justify-center gap-1 ${p.unavailable?"bg-gray-700 text-gray-400 cursor-not-allowed border border-white/5":"bg-yellow-600 hover:bg-yellow-500 text-white shadow-yellow-900/20"}`,children:p.unavailable?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"material-symbols-outlined text-sm",children:"lock"}),"Niedostpne"]}):r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"material-symbols-outlined text-sm",children:"payments"}),"Kup"]})})]})]},p.id))}),r.jsxs("div",{className:"bg-[#111422] rounded-xl p-6 border border-white/5 text-center",children:[r.jsx("h3",{className:"text-white font-bold mb-2",children:"Potrzebujesz wicej Antymaterii?"}),r.jsx("p",{className:"text-[#929bc9] text-sm mb-4",children:"Wysyaj ekspedycje w gbok przestrze, aby znale cenne zasoby Antymaterii!"})]})]})},pv=()=>{const{userId:l}=us(),[a,n]=te.useState([]),[o,d]=te.useState(!0);return te.useEffect(()=>{(async()=>{try{const{data:f,error:g}=await de.from("profiles").select("id, points, production_settings, planet_name, galaxy_coords, nickname, last_updated, level, xp").order("points",{ascending:!1}).limit(50);if(f&&!g){const b=f.map(p=>{var v,x;return{id:p.id,points:p.points||0,avatar_url:((v=p.production_settings)==null?void 0:v.avatarUrl)||He.avatar,planet_name:p.planet_name||"Nieznana Planeta",nickname:p.nickname||((x=p.production_settings)==null?void 0:x.nickname)||`Dowdca ${p.id.substring(0,6)}`,galaxy_coords:p.galaxy_coords,last_updated:p.last_updated,level:p.level||1,xp:p.xp||0}});n(b)}else g&&console.error("Error fetching ranking:",g)}catch(f){console.error("Ranking fetch error:",f)}d(!1)})()},[]),o?r.jsx("div",{className:"p-8 text-center text-[#929bc9]",children:"adowanie danych wywiadu..."}):a.length===0?r.jsxs("div",{className:"animate-in fade-in duration-500",children:[r.jsxs("h2",{className:"text-2xl font-bold mb-6 text-white tracking-widest uppercase border-b border-white/10 pb-4",children:[r.jsx("span",{className:"text-primary",children:"System"})," Rankingowy"]}),r.jsxs("div",{className:"bg-[#1c2136] rounded-xl border border-white/10 p-8 text-center",children:[r.jsx("span",{className:"material-symbols-outlined text-[#929bc9] text-5xl mb-4",children:"leaderboard"}),r.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Brak graczy w rankingu"}),r.jsx("p",{className:"text-[#929bc9]",children:"Ranking jest pusty. Rozwijaj swoj koloni, aby pojawi si na licie!"})]})]}):r.jsxs("div",{className:"animate-in fade-in duration-500",children:[r.jsxs("h2",{className:"text-2xl font-bold mb-6 text-white tracking-widest uppercase border-b border-white/10 pb-4",children:[r.jsx("span",{className:"text-primary",children:"System"})," Rankingowy",r.jsx("span",{className:"text-xs text-[#929bc9] normal-case ml-4 font-normal tracking-normal",children:"(Dane odwieane co ok. 60s)"})]}),r.jsx("div",{className:"bg-[#1c2136]/50 backdrop-blur-md rounded-2xl border border-white/5 overflow-hidden shadow-xl",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-left border-collapse",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-[#111422]/80 text-[#929bc9] text-xs uppercase tracking-wider border-b border-white/5",children:[r.jsx("th",{className:"p-4 font-bold text-center w-16",children:"#"}),r.jsx("th",{className:"p-4 font-bold",children:"Dowdca"}),r.jsx("th",{className:"p-4 font-bold text-center",children:"Poziom"}),r.jsx("th",{className:"p-4 font-bold hidden md:table-cell",children:"Planeta"}),r.jsx("th",{className:"p-4 font-bold text-right",children:"Punkty"})]})}),r.jsx("tbody",{className:"divide-y divide-white/5",children:a.map((h,f)=>{const g=f===0?"text-yellow-400":f===1?"text-gray-300":f===2?"text-amber-600":"text-[#929bc9]",b=h.level||1,p=l===h.id,v=Date.now(),x=h.last_updated&&v-h.last_updated<300*1e3;return r.jsxs("tr",{className:`border-b border-white/5 hover:bg-white/5 transition-colors ${p?"bg-primary/10 border-primary/30":""}`,children:[r.jsxs("td",{className:`p-4 font-bold text-center w-16 ${g} relative`,children:[f===0&&r.jsx("span",{className:"material-symbols-outlined text-yellow-400 absolute top-2 left-1/2 -translate-x-1/2 -mt-1 text-sm animate-bounce",title:"Lider Galaktyki",children:"crown"}),r.jsx("span",{className:f===0?"relative top-1":"",children:f+1})]}),r.jsx("td",{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"size-10 rounded-full border border-white/10 overflow-hidden bg-[#111422]",children:r.jsx("img",{src:h.avatar_url,alt:"Avatar",className:"w-full h-full object-cover",onError:_=>{_.currentTarget.src="/kosmo/avatars/avatar_default.png"}})}),r.jsx("div",{className:`absolute bottom-0 right-0 size-3 rounded-full border-2 border-[#1c2136] ${x?"bg-green-500 shadow-[0_0_8px_rgba(34,197,94,0.6)]":"bg-gray-500"}`,title:x?"Online":"Offline"})]}),r.jsxs("div",{className:"flex flex-col",children:[r.jsxs("span",{className:"font-bold text-white group-hover:text-primary transition-colors flex items-center gap-2",children:[f===0&&r.jsx("span",{className:"material-symbols-outlined text-yellow-400 text-sm animate-pulse",children:"check_circle"}),h.nickname]}),r.jsx("span",{className:"text-xs text-[#929bc9] md:hidden",children:h.planet_name})]})]})}),r.jsx("td",{className:"p-4 text-center font-mono text-green-400 font-bold",children:r.jsx("span",{title:`XP: ${(h.xp||0).toLocaleString()}`,className:"cursor-help border-b border-dashed border-white/20",children:b})}),r.jsx("td",{className:"p-4 text-[#929bc9] font-mono text-sm hidden md:table-cell",children:h.planet_name}),r.jsx("td",{className:"p-4 text-right font-bold font-mono text-white text-lg",children:h.points.toLocaleString()})]},h.id)})})]})})})]})},gv=()=>{const{planetName:l,renamePlanet:a,avatarUrl:n,updateAvatar:o,planetType:d,updatePlanetType:h,nickname:f,renameUser:g,resetGame:b,logout:p,deleteAccount:v,abandonColony:x,session:_,currentPlanetId:j,planets:A,mainPlanetName:C,mainPlanetCoords:z}=us(),[D,R]=te.useState(f||""),[S,Q]=te.useState(n||""),H=(G,Z)=>{const fe=prompt("Podaj now nazw planety:",G);fe&&fe.trim()&&a(fe.trim(),Z)};return r.jsxs("div",{className:"flex flex-col gap-6 max-w-3xl mx-auto",children:[r.jsx("div",{className:"flex items-center justify-between border-b border-white/10 pb-4",children:r.jsxs("h2",{className:"text-3xl font-bold text-white flex items-center gap-3",children:[r.jsx("span",{className:"material-symbols-outlined text-3xl text-[#929bc9]",children:"settings"}),"Opcje Gry"]})}),r.jsxs("div",{className:"bg-[#1c2136] p-6 rounded-xl border border-white/5 relative overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 opacity-30"}),r.jsxs("h3",{className:"text-xl font-bold text-white mb-4 flex items-center gap-2",children:[r.jsx("span",{className:"material-symbols-outlined text-primary",children:"badge"}),"Nazwa Dowdcy"]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",className:"flex-1 bg-[#111422] border border-white/10 rounded-lg px-4 py-3 text-white focus:border-primary focus:outline-none",placeholder:"Zmie nazw dowdcy",value:D,onChange:G=>R(G.target.value)}),r.jsx("button",{onClick:()=>g(D),className:"bg-primary hover:bg-blue-600 text-white px-6 py-3 rounded-lg font-bold transition-colors",children:"Zmie"})]})]}),r.jsxs("div",{className:"bg-[#1c2136] rounded-xl border border-white/10 p-6 shadow-lg",children:[r.jsxs("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2",children:[r.jsx("span",{className:"material-symbols-outlined text-blue-400",children:"public"}),"Wygld Planety"]}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{name:"Ziemiopodobna",type:"terran"},{name:"Pustynna",type:"desert"},{name:"Lodowa",type:"ice"}].map(G=>r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsx("button",{onClick:()=>h(G.type),className:`relative w-full aspect-square rounded-xl overflow-hidden border-4 transition-all ${d===G.type?"border-green-500 shadow-[0_0_20px_rgba(34,197,94,0.4)] scale-95":"border-transparent hover:border-white/20 hover:scale-105"} `,children:r.jsx("img",{src:Tr[G.type]||He.planet,alt:G.name,className:"w-full h-full object-cover"})}),r.jsx("span",{className:"text-xs text-center text-[#929bc9] font-medium",children:G.name})]},G.type))})]}),r.jsxs("div",{className:"bg-[#1c2136] rounded-xl border border-white/10 p-6 shadow-lg",children:[r.jsxs("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2",children:[r.jsx("span",{className:"material-symbols-outlined text-purple-400",children:"face"}),"Personalizacja Dowdcy"]}),r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{name:"Pomocnik",url:"/kosmo/avatars/avatar_default.png"},{name:"Major (M)",url:"/kosmo/avatars/avatar_major.png"},{name:"Major (K)",url:"/kosmo/avatars/avatar_female.png"},{name:"Cyborg",url:"/kosmo/avatars/avatar_cyber.png"}].map(G=>r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsx("button",{onClick:()=>o(G.url),className:`relative w-full aspect-square rounded-xl overflow-hidden border-4 transition-all ${n===G.url?"border-green-500 shadow-[0_0_20px_rgba(34,197,94,0.4)] scale-95":"border-transparent hover:border-white/20 hover:scale-105"} `,children:r.jsx("img",{src:G.url,alt:G.name,className:"w-full h-full object-cover"})}),r.jsx("span",{className:"text-xs text-center text-[#929bc9] font-medium",children:G.name})]},G.name))})]}),r.jsxs("div",{className:"bg-[#1c2136] rounded-xl border border-white/10 p-6 shadow-lg overflow-hidden",children:[r.jsxs("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2",children:[r.jsx("span",{className:"material-symbols-outlined text-indigo-400",children:"language"}),"Zarzdzanie Imperium"]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-left border-collapse",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-white/10 text-[#929bc9] text-xs uppercase tracking-wider",children:[r.jsx("th",{className:"p-3",children:"Nazwa"}),r.jsx("th",{className:"p-3",children:"Wsprzdne"}),r.jsx("th",{className:"p-3",children:"Typ"}),r.jsx("th",{className:"p-3 text-right",children:"Akcje"})]})}),r.jsxs("tbody",{className:"text-sm",children:[r.jsxs("tr",{className:"border-b border-white/5 bg-white/5 hover:bg-white/10 transition-colors",children:[r.jsxs("td",{className:"p-3 font-bold text-white flex items-center gap-2",children:[r.jsx("span",{className:"material-symbols-outlined text-yellow-400 text-sm",children:"star"}),C||"Gwna Planeta"]}),r.jsxs("td",{className:"p-3 text-[#929bc9] font-mono",children:["[",(z==null?void 0:z.galaxy)||1,":",(z==null?void 0:z.system)||1,":",(z==null?void 0:z.position)||1,"]"]}),r.jsx("td",{className:"p-3 text-[#929bc9]",children:"Gwna"}),r.jsx("td",{className:"p-3 text-right",children:r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsxs("button",{onClick:()=>H(C||"Gwna Planeta","main"),className:"text-blue-400 hover:text-white bg-blue-500/10 hover:bg-blue-500/30 border border-blue-500/20 px-3 py-1.5 rounded text-xs font-bold uppercase transition-colors flex items-center gap-1",children:[r.jsx("span",{className:"material-symbols-outlined text-sm",children:"edit"}),"Zmie nazw"]}),r.jsx("span",{className:"text-white/20 italic text-xs px-2",children:"Nieusuwalna"})]})})]}),A.map(G=>{var Z,fe,we;return r.jsxs("tr",{className:"border-b border-white/5 hover:bg-white/[0.02] transition-colors",children:[r.jsxs("td",{className:"p-3 text-white font-medium pl-8 relative",children:[r.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-1.5 h-1.5 rounded-full bg-blue-500"}),G.planet_name||"Kolonia"]}),r.jsxs("td",{className:"p-3 text-[#929bc9] font-mono",children:["[",((Z=G.galaxy_coords)==null?void 0:Z.galaxy)||"?",":",((fe=G.galaxy_coords)==null?void 0:fe.system)||"?",":",((we=G.galaxy_coords)==null?void 0:we.position)||"?","]"]}),r.jsx("td",{className:"p-3 text-[#929bc9] capitalize",children:"Kolonia"}),r.jsx("td",{className:"p-3 text-right",children:r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsxs("button",{onClick:()=>H(G.planet_name||"Kolonia",G.id),className:"text-blue-400 hover:text-white bg-blue-500/10 hover:bg-blue-500/30 border border-blue-500/20 px-3 py-1.5 rounded text-xs font-bold uppercase transition-colors flex items-center gap-1",children:[r.jsx("span",{className:"material-symbols-outlined text-sm",children:"edit"}),"Zmie nazw"]}),r.jsxs("button",{onClick:async()=>{if(!confirm(` Czy na pewno chcesz porzuci koloni: ${G.planet_name||"Bez nazwy"} [${G.galaxy}:${G.system}:${G.position}]?`)||!confirm(" Wszystkie budynki, flota i surowce na tej planecie zostan UTRACONE. Czy na pewno kontynuowa?"))return;const ze=prompt(" Aby potwierdzi usunicie kolonii, wpisz sowo: DELETE");ze==="DELETE"?await x(G.id,ze):ze&&alert("Bdne haso potwierdzajce. Anulowano.")},className:"text-red-400 hover:text-red-200 bg-red-900/20 hover:bg-red-900/40 border border-red-900/30 px-3 py-1.5 rounded text-xs font-bold uppercase transition-colors flex items-center gap-1",children:[r.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"}),"Usu"]})]})})]},G.id)}),A.length===0&&r.jsx("tr",{children:r.jsx("td",{colSpan:4,className:"p-8 text-center text-[#555a7a] italic",children:"Nie posiadasz jeszcze adnych kolonii."})})]})]})}),r.jsx("p",{className:"text-xs text-[#555a7a] mt-4 text-center",children:"Gwna planeta nie moe zosta usunita. Kolonie mona porzuci, co jest procesem nieodwracalnym."})]}),r.jsxs("div",{className:"bg-[#1c2136] rounded-xl border border-red-500/20 p-6 shadow-lg",children:[r.jsxs("h3",{className:"text-xl font-bold text-red-400 mb-4 flex items-center gap-2",children:[r.jsx("span",{className:"material-symbols-outlined",children:"warning"}),"Strefa Niebezpieczna"]}),r.jsx("p",{className:"text-[#929bc9] text-sm mb-6",children:"Te operacje s nieodwracalne. Zresetowanie gry spowoduje utrat wszystkich postpw, budynkw, floty i surowcw."}),r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsx("button",{onClick:()=>{confirm("Czy na pewno chcesz si wylogowa?")&&p()},className:"bg-yellow-500/10 hover:bg-yellow-500 text-yellow-400 hover:text-white border border-yellow-500/20 px-6 py-3 rounded-lg font-bold uppercase tracking-wider transition-all",children:"Wyloguj si"}),r.jsxs("button",{onClick:v,className:"bg-red-900/50 hover:bg-red-700 text-white border border-red-500/50 px-6 py-3 rounded-lg font-bold uppercase tracking-wider transition-all flex items-center justify-center gap-2",children:[r.jsx("span",{className:"material-symbols-outlined",children:"delete_forever"}),"Usu Konto Trwale"]}),r.jsx("p",{className:"text-xs text-red-400 text-center mt-2",children:"Uwaga: Usunicie konta trwale wykasuje Twj profil i misje z bazy danych. Tej akcji nie da si cofn!"})]})]})]})},dp=Object.values(Zs),bv=()=>{const{resources:l,buildings:a,buildDefense:n,defenses:o,shipyardQueue:d}=us(),h=(a==null?void 0:a.shipyard)||0,[f,g]=te.useState({}),b=(x,_)=>{const j=parseInt(_,10);!isNaN(j)&&j>=0?g(A=>({...A,[x]:j})):_===""&&g(A=>({...A,[x]:0}))},p=x=>{if(x<60)return`${x}s`;const _=Math.floor(x/60),j=Math.floor(x%60);return`${_}m ${j}s`},v=d.filter(x=>x.type==="defense");return r.jsxs("div",{className:"animate-in fade-in duration-500",children:[r.jsxs("h2",{className:"text-2xl font-bold mb-6 text-white tracking-widest uppercase border-b border-white/10 pb-4",children:[r.jsx("span",{className:"text-primary",children:"System"})," Obrony Planetarnej"]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:(()=>{let x=0,_=0,j=0;return dp.forEach(A=>{const C=o[A.id]||0;C>0&&(x+=C,_+=C*A.attack,j+=C*A.defense)}),r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"bg-[#1c2136] p-4 rounded-xl border border-white/10 flex items-center gap-4 shadow-lg",children:[r.jsx("div",{className:"size-12 rounded-lg bg-blue-500/20 text-blue-400 flex items-center justify-center",children:r.jsx("span",{className:"material-symbols-outlined text-2xl",children:"shield"})}),r.jsxs("div",{children:[r.jsx("div",{className:"text-[#929bc9] text-xs uppercase font-bold",children:"Jednostki Obronne"}),r.jsx("div",{className:"text-white text-2xl font-mono font-bold",children:x})]})]}),r.jsxs("div",{className:"bg-[#1c2136] p-4 rounded-xl border border-white/10 flex items-center gap-4 shadow-lg",children:[r.jsx("div",{className:"size-12 rounded-lg bg-red-500/20 text-red-400 flex items-center justify-center",children:r.jsx("span",{className:"material-symbols-outlined text-2xl",children:"swords"})}),r.jsxs("div",{children:[r.jsx("div",{className:"text-[#929bc9] text-xs uppercase font-bold",children:"Sia Ognia"}),r.jsx("div",{className:"text-white text-2xl font-mono font-bold",children:_.toLocaleString()})]})]}),r.jsxs("div",{className:"bg-[#1c2136] p-4 rounded-xl border border-white/10 flex items-center gap-4 shadow-lg",children:[r.jsx("div",{className:"size-12 rounded-lg bg-green-500/20 text-green-400 flex items-center justify-center",children:r.jsx("span",{className:"material-symbols-outlined text-2xl",children:"security"})}),r.jsxs("div",{children:[r.jsx("div",{className:"text-[#929bc9] text-xs uppercase font-bold",children:"Wytrzymao Tarcz"}),r.jsx("div",{className:"text-white text-2xl font-mono font-bold",children:j.toLocaleString()})]})]})]})})()}),h<1?r.jsxs("div",{className:"bg-[#1c2136] rounded-xl border border-yellow-500/30 p-8 text-center",children:[r.jsx("span",{className:"material-symbols-outlined text-yellow-500 text-5xl mb-4",children:"construction"}),r.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Wymagana Stocznia"}),r.jsx("p",{className:"text-[#929bc9]",children:"Zbuduj Stoczni (poziom 1), aby odblokowa systemy obronne."})]}):r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[r.jsx("div",{className:"lg:col-span-3 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 gap-4",children:dp.map(x=>{l.metal>=x.cost.metal&&l.crystal>=x.cost.crystal&&l.deuterium>=x.cost.deuterium;const _=o[x.id]||0,j=Math.floor(x.buildTime*1e3/(h+1)/100/1e3);return r.jsxs("div",{className:"bg-[#1c2136] rounded-xl border border-white/5 p-4 hover:border-primary/30 transition-all group relative overflow-hidden",children:[r.jsxs("div",{className:"absolute top-2 right-2 bg-[#111422]/80 backdrop-blur-sm border border-white/10 px-2 py-1 rounded text-xs text-white font-mono z-10",children:["Ilo: ",r.jsx("span",{className:"text-primary font-bold",children:_})]}),r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"size-16 rounded-xl bg-[#111422] flex items-center justify-center border border-white/10 group-hover:border-primary/50 transition-colors shrink-0",children:r.jsx("span",{className:"material-symbols-outlined text-primary text-3xl",children:x.icon})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"text-white font-bold mb-1 truncate",children:x.name}),r.jsx("p",{className:"text-[#929bc9] text-[10px] mb-2 leading-tight h-8 overflow-hidden",children:x.desc}),r.jsxs("div",{className:"flex gap-2 text-[10px] mb-2",children:[r.jsxs("div",{className:"flex items-center gap-1 bg-red-500/10 px-1.5 py-0.5 rounded text-red-400",children:[r.jsx("span",{className:"material-symbols-outlined text-[10px]",children:"swords"}),r.jsx("span",{children:x.attack})]}),r.jsxs("div",{className:"flex items-center gap-1 bg-blue-500/10 px-1.5 py-0.5 rounded text-blue-400",children:[r.jsx("span",{className:"material-symbols-outlined text-[10px]",children:"shield"}),r.jsx("span",{children:x.defense})]}),r.jsxs("div",{className:"flex items-center gap-1 bg-gray-500/10 px-1.5 py-0.5 rounded text-gray-400",children:[r.jsx("span",{className:"material-symbols-outlined text-[10px]",children:"timer"}),r.jsx("span",{children:p(j)})]})]}),x.bonuses&&Object.keys(x.bonuses).length>0&&r.jsxs("div",{className:"mb-2 text-[10px] text-[#929bc9]",children:[r.jsx("span",{className:"font-bold text-white uppercase block mb-1 text-[9px]",children:"Silny przeciwko:"}),r.jsx("div",{className:"flex flex-wrap gap-1",children:Object.keys(x.bonuses).map(A=>{var C,z;return r.jsx("span",{className:"bg-primary/10 text-primary border border-primary/20 px-1.5 py-0.5 rounded flex items-center gap-1",children:((C=Ze[A])==null?void 0:C.name)||((z=Zs[A])==null?void 0:z.name)||A},A)})})]}),r.jsxs("div",{className:"flex flex-wrap gap-1 text-[10px] mb-3",children:[r.jsxs("span",{className:`px-1.5 py-0.5 rounded ${l.metal>=x.cost.metal?"bg-green-500/10 text-green-400":"bg-red-500/10 text-red-400"}`,children:["M: ",x.cost.metal.toLocaleString()]}),r.jsxs("span",{className:`px-1.5 py-0.5 rounded ${l.crystal>=x.cost.crystal?"bg-green-500/10 text-green-400":"bg-red-500/10 text-red-400"}`,children:["C: ",x.cost.crystal.toLocaleString()]}),x.cost.deuterium>0&&r.jsxs("span",{className:`px-1.5 py-0.5 rounded ${l.deuterium>=x.cost.deuterium?"bg-green-500/10 text-green-400":"bg-red-500/10 text-red-400"}`,children:["D: ",x.cost.deuterium.toLocaleString()]})]}),(()=>{const A=f[x.id]||0,C={metal:x.cost.metal*(A||1),crystal:x.cost.crystal*(A||1),deuterium:x.cost.deuterium*(A||1)},z=l.metal>=C.metal&&l.crystal>=C.crystal&&l.deuterium>=C.deuterium;return r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsxs("div",{className:"flex items-center bg-[#111422] rounded border border-white/10 overflow-hidden",children:[r.jsx("button",{onClick:()=>b(x.id,Math.max(0,A-1).toString()),className:"w-7 h-7 flex items-center justify-center text-[#929bc9] hover:text-white hover:bg-white/5",children:r.jsx("span",{className:"material-symbols-outlined text-xs",children:"remove"})}),r.jsx("input",{type:"number",min:"0",placeholder:"0",value:f[x.id]>0?f[x.id]:"",onChange:D=>b(x.id,D.target.value),onFocus:D=>D.target.select(),className:"w-10 bg-transparent text-white text-xs text-center focus:outline-none font-mono font-bold"}),r.jsx("button",{onClick:()=>b(x.id,(A+1).toString()),className:"w-7 h-7 flex items-center justify-center text-[#929bc9] hover:text-white hover:bg-white/5",children:r.jsx("span",{className:"material-symbols-outlined text-xs",children:"add"})})]}),r.jsx("button",{onClick:()=>{const D=Math.floor(l.metal/x.cost.metal),R=x.cost.crystal>0?Math.floor(l.crystal/x.cost.crystal):1/0,S=x.cost.deuterium>0?Math.floor(l.deuterium/x.cost.deuterium):1/0,Q=Math.min(D,R,S);b(x.id,Q.toString())},className:"h-7 px-2 rounded bg-[#232948] text-[#929bc9] text-[10px] font-bold uppercase border border-white/5 hover:bg-primary/20 hover:text-primary",children:"Max"}),r.jsxs("button",{onClick:()=>{A>0&&(n(x.id,A),g(D=>({...D,[x.id]:0})))},disabled:A<=0||!z,className:`flex-1 h-7 rounded font-bold text-[10px] uppercase transition-all flex items-center justify-center gap-1 ${A>0&&z?"bg-primary hover:bg-blue-600 text-white":"bg-[#111422] text-[#555a7a] cursor-not-allowed"}`,children:[r.jsx("span",{className:"material-symbols-outlined text-xs",children:"build"}),"Buduj"]})]})})()]})]})]},x.id)})}),r.jsxs("div",{className:"lg:col-span-1 space-y-4",children:[r.jsxs("div",{className:"bg-[#1c2136] rounded-xl border border-white/5 p-4 flex flex-col h-fit",children:[r.jsxs("h3",{className:"text-white font-bold mb-3 flex items-center gap-2 text-sm uppercase tracking-wider",children:[r.jsx("span",{className:"material-symbols-outlined text-yellow-500 text-sm",children:"pending_actions"}),"Kolejka Budowy (",v.length,")"]}),v.length===0?r.jsx("div",{className:"text-[#555a7a] text-xs text-center py-4 italic",children:"Brak zada w kolejce."}):r.jsx("div",{className:"space-y-2 max-h-[300px] overflow-y-auto pr-1 scrollbar-thin scrollbar-thumb-white/10 scrollbar-track-transparent",children:v.map((x,_)=>{const j=Zs[x.itemId];return j?r.jsxs("div",{className:"bg-[#111422] p-2 rounded border border-white/5 flex items-center gap-2 relative overflow-hidden",children:[_===0&&r.jsx("div",{className:"absolute bottom-0 left-0 h-0.5 bg-green-500 animate-pulse w-full"}),r.jsx("div",{className:"size-8 rounded bg-[#1c2136] flex items-center justify-center text-primary",children:r.jsx("span",{className:"material-symbols-outlined text-sm",children:(j==null?void 0:j.icon)||"help"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-white text-xs font-bold truncate",children:(j==null?void 0:j.name)||x.itemId}),r.jsxs("span",{className:"text-xs text-yellow-500",children:["x",x.quantity]})]}),r.jsx("div",{className:"text-[10px] text-[#555a7a]",children:_===0?"W trakcie...":"Oczekuje"})]})]},x.id):null})})]}),r.jsxs("div",{className:"bg-[#1c2136]/50 rounded-xl border border-white/5 p-4",children:[r.jsxs("h3",{className:"text-sm font-bold text-white mb-2 flex items-center gap-2",children:[r.jsx("span",{className:"material-symbols-outlined text-blue-400 text-sm",children:"info"}),"Info"]}),r.jsxs("ul",{className:"text-[#929bc9] text-[11px] space-y-1.5 list-disc pl-3",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Obrona"})," jest kluczowa, by chroni surowce przed grabie."]}),r.jsxs("li",{children:["Zniszczone jednostki maj ",r.jsx("strong",{children:"70% szans"})," na napraw."]}),r.jsxs("li",{children:["Czas budowy zaley od poziomu ",r.jsx("strong",{children:"Stoczni"}),"."]}),r.jsx("li",{children:"Obrona nie zuywa deuteru do utrzymania."})]})]})]})]})]})},xv=()=>{const{userId:l,nickname:a}=us(),[n,o]=te.useState([]),[d,h]=te.useState(!0),[f,g]=te.useState(!1),[b,p]=te.useState(""),[v,x]=te.useState("");return te.useEffect(()=>{o([{id:"1",name:"Kosmiczni owcy",tag:"K",leader_id:"demo",member_count:12,total_points:45e3,description:"Elite hunters of the galaxy",created_at:new Date().toISOString()},{id:"2",name:"Gwiezdna Flota",tag:"GF",leader_id:"demo2",member_count:8,total_points:32e3,description:"United we stand",created_at:new Date().toISOString()},{id:"3",name:"Ciemna Materia",tag:"CM",leader_id:"demo3",member_count:15,total_points:67e3,description:"Power beyond measure",created_at:new Date().toISOString()}]),h(!1)},[]),d?r.jsx("div",{className:"p-8 text-center text-[#929bc9]",children:"adowanie klanw..."}):r.jsxs("div",{className:"animate-in fade-in duration-500",children:[r.jsxs("div",{className:"flex items-center justify-between border-b border-white/10 pb-4 mb-6",children:[r.jsxs("h2",{className:"text-2xl font-bold text-white tracking-widest uppercase",children:[r.jsx("span",{className:"text-primary",children:"System"})," Klanw"]}),r.jsxs("button",{onClick:()=>g(!f),className:"bg-primary hover:bg-blue-600 text-white px-4 py-2 rounded-lg font-bold transition-colors flex items-center gap-2",children:[r.jsx("span",{className:"material-symbols-outlined",children:"add"}),"Stwrz Klan"]})]}),f&&r.jsxs("div",{className:"bg-[#1c2136] rounded-xl border border-primary/30 p-6 mb-6 animate-in slide-in-from-top duration-200",children:[r.jsxs("h3",{className:"text-lg font-bold text-white mb-4 flex items-center gap-2",children:[r.jsx("span",{className:"material-symbols-outlined text-primary",children:"groups"}),"Nowy Klan"]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-[#929bc9] font-bold uppercase block mb-2",children:"Nazwa Klanu"}),r.jsx("input",{type:"text",value:b,onChange:_=>p(_.target.value),className:"w-full bg-[#111422] border border-white/10 rounded-lg px-4 py-3 text-white focus:border-primary outline-none",placeholder:"np. Kosmiczni Wojownicy",maxLength:24})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-[#929bc9] font-bold uppercase block mb-2",children:"Tag (2-4 znaki)"}),r.jsx("input",{type:"text",value:v,onChange:_=>x(_.target.value.toUpperCase()),className:"w-full bg-[#111422] border border-white/10 rounded-lg px-4 py-3 text-white focus:border-primary outline-none uppercase",placeholder:"np. KW",maxLength:4})]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{className:"flex-1 bg-primary hover:bg-blue-600 text-white py-3 rounded-lg font-bold transition-colors",children:"Za Klan (Koszt: 1000 Ciemnej Materii)"}),r.jsx("button",{onClick:()=>g(!1),className:"px-6 py-3 bg-[#111422] text-[#929bc9] rounded-lg hover:text-white transition-colors",children:"Anuluj"})]})]}),r.jsx("div",{className:"grid grid-cols-1 gap-4",children:n.sort((_,j)=>j.total_points-_.total_points).map((_,j)=>r.jsx("div",{className:"bg-[#1c2136] rounded-xl border border-white/5 p-5 hover:border-primary/30 transition-all group",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:`size-12 rounded-xl flex items-center justify-center font-bold text-lg ${j===0?"bg-yellow-500/20 text-yellow-400 border border-yellow-500/30":j===1?"bg-gray-400/20 text-gray-300 border border-gray-400/30":j===2?"bg-amber-600/20 text-amber-500 border border-amber-600/30":"bg-[#111422] text-[#929bc9] border border-white/10"}`,children:j<3?["","",""][j]:j+1}),r.jsx("div",{className:"size-12 rounded-xl bg-primary/20 border border-primary/30 flex items-center justify-center",children:r.jsxs("span",{className:"text-primary font-bold text-sm",children:["[",_.tag,"]"]})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-white font-bold group-hover:text-primary transition-colors",children:_.name}),r.jsx("p",{className:"text-[#929bc9] text-xs",children:_.description||"Brak opisu"})]}),r.jsxs("div",{className:"hidden md:flex items-center gap-6 text-sm",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-[#929bc9] text-xs uppercase",children:"Czonkowie"}),r.jsx("div",{className:"text-white font-bold",children:_.member_count})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-[#929bc9] text-xs uppercase",children:"Punkty"}),r.jsx("div",{className:"text-white font-bold font-mono",children:_.total_points.toLocaleString()})]})]}),r.jsx("button",{className:"bg-[#111422] hover:bg-primary text-[#929bc9] hover:text-white px-4 py-2 rounded-lg font-bold text-sm transition-all border border-white/10 hover:border-primary",children:"Docz"})]})},_.id))}),r.jsxs("div",{className:"mt-8 bg-[#1c2136]/50 rounded-xl border border-white/5 p-6",children:[r.jsxs("h3",{className:"text-lg font-bold text-white mb-3 flex items-center gap-2",children:[r.jsx("span",{className:"material-symbols-outlined text-yellow-500",children:"info"}),"System Klanw"]}),r.jsxs("ul",{className:"text-[#929bc9] text-sm space-y-2",children:[r.jsx("li",{children:" Klany cz graczy w potne sojusze kosmiczne."}),r.jsx("li",{children:" Czonkowie klanu mog dzieli si zasobami i wsplnie atakowa wrogie planety."}),r.jsx("li",{children:" Zaoenie klanu wymaga 1000 Ciemnej Materii."}),r.jsx("li",{children:" Ranking klanw opiera si na sumie punktw wszystkich czonkw."})]})]})]})},yv=()=>{var Ue,Ve,Se,ye;const{session:l}=us(),[a,n]=te.useState([]),[o,d]=te.useState([]),[h,f]=te.useState(!1),[g,b]=te.useState(""),[p,v]=te.useState(!1),[x,_]=te.useState(new Set),j=N=>{const J=new Set(x);J.has(N)?J.delete(N):J.add(N),_(J)},A=async()=>{f(!0);const{data:N,error:J}=await de.from("profiles").select("*").order("last_updated",{ascending:!1}),{data:ie,error:ge}=await de.from("planets").select("*");if(J)console.error("Admin fetch error",J),b(`Bd pobierania: ${J.message}`);else{const Te=ie||[],k=(N==null?void 0:N.map(X=>({...X,colonies:Te.filter(me=>me.owner_id===X.id)})))||[];n(k)}f(!1)},C=async()=>{const{data:N,error:J}=await de.from("error_logs").select("*").order("created_at",{ascending:!1}).limit(100);J||d(N||[])};te.useEffect(()=>{A(),C()},[]);const z=async(N,J)=>{var _e;if(!confirm(`CZY NA PEWNO CHCESZ USUN GRACZA ${J||N}?
Tej operacji nie mona cofn!`))return;f(!0);const{count:ie,error:ge}=await de.from("missions").select("*",{count:"exact",head:!0}).eq("owner_id",N);console.log(`[DEBUG] Found ${ie} missions (Error: ${ge==null?void 0:ge.message})`);const Te=await de.from("missions").delete().eq("owner_id",N).select(),k=await de.from("missions").delete().eq("target_user_id",N).select();console.log(`[DEBUG] Deleted ${Te.count} outgoing, ${k.count} incoming.`);const X=await de.from("profiles").delete().eq("id",N).select(),me=X.error,be=X.count;if(me)if(console.error("Profile Delete error:",me),(_e=me.message)!=null&&_e.includes("foreign key constraint")||me.code==="23503"){const Le=`
ALTER TABLE missions
DROP CONSTRAINT missions_owner_id_fkey,
ADD CONSTRAINT missions_owner_id_fkey
FOREIGN KEY (owner_id)
REFERENCES profiles(id)
ON DELETE CASCADE;
`;alert(`BLOKADA BAZY DANYCH (Foreign Key):
Nie mona usun gracza, bo trzymaj go misje (ktrych admin nie widzi przez RLS).

NAJLEPSZE ROZWIZANIE:
Wklej ten SQL w Supabase, aby misje usuway si SAME automatycznie:

${Le}`),console.log("SQL TO FIX:",Le)}else alert(`Bd usuwania (DB Error): ${me.message} (Code: ${me.code})`);else be===0?alert(`BD: Nie usunito wiersza (Count: 0).
Zablokowane przez RLS tabeli 'profiles'.
Potrzebna polityka: CREATE POLICY "Admin All Access" ...`):(b(`Uytkownik ${J||"Nieznany"} (ID: ${N}) zosta pomylnie usunity.`),A());f(!1)},D=["admin@kosmo.pl","dareg@kosmo.pl","admin@kosmo.com"],R=(Ue=l==null?void 0:l.user)==null?void 0:Ue.email;if(!R||!D.includes(R))return r.jsxs("div",{className:"p-8 text-center text-red-500",children:[r.jsx("h2",{className:"text-2xl font-bold",children:" Brak Uprawnie"}),r.jsx("p",{children:"Tylko administratorzy maj dostp do tego panelu."})]});const[S,Q]=te.useState(null),[H,G]=te.useState(""),[Z,fe]=te.useState("colonyShip"),[we,ze]=te.useState(1),qe=async()=>{if(!H){alert("Wybierz gracza z listy!");return}const N=a.find(k=>k.id===H);if(!N)return;console.log(" Nadawanie statku dla:",N.nickname||N.id);const J=N.ships||{},ie={...J,[Z]:(J[Z]||0)+we};console.log(" Aktualizacja:",{currentShips:J,newShips:ie,targetId:N.id});const{data:ge,error:Te}=await de.from("profiles").update({ships:ie}).eq("id",N.id).select();console.log(" Wynik aktualizacji:",{updateResult:ge,updateError:Te}),Te?alert(`Bd aktualizacji: ${Te.message}

Moe brakowa RLS policy pozwalajcej adminowi edytowa inne profile.`):!ge||ge.length===0?alert(` Update nie zmieni adnych rekordw!

Prawdopodobnie RLS blokuje edycj innych graczy.

Dodaj w Supabase SQL:
CREATE POLICY "admin_all_access" ON profiles FOR ALL USING (auth.jwt() ->> 'email' IN ('admin@kosmo.pl', 'dareg@kosmo.pl'));`):(alert(` Dodano ${we}x ${Z} graczowi ${N.nickname||"ID:"+N.id}`),ze(1),await A())};return r.jsxs("div",{className:"p-4 md:p-8 text-gray-100 max-w-6xl mx-auto pb-24",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h1",{className:"text-3xl font-bold text-red-500 flex items-center gap-2",children:" PANEL ADMINISTRATORA"}),r.jsx("button",{onClick:A,className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded transition-colors",children:h?"Odwieanie...":"Odwie"})]}),g&&r.jsx("div",{className:"mb-4 p-3 bg-green-900 border border-green-700 rounded text-green-200",children:g}),r.jsxs("div",{className:"mb-6 p-4 bg-gray-800 border border-gray-700 rounded-lg",children:[r.jsx("h3",{className:"text-lg font-bold text-yellow-500 mb-4",children:" Dodaj Statek Graczowi"}),r.jsxs("div",{className:"flex flex-wrap gap-3 items-end",children:[r.jsxs("div",{className:"flex flex-col flex-1 min-w-[200px]",children:[r.jsx("label",{className:"text-xs text-gray-400 mb-1",children:"Gracz"}),r.jsxs("select",{value:H,onChange:N=>G(N.target.value),className:"px-3 py-2 bg-gray-900 border border-gray-600 rounded text-white focus:border-yellow-500 focus:outline-none w-full",children:[r.jsx("option",{value:"",children:"-- Wybierz Gracza --"}),a.map(N=>r.jsxs("option",{value:N.id,children:[N.nickname," ",N.galaxy_coords?`[${N.galaxy_coords.galaxy}:${N.galaxy_coords.system}:${N.galaxy_coords.position}]`:"[-]"," (ID: ",N.id.slice(0,4),"...)"]},N.id))]})]}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("label",{className:"text-xs text-gray-400 mb-1",children:"Typ Statku"}),r.jsxs("select",{value:Z,onChange:N=>fe(N.target.value),className:"px-3 py-2 bg-gray-900 border border-gray-600 rounded text-white focus:border-yellow-500 focus:outline-none",children:[r.jsx("option",{value:"colonyShip",children:"Statek Kolonizacyjny"}),r.jsx("option",{value:"lightFighter",children:"Myliwiec Lekki"}),r.jsx("option",{value:"heavyFighter",children:"Myliwiec Ciki"}),r.jsx("option",{value:"cruiser",children:"Krownik"}),r.jsx("option",{value:"battleship",children:"Okrt Wojenny"}),r.jsx("option",{value:"destroyer",children:"Niszczyciel"}),r.jsx("option",{value:"deathStar",children:"Pogromca Planet"}),r.jsx("option",{value:"smallCargo",children:"May Transporter"}),r.jsx("option",{value:"mediumCargo",children:"redni Transporter"}),r.jsx("option",{value:"hugeCargo",children:"Ogromny Transporter"}),r.jsx("option",{value:"espionageProbe",children:"Sonda Szpiegowska"}),r.jsx("option",{value:"pioneer",children:"Pionier"})]})]}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("label",{className:"text-xs text-gray-400 mb-1",children:"Ilo"}),r.jsx("input",{type:"number",value:we,onChange:N=>ze(Math.max(1,parseInt(N.target.value)||1)),min:1,className:"w-20 px-3 py-2 bg-gray-900 border border-gray-600 rounded text-white focus:border-yellow-500 focus:outline-none"})]}),r.jsx("button",{onClick:qe,className:"px-4 py-2 bg-yellow-600 hover:bg-yellow-500 text-black font-bold rounded transition-colors",children:"Dodaj"})]})]}),r.jsxs("div",{className:"mb-6 p-4 bg-red-900/20 border border-red-700/50 rounded-lg",children:[r.jsxs("div",{className:"flex justify-between items-center cursor-pointer",onClick:()=>v(!p),children:[r.jsxs("h3",{className:"text-lg font-bold text-red-400 flex items-center gap-2",children:[" Bdy Uytkownikw",r.jsx("span",{className:"text-xs bg-red-600 px-2 py-0.5 rounded",children:o.length})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:N=>{N.stopPropagation(),C()},className:"text-xs bg-red-600/30 hover:bg-red-600 px-2 py-1 rounded transition-colors",children:"Odwie"}),r.jsx("span",{className:"text-red-400",children:p?"":""})]})]}),p&&r.jsx("div",{className:"mt-4 max-h-[400px] overflow-y-auto",children:o.length===0?r.jsx("p",{className:"text-gray-500 text-sm",children:"Brak zgoszonych bdw. Upewnij si, e tabela error_logs istnieje w Supabase."}):r.jsx("div",{className:"space-y-2",children:o.map((N,J)=>{var ie;return r.jsxs("div",{className:"bg-black/30 p-3 rounded border border-red-500/20 text-xs",children:[r.jsxs("div",{className:"flex justify-between items-start mb-1",children:[r.jsx("span",{className:`font-bold ${N.error_type==="error"?"text-red-400":"text-yellow-400"}`,children:N.error_type==="error"?" ERROR":" WARNING"}),r.jsx("span",{className:"text-gray-500",children:new Date(N.created_at).toLocaleString("pl-PL")})]}),r.jsx("p",{className:"text-white mb-1",children:N.message}),N.context&&r.jsxs("p",{className:"text-gray-400 text-[10px]",children:[" ",N.context]}),N.user_id&&r.jsxs("p",{className:"text-gray-600 text-[10px] font-mono mt-1",children:["User: ",N.user_id.slice(0,8),"... | ",(ie=N.user_agent)==null?void 0:ie.slice(0,50),"..."]}),N.stack&&r.jsxs("details",{className:"mt-2",children:[r.jsx("summary",{className:"text-gray-500 cursor-pointer hover:text-gray-300",children:"Stack trace"}),r.jsx("pre",{className:"text-[9px] text-gray-600 mt-1 whitespace-pre-wrap",children:N.stack})]})]},J)})})})]}),r.jsx("div",{className:"overflow-x-auto bg-gray-900/80 rounded-lg border border-gray-700",children:r.jsxs("table",{className:"w-full text-left border-collapse",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-gray-800 text-gray-400 uppercase text-xs",children:[r.jsx("th",{className:"p-4 border-b border-gray-700",children:"Nick"}),r.jsx("th",{className:"p-4 border-b border-gray-700",children:"Punkty"}),r.jsx("th",{className:"p-4 border-b border-gray-700",children:"Koordynaty"}),r.jsx("th",{className:"p-4 border-b border-gray-700",children:"Ostatnia Akt."}),r.jsx("th",{className:"p-4 border-b border-gray-700 text-right",children:"Akcje"})]})}),r.jsxs("tbody",{children:[a.map(N=>{var J,ie;return r.jsxs(_i.Fragment,{children:[r.jsxs("tr",{className:`hover:bg-gray-800/50 transition-colors border-b border-gray-800 ${x.has(N.id)?"bg-gray-800/30":""}`,children:[r.jsx("td",{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:()=>j(N.id),className:`text-gray-400 hover:text-white transition-colors w-6 h-6 flex items-center justify-center rounded border border-gray-700 ${x.has(N.id)?"bg-blue-600 border-blue-500 text-white":""}`,children:x.has(N.id)?"":""}),r.jsxs("div",{children:[r.jsx("div",{className:"font-bold text-blue-300",children:N.nickname||"Nieznany"}),r.jsx("div",{className:"text-xs text-gray-500",children:N.planet_name}),r.jsx("div",{className:"text-[10px] text-gray-600 font-mono",children:N.id})]})]})}),r.jsx("td",{className:"p-4 font-mono text-yellow-400",children:(N.points||0).toLocaleString()}),r.jsx("td",{className:"p-4 font-mono text-gray-300",children:N.galaxy_coords?`[${N.galaxy_coords.galaxy}:${N.galaxy_coords.system}:${N.galaxy_coords.position}]`:"BRAK"}),r.jsxs("td",{className:"p-4 text-sm text-gray-500",children:[N.last_updated?new Date(N.last_updated).toLocaleString():"-",r.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:["Kolonie: ",((J=N.colonies)==null?void 0:J.length)||0]})]}),r.jsxs("td",{className:"p-4 text-right space-x-2",children:[r.jsx("button",{onClick:()=>Q(N),className:"bg-blue-600/20 hover:bg-blue-600 text-blue-500 hover:text-white px-3 py-1 rounded transition-colors font-bold text-xs",children:"INFO"}),r.jsx("button",{onClick:()=>z(N.id,N.nickname),className:"bg-red-600/20 hover:bg-red-600 text-red-500 hover:text-white px-3 py-1 rounded transition-colors font-bold text-xs",title:"Usu Gracza i Planet",children:"USU"})]})]}),x.has(N.id)&&r.jsx("tr",{className:"bg-black/20 animate-in fade-in zoom-in-95 duration-200",children:r.jsx("td",{colSpan:5,className:"p-0",children:r.jsxs("div",{className:"p-4 pl-14 bg-black/40 border-b border-gray-800 shadow-inner",children:[r.jsxs("h4",{className:"text-xs font-bold text-gray-500 uppercase mb-3 flex items-center gap-2",children:[r.jsx("span",{className:"material-symbols-outlined text-sm",children:"public"}),"Kolonie gracza (",((ie=N.colonies)==null?void 0:ie.length)||0,")"]}),!N.colonies||N.colonies.length===0?r.jsx("div",{className:"text-gray-600 text-sm italic",children:"Brak kolonii"}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:N.colonies.map(ge=>{var Te,k,X;return r.jsxs("div",{className:"bg-[#111422] p-3 rounded border border-white/5 hover:border-blue-500/30 transition-colors",children:[r.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r.jsx("span",{className:"font-bold text-white text-sm",children:ge.planet_name||"Bez nazwy"}),r.jsxs("span",{className:"font-mono text-xs text-blue-400 bg-blue-900/20 px-1.5 py-0.5 rounded",children:["[",ge.galaxy,":",ge.system,":",ge.position,"]"]})]}),r.jsx("div",{className:"text-[10px] text-gray-500 font-mono mb-2",children:ge.id}),r.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-yellow-600",children:"M:"})," ",Math.floor(((Te=ge.resources)==null?void 0:Te.metal)||0)]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-blue-600",children:"K:"})," ",Math.floor(((k=ge.resources)==null?void 0:k.crystal)||0)]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-green-600",children:"D:"})," ",Math.floor(((X=ge.resources)==null?void 0:X.deuterium)||0)]})]})]},ge.id)})})]})})})]},N.id)}),a.length===0&&!h&&r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"p-8 text-center text-gray-500",children:"Brak uytkownikw"})})]})]})}),S&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-4",children:r.jsxs("div",{className:"bg-[#1c2136] border border-blue-500/30 rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto flex flex-col",children:[r.jsxs("div",{className:"p-4 border-b border-white/10 flex justify-between items-center bg-[#111422]",children:[r.jsxs("h2",{className:"text-xl font-bold text-blue-400",children:["Szczegy: ",S.nickname]}),r.jsx("button",{onClick:()=>Q(null),className:"text-gray-400 hover:text-white text-2xl",children:""})]}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"bg-[#111422] p-3 rounded border border-white/5",children:[r.jsx("div",{className:"text-xs text-gray-500 uppercase",children:"Metal"}),r.jsx("div",{className:"text-yellow-400 font-mono",children:Math.floor(((Ve=S.resources)==null?void 0:Ve.metal)||0).toLocaleString()})]}),r.jsxs("div",{className:"bg-[#111422] p-3 rounded border border-white/5",children:[r.jsx("div",{className:"text-xs text-gray-500 uppercase",children:"Kryszta"}),r.jsx("div",{className:"text-blue-400 font-mono",children:Math.floor(((Se=S.resources)==null?void 0:Se.crystal)||0).toLocaleString()})]}),r.jsxs("div",{className:"bg-[#111422] p-3 rounded border border-white/5",children:[r.jsx("div",{className:"text-xs text-gray-500 uppercase",children:"Deuter"}),r.jsx("div",{className:"text-green-400 font-mono",children:Math.floor(((ye=S.resources)==null?void 0:ye.deuterium)||0).toLocaleString()})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-bold text-gray-400 mb-2 uppercase border-b border-white/10 pb-1",children:"Budynki"}),r.jsx("pre",{className:"text-xs font-mono bg-black/30 p-2 rounded text-gray-300 overflow-x-auto",children:JSON.stringify(S.buildings,null,2)})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-bold text-gray-400 mb-2 uppercase border-b border-white/10 pb-1",children:"Flota"}),r.jsx("pre",{className:"text-xs font-mono bg-black/30 p-2 rounded text-gray-300 overflow-x-auto",children:JSON.stringify(S.ships,null,2)})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-bold text-gray-400 mb-2 uppercase border-b border-white/10 pb-1",children:"Obrona"}),r.jsx("pre",{className:"text-xs font-mono bg-black/30 p-2 rounded text-gray-300 overflow-x-auto",children:JSON.stringify(S.defenses,null,2)})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-bold text-gray-400 mb-2 uppercase border-b border-white/10 pb-1",children:"Badania"}),r.jsx("pre",{className:"text-xs font-mono bg-black/30 p-2 rounded text-gray-300 overflow-x-auto",children:JSON.stringify(S.research,null,2)})]}),r.jsx("div",{className:"text-xs text-gray-600 font-mono pt-4 border-t border-white/5",children:"Raw Data Preview (Debug)"})]}),r.jsx("div",{className:"p-4 border-t border-white/10 bg-[#111422] text-right",children:r.jsx("button",{onClick:()=>Q(null),className:"px-4 py-2 rounded bg-gray-700 hover:bg-gray-600 text-white transition-colors",children:"Zamknij"})})]})})]})},vv=()=>{const[l,a]=te.useState(null),[n,o]=te.useState(!0),[d,h]=te.useState(null),[f,g]=te.useState(()=>localStorage.getItem("currentView")||"overview");if(te.useEffect(()=>{localStorage.setItem("currentView",f)},[f]),te.useEffect(()=>{de.auth.getSession().then(({data:{session:v}})=>{a(v),o(!1)});const{data:{subscription:p}}=de.auth.onAuthStateChange((v,x)=>{a(x),x||h(null)});return()=>p.unsubscribe()},[]),te.useEffect(()=>{(async()=>{if(!(l!=null&&l.user)){h(null);return}const{data:v,error:x}=await de.from("profiles").select("galaxy_coords").eq("id",l.user.id).maybeSingle();v&&!x&&v.galaxy_coords?h(!0):h(!1)})()},[l]),n)return r.jsxs("div",{className:"loading-screen",children:[r.jsx("div",{className:"loading-spinner"}),r.jsx("p",{children:"adowanie..."})]});if(!l)return r.jsx(tv,{onLogin:a});if(d===null)return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#101322]",children:r.jsx("div",{className:"text-white text-xl",children:"Sprawdzanie pozycji..."})});if(d===!1)return r.jsx(sv,{session:l,onComplete:()=>h(!0)});const b=()=>{switch(f){case"overview":return r.jsx(up,{onNavigate:p=>g(p)});case"buildings":return r.jsx(av,{});case"research":return r.jsx(iv,{});case"shipyard":return r.jsx(rv,{});case"fleet":return r.jsx(hv,{});case"galaxy":return r.jsx(nv,{});case"shop":return r.jsx(mv,{});case"ranking":return r.jsx(pv,{});case"settings":return r.jsx(gv,{});case"defense":return r.jsx(bv,{});case"clans":return r.jsx(xv,{});case"admin":return r.jsx(yv,{});default:return r.jsx(up,{onNavigate:p=>g(p)})}};return r.jsx(Hy,{session:l,children:r.jsx(ev,{activeView:f,onNavigate:p=>g(p),children:b()})})},Up=document.getElementById("root");if(!Up)throw new Error("Could not find root element to mount to");const wv=tb.createRoot(Up);wv.render(r.jsx(_i.StrictMode,{children:r.jsx(vv,{})}));
